{"version":3,"sources":["../../../packages/rw-adapter/build/index.js","../../../packages/core/build/services/dataset.js","../../../packages/core/build/services/widget.js","../../../packages/core/build/helpers/capitalize.js","../../../packages/core/build/helpers/filters.js","../../../packages/core/build/services/data.js","../../../packages/core/build/services/vega.js","../../../packages/core/build/charts/pie.js","../../../packages/core/build/charts/bars.js","../../../packages/core/build/charts/bars-vertical.js","../../../packages/core/build/charts/line.js","../../../packages/core/build/charts/scatter.js","../../../packages/core/build/charts/constants.js","../../../packages/core/build/services/state-proxy.js","../../../packages/core/build/index.js","../../../packages/rw-adapter/build/helpers/config.js","../../../packages/widget-editor/lib/helpers/redux.js","../../../packages/widget-editor/lib/modules/editor/actions.js","../../../packages/widget-editor/lib/modules/theme/actions.js","../../../packages/widget-editor/lib/modules/configuration/actions.js","../../../packages/widget-editor/lib/modules/widget/selectors.js","../../../packages/widget-editor/lib/components/icons/CategoryIcon/index.js","../../../packages/widget-editor/lib/components/select/components/Popup/style.js","../../../packages/widget-editor/lib/components/select/const.js","../../../packages/widget-editor/lib/components/select/components/Popup/component.js","../../../packages/widget-editor/lib/components/select/components/Popup/index.js","../../../packages/widget-editor/lib/components/select/style.js","../../../packages/widget-editor/lib/components/select/component.js","../../../packages/widget-editor/lib/components/select/index.js","../../../packages/widget-editor/lib/components/query-values/component.js","../../../packages/widget-editor/lib/components/query-values/index.js","../../../packages/widget-editor/lib/components/chart/component.js","../../../packages/widget-editor/lib/components/chart/index.js","../../../packages/widget-editor/lib/components/button/component.js","../../../packages/widget-editor/lib/components/button/index.js","../../../packages/widget-editor/lib/components/select-chart/const.js","../../../packages/widget-editor/lib/components/select-chart/components/ChartMenu/style.js","../../../packages/widget-editor/lib/components/select-chart/components/ChartIcon/style.js","../../../packages/widget-editor/lib/components/select-chart/components/ChartIcon/svg.js","../../../packages/widget-editor/lib/components/select-chart/components/ChartIcon/index.js","../../../packages/widget-editor/lib/components/select-chart/components/ChartIcon/component.js","../../../packages/widget-editor/lib/components/select-chart/components/ChartMenu/component.js","../../../packages/widget-editor/lib/components/select-chart/components/ChartMenu/index.js","../../../packages/widget-editor/lib/components/select-chart/style.js","../../../packages/widget-editor/lib/components/select-chart/component.js","../../../packages/widget-editor/lib/components/select-chart/index.js","../../../packages/widget-editor/lib/style-constants.js","../../../packages/widget-editor/lib/components/renderer/style.js","../../../packages/widget-editor/lib/components/renderer/component.js","../../../packages/widget-editor/lib/components/renderer/index.js","../../../packages/widget-editor/lib/components/accordion/style.js","../../../packages/widget-editor/lib/components/accordion/component.js","../../../packages/widget-editor/lib/components/tabs/style.js","../../../packages/widget-editor/lib/components/tabs/component.js","../../../packages/widget-editor/lib/components/slider/component.js","../../../packages/widget-editor/lib/components/slider/index.js","../../../packages/widget-editor/lib/styles-common/flex.js","../../../packages/widget-editor/lib/styles-common/form-label.js","../../../packages/widget-editor/lib/styles-common/input-group.js","../../../packages/widget-editor/lib/styles-common/input.js","../../../packages/widget-editor/lib/components/widget-info/component.js","../../../packages/widget-editor/lib/components/widget-info/index.js","../../../packages/widget-editor/lib/components/order-values/component.js","../../../packages/widget-editor/lib/components/order-values/index.js","../../../packages/widget-editor/lib/hooks/use-debounce.js","../../../packages/widget-editor/lib/helpers/isFloat.js","../../../packages/widget-editor/lib/components/query-limit/component.js","../../../packages/widget-editor/lib/components/query-limit/index.js","../../../packages/widget-editor/lib/components/table-view/style.js","../../../packages/widget-editor/lib/components/table-view/component.js","../../../packages/widget-editor/lib/components/table-view/index.js","../../../packages/widget-editor/lib/components/json-editor/style.js","../../../packages/widget-editor/lib/components/json-editor/index.js","../../../packages/widget-editor/lib/components/json-editor/component.js","../../../packages/widget-editor/lib/modules/filters/actions.js","../../../packages/widget-editor/lib/components/filter/const.js","../../../packages/widget-editor/lib/components/filter/components/NotNullInput/style.js","../../../packages/widget-editor/lib/components/filter/components/NotNullInput/index.js","../../../packages/widget-editor/lib/components/filter/components/NotNullInput/component.js","../../../packages/widget-editor/lib/components/filter/components/FilterRange/component.js","../../../packages/widget-editor/lib/components/filter/components/FilterRange/index.js","../../../packages/widget-editor/lib/components/filter/components/FilterValue/component.js","../../../packages/widget-editor/lib/components/filter/components/FilterValue/index.js","../../../packages/widget-editor/lib/components/filter/components/FilterColumn/index.js","../../../packages/widget-editor/lib/components/filter/components/FilterColumn/component.js","../../../packages/widget-editor/lib/components/filter/components/FilterStrings/index.js","../../../packages/widget-editor/lib/components/filter/components/FilterStrings/component.js","../../../packages/widget-editor/lib/components/filter/components/FilterIndicator/index.js","../../../packages/widget-editor/lib/components/filter/components/FilterIndicator/component.js","../../../packages/widget-editor/lib/components/filter/components/AddSection/style.js","../../../packages/widget-editor/lib/components/filter/components/AddSection/index.js","../../../packages/widget-editor/lib/components/filter/components/AddSection/component.js","../../../packages/widget-editor/lib/components/filter/style.js","../../../packages/widget-editor/lib/components/filter/component.js","../../../packages/widget-editor/lib/components/filter/index.js","../../../packages/widget-editor/lib/components/typography/const.js","../../../packages/widget-editor/lib/components/typography/style.js","../../../packages/widget-editor/lib/components/typography/component.js","../../../packages/widget-editor/lib/components/typography/index.js","../../../packages/widget-editor/lib/components/color-shemes/style.js","../../../packages/widget-editor/lib/components/color-shemes/component.js","../../../packages/widget-editor/lib/components/color-shemes/index.js","../../../packages/widget-editor/lib/components/editor-options/component.js","../../../packages/widget-editor/lib/components/editor-options/index.js","../../../packages/widget-editor/lib/components/icons/CloseIcon/index.js","../../../packages/widget-editor/lib/components/modal/style.js","../../../packages/widget-editor/lib/components/modal/component.js","../../../packages/widget-editor/lib/components/footer/component.js","../../../packages/widget-editor/lib/components/footer/index.js","../../../packages/widget-editor/lib/components/editor/style.js","../../../packages/widget-editor/lib/components/editor/component.js","../../../packages/widget-editor/lib/modules/theme/reducers.js","../../../packages/widget-editor/lib/modules/configuration/reducers.js","../../../packages/widget-editor/lib/components/editor/index.js","../../../packages/widget-editor/lib/components/widget-editor/index.js","../../../packages/widget-editor/lib/components/widget-editor/component.js","../../../packages/widget-editor/lib/modules/editor/reducers.js","../../../packages/widget-editor/lib/modules/editor/initial-state.js","../../../packages/widget-editor/lib/modules/theme/initial-state.js","../../../packages/widget-editor/lib/modules/widget/actions.js","../../../packages/widget-editor/lib/modules/widget/reducers.js","../../../packages/widget-editor/lib/modules/widget/initial-state.js","../../../packages/widget-editor/lib/modules/configuration/initial-state.js","../../../packages/widget-editor/lib/modules/filters/reducers.js","../../../packages/widget-editor/lib/modules/filters/initial-state.js","../../../packages/widget-editor/lib/modules/index.js","../../../packages/widget-editor/lib/middleware/index.js","../../../packages/widget-editor/lib/sagas/editor/index.js","../../../packages/widget-editor/lib/sagas/widget/index.js","../../../packages/widget-editor/lib/sagas/index.js","../../../packages/widget-editor/lib/index.js","modules/editor-options/actions.js","modules/editor-options/reducers.js","modules/editor-options/initial-state.js","store/index.js","components/editor/component.js","components/editor/index.js","components/editor-options/component.js","components/editor-options/index.js","components/toggle-options/component.js","components/toggle-options/index.js","App.js","serviceWorker.js","index.js","../../../packages/core/build/helpers/wiget-helper/constants.js","../../../packages/core/build/constants.js","../../../packages/core/build/services/filters.js","../../../packages/core/build/services/fields.js"],"names":["_defineProperty","_classCallCheck","_createClass","_regeneratorRuntime","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__importDefault","mod","__esModule","Object","defineProperty","exports","core_1","config_1","RwAdapter","endpoint","dataEndpoint","config","datasetService","widgetService","datasetId","tableName","AUTH_TOKEN","applications","env","locale","widget_params","asConfig","default","DatasetService","WidgetService","key","mark","_callee2","url","response","wrap","_context2","prev","concat","fetch","method","headers","Authorization","sent","json","abrupt","t0","console","error","stop","_a","_b","_callee3","_this$config$getConfi","_ref","dataset","_context3","getConfig","join","fetchData","data","attributes","_callee4","_ref2","fields","_context4","widgetId","_callee5","_this$config$getConfi2","resolveWidgetId","_ref3","widget","_context5","fromDataset","id","fetchWidget","_callee6","sql","_ref4","_context6","getDataSqlQuery","fetchWidgetData","_callee7","_this$config$getConfi3","_ref5","_context7","consumerOnSave","dataService","application","arguments","length","undefined","editorState","configuration","editorFilters","filters","list","_dataService$dataset","setDatasetId","setTableName","widgetParams","forEach","param","assign","widgetConfig","filterSerializer","out","name","title","description","_this","serialize","map","filter","indicator","values","v","type","dataType","column","datasetID","alias","REQUIRED_PROPS","f","prop","Array","isArray","validateProperty","_callee8","_context8","_callee9","_widget$attributes","_context9","paramsConfig","caption","FiltersService","handleFilters","_callee","_context","status","Error","statusText","lodash_1","find","defaultEditableWidget","s","charAt","toUpperCase","slice","TYPE_FILTER_ON_VALUES","TYPE_TEXT_CONTAINS","TYPE_TEXT_NOT_CONTAINS","TYPE_TEXT_STARTS_WITH","TYPE_TEXT_ENDS_WITH","DEFAULT_STRING_FILTER","notNull","DEFAULT_RANGE_FILTER","max","min","DEFAULT_VALUE_FILTER","asyncForEach","array","callback","index","patchColumn","payload","fieldService","fieldInfo","setFilterOnColumn","getFieldInfo","resolveStringLikeValue","val","isList","label","resolveNumberLikeValue","range","patchIndicator","appliedValue","setFilterOnIndicator","patchRange","patchValue","patchNullCheck","patch","push","filters_1","constants_1","DataService","adapter","setEditor","dispatch","widgetData","getDataset","getWidget","sagaEvents","DATA_FLOW_DATASET_WIDGET_READY","restoring","getDatasetAndWidgets","getFieldsAndLayers","_c","normalizeFilters","filterUpdate","allowedFields","reduxActions","EDITOR_SET_FILTERS","field","fieldTypeAllowed","ALLOWED_FIELD_TYPES","toLowerCase","columnName","_d","layers","columns","getFields","getLayers","metadata","keys","isFieldAllowed","DATA_FLOW_DATA_READY","filtersService","request","requestData","getQuery","errors","DATA_FLOW_WIDGET_DATA_READY","initialized","pie_1","bars_1","bars_vertical_1","line_1","scatter_1","constants_2","VegaService","theme","scheme","schemes","selectedScheme","schema","defaultVegaSchema","setConfig","resolveChart","chart","_this$configuration","chartType","direction","SUPPORTED_CHARTS","indexOf","getChart","Pie","generateSchema","setGenericSettings","scales","setScales","marks","setMarks","bindData","interaction_config","interactionConfig","width","height","property","format","domain","sqlFields","category","from","encode","enter","tooltip","signal","fill","scale","x","y","update","startAngle","endAngle","innerRadius","outerRadius","hover","opacity","transform","Bars","axes","setAxes","rect","mainColor","autosize","contains","padding","nice","zero","band","y2","axis","axisX","orient","labelOverlap","ticks","labels","text","align","baseline","angle","axisY","as","BarsVertical","grid","x2","Line","line","stroke","symbol","signals","on","events","interactive","strokeCap","strokeWidth","strokeJoin","size","path","source","expr","Scatter","isEqual_1","StateProxy","chartCache","orderBy","aggregateFunction","areaIntersection","layer","limit","state","_state$configuration","_state$configuration$","_state$configuration$2","editor","_state$configuration2","hasUpdate","_state$configuration3","updatedConfiguration","UPDATES","chartHasUpdate","DATA_FLOW_UPDATE_WIDGET","configurationHasUpdate","DATA_FLOW_CONFIGURATION_UPDATE","dataset_1","widget_1","data_1","vega_1","fields_1","FieldsService","state_proxy_1","constants","ConfigHelper","params","acceptedParams","pick","stateHandler","dispatchHandler","APP_NAMESPACE","action","setTheme","setScheme","setConfiguration","saveConfiguration","patchConfiguration","getWidgetColumns","identifier","widgetRelevantProps","createElement","viewBox","version","fillRule","d","StyledPopupContainer","div","withConfig","displayName","componentId","props","StyledPopupInsideContainer","StyledCategoryAlias","h4","active","StyledValueAlias","IconBox","_extends","target","i","prototype","hasOwnProperty","call","options","getValue","setValue","innerRef","innerProps","selectProps","selected","_selectProps$align","ref","op","onClick","StyledSelectBox","InputStyles","control","display","border","borderRadius","CustomStyles","container","position","boxSizing","cursor","indicatorSeparator","dropdownIndicator","provided","_state$selectProps","menuIsOpen","color","transition","indicatorsContainer","top","_state$selectProps2","_state$selectProps2$v","additionalProps","margin","maxWidth","menu","left","bottom","_ref$isCustom","isCustom","_ref$align","isPopup","_ref$onChange","onChange","otherProps","option","styles","components","Menu","category_title","_configuration$catego","categoryAlias","categoryName","_configuration$value","valueAlias","valueName","verticalValue","horizontalValue","menuPlacement","defaultValue","selectedOption","getOptionLabel","getOptionValue","StyledContainer","view","tooltipConfig","c","getTooltipConfigFields","showAllFields","formatType","vegaContainer","memoryStoreWidget","current","runtime","offsetWidth","initialize","renderer","run","resize","_width","window","addEventListener","className","StyledButton","button","_ref$type","children","MENU_DATA","StyledMenu","StyledTitle","StyledIcons","StyledBox","StyledIcon","disabled","points","cx","cy","r","xlinkHref","mask","_ref$direction","_ref$active","_ref$disabled","_ref$setData","setData","log","el","m","o","bars","more","dataSet","isCompact","backgroundColor","_useState","_useState2","setSelected","_theme$compact","compact","isOpen","_useState3","_useState4","isOpenMenu","setIsOpenMenu","onMenuOpen","availableCharts","DEFAULT_BORDER","right","RestoringWidget","RestoringWidgetTitle","StyledAccordion","StyledAccordionContent","scrollHeight","StyledAccordionButton","a","StyledAccordionSection","openDefault","contentRef","outerHeight","setOuterHeight","setOpen","clickToTitle","panel","setTimeout","handleHeight","skipOnMount","onResize","StyledTabsContainer","StyledTabsContentBox","StyledTabsContent","StyledList","ul","StyledListLabel","li","style","setActive","defaultNum","findIndex","child","num","tabContent","Tab","StyledSlider","ReactSlider","slider","track","StyledThumb","StyledTrack","trackBackground","_ref$min","_ref$max","_ref$step","_ref$onDone","onDone","onAfterChange","renderTrack","renderThumb","row","noMargins","input","_React$Component","WidgetInfo","obj","_this$props","_this$state","yAxis","xAxis","enumerable","configurable","writable","stateFromProps","prevProps","prevConfiguration","setState","handleUpdate","_this2","_this$state2","htmlFor","placeholder","setTitle","setCaption","setXAxis","setYaxis","Component","base","ORDER_OPTIONS","orderType","order","setOrder","delay","debouncedValue","setDebouncedValue","handler","clearTimeout","isFloat","n","Number","StyledSliderBox","StyledInputBox","isDouble","_ref$minDistance","minDistance","_ref$handleOnChangeVa","handleOnChangeValue","localValue","setLocalValue","isFloatingPoint","minValue","maxValue","minMaxProps","StyledTableBox","StyledTable","table","StyledTr","tr","StyledTd","td","center","StyledTh","StyledField","EditorColors","number","string","background","background_warning","EditorStyles","labelColumn","body","fontSize","outerBox","warningBox","contentBox","colors","setFilters","NUMBER_TYPES","STRING_TYPES","COLUMN_FILTER_GROUP","FILTER_NUMBER_INDICATOR_TYPES","FILTER_STRING_INDICATOR_TYPES","StyledCheckbox","_ref$name","_ref$label","checked","yearToUTC","Date","UTC","toISOString","UTCToYear","utcString","getFullYear","_values","onSetData","serializeValues","newValues","StyledInput","_ref$isNumeric","isNumeric","_ref$optionData","optionData","isDisabled","isMulti","StyledAddSection","addFilter","StyledFilterBox","StyledEmpty","StyledFilterSection","StyledFilter","StyledDeleteBox","_ref$filters","_ref$fields","availableColumns","replace","patchFilters","requestWithFilters","_x","_x2","_x3","removeFilter","FONTS","font","titleSize","captionSize","axisTitleSize","selectedFont","handleChangeSize","reg","RegExp","test","htmlF","or","StyledShemesContainer","StyledShemesCard","StyledCardBox","StyledShemeInfo","StyledShemeName","StyledShemeColors","sheme","onChangeTheme","flexBasis","StyleEditorOptionsErrors","handleChange","Icon","svg","hoverColor","StyledModalBox","StyledModalContainer","StyledModalContent","StyledModalCloseBtn","StyledActions","closeModal","StyledFooter","footer","authenticated","onSave","modalOpen","setModalOpen","_actions$setTheme$act","_actions$setConfigura","Editor","restoreEditor","_datasetId","_widgetId","_setEditor","_theme","_schemes","bind","resolveInitialState","resolveTheme","resolveSchemes","DATA_FLOW_STORE_ADAPTER_CONFIG","resolveAuthentication","prevDatasetId","prevWidgetId","prevTheme","prevSchemes","prevAuthenticated","_this$props2","initializeRestoration","_this$props3","handleSave","EDITOR_SAVE","_this$props4","WidgetEditor","_this$props$widgetId","_this$props$compact","setWidget","visualizationType","modules","_marked","preloadData","_marked2","baseSaga","_ref$widgetEditor$edi","widgetEditor","storeAdapterConfigInState","_marked3","resolveWithProxy","_marked4","updateWidget","_marked5","updateWidgetData","_marked6","stateProxy","adapterConfiguration","getWidgetData","_getWidgetData","sqlQuery","_ref2$widgetEditor","vega","cacheChart","proxyResult","t1","event","_ref5$widgetEditor","_ref6","DATA_FLOW_VISUALISATION_READY","root","modifyOptions","createAction","actions","authToken","optionsOpen","compactMode","initStore","initialState","appReducers","combineReducers","editorOptions","handleModule","reducers","middlewares","applyMiddleware","thunk","WEmiddleware","enhancers","composeWithDevTools","store","createStore","sagas","THEMES","diff","handleOnSave","React","connect","EditorComponent","EditorOptions","widgets","widgetPayload","clx","w","rwWidget","EditorOptionsComponent","ToggleOptions","optionsActive","ToggleOptionsComponent","App","configureStore","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","$schema","legend","labelFontSize","labelFont","labelColor","labelPadding","tickSize","tickColor","tickOpacity","tickExtra","bandPosition","domainWidth","domainColor","labelAlign","labelBaseline","gridColor","gridOpacity","interpolate","fillOpacity","provider","DATA_FLOW_PROXY_UPDATE","EDITOR_SET_CONFIGURATION","EDITOR_SET_WIDGET","prepareSelectStatement","prepareAggregate","prepareFilters","prepareGroupBy","prepareOrderBy","prepareOrder","prepareLimit","xTableName","yTableName","_this$configuration2","aggregation","resolveTableName","escapeValue","weFilter","rangeCondition","valueRange","textContains","textNotContains","textStartsWith","textEndsWith","_this$configuration3","groupBy","_this$configuration$l","configuredColumn","configuredType","configuredValues","assignIndicator","_this3","t2","t3","t4","t5","t6","t7","capitalize_1","NUMERIC_TYPE","COLUMN_TYPE","DATE_TYPE","q","jsonData","valueTableName","categoryTableName","getTableName","query","uniq","uniqQueryPart","selectedField","res","_res","getColumnMinAndMax","getColumnValues"],"mappings":"kJAEA,IAAIA,EAAkB,EAAQ,KAE1BC,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAEvBC,EAAsB,EAAQ,GAE9BC,EAAYC,MAAQA,KAAKD,WAAa,SAAUE,EAASC,EAAYC,EAAGC,GAO1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GACjD,SAASC,EAAUC,GACjB,IACEC,EAAKN,EAAUO,KAAKF,IACpB,MAAOG,GACPL,EAAOK,IAIX,SAASC,EAASJ,GAChB,IACEC,EAAKN,EAAiB,MAAEK,IACxB,MAAOG,GACPL,EAAOK,IAIX,SAASF,EAAKI,GAvBhB,IAAeL,EAwBXK,EAAOC,KAAOT,EAAQQ,EAAOL,QAxBlBA,EAwBiCK,EAAOL,MAvB9CA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAClDA,EAAQG,OAsBkDO,KAAKR,EAAWK,GAG5EH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAI9DO,EAAkBlB,MAAQA,KAAKkB,iBAAmB,SAAUC,GAC9D,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnC,QAAWA,IAIfE,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAIe,EAAS,EAAQ,IAEjBC,EAAWP,EAAgB,EAAQ,MAoCvC,IAAIQ,EAEJ,WACE,SAASA,IACP9B,EAAgBI,KAAM0B,GAEtB1B,KAAK2B,SAAW,mCAChB3B,KAAK4B,aAAe,yCACpB5B,KAAK6B,OAAS,KACd7B,KAAK8B,eAAiB,KACtB9B,KAAK+B,cAAgB,KACrB/B,KAAKgC,UAAY,KACjBhC,KAAKiC,UAAY,KACjBjC,KAAKkC,WAAa,KAClBlC,KAAKmC,aAAe,CAAC,MACrBnC,KAAKoC,IAAM,aACXpC,KAAKqC,OAAS,KACdrC,KAAKsC,cAAgB,CAAC,YAAa,oBAAqB,QAAS,QAAS,WAAY,QAAS,OAAQ,UAAW,oBAAqB,UAAW,mBAAoB,OAAQ,SAC9K,IAAIC,EAAW,CACbJ,aAAcnC,KAAKmC,aACnBC,IAAKpC,KAAKoC,IACVC,OAAQrC,KAAKqC,QAEfrC,KAAK6B,OAASJ,EAASe,QAAQD,GAC/BvC,KAAK8B,eAAiB,IAAIN,EAAOiB,eAAezC,KAAK6B,QACrD7B,KAAK+B,cAAgB,IAAIP,EAAOkB,cAAc1C,KAAK6B,QAyYrD,OAtYAhC,EAAa6B,EAAW,CAAC,CACvBiB,IAAK,UACLlC,MAAO,WACL,MAAO,CACL0B,aAAcnC,KAAKmC,aACnBC,IAAKpC,KAAKoC,OAGb,CACDO,IAAK,eACLlC,MAAO,WACL,OAAOV,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAASC,IAChC,IAAIC,EAAKC,EACT,OAAOjD,EAAoBkD,MAAK,SAAmBC,GACjD,OACE,OAAQA,EAAUC,KAAOD,EAAUtC,MACjC,KAAK,EAGH,GAFAmC,EAAM,GAAGK,OAAOnD,KAAK2B,SAAU,aAAawB,OAAOnD,KAAKgC,UAAW,YAE9DhC,KAAKkC,WAAY,CACpBe,EAAUtC,KAAO,GACjB,MAKF,OAFAsC,EAAUC,KAAO,EACjBD,EAAUtC,KAAO,EACVyC,MAAMN,EAAK,CAChBO,OAAQ,OACRC,QAAS,CACPC,cAAe,UAAUJ,OAAOnD,KAAKkC,eAI3C,KAAK,EAGH,OAFAa,EAAWE,EAAUO,KACrBP,EAAUtC,KAAO,EACVoC,EAASU,OAElB,KAAK,EACH,OAAOR,EAAUS,OAAO,SAAUT,EAAUO,MAE9C,KAAK,GACHP,EAAUC,KAAO,GACjBD,EAAUU,GAAKV,EAAiB,MAAE,GAClCW,QAAQC,MAAM,mBAAoBZ,EAAUU,IAE9C,KAAK,GACHV,EAAUtC,KAAO,GACjB,MAEF,KAAK,GACHiD,QAAQC,MAAM,0CAEhB,KAAK,GACL,IAAK,MACH,OAAOZ,EAAUa,UAGtBjB,EAAU7C,KAAM,CAAC,CAAC,EAAG,YAG3B,CACD2C,IAAK,eACLlC,MAAO,WACL,QAAST,KAAKkC,aAEf,CACDS,IAAK,eACLlC,MAAO,SAAsBuB,GACtBA,GACH4B,QAAQC,MAAM,gCAGhB7D,KAAKgC,UAAYA,IAElB,CACDW,IAAK,eACLlC,MAAO,SAAsBwB,GACtBA,GACH2B,QAAQC,MAAM,gCAGhB7D,KAAKiC,UAAYA,IAElB,CACDU,IAAK,aACLlC,MAAO,WACL,IAAIsD,EAAIC,EAER,OAAOjE,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAASqB,IAChC,IAAIC,EAAuB/B,EAAcC,EAAKC,EAAkBS,EAAKqB,EAAMC,EAE3E,OAAOtE,EAAoBkD,MAAK,SAAmBqB,GACjD,OACE,OAAQA,EAAUnB,KAAOmB,EAAU1D,MACjC,KAAK,EAKH,OAJAuD,EAAwBlE,KAAK6B,OAAOyC,YAAanC,EAAe+B,EAAsB/B,aAAcC,EAAM8B,EAAsB9B,IAAKC,EAAS6B,EAAsB7B,OACzJ,mCACXS,EAAM,GAAGK,OAAOnD,KAAK2B,SAAU,aAAawB,OAAOnD,KAAKgC,UAAW,KAAKmB,OAAOhB,EAAaoC,KAAK,KAAM,SAASpB,OAAOf,EAAK,cAAce,OAAOd,EAAQ,cAAcc,OAD5J,mCAC6K,mBACxLkB,EAAU1D,KAAO,EACVX,KAAK8B,eAAe0C,UAAU1B,GAEvC,KAAK,EAIH,OAHAqB,EAAOE,EAAUb,KACjBY,EAAUD,EAAKM,KACfzE,KAAKiC,WAA0F,QAA5E+B,EAAwB,QAAlBD,EAAKK,SAA4B,IAAPL,OAAgB,EAASA,EAAGW,kBAA+B,IAAPV,OAAgB,EAASA,EAAG/B,YAAc,KAC1IoC,EAAUX,OAAO,SAAUU,GAEpC,KAAK,EACL,IAAK,MACH,OAAOC,EAAUP,UAGtBG,EAAUjE,YAGhB,CACD2C,IAAK,YACLlC,MAAO,WACL,OAAOV,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAAS+B,IAChC,IAAI7B,EAAK8B,EAAOC,EAEhB,OAAO/E,EAAoBkD,MAAK,SAAmB8B,GACjD,OACE,OAAQA,EAAU5B,KAAO4B,EAAUnE,MACjC,KAAK,EAGH,OAFAmC,EAAM,GAAGK,OAAOnD,KAAK2B,SAAU,YAAYwB,OAAOnD,KAAKgC,WACvD8C,EAAUnE,KAAO,EACVX,KAAK8B,eAAe0C,UAAU1B,GAEvC,KAAK,EAGH,OAFA8B,EAAQE,EAAUtB,KAClBqB,EAASD,EAAMC,OACRC,EAAUpB,OAAO,SAAUmB,GAEpC,KAAK,EACL,IAAK,MACH,OAAOC,EAAUhB,UAGtBa,EAAU3E,YAGhB,CACD2C,IAAK,YACLlC,MAAO,SAAmB2D,EAASW,GACjC,OAAOhF,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAASoC,IAChC,IAAIC,EAAwB9C,EAAcC,EAAKC,EAAkB6C,EAAiBpC,EAAKqC,EAAOC,EAE9F,OAAOtF,EAAoBkD,MAAK,SAAmBqC,GACjD,OACE,OAAQA,EAAUnC,KAAOmC,EAAU1E,MACjC,KAAK,EAMH,OALAsE,EAAyBjF,KAAK6B,OAAOyC,YAAanC,EAAe8C,EAAuB9C,aAAcC,EAAM6C,EAAuB7C,IAAKC,EAAS4C,EAAuB5C,OAC7J,WACX6C,EAAmBH,GAAW/E,KAAK+B,cAAcuD,YAAYlB,GAASmB,GACtEzC,EAAM,GAAGK,OAAOnD,KAAK2B,SAAU,YAAYwB,OAAO+B,EAAiB,KAAK/B,OAAOhB,EAAaoC,KAAK,KAAM,SAASpB,OAAOf,EAAK,cAAce,OAAOd,EAAQ,cAAcc,OAF5J,WAE6K,mBACxLkC,EAAU1E,KAAO,EACVX,KAAK+B,cAAcyD,YAAY1C,GAExC,KAAK,EAGH,OAFAqC,EAAQE,EAAU7B,KAClB4B,EAASD,EAAMV,KACRY,EAAU3B,OAAO,SAAU0B,GAEpC,KAAK,EACL,IAAK,MACH,OAAOC,EAAUvB,UAGtBkB,EAAUhF,YAGhB,CACD2C,IAAK,gBACLlC,MAAO,SAAuB2D,EAASgB,GACrC,OAAOrF,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAAS6C,IAChC,IAAIC,EAAK5C,EAAK6C,EAAOlB,EAErB,OAAO3E,EAAoBkD,MAAK,SAAmB4C,GACjD,OACE,OAAQA,EAAU1C,KAAO0C,EAAUjF,MACjC,KAAK,EAIH,OAHA+E,EAAM1F,KAAK+B,cAAc8D,gBAAgBzB,EAASgB,GAClDtC,EAAM,GAAGK,OAAOnD,KAAK2B,SAAU,WAAWwB,OAAOnD,KAAKgC,UAAW,SAASmB,OAAOuC,GACjFE,EAAUjF,KAAO,EACVX,KAAK+B,cAAc+D,gBAAgBhD,GAE5C,KAAK,EAGH,OAFA6C,EAAQC,EAAUpC,KAClBiB,EAAOkB,EAAMlB,KACNmB,EAAUlC,OAAO,SAAUe,GAEpC,KAAK,EACL,IAAK,MACH,OAAOmB,EAAU9B,UAGtB2B,EAAUzF,YAGhB,CACD2C,IAAK,YACLlC,MAAO,WACL,OAAOV,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAASmD,IAChC,IAAIC,EAAwB7D,EAAcC,EAAaU,EAAKmD,EAAOxB,EAEnE,OAAO3E,EAAoBkD,MAAK,SAAmBkD,GACjD,OACE,OAAQA,EAAUhD,KAAOgD,EAAUvF,MACjC,KAAK,EAIH,OAHAqF,EAAyBhG,KAAK6B,OAAOyC,YAAanC,EAAe6D,EAAuB7D,aAAcC,EAAM4D,EAAuB5D,IAAc4D,EAAuB3D,OACxKS,EAAM,GAAGK,OAAOnD,KAAK2B,SAAU,aAAawB,OAAOnD,KAAKgC,UAAW,eAAemB,OAAOhB,EAAaoC,KAAK,KAAM,SAASpB,OAAOf,EAAK,oBACtI8D,EAAUvF,KAAO,EACVX,KAAK8B,eAAe0C,UAAU1B,GAEvC,KAAK,EAGH,OAFAmD,EAAQC,EAAU1C,KAClBiB,EAAOwB,EAAMxB,KACNyB,EAAUxC,OAAO,SAAUe,GAEpC,KAAK,EACL,IAAK,MACH,OAAOyB,EAAUpC,UAGtBiC,EAAU/F,YAGhB,CACD2C,IAAK,aACLlC,MAAO,SAAoB0F,EAAgBC,GACzC,IAAIC,EAAcC,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,KAClFG,EAAcH,UAAUC,OAAS,EAAID,UAAU,QAAKE,EACpDE,EAAgBD,EAAYC,cAC5BtB,EAASqB,EAAYrB,OACrBuB,EAAgBF,EAAYG,QAAQC,KACpCC,EAAuBV,EAAYhC,QACnCmB,EAAKuB,EAAqBvB,GAC1BtD,EAAY6E,EAAqBpC,WAAWzC,UAChDjC,KAAK+G,aAAaxB,GAClBvF,KAAKgH,aAAa/E,GAClB,IAAIgF,EAAe,GACnBjH,KAAKsC,cAAc4E,SAAQ,SAAUC,GAC/BA,KAAST,IACXO,EAAe5F,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIH,GAAetH,EAAgB,GAAIwH,EAAOT,EAAcS,SAG3G,IAAIE,EAAejC,SACZiC,EAAa5C,KACpB4C,EAAaT,QAAU5G,KAAKsH,iBAAiBX,GAC7C,IAAIY,EAAM,CACRC,KAAMd,EAAce,OAAS,KAC7BC,YAAahB,EAAcgB,aAAe,KAC1CrB,YAAaA,EACbgB,aAAcA,GAEhBlB,EAAeoB,KAEhB,CACD5E,IAAK,mBACLlC,MAAO,SAA0BmG,GAC/B,IAAIe,EAAQ3H,KAER4H,EAAYhB,EAAQiB,KAAI,SAAUC,GACpC,MAAO,CACLrH,MAA4B,qBAArBqH,EAAOC,UAAmCD,EAAOA,OAAOE,OAAOH,KAAI,SAAUI,GAClF,OAAOA,EAAExH,SACNqH,EAAOA,OAAOE,OACnBE,KAAMJ,EAAOK,SACbX,KAAMM,EAAOM,OACbC,UAAWV,EAAM3F,UACjBC,UAAW0F,EAAM1F,UACjBqG,MAAOR,EAAOM,WAGdG,EAAiB,CAAC,QAAS,OAAQ,YAAa,aAcpD,OAAOX,EAAUE,QAAO,SAAUU,GAChC,MAAO,GAAGrF,OAAOoF,GAAgBT,QAAO,SAAUW,GAChD,OAdmB,SAA0BA,GAC/C,QAAIC,MAAMC,QAAQF,IAAyB,IAAhBA,EAAKlC,WAIZ,kBAATkC,GAAqC,IAAhBA,EAAKlC,SAIrB,OAATkC,GAKEG,CAAiBJ,EAAEC,OACzBlC,SAAWgC,EAAehC,YAGhC,CACD5D,IAAK,cACLlC,MAAO,SAAqBiF,EAAKtB,GAC/B,OAAOrE,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAASiG,IAChC,IAAI9F,EAAU0B,EACd,OAAO3E,EAAoBkD,MAAK,SAAmB8F,GACjD,OACE,OAAQA,EAAU5F,KAAO4F,EAAUnI,MACjC,KAAK,EAEH,OADAmI,EAAUnI,KAAO,EACVyC,MAAM,0CAA0CD,OAAOiB,EAAQmB,GAAI,SAASpC,OAAOuC,IAE5F,KAAK,EAGH,OAFA3C,EAAW+F,EAAUtF,KACrBsF,EAAUnI,KAAO,EACVoC,EAASU,OAElB,KAAK,EAEH,OADAgB,EAAOqE,EAAUtF,KACVsF,EAAUpF,OAAO,SAAUe,GAEpC,KAAK,EACL,IAAK,MACH,OAAOqE,EAAUhF,UAGtB+E,SAGN,CACDlG,IAAK,eACLlC,MAAO,SAAsBmG,EAAS/B,EAAQO,GAC5C,OAAOrF,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAASmG,IAChC,IAAIC,EAAoBxB,EAAME,EAAaL,EAAcX,EAAea,EAExE,OAAOzH,EAAoBkD,MAAK,SAAmBiG,GACjD,OACE,OAAQA,EAAU/F,KAAO+F,EAAUtI,MACjC,KAAK,EACH,GAAOiG,GAAY8B,MAAMC,QAAQ/B,IAA+B,IAAnBA,EAAQL,OAAe,CAClE0C,EAAUtI,KAAO,EACjB,MAGF,OAAOsI,EAAUvF,OAAO,SAAU,IAEpC,KAAK,EAOH,OANAsF,EAAqB5D,EAAOV,WAAY8C,EAAOwB,EAAmBxB,KAAME,EAAcsB,EAAmBtB,YAAaL,EAAe2B,EAAmB3B,aACxJX,EAAgBrF,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIC,EAAa6B,cAAe,CAC1EzB,MAAOD,EACP2B,QAASzB,IAEXuB,EAAUtI,KAAO,EACVa,EAAO4H,eAAeC,cAAczC,EAAS,CAClDwB,OAAQ,OACRJ,OAAQ,QACRE,KAAM,QACL,CACDxB,cAAeA,EACf1E,UAAWhC,KAAKgC,UAChB6C,OAAQA,EACRO,OAAQA,IAGZ,KAAK,EAEH,OADAmC,EAAM0B,EAAUzF,KACTyF,EAAUvF,OAAO,SAAU6D,GAEpC,KAAK,EACL,IAAK,MACH,OAAO0B,EAAUnF,UAGtBiF,EAAU/I,cAKZ0B,EAhaT,GAmaAH,EAAQiB,QAAUd,G,6FC7flB,IAAI5B,EAAsB,EAAQ,GAE9BF,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAEvBE,EAAYC,MAAQA,KAAKD,WAAa,SAAUE,EAASC,EAAYC,EAAGC,GAO1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GACjD,SAASC,EAAUC,GACjB,IACEC,EAAKN,EAAUO,KAAKF,IACpB,MAAOG,GACPL,EAAOK,IAIX,SAASC,EAASJ,GAChB,IACEC,EAAKN,EAAiB,MAAEK,IACxB,MAAOG,GACPL,EAAOK,IAIX,SAASF,EAAKI,GAvBhB,IAAeL,EAwBXK,EAAOC,KAAOT,EAAQQ,EAAOL,QAxBlBA,EAwBiCK,EAAOL,MAvB9CA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAClDA,EAAQG,OAsBkDO,KAAKR,EAAWK,GAG5EH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAIlEU,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAIgC,EAEJ,WACE,SAASA,EAAeZ,GACtBjC,EAAgBI,KAAMyC,GAEtBzC,KAAK6B,OAASA,EAmDhB,OAhDAhC,EAAa4C,EAAgB,CAAC,CAC5BE,IAAK,YACLlC,MAAO,SAAmBqC,GACxB,OAAO/C,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAAS0G,IAChC,IAAIvG,EACJ,OAAOjD,EAAoBkD,MAAK,SAAkBuG,GAChD,OACE,OAAQA,EAASrG,KAAOqG,EAAS5I,MAC/B,KAAK,EAGH,OAFA4I,EAASrG,KAAO,EAChBqG,EAAS5I,KAAO,EACTyC,MAAMN,GAEf,KAAK,EAGH,MAFAC,EAAWwG,EAAS/F,MAELgG,QAAU,KAAM,CAC7BD,EAAS5I,KAAO,EAChB,MAGF,MAAM,IAAI8I,MAAM1G,EAAS2G,YAE3B,KAAK,EAEH,OADAH,EAAS5I,KAAO,EACToC,EAASU,OAElB,KAAK,EACH,OAAO8F,EAAS7F,OAAO,SAAU6F,EAAS/F,MAE5C,KAAK,GAIH,OAHA+F,EAASrG,KAAO,GAChBqG,EAAS5F,GAAK4F,EAAgB,MAAE,GAChC3F,QAAQC,MAAM,yBAA0Bf,GACjCyG,EAAS7F,OAAO,SAAU,IAEnC,KAAK,GACL,IAAK,MACH,OAAO6F,EAASzF,UAGrBwF,EAAS,KAAM,CAAC,CAAC,EAAG,cAKtB7G,EAvDT,GA0DAlB,EAAQiB,QAAUC,G,iCCtGlB,IAAI3C,EAAsB,EAAQ,GAE9BF,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAEvBE,EAAYC,MAAQA,KAAKD,WAAa,SAAUE,EAASC,EAAYC,EAAGC,GAO1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GACjD,SAASC,EAAUC,GACjB,IACEC,EAAKN,EAAUO,KAAKF,IACpB,MAAOG,GACPL,EAAOK,IAIX,SAASC,EAASJ,GAChB,IACEC,EAAKN,EAAiB,MAAEK,IACxB,MAAOG,GACPL,EAAOK,IAIX,SAASF,EAAKI,GAvBhB,IAAeL,EAwBXK,EAAOC,KAAOT,EAAQQ,EAAOL,QAxBlBA,EAwBiCK,EAAOL,MAvB9CA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAClDA,EAAQG,OAsBkDO,KAAKR,EAAWK,GAG5EH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAIlEU,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAIkJ,EAAW,EAAQ,IAEnBjH,EAEJ,WACE,SAASA,EAAcb,GACrBjC,EAAgBI,KAAM0C,GAEtB1C,KAAK6B,OAASA,EAkFhB,OA/EAhC,EAAa6C,EAAe,CAAC,CAC3BC,IAAK,cACLlC,MAAO,SAAqB2D,GAC1B,OAAOuF,EAASC,KAAKxF,EAAQM,WAAWU,QAAQ,SAAUA,GACxD,QAASA,EAAOV,WAAWmF,2BAG9B,CACDlH,IAAK,kBACLlC,MAAO,SAAyB2D,EAASgB,GACvC,MAAO,KAER,CACDzC,IAAK,kBACLlC,MAAO,SAAyBqC,GAC9B,OAAO/C,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAAS0G,IAChC,OAAOxJ,EAAoBkD,MAAK,SAAkBuG,GAChD,OACE,OAAQA,EAASrG,KAAOqG,EAAS5I,MAC/B,KAAK,EACH,OAAO4I,EAAS7F,OAAO,SAAU,MAEnC,KAAK,EACL,IAAK,MACH,OAAO6F,EAASzF,UAGrBwF,SAGN,CACD3G,IAAK,cACLlC,MAAO,SAAqBqC,GAC1B,OAAO/C,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAASC,IAChC,IAAIE,EACJ,OAAOjD,EAAoBkD,MAAK,SAAmBC,GACjD,OACE,OAAQA,EAAUC,KAAOD,EAAUtC,MACjC,KAAK,EAGH,OAFAsC,EAAUC,KAAO,EACjBD,EAAUtC,KAAO,EACVyC,MAAMN,GAEf,KAAK,EAGH,MAFAC,EAAWE,EAAUO,MAENgG,QAAU,KAAM,CAC7BvG,EAAUtC,KAAO,EACjB,MAGF,MAAM,IAAI8I,MAAM1G,EAAS2G,YAE3B,KAAK,EAEH,OADAzG,EAAUtC,KAAO,EACVoC,EAASU,OAElB,KAAK,EACH,OAAOR,EAAUS,OAAO,SAAUT,EAAUO,MAE9C,KAAK,GAGH,MAFAP,EAAUC,KAAO,GACjBD,EAAUU,GAAKV,EAAiB,MAAE,GAC5B,IAAIwG,MAAMxG,EAAUU,IAE5B,KAAK,GACL,IAAK,MACH,OAAOV,EAAUa,UAGtBjB,EAAU,KAAM,CAAC,CAAC,EAAG,cAKvBH,EAtFT,GAyFAnB,EAAQiB,QAAUE,G,iCCvIlBrB,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGTc,EAAQiB,QAAU,SAAUsH,GAC1B,MAAiB,kBAANA,EAAuB,GAC3BA,EAAEC,OAAO,GAAGC,cAAgBF,EAAEG,MAAM,K,iCCN7C,IAAInK,EAAsB,EAAQ,GAE9BC,EAAYC,MAAQA,KAAKD,WAAa,SAAUE,EAASC,EAAYC,EAAGC,GAO1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GACjD,SAASC,EAAUC,GACjB,IACEC,EAAKN,EAAUO,KAAKF,IACpB,MAAOG,GACPL,EAAOK,IAIX,SAASC,EAASJ,GAChB,IACEC,EAAKN,EAAiB,MAAEK,IACxB,MAAOG,GACPL,EAAOK,IAIX,SAASF,EAAKI,GAvBhB,IAAeL,EAwBXK,EAAOC,KAAOT,EAAQQ,EAAOL,QAxBlBA,EAwBiCK,EAAOL,MAvB9CA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAClDA,EAAQG,OAsBkDO,KAAKR,EAAWK,GAG5EH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAIlEU,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAOTc,EAAQ2I,sBAAwB,mBAChC3I,EAAQ4I,mBAAqB,gBAC7B5I,EAAQ6I,uBAAyB,oBACjC7I,EAAQ8I,sBAAwB,mBAChC9I,EAAQ+I,oBAAsB,iBAC9B,IAAIC,EAAwB,CAC1BvC,OAAQ,GACRE,KAAM,KACNsC,SAAS,GAEPC,EAAuB,CACzBzC,OAAQ,CAAC,EAAG,KACZE,KAde,QAefsC,SAAS,EACTE,IAAK,IACLC,IAAK,GAEHC,EAAuB,CACzB5C,OAAQ,EACRE,KAtBe,QAuBfsC,SAAS,EACTE,IAAK,IACLC,IAAK,GAGP,SAASE,EAAaC,EAAOC,GAC3B,OAAOhL,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAAS0G,IAChC,IAAI0B,EACJ,OAAOlL,EAAoBkD,MAAK,SAAkBuG,GAChD,OACE,OAAQA,EAASrG,KAAOqG,EAAS5I,MAC/B,KAAK,EACHqK,EAAQ,EAEV,KAAK,EACH,KAAMA,EAAQF,EAAMvE,QAAS,CAC3BgD,EAAS5I,KAAO,EAChB,MAIF,OADA4I,EAAS5I,KAAO,EACToK,EAASD,EAAME,GAAQA,EAAOF,GAEvC,KAAK,EACHE,IACAzB,EAAS5I,KAAO,EAChB,MAEF,KAAK,EACL,IAAK,MACH,OAAO4I,EAASzF,UAGrBwF,OAIP,IAAI2B,EAAc,SAAqBnD,EAAQoD,EAASC,GACtD,OAAOpL,OAAU,OAAQ,OAAQ,EAEjCD,EAAoB8C,MAAK,SAASC,IAChC,IAAImF,EAAcoD,EAAWC,EAC7B,OAAOvL,EAAoBkD,MAAK,SAAmBC,GACjD,OACE,OAAQA,EAAUC,KAAOD,EAAUtC,MACjC,KAAK,EAGH,OAFAqH,EAASkD,EAAQlD,OAAekD,EAAQhD,KACxCjF,EAAUtC,KAAO,EACVwK,EAAaG,aAAaxD,EAAQE,EAAOvH,OAElD,KAAK,EAcH,OAbA2K,EAAYnI,EAAUO,KAGpB6H,EADsB,WAApBrD,EAAOG,SACW9G,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIU,EAAOA,QAAS,CAClEE,OAAQ,CAACoD,EAAUT,IAAKS,EAAUV,OAGhBrJ,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIU,EAAOA,QAAS,CAClEI,KAAM,SACNF,OAAQ,KAIL/E,EAAUS,OAAO,SAAUrC,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIU,GAAS,CACzEM,OAAQJ,EAAOvH,MACfsH,UAA+B,WAApBC,EAAOG,SAAwB,mBAAqB,QAC/DA,SAAUH,EAAOG,SACjBiD,UAAWA,EACXtD,OAAQuD,KAGZ,KAAK,EACL,IAAK,MACH,OAAOpI,EAAUa,UAGtBjB,QAIH0I,EAAyB,SAAgCC,GAC3D,IAAIC,EAASnF,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,IAAmBA,UAAU,GAE5E,OAAImF,EACK/C,MAAMC,QAAQ6C,GAAOA,EAAM,GAGxB,OAARA,EACK,GAGF9C,MAAMC,QAAQ6C,GAAOA,EAAI3D,KAAI,SAAUI,GAC5C,OAAOA,EAAEyD,SACRnH,KAAK,KAAOiH,GAGbG,EAAyB,SAAgC7D,EAAQ0D,GACnE,IAAII,EAAQtF,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,IAAmBA,UAAU,GACvEqE,EAAM7C,EAAOsD,WAAatD,EAAOsD,UAAUT,IAAM7C,EAAOsD,UAAUT,IAAM,EACxED,EAAM5C,EAAOsD,WAAatD,EAAOsD,UAAUV,IAAM5C,EAAOsD,UAAUV,IAAM,EAE5E,OAAIc,IAIAI,EACK,CAACjB,EAAKD,GAGRA,IAGLmB,EAAiB,SAAwB/D,EAAQoD,GACnD,IAAIlD,EAASkD,EAAQlD,OACjB8D,EAAehE,EAAOA,OAAOE,OAC7B+D,EAAuB,KAE3B,GAAI/D,EAAOvH,QAAUc,EAAQ2I,sBAC3B6B,EAAuB1K,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAImD,GAAwB,CAC7EC,SAAS,EACTxC,OAAQuD,EAAuBO,GAAc,UAE1C,GAAI9D,EAAOvH,QAAUc,EAAQ4I,oBAAsBnC,EAAOvH,QAAUc,EAAQ6I,wBAA0BpC,EAAOvH,QAAUc,EAAQ8I,uBAAyBrC,EAAOvH,QAAUc,EAAQ+I,oBACtLyB,EAAuB1K,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAImD,GAAwB,CAC7EvC,OAAQuD,EAAuBO,UAE5B,GAvJQ,UAuJJ9D,EAAOvH,MAChBsL,EAAuB1K,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIqD,GAAuB,CAC5EzC,OAAQ2D,EAAuB7D,EAAQgE,GAAc,SAElD,IA5JQ,UA4JJ9D,EAAOvH,MAKhB,MAAM,IAAIgJ,MAAM,wCAAwCtG,OAAO6E,EAAOvH,MAAO,+BAJ7EsL,EAAuB1K,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIwD,GAAuB,CAC5E5C,OAAQ2D,EAAuB7D,EAAQgE,KAM3C,OAAOzK,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIU,GAAS,CAC9CC,UAAWC,EAAOvH,MAClBqH,OAAQiE,KAIRC,EAAa,SAAoBlE,EAAQoD,GAC3C,IAAIlD,EAASkD,EAAQlD,OACrB,OAAO3G,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIU,GAAS,CAC9CA,OAAQzG,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIU,EAAOA,QAAS,CACtDE,OAAQA,OAKViE,EAAa,SAAoBnE,EAAQoD,GAC3C,IAAIlD,EAASkD,EAAQlD,OACrB,OAAO3G,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIU,GAAS,CAC9CA,OAAQzG,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIU,EAAOA,QAAS,CACtDE,OAAQA,OAKVkE,EAAiB,SAAwBpE,GAC3C,OAAOzG,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIU,GAAS,CAC9CA,OAAQzG,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIU,EAAOA,QAAS,CACtD0C,SAAU1C,EAAOA,OAAO0C,aAK9BjJ,EAAQiB,QAAU,SAAUoE,EAASuE,EAAcD,GACjD,OAAOnL,OAAU,OAAQ,OAAQ,EAEjCD,EAAoB8C,MAAK,SAAS+B,IAChC,IAAYY,EAAI2C,EAAMX,EACtB,OAAOzH,EAAoBkD,MAAK,SAAmB8B,GACjD,OACE,OAAQA,EAAU5B,KAAO4B,EAAUnE,MACjC,KAAK,EAIH,GAHSuK,EAAQlD,OAAQzC,EAAK2F,EAAQ3F,GAAI2C,EAAOgD,EAAQhD,KACzDX,EAAM,GAhNC,YAkNDW,EAAwB,CAC5BpD,EAAUnE,KAAO,EACjB,MAIF,OADAmE,EAAUnE,KAAO,EACVkK,EAAajE,GAAS,SAAUkB,GACrC,OAAO/H,OAAU,OAAQ,OAAQ,EAEjCD,EAAoB8C,MAAK,SAASqB,IAChC,IAAIkI,EACJ,OAAOrM,EAAoBkD,MAAK,SAAmBqB,GACjD,OACE,OAAQA,EAAUnB,KAAOmB,EAAU1D,MACjC,KAAK,EACH,GAAMmH,EAAOvC,KAAOA,EAAK,CACvBlB,EAAU1D,KAAO,EACjB,MAIF,OADA0D,EAAU1D,KAAO,EACVsK,EAAYnD,EAAQoD,EAASC,GAEtC,KAAK,EACHgB,EAAQ9H,EAAUb,KAClB+D,EAAI6E,KAAKD,GACT9H,EAAU1D,KAAO,EACjB,MAEF,KAAK,EACH4G,EAAI6E,KAAKtE,GAEX,KAAK,EACL,IAAK,MACH,OAAOzD,EAAUP,UAGtBG,UAIT,KAAK,EACHa,EAAUnE,KAAO,EACjB,MAEF,KAAK,EACH4G,EAAMX,EAAQiB,KAAI,SAAUC,GAC1B,GAAIA,EAAOvC,KAAOA,EAAI,CACpB,GAjQK,cAiQD2C,EACF,OAAO2D,EAAe/D,EAAQoD,GACzB,GAjQN,UAiQUhD,EACT,OAAO8D,EAAWlE,EAAQoD,GACrB,GApQN,UAoQUhD,GAAuBA,IAAS3G,EAAQ2I,sBACjD,OAAO+B,EAAWnE,EAAQoD,GACrB,GAAa,mBAAThD,EACT,OAAOgE,EAAepE,GAEtB,MAAM,IAAI2B,MAAM,+BAA+BtG,OAAO+E,EAAM,sBAIhE,OAAOJ,KAGX,KAAK,EACH,OAAOhD,EAAUpB,OAAO,SAAU6D,GAEpC,KAAK,EACL,IAAK,MACH,OAAOzC,EAAUhB,UAGtBa,S,iCC/TP,IAAI7E,EAAsB,EAAQ,GAE9BF,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAEvBE,EAAYC,MAAQA,KAAKD,WAAa,SAAUE,EAASC,EAAYC,EAAGC,GAO1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GACjD,SAASC,EAAUC,GACjB,IACEC,EAAKN,EAAUO,KAAKF,IACpB,MAAOG,GACPL,EAAOK,IAIX,SAASC,EAASJ,GAChB,IACEC,EAAKN,EAAiB,MAAEK,IACxB,MAAOG,GACPL,EAAOK,IAIX,SAASF,EAAKI,GAvBhB,IAAeL,EAwBXK,EAAOC,KAAOT,EAAQQ,EAAOL,QAxBlBA,EAwBiCK,EAAOL,MAvB9CA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAClDA,EAAQG,OAsBkDO,KAAKR,EAAWK,GAG5EH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAI9DO,EAAkBlB,MAAQA,KAAKkB,iBAAmB,SAAUC,GAC9D,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnC,QAAWA,IAIfE,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAI4L,EAAYnL,EAAgB,EAAQ,KAEpCoL,EAAc,EAAQ,IAEtBC,EAEJ,WACE,SAASA,EAAYvK,EAAW+C,EAAUyH,EAASC,EAAWC,GAC5D9M,EAAgBI,KAAMuM,GAEtBvM,KAAKwM,QAAUA,EACfxM,KAAKyM,UAAYA,EACjBzM,KAAK0M,SAAWA,EAChB1M,KAAKoE,QAAU,KACfpE,KAAK+E,SAAWA,EAChB/E,KAAKoF,OAAS,KACdpF,KAAK2M,WAAa,KAClB3M,KAAKwM,QAAQzF,aAAa/E,GAuQ5B,OApQAnC,EAAa0M,EAAa,CAAC,CACzB5J,IAAK,uBACLlC,MAAO,WACL,OAAOV,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAAS0G,IAChC,OAAOxJ,EAAoBkD,MAAK,SAAkBuG,GAChD,OACE,OAAQA,EAASrG,KAAOqG,EAAS5I,MAC/B,KAAK,EAEH,OADA4I,EAAS5I,KAAO,EACTX,KAAKwM,QAAQI,aAEtB,KAAK,EAGH,OAFA5M,KAAKoE,QAAUmF,EAAS/F,KACxB+F,EAAS5I,KAAO,EACTX,KAAKwM,QAAQK,UAAU7M,KAAKoE,QAASpE,KAAK+E,UAEnD,KAAK,EACH/E,KAAKoF,OAASmE,EAAS/F,KACvBxD,KAAKyM,UAAU,CACbrI,QAASpE,KAAKoE,QACdgB,OAAQpF,KAAKoF,SAEfpF,KAAK0M,SAAS,CACZxE,KAAMoE,EAAYQ,WAAWC,iCAGjC,KAAK,EACL,IAAK,MACH,OAAOxD,EAASzF,UAGrBwF,EAAStJ,YAGf,CACD2C,IAAK,gBACLlC,MAAO,SAAuBuB,EAAW+C,GACvC,OAAOhF,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAASC,IAChC,OAAO/C,EAAoBkD,MAAK,SAAmBC,GACjD,OACE,OAAQA,EAAUC,KAAOD,EAAUtC,MACjC,KAAK,EAOH,OANAX,KAAKyM,UAAU,CACbO,WAAW,IAEbhN,KAAK+E,SAAWA,EAChB/E,KAAKwM,QAAQzF,aAAa/E,GAC1BiB,EAAUtC,KAAO,EACVX,KAAKiN,uBAEd,KAAK,EAEH,OADAhK,EAAUtC,KAAO,EACVX,KAAKkN,qBAEd,KAAK,EAEH,OADAjK,EAAUtC,KAAO,EACVX,KAAKqJ,gBAEd,KAAK,EACHrJ,KAAKyM,UAAU,CACbO,WAAW,IAGf,KAAK,GACL,IAAK,MACH,OAAO/J,EAAUa,UAGtBjB,EAAU7C,YAGhB,CACD2C,IAAK,gBACLlC,MAAO,WACL,IAAIsD,EAAIC,EAAImJ,EAEZ,OAAOpN,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAASqB,IAChC,IAAI2C,EAASwG,EACb,OAAOtN,EAAoBkD,MAAK,SAAmBqB,GACjD,OACE,OAAQA,EAAUnB,KAAOmB,EAAU1D,MACjC,KAAK,EAGH,MAFAiG,EAAoK,QAAzJuG,EAAmG,QAA7FnJ,EAAuC,QAAjCD,EAAK/D,KAAKoF,OAAOV,kBAA+B,IAAPX,OAAgB,EAASA,EAAGsD,oBAAiC,IAAPrD,OAAgB,EAASA,EAAGkF,oBAAiC,IAAPiE,OAAgB,EAASA,EAAGvG,UAEvL8B,MAAMC,QAAQ/B,IAAYA,EAAQL,OAAS,GAAI,CAC9DlC,EAAU1D,KAAO,EACjB,MAIF,OADA0D,EAAU1D,KAAO,EACVX,KAAKwM,QAAQa,aAAazG,EAAS5G,KAAKsN,cAAetN,KAAKoF,QAErE,KAAK,EACHgI,EAAmB/I,EAAUb,KAC7BxD,KAAK0M,SAAS,CACZxE,KAAMoE,EAAYiB,aAAaC,mBAC/BtC,QAAS,CACPrE,KAAMuG,KAIZ,KAAK,EACL,IAAK,MACH,OAAO/I,EAAUP,UAGtBG,EAAUjE,YAGhB,CACD2C,IAAK,iBACLlC,MAAO,SAAwBgN,GAC7B,IAAIC,EAAmBpB,EAAYqB,oBAAoB/D,MAAK,SAAU4B,GACpE,OAAOA,EAAIhE,KAAKoG,gBAAkBH,EAAMvF,KAAK0F,iBAI/C,QAFuC,eAArBH,EAAMI,aACKH,IAG9B,CACD/K,IAAK,qBACLlC,MAAO,WACL,IAAIsD,EAAIC,EAAImJ,EAAIW,EAEhB,OAAO/N,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAAS+B,IAChC,IAEIE,EAAQkJ,EAAQC,EAFhBrG,EAAQ3H,KAGZ,OAAOF,EAAoBkD,MAAK,SAAmB8B,GACjD,OACE,OAAQA,EAAU5B,KAAO4B,EAAUnE,MACjC,KAAK,EAEH,OADAmE,EAAUnE,KAAO,EACVX,KAAKwM,QAAQyB,YAEtB,KAAK,EAGH,OAFApJ,EAASC,EAAUtB,KACnBsB,EAAUnE,KAAO,EACVX,KAAKwM,QAAQ0B,YAEtB,KAAK,EACHH,EAASjJ,EAAUtB,KACnBwK,EAAiN,QAAtMF,EAAkJ,QAA5IX,EAAuF,QAAjFnJ,EAA6B,QAAvBD,EAAK/D,KAAKoE,eAA4B,IAAPL,OAAgB,EAASA,EAAGW,kBAA+B,IAAPV,OAAgB,EAASA,EAAGmK,SAAS,UAAuB,IAAPhB,OAAgB,EAASA,EAAGzI,kBAA+B,IAAPoJ,OAAgB,EAASA,EAAGE,QACrPhO,KAAKsN,cAAgB,GAEjBzI,GAAUxD,OAAO+M,KAAKvJ,GAAQ0B,OAAS,GACzClF,OAAO+M,KAAKvJ,GAAQqC,SAAQ,SAAUuG,GACpC,GAAIO,GAAWP,KAASO,EAAS,CAC/B,IAAIxF,EAAInH,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIvC,EAAO4I,IAAS,CACtDI,WAAYJ,EACZU,SAAUH,EAAQP,KAGhB9F,EAAM0G,eAAe7F,IACvBb,EAAM2F,cAAclB,KAAK5D,OAMjCxI,KAAKyM,UAAU,CACbsB,OAAQA,EACRlJ,OAAQ7E,KAAKsN,gBAEftN,KAAK0M,SAAS,CACZxE,KAAMoE,EAAYQ,WAAWwB,uBAGjC,KAAK,GACL,IAAK,MACH,OAAOxJ,EAAUhB,UAGtBa,EAAU3E,YAGhB,CACD2C,IAAK,qBACLlC,MAAO,SAA4BmG,EAASF,GAC1C,OAAO3G,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAASoC,IAChC,IAAgBuJ,EAAgBC,EAChC,OAAO1O,EAAoBkD,MAAK,SAAmBqC,GACjD,OACE,OAAQA,EAAUnC,KAAOmC,EAAU1E,MACjC,KAAK,EAIH,OAHaX,KAAKwM,QAAQlF,iBAAiBV,GAC3C2H,EAAiB,IAAIlC,EAAU7J,QAAQnB,OAAO+F,OAAO,GAAIV,GAAgBE,EAAS5G,KAAKoE,SACvFiB,EAAU1E,KAAO,EACVX,KAAKwM,QAAQiC,YAAYF,EAAeG,WAAY1O,KAAKoE,SAElE,KAAK,IACHoK,EAAUnJ,EAAU7B,MAEPiB,MAAQ,WAAY+J,EAC/BxO,KAAKyM,UAAU,CACbkC,OAAQ,CAAC,8BAGX3O,KAAKyM,UAAU,CACbE,WAAY6B,EAAQ/J,OAEtBzE,KAAK0M,SAAS,CACZxE,KAAMoE,EAAYQ,WAAW8B,+BAInC,KAAK,EACL,IAAK,MACH,OAAOvJ,EAAUvB,UAGtBkB,EAAUhF,YAGhB,CACD2C,IAAK,sBACLlC,MAAO,WACL,OAAOV,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAAS6C,IAChC,OAAO3F,EAAoBkD,MAAK,SAAmB4C,GACjD,OACE,OAAQA,EAAU1C,KAAO0C,EAAUjF,MACjC,KAAK,EAEH,OADAiF,EAAUjF,KAAO,EACVX,KAAKiN,uBAEd,KAAK,EAEH,OADArH,EAAUjF,KAAO,EACVX,KAAKkN,qBAEd,KAAK,EAEH,OADAtH,EAAUjF,KAAO,EACVX,KAAKqJ,gBAEd,KAAK,EACHrJ,KAAKyM,UAAU,CACboC,aAAa,IAGjB,KAAK,EACL,IAAK,MACH,OAAOjJ,EAAU9B,UAGtB2B,EAAUzF,cAKZuM,EAlRT,GAqRAhL,EAAQiB,QAAU+J,G,iCC3UlB,IAAI3M,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAEvBqB,EAAkBlB,MAAQA,KAAKkB,iBAAmB,SAAUC,GAC9D,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnC,QAAWA,IAIfE,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAIqO,EAAQ5N,EAAgB,EAAQ,MAEhC6N,EAAS7N,EAAgB,EAAQ,MAEjC8N,EAAkB9N,EAAgB,EAAQ,MAE1C+N,EAAS/N,EAAgB,EAAQ,MAEjCgO,EAAYhO,EAAgB,EAAQ,MAEpCoL,EAAc,EAAQ,KAEtB6C,EAAc,EAAQ,IAEtBC,EAEJ,WACE,SAASA,EAAY/H,EAAcsF,EAAYjG,EAAe2I,GAC5DzP,EAAgBI,KAAMoP,GAEtBpP,KAAKsP,OAASD,EAAME,QAAQ3F,MAAK,SAAU0F,GACzC,OAAOA,EAAO9H,OAAS6H,EAAMG,kBAE/BxP,KAAKyP,OAASN,EAAYO,oBAC1B1P,KAAKqH,aAAeA,EACpBrH,KAAK2M,WAAaA,EAClB3M,KAAK0G,cAAgBA,EACrB1G,KAAK2P,YACL3P,KAAK4P,eAmDP,OAhDA/P,EAAauP,EAAa,CAAC,CACzBzM,IAAK,eACLlC,MAAO,WACL,IAGIoP,EAHAC,EAAsB9P,KAAK0G,cAC3BqJ,EAAYD,EAAoBC,UAChCC,EAAYF,EAAoBE,UAGpC,IAAyD,IAArD1D,EAAY2D,iBAAiBC,QAAQH,GACvC,MAAM,IAAItG,MAAM,kBAAkBtG,OAAO4M,EAAW,oCAAoC5M,OAAOmJ,EAAY2D,iBAAiB1L,KAAK,KAAM,MAGvH,QAAdwL,IACFF,EAAQ,IAAIf,EAAMtM,QAAQxC,KAAKyP,OAAQzP,KAAKqH,aAAcrH,KAAK2M,WAAY3M,KAAKsP,QAAQa,YAGxE,QAAdJ,IAEAF,EADgB,eAAdG,EACM,IAAIjB,EAAOvM,QAAQxC,KAAKyP,OAAQzP,KAAKqH,aAAcrH,KAAK2M,WAAY3M,KAAKsP,QAAQa,WAEjF,IAAInB,EAAgBxM,QAAQxC,KAAKyP,OAAQzP,KAAKqH,aAAcrH,KAAK2M,WAAY3M,KAAKsP,QAAQa,YAIpF,SAAdJ,IACFF,EAAQ,IAAIZ,EAAOzM,QAAQxC,KAAKyP,OAAQzP,KAAKqH,aAAcrH,KAAK2M,WAAY3M,KAAKsP,QAAQa,YAGzE,YAAdJ,IACFF,EAAQ,IAAIX,EAAU1M,QAAQxC,KAAKyP,OAAQzP,KAAKqH,aAAcrH,KAAK2M,WAAY3M,KAAKsP,QAAQa,YAG9FnQ,KAAKyP,OAASpO,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,QAASI,KAE7D,CACDlN,IAAK,YACLlC,MAAO,WACLT,KAAKyP,OAASpO,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,QAAS,CAC1D5N,OAAQR,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,OAAO5N,QAAS7B,KAAKqH,aAAaxF,YAGlF,CACDc,IAAK,WACLlC,MAAO,WACL,OAAOT,KAAKyP,WAITL,EA/DT,GAkEA7N,EAAQiB,QAAU4M,G,iCChGlB,IAAIxP,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAE3BwB,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAI6L,EAAc,EAAQ,IAEtB8D,EAEJ,WACE,SAASA,EAAIX,EAAQpI,EAAcsF,EAAY2C,GAC7C1P,EAAgBI,KAAMoQ,GAEtBpQ,KAAKyP,OAASA,EACdzP,KAAKsP,OAASA,EACdtP,KAAKqH,aAAeA,EACpBrH,KAAK2M,WAAaA,EAClB3M,KAAKqQ,iBACLrQ,KAAKsQ,qBA0HP,OAvHAzQ,EAAauQ,EAAK,CAAC,CACjBzN,IAAK,iBACLlC,MAAO,WACLT,KAAKyP,OAASpO,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,QAAS,CAC1Dc,OAAQvQ,KAAKwQ,YACbC,MAAOzQ,KAAK0Q,WACZjM,KAAMzE,KAAK2Q,WACXC,mBAAoB5Q,KAAK6Q,wBAG5B,CACDlO,IAAK,qBACLlC,MAAO,WACLT,KAAKyP,OAASpO,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,QAAS,CAC1DqB,MAAO,IACPC,OAAQ,QAGX,CACDpO,IAAK,oBACLlC,MAAO,WACL,MAAO,CAAC,CACN+G,KAAM,UACN3F,OAAQ,CACNgD,OAAQ,CAAC,CACPuD,OAAQ,IACR4I,SAAU,IACV9I,KAAM,SACN+I,OAAQ,OACP,CACD7I,OAAQ,IACR4I,SAAU,IACV9I,KAAM,SACN+I,OAAQ,aAKf,CACDtO,IAAK,YACLlC,MAAO,WACL,MAAO,CAAC,CACN+G,KAAM,IACNU,KAAM,UACNgJ,OAAQ,CACNzM,KAAM,QACNgJ,MAAOnB,EAAY6E,UAAU1Q,OAE/BmL,MAAO5L,KAAKsP,OAAStP,KAAKsP,OAAO8B,SAAW,iBAG/C,CACDzO,IAAK,WACLlC,MAAO,WACL,MAAO,CAAC,CACNyH,KAAM,MACNmJ,KAAM,CACJ5M,KAAM,SAER6M,OAAQ,CACNC,MAAO,CACLC,QAAS,CACPC,OAAQ,yCAEVC,KAAM,CACJC,MAAO,IACPlE,MAAOnB,EAAY6E,UAAU1Q,OAE/BmR,EAAG,CACDH,OAAQ,aAEVI,EAAG,CACDJ,OAAQ,eAGZK,OAAQ,CACNC,WAAY,CACVtE,MAAO,cAETuE,SAAU,CACRvE,MAAO,YAETwE,YAAa,CACXR,OAAQ,2CAEVS,YAAa,CACXT,OAAQ,4CAGZU,MAAO,CACLC,QAAS,CACP3R,MAAO,UAMhB,CACDkC,IAAK,WACLlC,MAAO,WAEL,MAAO,CAAC,CACNuH,OAFehI,KAAK2M,WAGpBnF,KAAM,QACN6K,UAAW,CAAC,CACVnK,KAAM,MACNuF,MAAOnB,EAAY6E,UAAUC,SAC7BW,WAAY,EACZC,SAAU,WAIf,CACDrP,IAAK,WACLlC,MAAO,WACL,OAAOT,KAAKyP,WAITW,EAnIT,GAsIA7O,EAAQiB,QAAU4N,G,iCClJlB,IAAIxQ,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAE3BwB,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAI6L,EAAc,EAAQ,IAEtBgG,EAEJ,WACE,SAASA,EAAK7C,EAAQpI,EAAcsF,EAAY2C,GAC9C1P,EAAgBI,KAAMsS,GAEtBtS,KAAKyP,OAASA,EACdzP,KAAKqH,aAAeA,EACpBrH,KAAK2M,WAAaA,EAClB3M,KAAKsP,OAASA,EACdtP,KAAKqQ,iBACLrQ,KAAKsQ,qBA0LP,OAvLAzQ,EAAayS,EAAM,CAAC,CAClB3P,IAAK,iBACLlC,MAAO,WACLT,KAAKyP,OAASpO,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,QAAS,CAC1D8C,KAAMvS,KAAKwS,UACXjC,OAAQvQ,KAAKwQ,YACbC,MAAOzQ,KAAK0Q,WACZjM,KAAMzE,KAAK2Q,WACXC,mBAAoB5Q,KAAK6Q,oBACzBhP,OAAQR,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKsP,OAAOzN,QAAS,CAC3D4Q,KAAM,CACJf,KAAM1R,KAAKsP,OAAStP,KAAKsP,OAAOoD,UAAY1S,KAAKyP,OAAO5N,OAAO4Q,KAAKf,YAK3E,CACD/O,IAAK,qBACLlC,MAAO,WACLT,KAAKyP,OAASpO,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,QAAS,CAC1DsB,OAAQ,IACR4B,SAAU,CACRzK,KAAM,MACN0K,SAAU,WAEZC,QAAS,OAGZ,CACDlQ,IAAK,YACLlC,MAAO,WACL,MAAO,CAAC,CACN+G,KAAM,IACNU,KAAM,OACNgJ,OAAQ,CACNzM,KAAM,QACNgJ,MAAO,MAET7B,MAAO,QACPiH,QAAS,KACR,CACDrL,KAAM,IACNU,KAAM,SACNgJ,OAAQ,CACNzM,KAAM,QACNgJ,MAAOnB,EAAY6E,UAAUC,UAE/B0B,MAAM,EACNC,MAAM,EACNnH,MAAO,aAGV,CACDjJ,IAAK,WACLlC,MAAO,WACL,MAAO,CAAC,CACNyH,KAAM,OACNmJ,KAAM,CACJ5M,KAAM,SAER6M,OAAQ,CACNC,MAAO,CACLC,QAAS,CACPC,OAAQ,0CAGZK,OAAQ,CACNM,QAAS,CACP3R,MAAO,GAETmR,EAAG,CACDD,MAAO,IACPlE,MAAO,MAETqD,MAAO,CACLa,MAAO,IACPqB,KAAM,GAERnB,EAAG,CACDF,MAAO,IACPlE,MAAO,KAETwF,GAAI,CACFtB,MAAO,IACPlR,MAAO,IAGX0R,MAAO,CACLC,QAAS,CACP3R,MAAO,UAMhB,CACDkC,IAAK,oBACLlC,MAAO,WACL,MAAO,CAAC,CACN+G,KAAM,UACN3F,OAAQ,CACNgD,OAAQ,CAAC,CACPuD,OAAQ,IACR4I,SAAU,IACV9I,KAAM,SACN+I,OAAQ,OACP,CACD7I,OAAQ,IACR4I,SAAU,IACV9I,KAAM,SACN+I,OAAQ,aAKf,CACDtO,IAAK,UACLlC,MAAO,WACL,MAAO,CAACY,OAAO+F,OAAO/F,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,OAAOyD,MAAOlT,KAAKyP,OAAO0D,OAAQ,CAC3FC,OAAQ,SACRzB,MAAO,IACP0B,aAAc,SACdC,OAAO,EACPhC,OAAQ,CACNiC,OAAQ,CACNzB,OAAQ,CACN0B,KAAM,CACJ/B,OAAQ,kIAEVgC,MAAO,CACLhC,OAAQ,mEAEViC,SAAU,CACRjC,OAAQ,iEAEVkC,MAAO,CACLlC,OAAQ,6DAKdpQ,OAAO+F,OAAO/F,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,OAAOyD,MAAOlT,KAAKyP,OAAOmE,OAAQ,CACvFR,OAAQ,OACRzB,MAAO,IACP0B,aAAc,SACdpC,OAAQ,IACRK,OAAQ,CACNiC,OAAQ,CACNzB,OAAQ,CACN2B,MAAO,CACLhT,MAAO,SAETiT,SAAU,CACRjT,MAAO,kBAOlB,CACDkC,IAAK,WACLlC,MAAO,WAEL,MAAO,CAAC,CACNuH,OAFehI,KAAK2M,WAGpBnF,KAAM,QACN6K,UAAW,CAAC,CACVnK,KAAM,aACN2L,GAAI,MACH,CACD3L,KAAM,gBACN2L,GAAI,CAAC,eAIV,CACDlR,IAAK,WACLlC,MAAO,WACL,OAAOT,KAAKyP,WAIT6C,EAnMT,GAsMA/Q,EAAQiB,QAAU8P,G,iCClNlB,IAAI1S,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAE3BwB,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAI6L,EAAc,EAAQ,IAEtBwH,EAEJ,WACE,SAASA,EAAarE,EAAQpI,EAAcsF,EAAY2C,GACtD1P,EAAgBI,KAAM8T,GAEtB9T,KAAKyP,OAASA,EACdzP,KAAKqH,aAAeA,EACpBrH,KAAK2M,WAAaA,EAClB3M,KAAKsP,OAASA,EACdtP,KAAKqQ,iBACLrQ,KAAKsQ,qBA0KP,OAvKAzQ,EAAaiU,EAAc,CAAC,CAC1BnR,IAAK,iBACLlC,MAAO,WACLT,KAAKyP,OAASpO,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,QAAS,CAC1D8C,KAAMvS,KAAKwS,UACXjC,OAAQvQ,KAAKwQ,YACbC,MAAOzQ,KAAK0Q,WACZjM,KAAMzE,KAAK2Q,WACXC,mBAAoB5Q,KAAK6Q,oBACzBhP,OAAQR,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKsP,OAAOzN,QAAS,CAC3D4Q,KAAM,CACJf,KAAM1R,KAAKsP,OAAStP,KAAKsP,OAAOoD,UAAY1S,KAAKyP,OAAO5N,OAAO4Q,KAAKf,YAK3E,CACD/O,IAAK,qBACLlC,MAAO,WACLT,KAAKyP,OAASpO,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,QAAS,CAC1DsB,OAAQ,IACR4B,SAAU,CACRzK,KAAM,MACN0K,SAAU,WAEZC,QAAS,OAGZ,CACDlQ,IAAK,YACLlC,MAAO,WACL,MAAO,CAAC,CACN+G,KAAM,IACNU,KAAM,SACNgJ,OAAQ,CACNzM,KAAM,QACNgJ,MAAOnB,EAAY6E,UAAUC,UAE/BxF,MAAO,SACN,CACDpE,KAAM,IACNU,KAAM,OACNgJ,OAAQ,CACNzM,KAAM,QACNgJ,MAAO,KAET7B,MAAO,SACPiH,QAAS,QAGZ,CACDlQ,IAAK,UACLlC,MAAO,WACL,MAAO,CAACY,OAAO+F,OAAO/F,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,OAAOyD,MAAOlT,KAAKyP,OAAO0D,OAAQ,CAC3FC,OAAQ,SACRzB,MAAO,IACPoC,MAAM,EACNV,aAAc,WACZhS,OAAO+F,OAAO/F,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,OAAOyD,MAAOlT,KAAKyP,OAAOmE,OAAQ,CACvFR,OAAQ,OACRzB,MAAO,IACP0B,aAAc,SACdC,OAAO,EACPS,MAAM,EACNzC,OAAQ,CACNiC,OAAQ,CACNzB,OAAQ,CACN0B,KAAM,CACJ/B,OAAQ,6BAEVgC,MAAO,CACLhC,OAAQ,mEAEViC,SAAU,CACRjC,OAAQ,yEAOnB,CACD9O,IAAK,WACLlC,MAAO,WACL,MAAO,CAAC,CACNyH,KAAM,OACNmJ,KAAM,CACJ5M,KAAM,SAER6M,OAAQ,CACNC,MAAO,CACLC,QAAS,CACPC,OAAQ,0CAGZK,OAAQ,CACNM,QAAS,CACP3R,MAAO,GAETmR,EAAG,CACDD,MAAO,IACPlR,MAAO,GAETuT,GAAI,CACFrC,MAAO,IACPlE,MAAOnB,EAAY6E,UAAUC,UAE/BS,EAAG,CACDF,MAAO,IACPlE,MAAO,KAETsD,OAAQ,CACNY,MAAO,IACPqB,KAAM,IAGVb,MAAO,CACLC,QAAS,CACP3R,MAAO,UAMhB,CACDkC,IAAK,oBACLlC,MAAO,WACL,MAAO,CAAC,CACN+G,KAAM,UACN3F,OAAQ,CACNgD,OAAQ,CAAC,CACPuD,OAAQ,IACR4I,SAAU,IACV9I,KAAM,SACN+I,OAAQ,OACP,CACD7I,OAAQ,IACR4I,SAAU,IACV9I,KAAM,SACN+I,OAAQ,aAKf,CACDtO,IAAK,WACLlC,MAAO,WAEL,MAAO,CAAC,CACNuH,OAFehI,KAAK2M,WAGpBnF,KAAM,QACN6K,UAAW,CAAC,CACVnK,KAAM,aACN2L,GAAI,MACH,CACD3L,KAAM,gBACN2L,GAAI,CAAC,eAIV,CACDlR,IAAK,WACLlC,MAAO,WACL,OAAOT,KAAKyP,WAITqE,EAnLT,GAsLAvS,EAAQiB,QAAUsR,G,iCClMlB,IAAIlU,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAE3BwB,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAI6L,EAAc,EAAQ,IAEtB2H,EAEJ,WACE,SAASA,EAAKxE,EAAQpI,EAAcsF,EAAY2C,GAC9C1P,EAAgBI,KAAMiU,GAEtBjU,KAAKyP,OAASA,EACdzP,KAAKqH,aAAeA,EACpBrH,KAAK2M,WAAaA,EAClB3M,KAAKsP,OAASA,EACdtP,KAAKqQ,iBACLrQ,KAAKsQ,qBA2OP,OAxOAzQ,EAAaoU,EAAM,CAAC,CAClBtR,IAAK,iBACLlC,MAAO,WACLT,KAAKyP,OAASpO,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,QAAS,CAC1D8C,KAAMvS,KAAKwS,UACXjC,OAAQvQ,KAAKwQ,YACbC,MAAOzQ,KAAK0Q,WACZjM,KAAMzE,KAAK2Q,WACXC,mBAAoB5Q,KAAK6Q,oBACzBhP,OAAQR,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,OAAO5N,QAAS,CAC3DqS,KAAM7S,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,OAAO5N,OAAOqS,MAAO,CAC9DC,OAAQnU,KAAKsP,OAAStP,KAAKsP,OAAOoD,UAAY1S,KAAKyP,OAAO5N,OAAOqS,KAAKC,SAExEC,OAAQ/S,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,OAAO5N,OAAOuS,QAAS,CAClE1C,KAAM1R,KAAKsP,OAAStP,KAAKsP,OAAOoD,UAAY1S,KAAKyP,OAAO5N,OAAOuS,OAAO1C,SAG1E2C,QAAS,CAAC,CACR7M,KAAM,QACN/G,MAAO,KACP6T,GAAI,CAAC,CACHC,OAAQ,kBACRzC,OAAQ,SACP,CACDyC,OAAQ,iBACRzC,OAAQ,eAKf,CACDnP,IAAK,qBACLlC,MAAO,WACLT,KAAKyP,OAASpO,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,QAAS,CAC1DsB,OAAQ,IACR4B,SAAU,CACRzK,KAAM,MACN0K,SAAU,WAEZC,QAAS,OAGZ,CACDlQ,IAAK,oBACLlC,MAAO,WACL,MAAO,CAAC,CACN+G,KAAM,UACN3F,OAAQ,CACNgD,OAAQ,CAAC,CACPuD,OAAQ,IACR4I,SAAU,IACV9I,KAAM,SACN+I,OAAQ,OACP,CACD7I,OAAQ,IACR4I,SAAU,IACV9I,KAAM,gBAKb,CACDvF,IAAK,YACLlC,MAAO,WACL,MAAO,CAAC,CACN+G,KAAM,IACNU,KAAM,QACN0D,MAAO,QACPsF,OAAQ,CACNzM,KAAM,QACNgJ,MAAO,MAER,CACDjG,KAAM,IACNU,KAAM,SACN0D,MAAO,SACPkH,MAAM,EACNC,MAAM,EACN7B,OAAQ,CACNzM,KAAM,QACNgJ,MAAOnB,EAAY6E,UAAUC,cAIlC,CACDzO,IAAK,WACLlC,MAAO,WACL,MAAO,CAAC,CACN+G,KAAM,QACNgN,aAAa,EACbtM,KAAM,OACNmJ,KAAM,CACJ5M,KAAM,SAER6M,OAAQ,CACNC,MAAO,CACLK,EAAG,CACDD,MAAO,IACPlE,MAAO,KAEToE,EAAG,CACDF,MAAO,IACPlE,MAAO,KAETgH,UAAW,CACThU,MAAO,SAETiU,YAAa,CACXjU,MAAO,GAETkU,WAAY,CACVlU,MAAO,YAIZ,CACD+G,KAAM,SACNgN,aAAa,EACbtM,KAAM,SACNmJ,KAAM,CACJ5M,KAAM,QAER6M,OAAQ,CACNC,MAAO,CACLK,EAAG,CACDD,MAAO,IACPlE,MAAO,KAEToE,EAAG,CACDF,MAAO,IACPlE,MAAO,MAGXqE,OAAQ,CACNM,QAAS,CACP3R,MAAO,MAIZ,CACD+G,KAAM,OACNU,KAAM,OACNmJ,KAAM,CACJ5M,KAAM,SAER4N,UAAW,CAAC,CACVnK,KAAM,UACN0J,EAAG,UACHC,EAAG,UACH+C,KAAM,CAAC,CACLnD,OAAQ,SACP,CACDA,OAAQ,aAGZH,OAAQ,CACNC,MAAO,CACLC,QAAS,CACPC,OAAQ,wBAGZK,OAAQ,CACN+C,KAAM,CACJpH,MAAO,QAETiE,KAAM,CACJjR,MAAO,OAET2R,QAAS,CACP3R,MAAO,SAMhB,CACDkC,IAAK,UACLlC,MAAO,WACL,MAAO,CAACY,OAAO+F,OAAO/F,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,OAAOyD,MAAOlT,KAAKyP,OAAO0D,OAAQ,CAC3FC,OAAQ,SACRzB,MAAO,IACP0B,aAAc,SACdC,OAAO,IACLjS,OAAO+F,OAAO/F,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,OAAOyD,MAAOlT,KAAKyP,OAAOmE,OAAQ,CACvFR,OAAQ,OACRzB,MAAO,IACP0B,aAAc,SACdpC,OAAQ,IACRK,OAAQ,CACNiC,OAAQ,CACNzB,OAAQ,CACN2B,MAAO,CACLhT,MAAO,SAETiT,SAAU,CACRjT,MAAO,kBAOlB,CACDkC,IAAK,WACLlC,MAAO,WAEL,MAAO,CAAC,CACNuH,OAFehI,KAAK2M,WAGpBnF,KAAM,QACN6K,UAAW,CAAC,CACVnK,KAAM,aACN2L,GAAI,MACH,CACD3L,KAAM,gBACN2L,GAAI,CAAC,YAEN,CACDrM,KAAM,OACNsN,OAAQ,QACRzC,UAAW,CAAC,CACVnK,KAAM,SACN6M,KAAM,2CAIX,CACDpS,IAAK,WACLlC,MAAO,WACL,OAAOT,KAAKyP,WAITwE,EApPT,GAuPA1S,EAAQiB,QAAUyR,G,iCCnQlB,IAAIrU,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAE3BwB,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAI6L,EAAc,EAAQ,IAEtB0I,EAEJ,WACE,SAASA,EAAQvF,EAAQpI,EAAcsF,GACrC/M,EAAgBI,KAAMgV,GAEtBhV,KAAKyP,OAASA,EACdzP,KAAKqH,aAAeA,EACpBrH,KAAK2M,WAAaA,EAClB3M,KAAKqQ,iBACLrQ,KAAKsQ,qBAyIP,OAtIAzQ,EAAamV,EAAS,CAAC,CACrBrS,IAAK,iBACLlC,MAAO,WACLT,KAAKyP,OAASpO,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,QAAS,CAC1D8C,KAAMvS,KAAKwS,UACXjC,OAAQvQ,KAAKwQ,YACbC,MAAOzQ,KAAK0Q,WACZjM,KAAMzE,KAAK2Q,eAGd,CACDhO,IAAK,qBACLlC,MAAO,WACLT,KAAKyP,OAASpO,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAKyP,QAAS,CAC1DsB,OAAQ,IACR4B,SAAU,CACRzK,KAAM,MACN0K,SAAU,WAEZC,QAAS,OAGZ,CACDlQ,IAAK,YACLlC,MAAO,WACL,MAAO,CAAC,CACN,KAAQ,SACR,KAAQ,SACR,OAAS,EACT,MAAQ,EACR,MAAQ,EACR,OAAU,CACRgE,KAAM,QACNgJ,MAAOnB,EAAY6E,UAAU1Q,OAE/B,MAAS,SACR,CACD,KAAQ,SACR,KAAQ,SACR,OAAS,EACT,MAAQ,EACR,MAAQ,EACR,OAAU,CACRgE,KAAM,QACNgJ,MAAOnB,EAAY6E,UAAUC,UAE/B,MAAS,aAGZ,CACDzO,IAAK,WACLlC,MAAO,WACL,MAAO,CAAC,CACN,KAAQ,QACR,KAAQ,SACR,KAAQ,CACN,KAAQ,SAEV,OAAU,CACR,OAAU,CACR,EAAK,CACH,MAAS,SACT,MAAS,KAEX,EAAK,CACH,MAAS,SACT,MAAS,KAEX,cAAiB,CACf,MAAS,GAEX,OAAU,CACR,MAAS,GAEX,QAAW,CACT,MAAS,KAGb,MAAS,CACP,cAAiB,CACf,MAAS,GAEX,OAAU,CACR,MAAS,GAEX,QAAW,CACT,MAAS,SAMlB,CACDkC,IAAK,UACLlC,MAAO,WACL,MAAO,CAAC,CACN,MAAS,SACT,aAAgB,SAChB,OAAU,SACV,OAAU,CACR,OAAU,CACR,OAAU,CACR,MAAS,CACP,MAAS,UAEX,SAAY,CACV,MAAS,WAKhB,CACD,MAAS,SACT,aAAgB,SAChB,OAAU,OACV,OAAU,QAGb,CACDkC,IAAK,WACLlC,MAAO,WAEL,MAAO,CAAC,CACNuH,OAFehI,KAAK2M,WAGpBnF,KAAM,YAGT,CACD7E,IAAK,WACLlC,MAAO,WACL,OAAOT,KAAKyP,WAITuF,EAjJT,GAoJAzT,EAAQiB,QAAUwS,G,iCChKlB3T,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAETc,EAAQ0O,iBAAmB,CAAC,MAAO,MAAO,OAAQ,WAClD1O,EAAQiB,QAAU,CAChByN,iBAAkB1O,EAAQ0O,mB,iCCL5B,IAAInQ,EAAsB,EAAQ,GAE9BF,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAEvBE,EAAYC,MAAQA,KAAKD,WAAa,SAAUE,EAASC,EAAYC,EAAGC,GAO1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GACjD,SAASC,EAAUC,GACjB,IACEC,EAAKN,EAAUO,KAAKF,IACpB,MAAOG,GACPL,EAAOK,IAIX,SAASC,EAASJ,GAChB,IACEC,EAAKN,EAAiB,MAAEK,IACxB,MAAOG,GACPL,EAAOK,IAIX,SAASF,EAAKI,GAvBhB,IAAeL,EAwBXK,EAAOC,KAAOT,EAAQQ,EAAOL,QAxBlBA,EAwBiCK,EAAOL,MAvB9CA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAClDA,EAAQG,OAsBkDO,KAAKR,EAAWK,GAG5EH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAI9DO,EAAkBlB,MAAQA,KAAKkB,iBAAmB,SAAUC,GAC9D,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnC,QAAWA,IAIfE,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAI6L,EAAc,EAAQ,IAEtB2I,EAAY/T,EAAgB,EAAQ,KAEpCgU,EAEJ,WACE,SAASA,IACPtV,EAAgBI,KAAMkV,GAEtBlV,KAAKmV,WAAa,CAChBpF,UAAW,KACXC,UAAW,MAEbhQ,KAAK0G,cAAgB,CACnBjG,MAAO,KACP2Q,SAAU,KACVgE,QAAS,KACTC,kBAAmB,KACnBzO,QAAS,KACT0O,iBAAkB,KAClBtC,KAAM,KACNuC,MAAO,KACPC,MAAO,MAgGX,OA5FA3V,EAAaqV,EAAY,CAAC,CACxBvS,IAAK,aACLlC,MAAO,SAAoBgV,GACzB,IAAIC,EAAuBD,EAAM/O,cAC7BiP,EAAwBD,EAAqB3F,UAC7CA,OAAsC,IAA1B4F,EAAmC,KAAOA,EACtDC,EAAyBF,EAAqB1F,UAC9CA,OAAuC,IAA3B4F,EAAoC,KAAOA,EAC3D5V,KAAKmV,WAAa,CAChBpF,UAAWA,EACXC,UAAWA,KAGd,CACDrN,IAAK,iBACLlC,MAAO,SAAwBgV,GAC7B,IAAII,EAASJ,EAAMI,OACfC,EAAwBL,EAAM/O,cAC9BqJ,EAAY+F,EAAsB/F,UAClCC,EAAY8F,EAAsB9F,UAClC+F,GAAad,EAAUzS,QAAQxC,KAAKmV,WAAY,CAClDpF,UAAWA,EACXC,UAAWA,IAMb,OAJAhQ,KAAKmV,WAAa,CAChBpF,UAAWA,EACXC,UAAWA,GAEN+F,GAAaF,EAAOhH,cAE5B,CACDlM,IAAK,yBACLlC,MAAO,SAAgCgV,GACrC,IAAII,EAASJ,EAAMI,OACfG,EAAwBP,EAAM/O,cAU9BuP,EAAuB,CACzBxV,MAVUuV,EAAsBvV,MAWhC2Q,SAVa4E,EAAsB5E,SAWnCgE,QAVYY,EAAsBZ,QAWlCC,kBAVsBW,EAAsBX,kBAW5CzO,QAVYoP,EAAsBpP,QAWlC0O,iBAVqBU,EAAsBV,iBAW3CtC,KAVSgD,EAAsBhD,KAW/BuC,MAVUS,EAAsBT,MAWhCC,MAVUQ,EAAsBR,OAY9BO,GAAad,EAAUzS,QAAQxC,KAAK0G,cAAeuP,GAEvD,OADAjW,KAAK0G,cAAgBuP,EACdF,GAAaF,EAAOhH,cAE5B,CACDlM,IAAK,OACLlC,MAAO,SAAcgG,GACnB,OAAO1G,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAAS0G,IAChC,IAAI4M,EACJ,OAAOpW,EAAoBkD,MAAK,SAAkBuG,GAChD,OACE,OAAQA,EAASrG,KAAOqG,EAAS5I,MAC/B,KAAK,EAWH,OAVAuV,EAAU,GAENlW,KAAKmW,eAAe1P,IACtByP,EAAQ9J,KAAKE,EAAYQ,WAAWsJ,yBAGlCpW,KAAKqW,uBAAuB5P,IAC9ByP,EAAQ9J,KAAKE,EAAYQ,WAAWwJ,gCAG/B/M,EAAS7F,OAAO,SAAUwS,GAEnC,KAAK,EACL,IAAK,MACH,OAAO3M,EAASzF,UAGrBwF,EAAStJ,cAKXkV,EAjHT,GAoHA3T,EAAQiB,QAAU0S,G,gCC1KlB,IAAIhU,EAAkBlB,MAAQA,KAAKkB,iBAAmB,SAAUC,GAC9D,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnC,QAAWA,IAIfE,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAI8V,EAAYrV,EAAgB,EAAQ,MAExCK,EAAQkB,eAAiB8T,EAAU/T,QAEnC,IAAIgU,EAAWtV,EAAgB,EAAQ,MAEvCK,EAAQmB,cAAgB8T,EAAShU,QAEjC,IAAI6J,EAAYnL,EAAgB,EAAQ,KAExCK,EAAQ6H,eAAiBiD,EAAU7J,QAEnC,IAAIiU,EAASvV,EAAgB,EAAQ,MAErCK,EAAQgL,YAAckK,EAAOjU,QAE7B,IAAIkU,EAASxV,EAAgB,EAAQ,MAErCK,EAAQ6N,YAAcsH,EAAOlU,QAE7B,IAAImU,EAAWzV,EAAgB,EAAQ,KAEvCK,EAAQqV,cAAgBD,EAASnU,QAEjC,IAAIqU,EAAgB3V,EAAgB,EAAQ,MAE5CK,EAAQ2T,WAAa2B,EAAcrU,QAEnC,IAAI8J,EAAcpL,EAAgB,EAAQ,KAE1CK,EAAQuV,UAAYxK,EAAY9J,S,iCCxChC,IAAI5C,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAE3BwB,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAIkJ,EAAW,EAAQ,IAEnBoN,EAEJ,WACE,SAASA,EAAaC,GACpBpX,EAAgBI,KAAM+W,GAEtB/W,KAAK2P,UAAUqH,GAgBjB,OAbAnX,EAAakX,EAAc,CAAC,CAC1BpU,IAAK,YACLlC,MAAO,SAAmBuW,GACxB,IAAIC,EAAiBtN,EAASuN,KAAKF,EAAQ,CAAC,MAAO,MAAO,eAAgB,UAAW,aAAc,YAAa,YAAa,WAC7HhX,KAAK6B,OAASR,OAAO+F,OAAO/F,OAAO+F,OAAO,GAAIpH,KAAK6B,QAASoV,KAE7D,CACDtU,IAAK,YACLlC,MAAO,WACL,OAAOT,KAAK6B,WAITkV,EApBT,GAuBAxV,EAAQiB,QAAU,SAAUwU,GAC1B,OAAO,IAAID,EAAaC,K,0nEC5Bf,EAAe,SAAsBG,EAAcC,GAC5D,OAAO,aAAQ,SAAU3B,GACvB,MAA+B,oBAAjB0B,EAA8BA,EAAa1B,EAAM,YAAU4B,gBAAkB,KAC1FD,IAGM,EAAe,SAAsBE,GAC9C,OAAO,uBAAe,GAAGnU,OAAO,YAAUkU,cAAe,KAAKlU,OAAOmU,KAG5D,EAAY,SAAmBA,GACxC,MAAO,GAAGnU,OAAO,YAAUkU,cAAe,KAAKlU,OAAOmU,ICpB7C,EAAY,EAAa,oBACrB,GACb7K,UAAW,GCFF,EAAW,EAAa,yBACxB,EAAY,EAAa,0BACrB,GACb8K,SAAU,EACVC,UAAW,G,mFCJFC,GAAmB,EAAa,kCAChC,GAAqB,EAAa,oCAClCC,GAAoB,EAAa,mCAC7B,IACbA,kBAAmBA,GACnBD,iBAAkBA,GAClBE,mBAAoB,I,SCAlB/K,GAAa,SAAoB6I,GACnC,OAAOA,EAAMI,OAAOzR,SAaXwT,IAV0B,aAAe,CAR7B,SAA0BnC,GAC/C,OAAOA,EAAM/O,eAOwDkG,KAAa,SAAUlG,EAAetC,GAC3G,IAAKA,IAAYA,EAAQmB,KAAOnB,EAAQM,aAAeN,EAAQM,WAAWyJ,SACxE,OAAO,KAGT,IAAI1N,EAAQ2D,EAAQM,WAAWyJ,SAAS,GAAGzJ,WAAWsJ,QAAQtH,EAAcjG,MAAM+G,MAClF,OAAO,YAAc,GAAI/G,EAAO,CAC9BoX,WAAYnR,EAAcjG,MAAM+G,UAGN,aAAe,CAACoF,KAAa,SAAUxI,GACnE,OAAKA,GAAYA,EAAQmB,IAAOnB,EAAQM,YAAeN,EAAQM,WAAWoT,oBAI5D1T,EAAQM,WAAWoT,oBAAoBjQ,KAAI,SAAUY,GACjE,OAAO,YAAc,GAAIrE,EAAQM,WAAWyJ,SAAS,GAAGzJ,WAAWsJ,QAAQvF,GAAO,CAChFoP,WAAYpP,EACZjB,KAAMiB,OAND,O,kBCOI,GA5BI,WACjB,OAAO,IAAMsP,cAAc,MAAO,CAChCjH,MAAO,OACPC,OAAQ,OACRiH,QAAS,YACTC,QAAS,OACR,IAAMF,cAAc,IAAK,CAC1BxS,GAAI,YACJ4O,OAAQ,OACRO,YAAa,IACbhD,KAAM,OACNwG,SAAU,WACT,IAAMH,cAAc,IAAK,CAC1BxS,GAAI,iBACJ8M,UAAW,sCACXX,KAAM,WACL,IAAMqG,cAAc,IAAK,CAC1BxS,GAAI,iCACJ8M,UAAW,qCACV,IAAM0F,cAAc,IAAK,CAC1BxS,GAAI,WACJ8M,UAAW,mCACV,IAAM0F,cAAc,OAAQ,CAC7BI,EAAG,mOACH5S,GAAI,wBCxBG6S,GAAuB,IAAOC,IAAIC,WAAW,CACtDC,YAAa,8BACbC,YAAa,YAFmB,CAG/B,CAAC,8IAA+I,KAAK,SAAUC,GAChK,MCN0B,aDMnBA,EAAMhF,OAA4B,YAAI,CAAC,iFAErCiF,GAA6B,IAAOL,IAAIC,WAAW,CAC5DC,YAAa,oCACbC,YAAa,YAFyB,CAGrC,CAAC,wLAAyL,4ZAA6Z,MAAM,SAAUC,GACxmB,MCZ0B,aDYnBA,EAAMhF,OAA4B,YAAI,CAAC,uDAC7C,SAAUgF,GACX,MCd0B,aDcnBA,EAAMhF,OAA4B,YAAI,CAAC,8DAErCkF,GAAsB,IAAOC,GAAGN,WAAW,CACpDC,YAAa,6BACbC,YAAa,YAFkB,CAG9B,CAAC,6EAA8E,4EAA4E,SAAUC,GACtK,OAAOA,EAAMI,OAAS,UAAY,aAMzBC,IAJ4B,IAAOT,IAAIC,WAAW,CAC3DC,YAAa,mCACbC,YAAa,YAFwB,CAGpC,CAAC,0HAC0B,IAAOH,IAAIC,WAAW,CAClDC,YAAa,0BACbC,YAAa,YAFe,CAG3B,CAAC,2IACOO,GAAU,IAAOV,IAAIC,WAAW,CACzCC,YAAa,iBACbC,YAAa,YAFM,CAGlB,CAAC,oDEjCJ,SAASQ,KAeP,OAdAA,GAAW3X,OAAO+F,QAAU,SAAU6R,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAI5S,UAAUC,OAAQ2S,IAAK,CACzC,IAAIpE,EAASxO,UAAU4S,GAEvB,IAAK,IAAIvW,KAAOmS,EACVzT,OAAO8X,UAAUC,eAAeC,KAAKvE,EAAQnS,KAC/CsW,EAAOtW,GAAOmS,EAAOnS,IAK3B,OAAOsW,IAGOhY,MAAMjB,KAAMsG,WAQ9B,ICtBe,GDsBH,SAAenC,GACzB,IAAImV,EAAUnV,EAAKmV,QACfC,EAAWpV,EAAKoV,SAChBC,EAAWrV,EAAKqV,SAChBC,EAAWtV,EAAKsV,SAChBC,EAAavV,EAAKuV,WAClBC,EAAcxV,EAAKwV,YACnBC,EAAWL,IAAW,GACtBM,EAAqBF,EAAYlG,MACjCA,OAA+B,IAAvBoG,ED/BgB,aC+BmCA,EAC/D,OAAO,IAAM9B,cAAcK,GAAsBY,GAAS,CACxDvF,MAAOA,EACPqG,IAAKL,GACJC,GAAa,IAAM3B,cAAcW,GAA4B,CAC9DjF,MAAOA,GACN6F,EAAQzR,KAAI,SAAUkS,GACvB,OAAO,IAAMhC,cAAc,WAAU,CACnCpV,IAAKoX,EAAGvS,MACP,IAAMuQ,cAAcY,GAAqB,CAC1CE,OAAQkB,EAAGvS,OAASoS,EAASpS,KAC7BwS,QAAS,WACP,OAAOR,EAASO,KAEjB,IAAMhC,cAAcgB,GAAS,KAAM,IAAMhB,cAAc,GAAc,OAAQgC,EAAGzR,MAAO,MAAO,IAAMyP,cAAce,GAAkB,KAAM,IAAMf,cAAcgB,GAAS,KAAM,KAAMgB,EAAGvS,KAAM,aE5CxLyS,GAAkB,IAAO5B,IAAIC,WAAW,CACjDC,YAAa,yBACbC,YAAa,gBAFc,CAG1B,CAAC,kGAAmG,KAAK,SAAUC,GACpH,MAAuB,aAAhBA,EAAMhF,OAAwB,YAAI,CAAC,0GAMjCyG,IAJiB,IAAO7B,IAAIC,WAAW,CAChDC,YAAa,wBACbC,YAAa,gBAFa,CAGzB,CAAC,uGACqB,CACvB2B,QAAS,WACP,MAAO,CACLC,QAAS,OACTC,OAAQ,mCACRC,aAAc,MACdzH,QAAS,YAIJ0H,GAAe,CACxBC,UAAW,WACT,MAAO,CACLC,SAAU,WACVC,UAAW,aACXC,OAAQ,YAGZC,mBAAoB,WAClB,MAAO,CACLR,QAAS,SAGbS,kBAAmB,SAA2BC,EAAUrF,GACtD,IAAIsF,EAAqBtF,EAAMkE,YAC3BqB,EAAaD,EAAmBC,WAChCvH,EAAQsH,EAAmBtH,MAC/B,MAAO,CACLwH,MAAO,UACP5I,UAAW2I,GAAwB,eAAVvH,EAAyB,iBAAmB,OACrEyH,WAAY,sBAGhBC,oBAAqB,WACnB,MAAO,CACLF,MAAO,UACPb,QAAS,OACTvH,QAAS,MACTqI,WAAY,cACZR,UAAW,aACXD,SAAU,WACVW,IAAK,QAGTjB,QAAS,SAAiBW,EAAUrF,GAClC,IAAI4F,EAAsB5F,EAAMkE,YAC5BlG,EAAQ4H,EAAoB5H,MAC5B6H,EAAwBD,EAAoB5a,MAAM6H,MAGlDwI,EAAQ,GAAG3N,OAAO,GADN,SADsB,IAA1BmY,EAAmC,QAAUA,GAExB/U,OAAoB,MACjDgV,EAA4B,aAAV9H,EAAuB,CAC3CpB,UAAW,kBACT,KACJ,OAAO,YAAc,CACnBmJ,OAAQ,SACRpB,QAAS,OACTC,OAAQ,OACRC,aAAc,MACdxJ,MAAOA,EACP2K,SAAU,QACV5I,QAAS,SACR0I,IAELG,KAAM,SAAcZ,EAAUrF,GAC5B,IACI8F,EAA4B,aADpB9F,EAAMkE,YAAYlG,MACe,CAC3CgH,SAAU,WACVkB,KAAM,QACNP,IAAK,QACLQ,OAAQ,OACR9K,MAAO,SACL,KACJ,OAAO,YAAc,GAAIgK,EAAU,GAAIS,KCnF3C,SAAS,KAeP,OAdA,GAAWla,OAAO+F,QAAU,SAAU6R,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAI5S,UAAUC,OAAQ2S,IAAK,CACzC,IAAIpE,EAASxO,UAAU4S,GAEvB,IAAK,IAAIvW,KAAOmS,EACVzT,OAAO8X,UAAUC,eAAeC,KAAKvE,EAAQnS,KAC/CsW,EAAOtW,GAAOmS,EAAOnS,IAK3B,OAAOsW,IAGOhY,MAAMjB,KAAMsG,WAY9B,IC5Be,GD4BI,SAAsBnC,GACvC,IAAI0X,EAAgB1X,EAAK2X,SACrBA,OAA6B,IAAlBD,GAAmCA,EAK9CE,GAJe5X,EAAK6X,QAEC7X,EAAKuC,cAEbvC,EAAKsP,OAClBA,OAAuB,IAAfsI,EJpCgB,aIoC2BA,EACnDE,EAAgB9X,EAAK+X,SACrBA,OAA6B,IAAlBD,EAA2B,aAAiBA,EACvDE,EAAa,aAAyBhY,EAAM,CAAC,WAAY,UAAW,gBAAiB,QAAS,aAMlG,OAAO,IAAM4T,cAAc,WAAU,KAAM,IAAMA,cAAckC,GAAiB,CAC9ExG,MAAOA,GACN,IAAMsE,cAAc,KAAQ,GAAS,CACtCtE,MAAOA,EACPyI,SARiB,SAAsBE,GACvCF,EAASE,IAQTC,OAAQP,EAAWvB,GAAeL,GAClCoC,WAAYR,EAAW,CACrBS,KAAM,IACJ,MACHJ,OEiBU,GApEG,SAAqBhY,GACrC,IAAI6J,EAAU7J,EAAK6J,QACftH,EAAgBvC,EAAKuC,cACrBiR,EAAqBxT,EAAKwT,mBAC1BlQ,EAAQf,EAAce,MACtB+U,EAAiB9V,EAAc8V,eAC/BC,EAAwB/V,EAAc0K,SACtCsL,EAAgBD,EAAsBnU,MACtCqU,EAAeF,EAAsBjV,KACrCoV,EAAuBlW,EAAcjG,MACrCoc,EAAaD,EAAqBtU,MAClCwU,EAAYF,EAAqBpV,KACjCuV,EAAgB,CAClBzU,MAAOoU,GAAiBF,GAAkBM,EAC1CtV,KAAMmV,GAEJK,EAAkB,CACpB1U,MAAOuU,GAAcpV,GAASqV,EAC9BtV,KAAMsV,GAiBR,OAAO,IAAM/E,cAAc,WAAU,KAAM,IAAMA,cAAc,GAAQ,CACrEtE,MAAO,WACPwJ,cAAe,MACfC,aAAcH,EACdb,SAlByB,SAA8BiB,GAEvDxF,EAAmB,CACjBvG,SAAU,YAAc,GAAI1K,EAAc0K,SAAU,GAAI+L,MAgB1DC,eAAgB,SAAwBhB,GACtC,OAAOA,EAAO9T,OAEhB+U,eAAgB,SAAwBjB,GACtC,OAAOA,EAAOvE,YAEhByB,QAAStL,EACTtH,cAAeA,EACfoV,UAAU,EACVE,SAAS,IACP,IAAMjE,cAAc,GAAQ,CAC9BtE,MAAO,aACPwJ,cAAe,MACfC,aAAcF,EACdd,SA1B2B,SAAgCiB,GAE3DxF,EAAmB,CACjBlX,MAAO,YAAc,GAAIiG,EAAcjG,MAAO,GAAI0c,MAwBpDC,eAAgB,SAAwBhB,GACtC,OAAOA,EAAO9T,OAEhB+U,eAAgB,SAAwBjB,GACtC,OAAOA,EAAOvE,YAEhByB,QAAStL,EACTtH,cAAeA,EACfoV,UAAU,EACVE,SAAS,MChEE,MAAa,SAAUvG,GACpC,MAAO,CACLpG,MAAOoG,EAAMpG,MACb3I,cAAe+O,EAAM/O,cACrBsH,QAAS,GAA2ByH,MAErC,CACDkC,mBAAoB,IAPP,CAQZ,ICLC2F,GAAkB,IAAOjF,IAAIC,WAAW,CAC1CC,YAAa,6BACbC,YAAa,YAFO,CAGnB,CAAC,iJAmBA,GAAqB,SAA4B+E,EAAMnY,GACzD,IAAIP,EAlBuB,SAAgCO,GAE3D,IAAKA,IAAWA,EAAOwL,qBAAuBxL,EAAOwL,mBAAmBrK,OACtE,MAAO,GAGT,IAAIiX,EAAgBpY,EAAOwL,mBAAmBhH,MAAK,SAAU6T,GAC3D,MAAkB,YAAXA,EAAEjW,QAGX,OAAKgW,GAAkBA,EAAc3b,QAAW2b,EAAc3b,OAAOgD,QAAW2Y,EAAc3b,OAAOgD,OAAO0B,OAIrGiX,EAAc3b,OAAOgD,OAHnB,GAOI6Y,CAAuBtY,GAC1B,YAAYmY,EAAM,CAC1BI,eAAe,EACf9Y,OAAQA,EAAOgD,KAAI,SAAU1D,GAC3B,IAAIiE,EAASjE,EAAKiE,OACd4I,EAAW7M,EAAK6M,SAChB9I,EAAO/D,EAAK+D,KAEhB,MAAO,CACLuF,MAAOrF,EACPX,MAAOuJ,EACP4M,WAAqB,SAAT1V,EAAkB,OAASA,EACvC+I,OALW9M,EAAK8M,cA+CT,GApCH,SAAerM,GACzB,IAAIiR,EAASjR,EAAMiR,OACfzQ,EAASR,EAAMQ,OACfyK,EAAQ,mBACRgO,EAAgB,mBAChBC,EAAoB,mBAyBxB,OAvBA,qBAAU,WACR,GAAIjO,EAAMkO,UAAY,IAAQ3Y,KAAY,IAAQA,EAAQ0Y,GAAoB,CAC5E,IAAIE,EAAU,IAAW5Y,GACrB0L,EAAQjB,EAAMkO,QAAQE,YAC1BJ,EAAcE,QAAU,IAAI,IAAUC,GAASE,WAAWrO,EAAMkO,SAASI,SAAS,UAAUrN,MAAMA,EAAQ,IAAIqB,QAAQiM,MACtHN,EAAkBC,QAAU3Y,EAGxByY,EAAcE,SAAW3Y,EAAOwL,oBAAsBxL,EAAOwL,mBAAmBrK,QAClF,GAAmBsX,EAAcE,QAAS3Y,GAG5CyY,EAAcE,QAAQM,OAAS,WAC7B,GAAIxO,GAASA,EAAMkO,QAAS,CAC1B,IAAIO,EAASzO,EAAMkO,QAAQE,YAC3BJ,EAAcE,QAAQjN,MAAMwN,EAAS,IAAIF,MACzC,GAAmBP,EAAcE,QAAS3Y,KAI9CmZ,OAAOC,iBAAiB,SAAUX,EAAcE,QAAQM,WAEzD,CAACxO,EAAOgG,EAAQzQ,IACZ,IAAM2S,cAAcuF,GAAiB,KAAM,IAAMvF,cAAc,MAAO,CAC3E0G,UAAW,UACX3E,IAAKjK,IACH,IAAMkI,cAAc,GAAa,QC9ExB,MAAa,SAAUtC,GACpC,MAAO,CACLI,OAAQJ,EAAMI,OACdzQ,OAAQqQ,EAAMrQ,UAHH,CAKZ,I,6BCNH,SAAS,KAeP,OAdA,GAAW/D,OAAO+F,QAAU,SAAU6R,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAI5S,UAAUC,OAAQ2S,IAAK,CACzC,IAAIpE,EAASxO,UAAU4S,GAEvB,IAAK,IAAIvW,KAAOmS,EACVzT,OAAO8X,UAAUC,eAAeC,KAAKvE,EAAQnS,KAC/CsW,EAAOtW,GAAOmS,EAAOnS,IAK3B,OAAOsW,IAGOhY,MAAMjB,KAAMsG,WAK9B,IAAIoY,GAAe,IAAOC,OAAOrG,WAAW,CAC1CC,YAAa,0BACbC,YAAa,YAFI,CAGhB,CAAC,4JAA6J,IAAK,IAAK,IAAK,IAAK,KAAK,SAAUC,GAClM,OAAOA,EAAM7D,MAAuB,UAAf6D,EAAM7D,MAAoB,YAAI,CAAC,yBACnD,SAAU6D,GACX,OAAOA,EAAMvQ,MAAuB,QAAfuQ,EAAMvQ,MAAkB,YAAI,CAAC,cAAe,6CAA8CuQ,EAAMwC,UACpH,SAAUxC,GACX,OAAOA,EAAMvQ,MAAuB,cAAfuQ,EAAMvQ,MAAwB,YAAI,CAAC,SAAU,qBAAsB,KAAMuQ,EAAMwC,MAAOxC,EAAMwC,UAChH,SAAUxC,GACX,OAAOA,EAAMvQ,MAAuB,YAAfuQ,EAAMvQ,MAAsB,YAAI,CAAC,oBAAqB,MAAM,SAAUuQ,GACzF,OAAOA,EAAMwC,OAAS,YAAI,CAAC,oBAAqB,UAAW,KAAMxC,EAAMwC,MAAOxC,EAAMwC,aAErF,SAAUxC,GACX,OAAOA,EAAMI,QAAU,YAAI,CAAC,oBAAqB,UAAW,KAAMJ,EAAMwC,MAAOxC,EAAMwC,UAgBxE,GAbF,SAAgB9W,GAC3B,IAAIya,EAAYza,EAAK+D,KACjBA,OAAqB,IAAd0W,EAAuB,UAAYA,EAC1CvP,EAAQlL,EAAKkL,MACbwP,EAAW1a,EAAK0a,SAChBpG,EAAQ,aAAyBtU,EAAM,CAAC,OAAQ,QAAS,aAE7D,OAAO,IAAM4T,cAAc2G,GAAc,GAAS,GAAIjG,EAAO,CAC3DwC,MAAO5L,EAAM4L,MACb/S,KAAMA,IACJ2W,IC9CS,MAAa,SAAUpJ,GACpC,MAAO,CACLpG,MAAOoG,EAAMpG,SAFF,CAIZ,ICIQyP,GAAY,CAAC,CACtB5W,KAXuB,SAYvB8H,UAL8B,YAM7B,CACD9H,KAduB,SAevB8H,UAPgC,cAQ/B,CACD9H,KAhBoB,MAiBpB8H,UAX8B,YAY7B,CACD9H,KAnBoB,MAoBpB8H,UAbgC,cAc/B,CACD9H,KApBqB,OAqBrB8H,UAAW,MACV,CACD9H,KAtBoB,MAuBpB8H,UAAW,MACV,CACD9H,KA3B4B,cA4B5B8H,UAAW,MAKb,CACE9H,KA9BqB,OA+BrB8H,UAAW,OCrCF,GAAkB,IAAOqI,IAAIC,WAAW,CACjDC,YAAa,yBACbC,YAAa,YAFc,CAG1B,CAAC,uIACOuG,GAAa,IAAO1G,IAAIC,WAAW,CAC5CC,YAAa,oBACbC,YAAa,YAFS,CAGrB,CAAC,saACOwG,GAAc,IAAOpG,GAAGN,WAAW,CAC5CC,YAAa,qBACbC,YAAa,YAFU,CAGtB,CAAC,4GACOyG,GAAc,IAAO5G,IAAIC,WAAW,CAC7CC,YAAa,qBACbC,YAAa,YAFU,CAGtB,CAAC,mHCfO0G,GAAY,IAAO7G,IAAIC,WAAW,CAC3CC,YAAa,mBACbC,YAAa,YAFQ,CAGpB,CAAC,qDACO2G,GAAa,IAAO9G,IAAIC,WAAW,CAC5CC,YAAa,oBACbC,YAAa,YAFS,CAGrB,CAAC,uDAAwD,gIAAiI,mBAAoB,wCAAwC,SAAUC,GACjQ,OAAOA,EAAMI,OAAS,oBAAsB,uBAC3C,SAAUJ,GACX,OAAOA,EAAM2G,SAAW,MAAQ,OAC/B,SAAU3G,GACX,OAAOA,EAAM2G,SAAW,OAAS,UCZxB,GAAO,WAChB,OAAO,IAAMrH,cAAc,MAAO,CAChCjH,MAAO,OACPC,OAAQ,OACRiH,QAAS,YACTC,QAAS,OACR,IAAMF,cAAc,IAAK,CAC1BxS,GAAI,kBACJ4O,OAAQ,OACRO,YAAa,IACbhD,KAAM,OACNwG,SAAU,WACT,IAAMH,cAAc,IAAK,CAC1BxS,GAAI,WACJ8M,UAAW,gCACXqC,YAAa,KACZ,IAAMqD,cAAc,WAAY,CACjCxS,GAAI,OACJ4O,OAAQ,UACRkL,OAAQ,+CACN,IAAMtH,cAAc,WAAY,CAClCxS,GAAI,OACJ4O,OAAQ,UACRkL,OAAQ,8DAGD,GAAc,WACvB,OAAO,IAAMtH,cAAc,MAAO,CAChCjH,MAAO,OACPC,OAAQ,OACRiH,QAAS,YACTC,QAAS,OACR,IAAMF,cAAc,IAAK,CAC1BxS,GAAI,oBACJ4O,OAAQ,OACRO,YAAa,IACbhD,KAAM,OACNwG,SAAU,WACT,IAAMH,cAAc,IAAK,CAC1BxS,GAAI,WACJ8M,UAAW,kCACV,IAAM0F,cAAc,SAAU,CAC/BxS,GAAI,OACJmM,KAAM,UACN4N,GAAI,MACJC,GAAI,OACJC,EAAG,QACD,IAAMzH,cAAc,SAAU,CAChCxS,GAAI,OACJmM,KAAM,UACNW,UAAW,uFACXiN,GAAI,OACJC,GAAI,MACJC,EAAG,QACD,IAAMzH,cAAc,SAAU,CAChCxS,GAAI,OACJmM,KAAM,UACNW,UAAW,yFACXiN,GAAI,OACJC,GAAI,OACJC,EAAG,QACD,IAAMzH,cAAc,SAAU,CAChCxS,GAAI,OACJmM,KAAM,UACNW,UAAW,uFACXiN,GAAI,KACJC,GAAI,IACJC,EAAG,MACD,IAAMzH,cAAc,SAAU,CAChCxS,GAAI,OACJmM,KAAM,UACNW,UAAW,yFACXiN,GAAI,KACJC,GAAI,KACJC,EAAG,MACD,IAAMzH,cAAc,SAAU,CAChCxS,GAAI,OACJmM,KAAM,UACNW,UAAW,yFACXiN,GAAI,KACJC,GAAI,KACJC,EAAG,MACD,IAAMzH,cAAc,SAAU,CAChCxS,GAAI,OACJmM,KAAM,UACNW,UAAW,yFACXiN,GAAI,KACJC,GAAI,KACJC,EAAG,MACD,IAAMzH,cAAc,SAAU,CAChCxS,GAAI,OACJmM,KAAM,UACNW,UAAW,yFACXiN,GAAI,KACJC,GAAI,KACJC,EAAG,MACD,IAAMzH,cAAc,SAAU,CAChCxS,GAAI,OACJmM,KAAM,UACN4N,GAAI,OACJC,GAAI,MACJC,EAAG,QACD,IAAMzH,cAAc,SAAU,CAChCxS,GAAI,OACJmM,KAAM,UACN4N,GAAI,IACJC,GAAI,KACJC,EAAG,MACD,IAAMzH,cAAc,SAAU,CAChCxS,GAAI,OACJmM,KAAM,UACN4N,GAAI,KACJC,GAAI,KACJC,EAAG,MACD,IAAMzH,cAAc,SAAU,CAChCxS,GAAI,OACJmM,KAAM,UACN4N,GAAI,KACJC,GAAI,IACJC,EAAG,MACD,IAAMzH,cAAc,SAAU,CAChCxS,GAAI,OACJmM,KAAM,UACN4N,GAAI,IACJC,GAAI,IACJC,EAAG,UAGI,GAAO,WAChB,OAAO,IAAMzH,cAAc,MAAO,CAChCjH,MAAO,OACPC,OAAQ,OACRiH,QAAS,YACTC,QAAS,OACR,IAAMF,cAAc,OAAQ,KAAM,IAAMA,cAAc,OAAQ,CAC/DI,EAAG,kWACH5S,GAAI,WACF,IAAMwS,cAAc,OAAQ,CAC9BI,EAAG,qQACH5S,GAAI,YACD,IAAMwS,cAAc,IAAK,CAC5BxS,GAAI,aACJ4O,OAAQ,OACRO,YAAa,IACbhD,KAAM,OACNwG,SAAU,WACT,IAAMH,cAAc,IAAK,CAC1BxS,GAAI,YACJ8M,UAAW,kCACV,IAAM0F,cAAc,OAAQ,CAC7BxS,GAAI,SACJmM,KAAM,SACL,IAAMqG,cAAc,MAAO,CAC5B0H,UAAW,aACR,IAAM1H,cAAc,MAAO,CAC9BxS,GAAI,iBACJmM,KAAM,UACN+N,UAAW,YACT,IAAM1H,cAAc,OAAQ,CAC9BxS,GAAI,SACJmM,KAAM,SACL,IAAMqG,cAAc,MAAO,CAC5B0H,UAAW,aACR,IAAM1H,cAAc,MAAO,CAC9BxS,GAAI,iBACJmM,KAAM,UACN+N,UAAW,gBAGJ,GAAM,WACf,OAAO,IAAM1H,cAAc,MAAO,CAChCjH,MAAO,OACPC,OAAQ,OACRiH,QAAS,YACTC,QAAS,OACR,IAAMF,cAAc,OAAQ,KAAM,IAAMA,cAAc,SAAU,CACjExS,GAAI,SACJ+Z,GAAI,OACJC,GAAI,OACJC,EAAG,UACA,IAAMzH,cAAc,IAAK,CAC5BxS,GAAI,YACJ4O,OAAQ,OACRO,YAAa,IACbhD,KAAM,OACNwG,SAAU,WACT,IAAMH,cAAc,IAAK,CAC1BxS,GAAI,YACJ8M,UAAW,kCACV,IAAM0F,cAAc,OAAQ,CAC7BxS,GAAI,SACJmM,KAAM,SACL,IAAMqG,cAAc,MAAO,CAC5B0H,UAAW,aACR,IAAM1H,cAAc,MAAO,CAC9BxS,GAAI,OACJmM,KAAM,UACN+N,UAAW,YACT,IAAM1H,cAAc,OAAQ,CAC9BI,EAAG,uEACHhE,OAAQ,UACRzC,KAAM,UACNgO,KAAM,qBA4EC,GAAU,WACnB,OAAO,IAAM3H,cAAc,MAAO,CAChCjH,MAAO,OACPC,OAAQ,OACRiH,QAAS,YACTC,QAAS,OACR,IAAMF,cAAc,IAAK,CAC1BxS,GAAI,kBACJ4O,OAAQ,OACRO,YAAa,IACbhD,KAAM,OACNwG,SAAU,WACT,IAAMH,cAAc,IAAK,CAC1BxS,GAAI,WACJ8M,UAAW,iCACV,IAAM0F,cAAc,IAAK,CAC1BxS,GAAI,YACH,IAAMwS,cAAc,OAAQ,CAC7BxS,GAAI,YACJmM,KAAM,UACNE,EAAG,IACHC,EAAG,KACHf,MAAO,IACPC,OAAQ,OACN,IAAMgH,cAAc,OAAQ,CAC9BxS,GAAI,YACJmM,KAAM,UACNE,EAAG,KACHC,EAAG,KACHf,MAAO,IACPC,OAAQ,OACN,IAAMgH,cAAc,OAAQ,CAC9BxS,GAAI,YACJmM,KAAM,UACNE,EAAG,KACHC,EAAG,IACHf,MAAO,IACPC,OAAQ,OACN,IAAMgH,cAAc,OAAQ,CAC9BxS,GAAI,YACJmM,KAAM,UACNE,EAAG,KACHC,EAAG,KACHf,MAAO,IACPC,OAAQ,OACN,IAAMgH,cAAc,OAAQ,CAC9BxS,GAAI,YACJmM,KAAM,UACNE,EAAG,IACHC,EAAG,KACHf,MAAO,IACPC,OAAQ,OACN,IAAMgH,cAAc,OAAQ,CAC9BxS,GAAI,YACJmM,KAAM,UACNE,EAAG,KACHC,EAAG,KACHf,MAAO,IACPC,OAAQ,OACN,IAAMgH,cAAc,OAAQ,CAC9BxS,GAAI,YACJmM,KAAM,UACNE,EAAG,KACHC,EAAG,IACHf,MAAO,IACPC,OAAQ,OACN,IAAMgH,cAAc,OAAQ,CAC9BxS,GAAI,YACJmM,KAAM,UACNE,EAAG,KACHC,EAAG,KACHf,MAAO,IACPC,OAAQ,WAgDD,GAAO,WAChB,OAAO,IAAMgH,cAAc,MAAO,CAChCjH,MAAO,OACPC,OAAQ,OACRiH,QAAS,YACTC,QAAS,OACR,IAAMF,cAAc,IAAK,CAC1BxS,GAAI,eACJ4O,OAAQ,OACRO,YAAa,IACbhD,KAAM,OACNwG,SAAU,WACT,IAAMH,cAAc,IAAK,CAC1BxS,GAAI,WACJ8M,UAAW,iCACV,IAAM0F,cAAc,OAAQ,CAC7BxS,GAAI,YACJmM,KAAM,UACNE,EAAG,IACHC,EAAG,IACHf,MAAO,KACPC,OAAQ,MACN,IAAMgH,cAAc,OAAQ,CAC9BxS,GAAI,YACJmM,KAAM,UACNE,EAAG,IACHC,EAAG,KACHf,MAAO,KACPC,OAAQ,MACN,IAAMgH,cAAc,OAAQ,CAC9BxS,GAAI,YACJmM,KAAM,UACNE,EAAG,IACHC,EAAG,IACHf,MAAO,KACPC,OAAQ,MACN,IAAMgH,cAAc,OAAQ,CAC9BxS,GAAI,YACJmM,KAAM,UACNE,EAAG,IACHC,EAAG,KACHf,MAAO,KACPC,OAAQ,UCxbG,GCIC,SAAmB5M,GACjC,IAAIya,EAAYza,EAAK+D,KACjBA,OAAqB,IAAd0W,ELNY,SKMyBA,EAC5Ce,EAAiBxb,EAAK6L,UACtBA,OAA+B,IAAnB2P,ELAgB,aKAmCA,EAC/DC,EAAczb,EAAK0U,OACnBA,OAAyB,IAAhB+G,GAAiCA,EAC1CC,EAAgB1b,EAAKib,SACrBA,OAA6B,IAAlBS,GAAmCA,EAC9CC,EAAe3b,EAAK4b,QACpBA,OAA2B,IAAjBD,EAA0B,SAAUrb,GAChDb,QAAQoc,IAAIvb,IACVqb,EACJ,OAAO,IAAM/H,cAAcmH,GAAW,KAAM,IAAMnH,cAAcoH,GAAY,CAC1EtG,OAAQA,EACRuG,SAAUA,EACVpF,QAAS,WACP,OAAO+F,EAAQ,CACb7X,KAAMA,EACN8H,UAAWA,MLpBI,SKuBlB9H,GAAsB,IAAM6P,cAAc,GAAM,MLxBvB,gBKwB8B7P,GAA6B,IAAM6P,cAAc,GAAa,MLpBnG,SKoB0G7P,GAAsB,IAAM6P,cAAc,GAAM,MLtB3J,QKsBkK7P,GAAqB,IAAM6P,cAAc,GAAK,MLzBhN,QKyBuN7P,GAAqB,IAAM6P,cAAc,GAAM,ML1BnQ,WK0B0Q7P,GAAwB,IAAM6P,cAAc,GAAS,SC3BxV,SAAS,KAeP,OAdA,GAAW1W,OAAO+F,QAAU,SAAU6R,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAI5S,UAAUC,OAAQ2S,IAAK,CACzC,IAAIpE,EAASxO,UAAU4S,GAEvB,IAAK,IAAIvW,KAAOmS,EACVzT,OAAO8X,UAAUC,eAAeC,KAAKvE,EAAQnS,KAC/CsW,EAAOtW,GAAOmS,EAAOnS,IAK3B,OAAOsW,IAGOhY,MAAMjB,KAAMsG,WAQ9B,IAAI,GAAY,SAAmBnC,GACjC,IAAI0C,EAAO1C,EAAK0C,KACZkZ,EAAU5b,EAAK4b,QACftY,EAAQtD,EAAKsD,MACjB,OAAO,IAAMsQ,cAAc,WAAU,KAAMlR,EAAKN,OAAS,GAAK,IAAMwR,cAAc,MAAO,KAAM,IAAMA,cAAciH,GAAa,KAAMvX,GAAQ,IAAMsQ,cAAckH,GAAa,KAAMpY,EAAKgB,KAAI,SAAUoY,EAAItd,GAC1M,OAAO,IAAMoV,cAAc,GAAW,GAAS,CAC7CpV,IAAKA,EACLod,QAASA,GACRE,WC9BQ,GDuCC,SAAmBrb,GACjC,IAAI0U,EAAU1U,EAAM0U,QAChBC,EAAW3U,EAAM2U,SACjBC,EAAW5U,EAAM4U,SACjBC,EAAW7U,EAAM6U,SACjBhV,EAAO8U,IAAW,GAClBmC,EAAOoD,GAAUjX,KAAI,SAAUqY,GAKjC,OAJAA,EAAErH,OAASqH,EAAEhY,OAASzD,EAAKsL,WAAamQ,EAAElQ,YAAcvL,EAAKuL,UAC7DkQ,EAAEd,UAAW9F,EAAQ1P,MAAK,SAAUuW,GAClC,OAAOA,EAAEpQ,YAAcmQ,EAAEhY,MAAQiY,EAAEnQ,YAAckQ,EAAElQ,aAE9CkQ,KAELlS,EAAU0N,EAAK5T,QAAO,SAAUoY,GAClC,MNrDqB,WMqDdA,EAAEhY,QAEPkY,EAAO1E,EAAK5T,QAAO,SAAUoY,GAC/B,MNvDkB,QMuDXA,EAAEhY,QAEPmY,EAAO3E,EAAK5T,QAAO,SAAUoY,GAC/B,MN1DkB,QM0DXA,EAAEhY,MN3DY,WM2DSgY,EAAEhY,QAG9B6X,EAAU,SAAiBnG,GAC7B,IAAI0G,EAAUhH,EAAQ1P,MAAK,SAAUqW,GACnC,OAAOA,EAAGlQ,YAAc6J,EAAS1R,MAAQ+X,EAAGjQ,YAAc4J,EAAS5J,aAEjEsQ,GAAS9G,EAAS8G,IAGxB,OAAO,IAAMvI,cAAc,GAAiB,CAC1C+B,IAAKL,GACJ,IAAM1B,cAAcgH,GAAY,KAAM,IAAMhH,cAAc,GAAW,CACtEtQ,MAAO,UACPsY,QAASA,EACTlZ,KAAMmH,IACJ,IAAM+J,cAAc,GAAW,CACjCtQ,MAAO,OACPsY,QAASA,EACTlZ,KAAMuZ,IACJ,IAAMrI,cAAc,GAAW,CACjCtQ,MAAO,OACPsY,QAASA,EACTlZ,KAAMwZ,OElFC,GAAkB,IAAOhI,IAAIC,WAAW,CACjDC,YAAa,yBACbC,YAAa,YAFc,CAG1B,CAAC,eAAgB,KAAK,SAAUC,GACjC,OAAOA,EAAM8H,WAAa,YAAI,CAAC,wCAEtB,GAAkB,IAAOlI,IAAIC,WAAW,CACjDC,YAAa,yBACbC,YAAa,YAFc,CAG1B,CAAC,GAAI,KAAK,SAAUC,GACrB,OAAOA,EAAM8H,WAAa,YAAI,CAAC,sCAEtB,GAAiB,IAAOlI,IAAIC,WAAW,CAChDC,YAAa,wBACbC,YAAa,YAFa,CAGzB,CAAC,uGACO,GAAc,CACvBgC,UAAW,WACT,MAAO,CACLC,SAAU,WACVC,UAAW,aACXC,OAAQ,UACRN,OAAQ,mCACRC,aAAc,MACdkG,gBAAiB,wBAGrB5F,mBAAoB,WAClB,MAAO,CACLR,QAAS,SAGbS,kBAAmB,SAA2BC,EAAUrF,GACtD,MAAO,CACLwF,MAAO,UACPC,WAAY,sBAGhBC,oBAAqB,WACnB,MAAO,CACLF,MAAO,UACPb,QAAS,OACTvH,QAAS,MACTqI,WAAY,cACZR,UAAW,aACXD,SAAU,WACVW,IAAK,QAGTjB,QAAS,WACP,MAAO,CACLC,QAAS,OACTC,OAAQ,OACRC,aAAc,MACdzH,QAAS,WC8BA,GA5EG,SAAqB1O,GACrC,IAAIwT,EAAqBxT,EAAKwT,mBAC1B2B,EAAUnV,EAAKmV,QACfvJ,EAAY5L,EAAK4L,UACjBC,EAAY7L,EAAK6L,UACjBX,EAAQlL,EAAKkL,MACbkI,EAAWpT,EAAKoT,SAEhBkJ,EAAY,mBAAS,KAAKnH,EAAS,CACrCvJ,UAAWA,EACXC,UAAWA,KAET0Q,EAAa,aAAeD,EAAW,GACvC7G,EAAW8G,EAAW,GACtBC,EAAcD,EAAW,GAEzBE,EAAiBvR,EAAMwR,QACvBN,EAAYK,EAAeL,UAC3BO,EAASF,EAAeE,OAExBC,EAAa,oBAAS,GACtBC,EAAa,aAAeD,EAAY,GACxCE,EAAaD,EAAW,GACxBE,EAAgBF,EAAW,GAE3BlH,EAAM,iBAAO,IAsBjB,OAAO,IAAM/B,cAAc,GAAiB,CAC1CwI,UAAWA,GACV,IAAMxI,cAAc,GAAiB,CACtCwI,UAAWA,GACV,IAAMxI,cAAc,KAAQ,CAC7BmE,SAzBiB,SAAsBE,GACvC,IAAIrM,EAAYqM,EAAOrM,UACnBC,EAAYoM,EAAOpM,UACvB2H,EAAmB,CACjB5H,UAAWA,EACXC,UAAWA,IAEb2Q,EAAYvE,GACZ8E,GAAc,IAkBdC,WAAY,WACV,OAAOD,GAAc,IAEvBzgB,MAAOmZ,EACPN,QAASA,EACT+C,OAAQ,GACRC,WAAY,CACVC,KAAM,IAER9C,SAAUK,EACVkB,WAAYiG,KACTV,GAAa,IAAMxI,cAAc,GAAQ,CAC5C7P,KAAM,YACN8R,QAAS,WA3BTzC,EAAS,YAAc,GAAIlI,EAAO,CAChCwR,QAAS,CACPN,UAAWA,EACXO,QAASA,QA2BZ,YAAaG,GAAc,IAAMlJ,cAAc,GAAgB,CAChEiC,QAAS,WACP,OAAOkH,GAAc,QC3EZ,MAAa,SAAUzL,GACpC,MAAO,CACL6D,QAAS7D,EAAM/O,cAAc0a,gBAC7BrR,UAAW0F,EAAM/O,cAAcqJ,UAC/BC,UAAWyF,EAAM/O,cAAcsJ,UAC/BX,MAAOoG,EAAMpG,SAEd,CACDsI,mBAAoB,GACpBJ,SAAU,GATG,CAUZ,ICdQ8J,GAAiB,WAC1B,IAAIjG,EAAM9U,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,EAC1Egb,EAAQhb,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,EAC5EsV,EAAStV,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,EAC7EqV,EAAOrV,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,EAC/E,MAAO,uIAAuInD,OAAOiY,EAAK,OAAOjY,OAAOme,EAAO,OAAOne,OAAOyY,EAAQ,OAAOzY,OAAOwY,EAAM,UCJhN,GAAkB,IAAOtD,IAAIC,WAAW,CACjDC,YAAa,yBACbC,YAAa,gBAFc,CAG1B,CAAC,oDAAqD,uCAAwC,IDLtE,QCK0F6I,MAC1GE,GAAkB,IAAOlJ,IAAIC,WAAW,CACjDC,YAAa,yBACbC,YAAa,gBAFc,CAG1B,CAAC,yEACOgJ,GAAuB,IAAO5I,GAAGN,WAAW,CACrDC,YAAa,8BACbC,YAAa,gBAFmB,CAG/B,CAAC,kCCCW,GARA,SAAkBrU,GAClBA,EAAKiB,OAAlB,IACIyQ,EAAS1R,EAAK0R,OACd7I,EAAY6I,EAAO7I,UACnB6B,EAAcgH,EAAOhH,YACzB,OAAO,IAAMkJ,cAAc,GAAiB,KAAM,IAAMA,cAAc,GAAa,MAAOlJ,IAAgB7B,GAAa,IAAM+K,cAAc,GAAO,OAAQlJ,GAAe,IAAMkJ,cAAcwJ,GAAiB,KAAM,IAAMxJ,cAAcyJ,GAAsB,KAAM,sBAAuBxU,GAAa,IAAM+K,cAAcwJ,GAAiB,KAAM,IAAMxJ,cAAcyJ,GAAsB,KAAM,yBCNtX,MAAa,SAAU/L,GACpC,MAAO,CACLI,OAAQJ,EAAMI,OACdzQ,OAAQqQ,EAAMrQ,UAHH,CAKZ,I,UCTQqc,GAAkB,IAAOpJ,IAAIC,WAAW,CACjDC,YAAa,yBACbC,YAAa,YAFc,CAG1B,CAAC,qDACOkJ,GAAyB,IAAOrJ,IAAIC,WAAW,CACxDC,YAAa,gCACbC,YAAa,YAFqB,CAGjC,CAAC,8BAAiC,eAAgB,+DAAgE,mBAAoB,MAAM,SAAUC,GACvJ,OAAOA,EAAMkJ,aAAe,OAAQ,KACnC,SAAUlJ,GACX,OAAOA,EAAMkJ,aAAe,UAAY,YACvC,SAAUlJ,GACX,OAAOA,EAAMkJ,aAAe,OAAS,OACpC,SAAUlJ,GACX,OAAOA,EAAMkJ,aAAe,OAAS,OAE5BC,GAAwB,IAAOC,EAAEvJ,WAAW,CACrDC,YAAa,+BACbC,YAAa,YAFoB,CAGhC,CAAC,oQACOsJ,GAAyB,IAAOzJ,IAAIC,WAAW,CACxDC,YAAa,gCACbC,YAAa,YAFqB,CAGjC,CAAC,2OCpBO,GAAmB,SAA0BrU,GACtD,IAAIsD,EAAQtD,EAAKsD,MACbsa,EAAc5d,EAAK4d,YACnBlD,EAAW1a,EAAK0a,SAChBmD,EAAa,iBAAO,IAEpBvB,EAAY,mBAAS,GACrBC,EAAa,aAAeD,EAAW,GACvCwB,EAAcvB,EAAW,GACzBwB,EAAiBxB,EAAW,GAE5BK,EAAa,oBAAS,GACtBC,EAAa,aAAeD,EAAY,GACxCD,EAASE,EAAW,GACpBmB,EAAUnB,EAAW,GAErBoB,EAAe,WACjBD,GAASrB,GACT,IAAIuB,EAAQL,EAAWjE,QACnBhN,EAASkR,EAAc,EAAII,EAAMV,aACrCO,EAAenR,IAiBjB,OALA,qBAAU,WACRuR,YAAW,WACT,OAAOP,EAAcK,IAAiB,OACrC,KACF,IACI,IAAMrK,cAAc+J,GAAwB,KAAM,IAAM/J,cAAc6J,GAAuB,CAClG5H,QAAS,WACP,OAAOoI,MAER3a,GAAQ,IAAMsQ,cAAc2J,GAAwB,CACrD5H,IAAKkI,EACLL,aAAcM,GACb,IAAMlK,cAAc,KAAqB,CAC1CwK,cAAc,EACdC,aAAa,EACbC,SAxBiB,WACjB,IAAIJ,EAAQL,EAAWjE,QAEvB,GAAIsE,EAAMV,aAAe,GAAKb,EAAQ,CACpC,IAAI/P,EAASsR,EAAMV,aACnBO,EAAenR,MAoBhB,IAAMgH,cAAc,MAAO,KAAM8G,OAE3B,GAAY,SAAmBja,GACxC,IAAIia,EAAWja,EAAMia,SACrB,OAAO,IAAM9G,cAAc0J,GAAiB,KAAM5C,ICvDzC6D,GAAsB,IAAOrK,IAAIC,WAAW,CACrDC,YAAa,6BACbC,YAAa,YAFkB,CAG9B,CAAC,mCACOmK,GAAuB,IAAOtK,IAAIC,WAAW,CACtDC,YAAa,8BACbC,YAAa,YAFmB,CAG/B,CAAC,6UACOoK,GAAoB,IAAOvK,IAAIC,WAAW,CACnDC,YAAa,2BACbC,YAAa,YAFgB,CAG5B,CAAC,WAAY,MAAM,SAAUC,GAC9B,OAAOA,EAAMI,OAAS,QAAU,UAEvBgK,GAAa,IAAOC,GAAGxK,WAAW,CAC3CC,YAAa,oBACbC,YAAa,YAFS,CAGrB,CAAC,yFACOuK,GAAkB,IAAOC,GAAG1K,WAAW,CAChDC,YAAa,yBACbC,YAAa,YAFc,CAG1B,CAAC,8GCpBJ,SAAS,KAeP,OAdA,GAAWnX,OAAO+F,QAAU,SAAU6R,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAI5S,UAAUC,OAAQ2S,IAAK,CACzC,IAAIpE,EAASxO,UAAU4S,GAEvB,IAAK,IAAIvW,KAAOmS,EACVzT,OAAO8X,UAAUC,eAAeC,KAAKvE,EAAQnS,KAC/CsW,EAAOtW,GAAOmS,EAAOnS,IAK3B,OAAOsW,IAGOhY,MAAMjB,KAAMsG,WAO9B,IAAI,GAAY,SAAmBmS,GACjC,OAAO,IAAMV,cAAc,GAAQ,GAAS,CAC1CkL,MAAO,CACLlS,OAAQ,SAET0H,KAGM,GAAO,SAActU,GAC9B,IAAI0a,EAAW1a,EAAK0a,SAEhB4B,EAAY,mBAAS,GACrBC,EAAa,aAAeD,EAAW,GACvC5H,EAAS6H,EAAW,GACpBwC,EAAYxC,EAAW,GAQ3B,OANA,qBAAU,WACR,IAAIyC,EAAatE,EAASuE,WAAU,SAAUC,GAC5C,OAAOA,EAAM5K,MAAMjW,WAErB0gB,GAA0B,IAAhBC,EAAoB,EAAIA,KACjC,IACI,IAAMpL,cAAc2K,GAAqB,KAAM,IAAM3K,cAAc8K,GAAY,KAAMhE,EAAShX,KAAI,SAAUwb,EAAOC,GACxH,IAAI5X,EAAQ2X,EAAM5K,MAAM/M,MACxB,OAAOA,EAAQ,IAAMqM,cAAcgL,GAAiB,CAClDpgB,IAAK2gB,GACJ,IAAMvL,cAAc,GAAW,CAChCiC,QAAS,WACP,OAAOkJ,EAAUI,IAEnBzK,OAAQyK,IAAQzK,GACfnN,IAAU,SACV,IAAMqM,cAAc4K,GAAsB,KAAM9D,EAAShX,KAAI,SAAUwb,EAAOC,GACjF,IAAIC,EAAaF,EAAM5K,MAAMoG,SAC7B,OAAO,IAAM9G,cAAc6K,GAAmB,CAC5CjgB,IAAK2gB,EACLzK,OAAQyK,IAAQzK,GACf0K,SAQIC,GAAM,SAAa5e,GAC5B,IAAIia,EAAWja,EAAMia,SAErB,OADYja,EAAM8G,MACHmT,EAAW,M,UCxE5B,SAAS,KAeP,OAdA,GAAWxd,OAAO+F,QAAU,SAAU6R,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAI5S,UAAUC,OAAQ2S,IAAK,CACzC,IAAIpE,EAASxO,UAAU4S,GAEvB,IAAK,IAAIvW,KAAOmS,EACVzT,OAAO8X,UAAUC,eAAeC,KAAKvE,EAAQnS,KAC/CsW,EAAOtW,GAAOmS,EAAOnS,IAK3B,OAAOsW,IAGOhY,MAAMjB,KAAMsG,WAM9B,IAAImd,GAAe,YAAOC,GAAA,GAAapL,WAAW,CAChDC,YAAa,0BACbC,YAAa,YAFI,CAGhB,CAAC,uCAAwC,MAAM,SAAUC,GAC1D,OAAOA,EAAM3N,MAAQ,cAAgB2N,EAAMpJ,MAAMsU,OAAOC,SAEtDC,GAAc,IAAOxL,IAAIC,WAAW,CACtCC,YAAa,yBACbC,YAAa,YAFG,CAGf,CAAC,kFAAmF,4FAA4F,SAAUC,GAC3L,OAAOA,EAAMpJ,MAAMsU,OAAOC,SAExBE,GAAc,IAAOzL,IAAIC,WAAW,CACtCC,YAAa,yBACbC,YAAa,YAFG,CAGf,CAAC,6BAA8B,0BAA0B,SAAUC,GACpE,OAAIA,EAAM9P,QACD8P,EAAM9P,SAA2B,IAAhB8P,EAAMzN,MAAcyN,EAAMpJ,MAAMsU,OAAOC,MAAQnL,EAAMpJ,MAAMsU,OAAOI,gBAEnE,IAAhBtL,EAAMzN,MAAcyN,EAAMpJ,MAAMsU,OAAOC,MAAwB,IAAhBnL,EAAMzN,MAAcyN,EAAMpJ,MAAMsU,OAAOI,gBAAkBtL,EAAMpJ,MAAMsU,OAAOC,SAIlI,GAAQ,SAAenL,EAAOhD,GAChC,OAAO,IAAMsC,cAAc8L,GAAapL,IAGtC,GAAQ,SAAeA,EAAOhD,GAChC,OAAO,IAAMsC,cAAc+L,GAAa,GAAS,GAAIrL,EAAO,CAC1D9P,QAASD,MAAMC,QAAQ8M,EAAMhV,OAC7BuK,MAAOyK,EAAMzK,UAiCF,GA7BF,SAAgB7G,GAC3B,IAAI6f,EAAW7f,EAAKwG,IAChBA,OAAmB,IAAbqZ,EAAsB,EAAIA,EAChCC,EAAW9f,EAAKuG,IAChBA,OAAmB,IAAbuZ,EAAsB,IAAMA,EAClCC,EAAY/f,EAAKzD,KACjBA,OAAqB,IAAdwjB,EAAuB,EAAIA,EAClCzjB,EAAQ0D,EAAK1D,MACbyc,EAAe/Y,EAAK+Y,aACpB7N,EAAQlL,EAAKkL,MACb4M,EAAgB9X,EAAK+X,SACrBA,OAA6B,IAAlBD,EAA2B,aAAiBA,EACvDkI,EAAchgB,EAAKigB,OACnBA,OAAyB,IAAhBD,EAAyB,aAAiBA,EACvD,OAAO,IAAMpM,cAAc,IAAe,CACxC1I,MAAOA,GACN,IAAM0I,cAAc0L,GAAc,CACnCY,cAAeD,EACflI,SAAUA,EACVoI,YAAa,GACbC,YAAa,GACb9jB,MAAOA,EACPC,KAAMA,EACNwc,aAAcA,EACdxS,IAAKA,EACLC,IAAKA,MC9EM,MAAa,SAAU8K,GACpC,MAAO,CACLpG,MAAOoG,EAAMpG,SAFF,CAIZ,ICGY,GARK,IAAOgJ,IAAIC,WAAW,CACxCC,YAAa,sBACbC,YAAa,gBAFK,CAGjB,CAAC,0FAA2F,eAAgB,6BAA6B,SAAUC,GACpJ,OAAOA,EAAM+L,IAAM,MAAQ,YAC1B,SAAU/L,GACX,OAAOA,EAAM+L,IAAM,mEAAqE,MCF3E,GAJC,IAAO9Y,MAAM4M,WAAW,CACtCC,YAAa,wBACbC,YAAa,YAFC,CAGb,CAAC,mFCGW,GANE,IAAOH,IAAIC,WAAW,CACrCC,YAAa,0BACbC,YAAa,gBAFE,CAGd,CAAC,gCAAiC,KAAK,SAAUC,GAClD,OAAQA,EAAMgM,WAAa,yBCCd,GAJH,IAAOC,MAAMpM,WAAW,CAClCC,YAAa,eACbC,YAAa,gBAFH,CAGT,CAAC,4NC4BJ,IAoJe,GAlJf,SAAUmM,GAGR,SAASC,EAAWnM,GAClB,IAAI9Q,EA/BiBkd,EAAKliB,EAAKlC,EA2D/B,OA1BA,YAAgBT,KAAM4kB,GAEtBjd,EAAQ,YAA2B3H,KAAM,YAAgB4kB,GAAYvL,KAAKrZ,KAAMyY,IAnC3DoM,EAqCL,YAAuBld,GArCbhF,EAqCqB,eArChBlC,EAqCgC,KAAS,WACtE,IAAIqkB,EAAcnd,EAAM8Q,MACpB/R,EAAgBoe,EAAYpe,cAC5BiR,EAAqBmN,EAAYnN,mBACjCoN,EAAcpd,EAAM8N,MACpBhO,EAAQsd,EAAYtd,MACpB0B,EAAU4b,EAAY5b,QACtB6b,EAAQD,EAAYC,MACpBC,EAAQF,EAAYE,MACxBtN,EAAmB,CACjBlQ,MAAOA,EACP0B,QAASA,EACTiI,SAAU,YAAc,GAAI1K,EAAc0K,SAAU,CAClD9I,MAAO0c,IAETvkB,MAAO,YAAc,GAAIiG,EAAcjG,MAAO,CAC5C6H,MAAO2c,QAGV,KAvDDtiB,KAAOkiB,EACTxjB,OAAOC,eAAeujB,EAAKliB,EAAK,CAC9BlC,MAAOA,EACPykB,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIliB,GAAOlC,EAiDXkH,EAAM8N,MAAQ9N,EAAM0d,eAAe5M,EAAM/R,eAClCiB,EA+GT,OA9IA,YAAUid,EAAYD,GAkCtB,YAAaC,EAAY,CAAC,CACxBjiB,IAAK,qBACLlC,MAAO,SAA4B6kB,GACjC,IAAIC,EAAoBD,EAAU5e,cAC9BA,EAAgB1G,KAAKyY,MAAM/R,cAE1B,IAAQ1G,KAAKqlB,eAAeE,GAAoBvlB,KAAKqlB,eAAe3e,KACvE1G,KAAKwlB,SAASxlB,KAAKqlB,eAAe3e,MAGrC,CACD/D,IAAK,iBACLlC,MAAO,SAAwBiG,GAC7B,MAAO,CACLe,MAAOf,EAAgBA,EAAce,MAAQ,GAC7C0B,QAASzC,EAAgBA,EAAcyC,QAAU,GACjD6b,MAAOte,EAAgBA,EAAc0K,SAAS9I,MAAQ,GACtD2c,MAAOve,EAAgBA,EAAcjG,MAAM6H,MAAQ,MAGtD,CACD3F,IAAK,WACLlC,MAAO,SAAkBgH,GACvBzH,KAAKwlB,SAAS,CACZ/d,MAAOA,IAETzH,KAAKylB,iBAEN,CACD9iB,IAAK,aACLlC,MAAO,SAAoB0I,GACzBnJ,KAAKwlB,SAAS,CACZrc,QAASA,IAEXnJ,KAAKylB,iBAEN,CACD9iB,IAAK,WACLlC,MAAO,SAAkBukB,GACvBhlB,KAAKwlB,SAAS,CACZR,MAAOA,IAEThlB,KAAKylB,iBAEN,CACD9iB,IAAK,WACLlC,MAAO,SAAkBwkB,GACvBjlB,KAAKwlB,SAAS,CACZP,MAAOA,IAETjlB,KAAKylB,iBAEN,CACD9iB,IAAK,SACLlC,MAAO,WACL,IAAIilB,EAAS1lB,KAET2lB,EAAe3lB,KAAKyV,MACpBhO,EAAQke,EAAale,MACrB0B,EAAUwc,EAAaxc,QACvB8b,EAAQU,EAAaV,MACrBD,EAAQW,EAAaX,MACzB,OAAO,IAAMjN,cAAc,GAAe,KAAM,IAAMA,cAAc,GAAY,KAAM,IAAMA,cAAc,GAAW,CACnH6N,QAAS,iBACR,SAAU,IAAM7N,cAAc,GAAO,CACtC7P,KAAM,OACN2d,YAAa,YACbre,KAAM,gBACN/G,MAAOgH,EACPyU,SAAU,SAAkBtb,GAC1B,OAAO8kB,EAAOI,SAASllB,EAAEqY,OAAOxY,WAE/B,IAAMsX,cAAc,GAAY,KAAM,IAAMA,cAAc,GAAW,CACxE6N,QAAS,iBACR,WAAY,IAAM7N,cAAc,GAAO,CACxC7P,KAAM,OACN2d,YAAa,cACbre,KAAM,iBACN/G,MAAO0I,EACP+S,SAAU,SAAkBtb,GAC1B,OAAO8kB,EAAOK,WAAWnlB,EAAEqY,OAAOxY,WAEjC,IAAMsX,cAAc,GAAe,CACtCyM,KAAK,GACJ,IAAMzM,cAAc,GAAY,KAAM,IAAMA,cAAc,GAAW,CACtE6N,QAAS,kBACR,UAAW,IAAM7N,cAAc,GAAO,CACvC7P,KAAM,OACN2d,YAAa,sBACbre,KAAM,iBACN/G,MAAOwkB,EACP/I,SAAU,SAAkBtb,GAC1B,OAAO8kB,EAAOM,SAASplB,EAAEqY,OAAOxY,WAE/B,IAAMsX,cAAc,GAAY,KAAM,IAAMA,cAAc,GAAW,CACxE6N,QAAS,kBACR,UAAW,IAAM7N,cAAc,GAAO,CACvC7P,KAAM,OACN2d,YAAa,sBACbre,KAAM,iBACN/G,MAAOukB,EACP9I,SAAU,SAAkBtb,GAC1B,OAAO8kB,EAAOO,SAASrlB,EAAEqY,OAAOxY,iBAMjCmkB,EA/IT,CAgJE,IAAMsB,WChLO,MAAa,SAAUzQ,GACpC,MAAO,CACLpG,MAAOoG,EAAMpG,MACb3I,cAAe+O,EAAM/O,iBAEtB,CACDiR,mBAAoB,IANP,CAOZ,ICFC,GAAc,CAChBwC,QAAS,WACP,MAAO,CAELC,QAAS,OACTC,OAAQ,mCACRC,aAAc,MACdzH,QAAS,UAGbuJ,OAAQ,SAAgB+J,GACtB,OAAO,YAAc,GAAIA,KAGzBC,GAAgB,CAAC,CACnB1a,MAAO,YACPjL,MAAO,OACN,CACDiL,MAAO,aACPjL,MAAO,SAwCM,GArCG,SAAqB0D,GACrC,IAAIiR,EAAUjR,EAAKiR,QACfuC,EAAqBxT,EAAKwT,mBAE1B8I,EAAY,mBAAS,KAAK2F,GAAe,CAC3C3lB,MAAO2U,EAAQiR,aAEb3F,EAAa,aAAeD,EAAW,GACvC6F,EAAQ5F,EAAW,GACnB6F,EAAW7F,EAAW,GAE1B,qBAAU,WACJtL,EAAQiR,YAAcC,EAAM7lB,OAC9B8lB,EAAS,KAAKH,GAAe,CAC3B3lB,MAAO2U,EAAQiR,eAGlB,CAACjR,EAASkR,EAAM7lB,QAUnB,OAAO,IAAMsX,cAAc,GAAe,KAAM,IAAMA,cAAc,GAAY,KAAM,IAAMA,cAAc,GAAW,CACnH6N,QAAS,iBACR,2BAA4B,IAAM7N,cAAc,KAAQ,CACzDmE,SAXiB,SAAsBE,GACvCzE,EAAmB,CACjBvC,QAAS,YAAc,GAAIA,EAAS,CAClCiR,UAAWjK,EAAO3b,WAStBA,MAAO6lB,EACPhN,QAAS8M,GACT/J,OAAQ,QC5DG,MAAa,SAAU5G,GACpC,MAAO,CACLL,QAASK,EAAM/O,cAAc0O,WAE9B,CACDuC,mBAAoB,IALP,CAMZ,ICiBY,OAvBf,SAAqBlX,EAAO+lB,GAE1B,IAAI/F,EAAY,mBAAShgB,GACrBigB,EAAa,aAAeD,EAAW,GACvCgG,EAAiB/F,EAAW,GAC5BgG,EAAoBhG,EAAW,GAenC,OAbA,qBAAU,WAER,IAAIiG,EAAUrE,YAAW,WACvBoE,EAAkBjmB,KACjB+lB,GAIH,OAAO,WACLI,aAAaD,MAEd,CAAClmB,EAAO+lB,IAEJC,GCvBM,SAASI,GAAQC,GAC9B,OAAOC,OAAOD,KAAOA,GAAKA,EAAI,IAAM,ECEtC,SAAS,KAeP,OAdA,GAAWzlB,OAAO+F,QAAU,SAAU6R,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAI5S,UAAUC,OAAQ2S,IAAK,CACzC,IAAIpE,EAASxO,UAAU4S,GAEvB,IAAK,IAAIvW,KAAOmS,EACVzT,OAAO8X,UAAUC,eAAeC,KAAKvE,EAAQnS,KAC/CsW,EAAOtW,GAAOmS,EAAOnS,IAK3B,OAAOsW,IAGOhY,MAAMjB,KAAMsG,WAa9B,IAAI0gB,GAAkB,IAAO3O,IAAIC,WAAW,CAC1CC,YAAa,6BACbC,YAAa,gBAFO,CAGnB,CAAC,4CACAyO,GAAiB,IAAO5O,IAAIC,WAAW,CACzCC,YAAa,4BACbC,YAAa,gBAFM,CAGlB,CAAC,8DAA+D,6BAA6B,SAAUC,GACxG,OAAOA,EAAMyO,SAAW,gBAAkB,cA4F7B,GAzFE,SAAoB/iB,GACnC,IAAIuH,EAAQvH,EAAKuH,MACbsY,EAAW7f,EAAKwG,IAChBA,OAAmB,IAAbqZ,EAAsB,KAAOA,EACnCC,EAAW9f,EAAKuG,IAChBA,OAAmB,IAAbuZ,EAAsB,KAAOA,EACnCxjB,EAAQ0D,EAAK1D,MACb0mB,EAAmBhjB,EAAKijB,YACxBA,OAAmC,IAArBD,EAA8B,EAAIA,EAChDlL,EAAgB9X,EAAK+X,SACrBA,OAA6B,IAAlBD,EAA2B,SAAUxX,KAAWwX,EAC3DoL,EAAwBljB,EAAKmjB,oBAC7BA,OAAgD,IAA1BD,EAAmC,SAAU5iB,EAAM9B,KAAU0kB,EAEnF5G,EAAY,mBAAS,CACvBhgB,MAAOA,EACPkC,IAAK,OAEH+d,EAAa,aAAeD,EAAW,GACvC8G,EAAa7G,EAAW,GACxB8G,EAAgB9G,EAAW,GAE3B+F,EAAiB,GAAYc,EAAY,KAC7C,qBAAU,WACHd,EAAe9jB,IAGlB2kB,EAAoBb,EAAehmB,MAAOgmB,EAAe9jB,KAFzDuZ,EAASuK,EAAehmB,SAIzB,CAACgmB,IACJ,IAAIS,EAAWxe,MAAMC,QAAQ4e,EAAW9mB,OACpCgnB,EAAkBZ,GAAQlc,IAAQkc,GAAQnc,GAC1Cgd,EAAW/c,EACXgd,EAAWjd,EAEXwc,GACFQ,EAAWH,EAAW9mB,MAAM,GAC5BknB,EAAWJ,EAAW9mB,MAAM,IAE5BknB,EAAWJ,EAAW9mB,MAAQ8mB,EAAW9mB,MAAQiK,EAG/Cid,EAAWD,GAAYN,IACzBM,EAAWC,EAAWP,GAGxB,IAAIQ,EAAc,YAAc,GAAY,OAARjd,GAAgB,CAClDA,IAAKA,GACJ,GAAY,OAARD,GAAgB,CACrBA,IAAKA,IAGP,OAAO,IAAMqN,cAAc,GAAY,KAAMrM,GAAS,IAAMqM,cAAc,GAAW,CACnF6N,QAAS,iBACRla,GAAQ,IAAMqM,cAAciP,GAAiB,KAAM,IAAMjP,cAAc,GAAQ,GAAS,GAAI6P,EAAa,CAC1GlnB,KAAM+mB,EAAkB,GAAM,EAC9BhnB,MAAOymB,EAAW,CAACQ,EAAUC,GAAYA,EACzCzK,aAAcgK,EAAWvc,EAAM,CAACA,EAAKD,GACrCwR,SAAU,SAAkBzb,GAC1B,OAAO+mB,EAAc,CACnB/mB,MAAOA,EACPkC,IAAK,YAGL,IAAMoV,cAAckP,GAAgB,CACxCC,SAAUA,GACTA,GAAY,IAAMnP,cAAc,GAAO,GAAS,GAAI6P,EAAa,CAClEnnB,MAAOinB,EACPxf,KAAM,SACNV,KAAM,gBACN0U,SAAU,SAAkBtb,GAC1B,OAAO4mB,EAAc,CACnB/mB,MAAOG,EAAEqY,OAAOxY,MAChBkC,IAAK,iBAGN,IAAMoV,cAAc,GAAO,GAAS,GAAI6P,EAAa,CACxDnnB,MAAOknB,EACPzf,KAAM,SACNV,KAAM,gBACN0U,SAAU,SAAkBtb,GAC1B,OAAO4mB,EAAc,CACnB/mB,MAAOG,EAAEqY,OAAOxY,MAChBkC,IAAK,oBC3HE,MAAa,SAAU8S,GACpC,MAAO,CACLpG,MAAOoG,EAAMpG,SAFF,CAIZ,ICLQwY,GAAiB,IAAOxP,IAAIC,WAAW,CAChDC,YAAa,wBACbC,YAAa,gBAFa,CAGzB,CAAC,0CACOsP,GAAc,IAAOC,MAAMzP,WAAW,CAC/CC,YAAa,qBACbC,YAAa,gBAFU,CAGtB,CAAC,2KACOwP,GAAW,IAAOC,GAAG3P,WAAW,CACzCC,YAAa,kBACbC,YAAa,gBAFO,CAGnB,CAAC,iDACO0P,GAAW,IAAOC,GAAG7P,WAAW,CACzCC,YAAa,kBACbC,YAAa,gBAFO,CAGnB,CAAC,sCAAuC,MAAM,SAAUC,GACzD,OAAOA,EAAM2P,OAAS,SAAW,UAExBC,GAAW,IAAOF,GAAG7P,WAAW,CACzCC,YAAa,kBACbC,YAAa,gBAFO,CAGnB,CAAC,oGCLW,GAdC,SAAmBrU,GACjC,IAAIwI,EAAaxI,EAAKwI,WAClBjG,EAAgBvC,EAAKuC,cACrBmW,EAAanW,EAAcjG,MAAM6H,MACjCoU,EAAgBhW,EAAc0K,SAAS9I,MAC3C,OAAO,IAAMyP,cAAc8P,GAAgB,KAAM,IAAM9P,cAAc+P,GAAa,KAAM,IAAM/P,cAAc,QAAS,KAAM,IAAMA,cAAciQ,GAAU,KAAM,IAAMjQ,cAAcsQ,GAAU,KAAM3L,GAAgB,IAAM3E,cAAcsQ,GAAU,KAAMxL,KAAe,IAAM9E,cAAc,QAAS,KAAMpL,GAAcA,EAAW9E,KAAI,SAAUoY,EAAItd,GAClV,OAAO,IAAMoV,cAAciQ,GAAU,CACnCrlB,IAAKA,GACJ,IAAMoV,cAAcmQ,GAAU,KAAMjI,EAAGrO,GAAI,IAAMmG,cAAcmQ,GAAU,CAC1EE,QAAQ,GACPnI,EAAGpO,WCXK,MAAa,SAAU4D,GACpC,MAAO,CACL9I,WAAY8I,EAAMI,OAAOlJ,WACzBjG,cAAe+O,EAAM/O,iBAHV,CAKZ,I,+BCNQ4hB,GAAc,IAAOjQ,IAAIC,WAAW,CAC7CC,YAAa,qBACbC,YAAa,eAFU,CAGtB,CAAC,+JACO+P,GAAe,CACxBna,KAAM,UACNoa,OAAQ,UACRC,OAAQ,UACRC,WAAY,QACZC,mBAAoB,WAEXC,GAAe,CACxBC,YAAa,CACXzO,QAAS,OACTM,UAAW,cAEboO,KAAM,CACJC,SAAU,OACVhY,OAAQ,OACRD,MAAO,QAETkY,SAAU,CACRlY,MAAO,OACPC,OAAQ,OACR2J,UAAW,cAEbF,UAAW,CACTzJ,OAAQ,OACRD,MAAO,OACP4J,UAAW,cAEbuO,WAAY,CACVnY,MAAO,OACP2J,SAAU,WACVkB,KAAM,IACNC,OAAQ,SAEVsN,WAAY,CACVrW,QAAS,mBACT9B,OAAQ,OACRD,MAAO,OACP4J,UAAW,eCzCA,GCIE,SAAoBvW,GACnC,IAAIV,EAAOU,EAAKV,KACZwY,EAAgB9X,EAAK+X,SACrBA,OAA6B,IAAlBD,EAA2B,aAAiBA,EAC3D,OAAO,IAAMlE,cAAcuQ,GAAa,KAAM,IAAMvQ,cAAc,KAAW,CAC3E8N,YAAapiB,EACb0lB,OAAQZ,GACRlmB,OAAQ,KACR4gB,MAAO2F,GACP1M,SAAUA,MCbH,GAAa,EAAa,qBACtB,IACbkN,WAAY,I,0DCUHC,GAAe,CARF,QACA,SAQbC,GAAe,CANS,mBACH,gBACI,oBACD,mBACF,kBAGtB7e,GAAuB,CAChCzC,OAAQ,CAAC,EAAG,KACZE,KAZsB,QAatBsC,SAAS,EACTE,IAAK,IACLC,IAAK,GAaI4e,GAAsB,CAC/BnhB,OAAQ,KACRsD,MAAO,KACPvD,SAAU,KACVJ,UAhCsB,QAiCtBD,OAAQ2C,IAEC+e,GAAgC,CAAC,CAC1C9d,MAAO,UACPjL,MArCsB,SAsCrB,CACDiL,MAAO,SACPjL,MAvCsB,UAyCbgpB,GAAgC,CAAC,CAC1C/d,MAAO,mBACPjL,MAzCiC,oBA0ChC,CACDiL,MAAO,gBACPjL,MA3C8B,iBA4C7B,CACDiL,MAAO,wBACPjL,MA7CkC,qBA8CjC,CACDiL,MAAO,mBACPjL,MA/CiC,oBAgDhC,CACDiL,MAAO,iBACPjL,MAjD+B,mBCXtBipB,GAAiB,IAAOrR,IAAIC,WAAW,CAChDC,YAAa,wBACbC,YAAa,gBAFa,CAGzB,CAAC,mtBCHW,GCEI,SAAsBrU,GACvC,IAAI2D,EAAS3D,EAAK2D,OACd6hB,EAAYxlB,EAAKqD,KACjBA,OAAqB,IAAdmiB,EAAuB,oBAAsBA,EACpDC,EAAazlB,EAAKuH,MAClBA,OAAuB,IAAfke,EAAwB,GAAKA,EACrC7J,EAAU5b,EAAK4b,QAEnB,OAAKjY,EAIE,IAAMiQ,cAAc2R,GAAgB,KAAM,IAAM3R,cAAc,QAAS,CAC5E7P,KAAM,WACN3C,GAAIiC,EACJqiB,QAAS/hB,EAAOA,OAAO0C,QACvB0R,SAAU,SAAkBtb,GAC1B,OAAOmf,EAAQnf,EAAEqY,OAAOxY,MAAOqH,EAAOvC,GAAI,qBAE1C,IAAMwS,cAAc,QAAS,CAC/B6N,QAASpe,GACRkE,IAZM,MCPPoe,GAAY,SAAmBjY,GACjC,OAAO,IAAIkY,KAAKA,KAAKC,IAAInY,IAAIoY,eAG3BC,GAAY,SAAmBC,GACjC,OAAO,IAAIJ,KAAKI,GAAWC,eCTd,GDYG,SAAqBjmB,GACrC,IAAI2D,EAAS3D,EAAK2D,OACd+X,EAAgB1b,EAAKib,SACrBA,OAA6B,IAAlBS,GAAmCA,EAC9CE,EAAU5b,EAAK4b,QACf/X,EAASF,EAAOA,OAAOE,OAEvBpD,EAAQkD,EAAOsD,UAAYtD,EAAOsD,UAAY,CAChDT,IAAK,EACLD,IAAK,KAEHC,EAAM/F,EAAM+F,IACZD,EAAM9F,EAAM8F,IAEZ2f,EAAU,aAAeriB,EAAQ,GACjC0f,EAAW2C,EAAQ,GACnB1C,EAAW0C,EAAQ,GAEnBC,EAAY,SAAmBtiB,GACjC,IAAIuiB,EAGFA,EADsB,SAApBziB,EAAOK,SACS,CAAC2hB,GAAU9hB,EAAO,IAAK8hB,GAAU9hB,EAAO,KAExCA,EAGpB+X,EAAQwK,EAAiBziB,EAAOvC,GJnCZ,UIsClB+hB,EAAsB,SAA6B7mB,GACrD,IACI+pB,EADA7nB,EAAM2D,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,WAI5EkkB,EADsB,SAApB1iB,EAAOK,SACW,aAARxF,EAAqB,CAACmnB,GAAUpC,GAAWoC,GAAU/C,OAAOtmB,KAAW,CAACqpB,GAAU/C,OAAOtmB,IAASqpB,GAAUnC,IAEpG,aAARhlB,EAAqB,CAAC+kB,EAAUX,OAAOtmB,IAAU,CAACsmB,OAAOtmB,GAAQknB,GAG/E5H,EAAQyK,EAAW1iB,EAAOvC,GJhDN,UImDtB,MAAwB,SAApBuC,EAAOK,SACF,IAAM4P,cAAc,GAAY,CACrCpN,IAAKuf,GAAUvf,GACfD,IAAKwf,GAAUxf,GACf0U,SAAUA,EACV3e,MAAO,CAACypB,GAAUxC,GAAWwC,GAAUvC,IACvCzL,SAAU,SAAkBzb,GAC1B,OAAO6pB,EAAU7pB,IAEnB6mB,oBAAqBA,IAIlB,IAAMvP,cAAc,GAAY,CACrCpN,IAAKA,EACLD,IAAKA,EACL0U,SAAUA,EACV3e,MAAO,CAACinB,EAAUC,GAClBzL,SAAU,SAAkBzb,GAC1B,OAAO6pB,EAAU7pB,IAEnB6mB,oBAAqBA,KExErBmD,GAAc,YAAO,IAAOnS,WAAW,CACzCC,YAAa,yBACbC,YAAa,eAFG,CAGf,CAAC,gCCPW,GDSG,SAAqBrU,GACrC,IAAI2D,EAAS3D,EAAK2D,OACd+X,EAAgB1b,EAAKib,SACrBA,OAA6B,IAAlBS,GAAmCA,EAC9CE,EAAU5b,EAAK4b,QACf2K,EAAiBvmB,EAAKwmB,UACtBA,OAA+B,IAAnBD,GAAmCA,EAC/C1iB,EAASF,EAAOA,OAAOE,OAEvBpD,EAAQkD,EAAOsD,UAAYtD,EAAOsD,UAAY,CAChDT,IAAK,EACLD,IAAK,KAEHC,EAAM/F,EAAM+F,IACZD,EAAM9F,EAAM8F,IAEZ+c,EAAkBZ,GAAQlc,IAAQkc,GAAQnc,GAC9C,OAAO,IAAMqN,cAAc0S,GAAa,CACtC9f,IAAKA,EACLD,IAAKA,EACLhK,KAAM+mB,EAAkB,GAAM,EAC9BrI,SAAUA,EACV3e,MAAOuH,EACPE,KAAMyiB,EAAY,SAAW,OAC7BnjB,KAAM,gBAAgBrE,OAAO2E,EAAOvC,IACpC2W,SAAU,SAAkBtb,GAC1B,OAAOmf,EAAQnf,EAAEqY,OAAOxY,MAAOqH,EAAOvC,GN9BpB,aQLT,GCGI,SAAsBpB,GACvC,IAAI2D,EAAS3D,EAAK2D,OACdgY,EAAe3b,EAAK4b,QACpBA,OAA2B,IAAjBD,EAA0B,aAAiBA,EACrD8K,EAAkBzmB,EAAK0mB,WACvBA,OAAiC,IAApBD,EAA6B,GAAKA,EAM/CnqB,EAAQoqB,EAAWjhB,MAAK,SAAUhF,GAEpC,OADYA,EAAMnE,QACDqH,EAAOM,UAE1B,OAAO,IAAM2P,cAAc,KAAQ,CACjCtX,MAAOA,EACPolB,YAAa,gBACbre,KAAM,iBAAiBrE,OAAO2E,EAAOvC,IACrC+T,QAASuR,EACT3O,SAbiB,SAAsB5C,GACvCyG,EAAQzG,EAASxR,EAAOvC,GTVF,eUDX,GCGK,SAAuBpB,GACzC,IAAI2D,EAAS3D,EAAK2D,OACd+X,EAAgB1b,EAAKib,SACrBA,OAA6B,IAAlBS,GAAmCA,EAC9CC,EAAe3b,EAAK4b,QACpBA,OAA2B,IAAjBD,EAA0B,aAAiBA,EACrD8K,EAAkBzmB,EAAK0mB,WACvBA,OAAiC,IAApBD,EAA6B,GAAKA,EAC/CnqB,EAAQqH,EAAOA,OAAOE,OAM1B,OAAO,IAAM+P,cAAc,KAAQ,CACjC+S,WAAY1L,EACZ3e,MAAOA,GAAgB,KACvBsqB,SAAS,EACTlF,YAAa,UAAU1iB,OAAO2E,EAAOM,QACrCZ,KAAM,wBAAwBrE,OAAO2E,EAAOvC,IAC5C+T,QAASuR,EACT3O,SAXiB,SAAsB5C,GACvCyG,EAAQzG,EAASxR,EAAOvC,GXPO,wBYPpB,GCGO,SAAyBpB,GAC7C,IAAI2D,EAAS3D,EAAK2D,OACd+X,EAAgB1b,EAAKib,SACrBA,OAA6B,IAAlBS,GAAmCA,EAC9CC,EAAe3b,EAAK4b,QACpBA,OAA2B,IAAjBD,EAA0B,aAAiBA,EACrD8K,EAAkBzmB,EAAK0mB,WACvBA,OAAiC,IAApBD,EAA6B,GAAKA,EAC/CnqB,EAA6B,WAArBqH,EAAOC,UAAyBD,EAAOA,OAAOE,OAAS6iB,EAAWjhB,MAAK,SAAUuW,GAC3F,OAAOA,EAAE1f,QAAUqH,EAAOC,aAO5B,OAAO,IAAMgQ,cAAc,KAAQ,CACjC+S,WAAY1L,EACZ3e,MAAOA,GAAgB,KACvBsqB,QAA8B,WAArBjjB,EAAOC,UAChB8d,YAAkC,WAArB/d,EAAOC,UAAyB,UAAU5E,OAAO2E,EAAOM,QAAU,mBAC/EZ,KAAM,oBAAoBrE,OAAO2E,EAAOvC,IACxC+T,QAASuR,EACT3O,SAXiB,SAAsB5C,GACvCyG,EAAQzG,EAASxR,EAAOvC,GbdA,iBcFjBylB,GAAmB,IAAO3S,IAAIC,WAAW,CAClDC,YAAa,0BACbC,YAAa,YAFe,CAG3B,CAAC,yCCHW,GCGE,SAAoBrU,GACnC,IAAI8mB,EAAY9mB,EAAK8mB,UACrB,OAAO,IAAMlT,cAAciT,GAAkB,KAAM,IAAMjT,cAAc,GAAQ,CAC7EnD,KAAM,QACNoF,QAAS,WACP,OAAOiR,MAER,gBCVMC,GAAkB,IAAO7S,IAAIC,WAAW,CACjDC,YAAa,yBACbC,YAAa,YAFc,CAG1B,CAAC,uBACO2S,GAAc,IAAO9S,IAAIC,WAAW,CAC7CC,YAAa,qBACbC,YAAa,YAFU,CAGtB,CAAC,4GACO4S,GAAsB,IAAO/S,IAAIC,WAAW,CACrDC,YAAa,6BACbC,YAAa,YAFkB,CAG9B,CAAC,uEACO6S,GAAe,IAAOhT,IAAIC,WAAW,CAC9CC,YAAa,sBACbC,YAAa,YAFW,CAGvB,CAAC,2EACO8S,GAAkB,IAAOjT,IAAIC,WAAW,CACjDC,YAAa,yBACbC,YAAa,YAFc,CAG1B,CAAC,2IC+HW,GA/HF,SAAgBrU,GAC3B,IAAIiC,EAAcjC,EAAKiC,YACnBgjB,EAAajlB,EAAKilB,WAClBmC,EAAepnB,EAAKyC,QACpBA,OAA2B,IAAjB2kB,EAA0B,GAAKA,EACzCC,EAAcrnB,EAAKU,OACnBA,OAAyB,IAAhB2mB,EAAyB,GAAKA,EACvC9kB,EAAgBvC,EAAKuC,cACrB1E,EAAYmC,EAAKnC,UACjBypB,EAAmB5mB,EAAOgD,KAAI,SAAU4F,GAC1C,MAAO,CACL/B,MAAO+B,EAAMU,UAAYV,EAAMU,SAAS7F,MAAQmF,EAAMU,SAAS7F,MAAQmF,EAAMI,WAAW6d,QAAQ,MAAO,KACvGjrB,MAAOgN,EAAMI,WACb1F,SAAUsF,EAAMvF,SAIhB6X,EAEJ,WACE,IAAInb,EAAQ,aAEZ,KAAoBhC,MAAK,SAAS0G,EAAQtB,EAAQzC,EAAI2C,GACpD,IAAIiE,EACJ,OAAO,KAAoBnJ,MAAK,SAAkBuG,GAChD,OACE,OAAQA,EAASrG,KAAOqG,EAAS5I,MAC/B,KAAK,EAEH,OADA4I,EAAS5I,KAAO,EACT,iBAAegrB,aAAa/kB,EAAS,CAC1CoB,OAAQA,EACRzC,GAAIA,EACJ2C,KAAMA,GACLxB,EAAe1E,EAAW6C,GAE/B,KAAK,EACHsH,EAAQ5C,EAAS/F,KACjB4lB,EAAW,CACTviB,KAAMsF,IAGR/F,EAAYwlB,mBAAmBzf,EAAOzF,GAExC,KAAK,EACL,IAAK,MACH,OAAO6C,EAASzF,UAGrBwF,OAGL,OAAO,SAAiBuiB,EAAIC,EAAKC,GAC/B,OAAOnnB,EAAM3D,MAAMjB,KAAMsG,YAjC7B,GAuDA,OAAO,IAAMyR,cAAcmT,GAAiB,KAAM,IAAMnT,cAAc,GAAY,CAChFkT,UAnBc,WACd,IAAI9e,EAAQ,GAAGhJ,OAAO,aAAmByD,GAAU,CAAC,YAAc,GAAI2iB,GAAqB,CACzFhkB,GAAI,KAAS,kBAEf6jB,EAAW,CACTviB,KAAMsF,QAeLvF,EAAQL,QAAU,IAAMwR,cAAcoT,GAAa,KAAM,uCAAwCvkB,EAAQiB,KAAI,SAAUC,GAC1H,OAAO,IAAMiQ,cAAcqT,GAAqB,CAC9CzoB,IAAKmF,EAAOvC,IACX,IAAMwS,cAAc,GAAY,CACjC0M,WAAW,GACV,IAAM1M,cAAc,GAAc,CACnCjQ,OAAQA,EACRiY,QAASA,EACT8K,WAAYY,IACV,IAAM1T,cAAcuT,GAAiB,KAAM,IAAMvT,cAAc,GAAQ,CACzE7P,KAAM,YACN8R,QAAS,WACP,OAvBa,SAAsBzU,GACvC,IAAI4G,EAAQvF,EAAQkB,QAAO,SAAUU,GACnC,OAAOA,EAAEjD,KAAOA,MACZ,GACN6jB,EAAW,CACTviB,KAAMsF,IAkBG6f,CAAalkB,EAAOvC,MAE5B,YAA+B,OAAlBuC,EAAOM,QAAmB,IAAM2P,cAAcsT,GAAc,KAAMhC,GAAanZ,QAAQpI,EAAOC,YAAc,GAAK,IAAMgQ,cAAc,GAAY,CAC/J0M,UlB1GkB,UkB0GP3c,EAAOC,WACjB,IAAMgQ,cAAc,GAAiB,CACtCjQ,OAAQA,EACRsX,SAA4B,OAAlBtX,EAAOM,OACjB2X,QAASA,EACT8K,WAAYrB,MACTF,GAAapZ,QAAQpI,EAAOC,YAAc,GAAK,IAAMgQ,cAAc,GAAY,KAAM,IAAMA,cAAc,GAAiB,CAC7HjQ,OAAQA,EACRsX,SAA4B,OAAlBtX,EAAOM,OACjB2X,QAASA,EACT8K,WAAYpB,MACTH,GAAapZ,QAAQpI,EAAOC,YAAc,GAAK,IAAMgQ,cAAc,GAAY,KlBlHrD,qBkBkH2DjQ,EAAOC,WAAuC,IAAMgQ,cAAc,GAAe,CACzKjQ,OAAQA,EACRiY,QAASA,EACT8K,WAAY/iB,EAAOsD,YlBrHU,qBkBsH3BtD,EAAOC,WAAuC,IAAMgQ,cAAc,GAAa,CACjF4S,WAAW,EACX7iB,OAAQA,EACRiY,QAASA,KACNsJ,GAAanZ,QAAQpI,EAAOC,YAAc,GAAK,IAAMgQ,cAAc,GAAY,KlB7HhE,UkB6HsEjQ,EAAOC,WAA4B,IAAMgQ,cAAc,GAAa,CAC5JqH,SAA4B,OAAlBtX,EAAOM,OACjBN,OAAQA,EACRiY,QAASA,IlB/HS,UkBgIhBjY,EAAOC,WAA4B,IAAMgQ,cAAc,GAAa,CACtEqH,SAA4B,OAAlBtX,EAAOM,OACjBN,OAAQA,EACRiY,QAASA,KACN,IAAMhI,cAAc,GAAc,CACrCjQ,OAAQA,EACRN,KAAM,mBAAmBrE,OAAO2E,EAAOvC,IACvCmG,MAAO,kBACPqU,QAASA,WC3IA,MAAa,SAAUtK,GACpC,MAAO,CACL/O,cAAe+O,EAAM/O,cACrB1E,UAAWyT,EAAMI,OAAOzR,QAAQmB,GAChCqB,QAAS6O,EAAM7O,QAAQC,KACvBhC,OAAQ4Q,EAAMI,OAAOhR,UAEtB,CACDukB,WAAY,IARC,CASZ,I,QCZQ6C,GAAQ,CAAC,CAClBxrB,MAAO,OACPiL,MAAO,QACN,CACDjL,MAAO,QACPiL,MAAO,UCLE,GAAc,CACvB8O,UAAW,WACT,MAAO,CACLC,SAAU,WACVC,UAAW,aACXC,OAAQ,UACRN,OAAQ,mCACRC,aAAc,MACdkG,gBAAiB,wBAGrB5F,mBAAoB,WAClB,MAAO,CACLR,QAAS,SAGbS,kBAAmB,SAA2BC,EAAUrF,GACtD,MAAO,CACLwF,MAAO,UACPC,WAAY,sBAGhBC,oBAAqB,WACnB,MAAO,CACLF,MAAO,UACPb,QAAS,OACTvH,QAAS,MACTqI,WAAY,cACZR,UAAW,aACXD,SAAU,WACVW,IAAK,QAGTjB,QAAS,WACP,MAAO,CACLC,QAAS,OACTC,OAAQ,OACRC,aAAc,MACdzH,QAAS,WCuCA,GAlEE,SAAoB1O,GACnC,IAAIkL,EAAQlL,EAAKkL,MACbkI,EAAWpT,EAAKoT,SAChB2U,EAAO7c,EAAM6c,KACbC,EAAY9c,EAAM8c,UAClBC,EAAc/c,EAAM+c,YACpBC,EAAgBhd,EAAMgd,cACtBC,EAAeL,GAAMriB,MAAK,SAAUpB,GACtC,OAAOA,EAAE/H,QAAUyrB,MACfD,GAAM,GAQRM,EAAmB,SAA0B5pB,EAAKlC,GACpD,IAAI+rB,EAAM,IAAIC,OAAO,YACjBjT,EAAqB,KAAV/Y,GAAgB+rB,EAAIE,KAAK3F,OAAOtmB,IAAUA,EAAQ,OACjE8W,EAAS,YAAc,GAAIlI,EAAO,aAAgB,GAAI1M,EAAK6W,MAG7D,OAAO,IAAMzB,cAAc,MAAO,KAAM,IAAMA,cAAc,GAAW,CACrE6N,QAAS,iBACR,QAAS,IAAM7N,cAAc,KAAQ,CACtCtX,MAAO6rB,EACPpQ,SAhBqB,SAA0BE,GAC/C7E,EAAS,YAAc,GAAIlI,EAAO,CAChC6c,KAAM9P,EAAO3b,UAef6Y,QAAS2S,GACT5P,OAAQ,KACN,IAAMtE,cAAc,KAAM,MAAO,IAAMA,cAAc,GAAe,CACtEyM,KAAK,GACJ,IAAMzM,cAAc,GAAY,KAAM,IAAMA,cAAc,GAAW,CACtE6N,QAAS,yBACR,cAAe,IAAM7N,cAAc,GAAO,CAC3CvQ,KAAM,wBACN/G,MAAqB,SAAd0rB,EAAuB,GAAKA,EACnCjkB,KAAM,OACNgU,SAAU,SAAkBtb,GAC1B,OAAO2rB,EAAiB,YAAa3rB,EAAEqY,OAAOxY,QAEhDolB,YAAa,UACV,IAAM9N,cAAc,GAAY,KAAM,IAAMA,cAAc,GAAW,CACxE4U,OAAO,EACPC,GAAI,2BACH,gBAAiB,IAAM7U,cAAc,GAAO,CAC7CvQ,KAAM,0BACN/G,MAAuB,SAAhB2rB,EAAyB,GAAKA,EACrClkB,KAAM,OACNgU,SAAU,SAAkBtb,GAC1B,OAAO2rB,EAAiB,cAAe3rB,EAAEqY,OAAOxY,QAElDolB,YAAa,UACV,IAAM9N,cAAc,GAAY,KAAM,IAAMA,cAAc,GAAW,CACxE6N,QAAS,4BACR,mBAAoB,IAAM7N,cAAc,GAAO,CAChDvQ,KAAM,2BACN/G,MAAyB,SAAlB4rB,EAA2B,GAAKA,EACvCnkB,KAAM,OACNgU,SAAU,SAAkBtb,GAC1B,OAAO2rB,EAAiB,gBAAiB3rB,EAAEqY,OAAOxY,QAEpDolB,YAAa,aCtEF,MAAa,SAAUpQ,GACpC,MAAO,CACLpG,MAAOoG,EAAMpG,SAEd,CACDkI,SAAU,GALG,CAMZ,ICRQsV,GAAwB,IAAOxU,IAAIC,WAAW,CACvDC,YAAa,+BACbC,YAAa,gBAFoB,CAGhC,CAAC,sJACOsU,GAAmB,IAAOzU,IAAIC,WAAW,CAClDC,YAAa,0BACbC,YAAa,gBAFe,CAG3B,CAAC,iIACOuU,GAAgB,IAAO1U,IAAIC,WAAW,CAC/CC,YAAa,uBACbC,YAAa,gBAFY,CAGxB,CAAC,wDAAyD,gIAAgI,SAAUC,GACrM,OAAOA,EAAMI,OAAS,oBAAsB,sCAEnCmU,GAAkB,IAAO3U,IAAIC,WAAW,CACjDC,YAAa,yBACbC,YAAa,gBAFc,CAG1B,CAAC,KACOyU,GAAkB,IAAO5U,IAAIC,WAAW,CACjDC,YAAa,yBACbC,YAAa,gBAFc,CAG1B,CAAC,yEACO0U,GAAoB,IAAO7U,IAAIC,WAAW,CACnDC,YAAa,2BACbC,YAAa,gBAFgB,CAG5B,CAAC,sBCoBW,GA1CG,SAAqBrU,GACrC,IAAIkL,EAAQlL,EAAKkL,MACbkI,EAAWpT,EAAKoT,SAChBhI,EAAUF,EAAME,QAChBC,EAAiBH,EAAMG,eAQ3B,OAAO,IAAMuI,cAAc8U,GAAuB,KAAMtd,EAAQ1H,KAAI,SAAUslB,GAC5E,OAAO,IAAMpV,cAAc+U,GAAkB,CAC3CnqB,IAAKwqB,EAAM3lB,MACV,IAAMuQ,cAAcgV,GAAe,CACpClU,OAAQrJ,IAAmB2d,EAAM3lB,KACjCwS,QAAS,WACP,OAZc,SAAuBmT,GACzC5V,EAAS,YAAc,GAAIlI,EAAO,CAChCG,eAAgB2d,EAAM3lB,QAUb4lB,CAAcD,KAEtB,IAAMpV,cAAciV,GAAiB,KAAM,IAAMjV,cAAckV,GAAiB,KAAME,EAAM3lB,MAAO,IAAMuQ,cAAcmV,GAAmB,KAAM,IAAMnV,cAAc,MAAO,CAC5KkL,MAAO,CACLoK,UAAW,OACX3E,WAAYyE,EAAMza,aAElB,IAAMqF,cAAc,MAAO,CAC7BkL,MAAO,CACLoK,UAAW,OACXjT,QAAS,SAEV+S,EAAM/b,SAASvJ,KAAI,SAAUoT,GAC9B,OAAO,IAAMlD,cAAc,MAAO,CAChCpV,IAAKsY,EACLgI,MAAO,CACLoK,UAAW,GAAGlqB,OAAO,IAAMgqB,EAAM/b,SAAS7K,OAAQ,KAClDmiB,WAAYzN,kBCpCP,MAAa,SAAUxF,GACpC,MAAO,CACLpG,MAAOoG,EAAMpG,SAEd,CACDkI,SAAU,GALG,CAMZ,ICIC+V,GAA2B,IAAOjV,IAAIC,WAAW,CACnDC,YAAa,sCACbC,YAAa,gBAFgB,CAG5B,CAAC,8IACA,GAAkB,IAAOH,IAAIC,WAAW,CAC1CC,YAAa,6BACbC,YAAa,gBAFO,CAGnB,CAAC,+DAAgE,+DAAgE,IAAK,IAAK,IxDpBnH,QwDoBuI6I,GAAe,EAAG,EAAG,EAAG,IAAI,SAAU5I,GACtM,OAAOA,EAAMoI,QAAQN,WAAa,YAAI,CAAC,6HACtC,SAAU9H,GACX,OAAOA,EAAMoI,QAAQN,WAAa9H,EAAMoI,QAAQC,QAAU,YAAI,CAAC,8FAA+F,axDvBrI,YwDsFZ,GA5DK,SAAuB3c,GACzC,IAAInC,EAAYmC,EAAKnC,UACjBwT,EAAQrR,EAAKqR,MACbJ,EAAUjR,EAAKiR,QACfuC,EAAqBxT,EAAKwT,mBAC1BkJ,EAAU1c,EAAK0c,QACfza,EAAcjC,EAAKiC,YAEnBmnB,EAAe,SAAsB9sB,EAAOyH,GACjC,UAATA,GACFyP,EAAmB,CACjBnC,MAAO/U,KAKb,OAAKuB,EAME,IAAM+V,cAAc,GAAiB,CAC1C8I,QAASA,GACR,IAAM9I,cAAc,GAAM,KAAM,IAAMA,cAAcyL,GAAK,CAC1D9X,MAAO,WACN,IAAMqM,cAAc,GAAW,KAAM,IAAMA,cAAc,GAAkB,CAC5EtQ,MAAO,0BACN,IAAMsQ,cAAc,GAAY,OAAQ,IAAMA,cAAc,GAAkB,CAC/EtQ,MAAO,WACN,IAAMsQ,cAAc,GAAQ,CAC7B3R,YAAaA,KACV,IAAM2R,cAAc,GAAkB,CACzCtQ,MAAO,SACN2N,GAAW,IAAM2C,cAAc,GAAa,MAAOvC,GAAS,IAAMuC,cAAc,GAAY,CAC7FpN,IAAK,EACLD,IAAK,IACLwR,SAAU,SAAkBzb,GAC1B,OAAO8sB,EAAa9sB,EAAO,UAE7B6mB,oBAAqB,SAA6B7mB,GAChD,OAAO8sB,EAAa9sB,EAAO,UAE7BiL,MAAO,QACPjL,MAAO+U,OACF,IAAMuC,cAAcyL,GAAK,CAC9B9X,MAAO,eACPlJ,SAAS,GACR,IAAMuV,cAAc,GAAW,KAAM,IAAMA,cAAc,GAAkB,CAC5EtQ,MAAO,cACN,IAAMsQ,cAAc,GAAY,OAAQ,IAAMA,cAAc,GAAkB,CAC/EtQ,MAAO,QACPsa,aAAa,GACZ,IAAMhK,cAAc,GAAa,SAAU,IAAMA,cAAcyL,GAAK,CACrE9X,MAAO,YACN,IAAMqM,cAAc,GAAY,OAAQ,IAAMA,cAAcyL,GAAK,CAClE9X,MAAO,cACN,IAAMqM,cAAc,GAAW,SAxCzB,IAAMA,cAAc,GAAiB,CAC1C8I,QAASA,GACR,IAAM9I,cAAcuV,GAA0B,KAAM,IAAMvV,cAAc,KAAM,KAAM,yBAA0B,IAAMA,cAAc,IAAK,KAAM,6CC1CrI,MAAa,SAAUtC,GACpC,MAAO,CACLzT,UAAWyT,EAAMI,OAAOzR,SAAWqR,EAAMI,OAAOzR,QAAQmB,GAAKkQ,EAAMI,OAAOzR,QAAQmB,GAAK,KACvFiQ,MAAOC,EAAM/O,cAAc8O,MAC3BJ,QAASK,EAAM/O,cAAc0O,QAC7ByL,QAASpL,EAAMpG,MAAMwR,WAEtB,CACDlJ,mBAAoB,IARP,CASZ,ICZH,SAAS,KAeP,OAdA,GAAWtW,OAAO+F,QAAU,SAAU6R,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAI5S,UAAUC,OAAQ2S,IAAK,CACzC,IAAIpE,EAASxO,UAAU4S,GAEvB,IAAK,IAAIvW,KAAOmS,EACVzT,OAAO8X,UAAUC,eAAeC,KAAKvE,EAAQnS,KAC/CsW,EAAOtW,GAAOmS,EAAOnS,IAK3B,OAAOsW,IAGOhY,MAAMjB,KAAMsG,WAK9B,IAAIknB,GAAO,IAAOC,IAAInV,WAAW,CAC/BC,YAAa,kBACbC,YAAa,YAFJ,CAGR,CAAC,qBAAsB,QAAQ,SAAUC,GAC1C,OAAQA,EAAMiV,WAAajV,EAAMiV,WAAa,YAAc,UAW/C,GARC,SAAmBjV,GACjC,OAAO,IAAMV,cAAcyV,GAAM,GAAS,GAAI/U,EAAO,CACnDT,QAAS,cACP,IAAMD,cAAc,OAAQ,CAC9BI,EAAG,qKC9BIwV,GAAiB,IAAOtV,IAAIC,WAAW,CAChDC,YAAa,wBACbC,YAAa,gBAFa,CAGzB,CAAC,0IAA2I,eAAgB,YAAa,6DAA6D,SAAUC,GACjP,OAAOA,EAAMqI,OAAS,MAAQ,KAC7B,SAAUrI,GACX,OAAOA,EAAMqI,OAAS,UAAY,YACjC,SAAUrI,GACX,OAAOA,EAAMqI,OAAS,EAAI,KAEjB8M,GAAuB,IAAOvV,IAAIC,WAAW,CACtDC,YAAa,8BACbC,YAAa,gBAFmB,CAG/B,CAAC,0VAA2V,gKAAgK,SAAUC,GACvgB,OAAOA,EAAMqI,OAAS,gBAAkB,uBAE/B+M,GAAqB,IAAOxV,IAAIC,WAAW,CACpDC,YAAa,4BACbC,YAAa,gBAFiB,CAG7B,CAAC,uKACOsV,GAAsB,IAAOnP,OAAOrG,WAAW,CACxDC,YAAa,6BACbC,YAAa,gBAFkB,CAG9B,CAAC,gLACOuV,GAAgB,IAAO1V,IAAIC,WAAW,CAC/CC,YAAa,uBACbC,YAAa,gBAFY,CAGxB,CAAC,sBCxBO,GAAQ,SAAerU,GAChC,IAAI2c,EAAS3c,EAAK2c,OACdkN,EAAa7pB,EAAK6pB,WAClBnP,EAAW1a,EAAK0a,SACpB,OAAO,IAAM9G,cAAc4V,GAAgB,CACzC7M,OAAQA,GACP,IAAM/I,cAAc6V,GAAsB,CAC3C9M,OAAQA,GACP,IAAM/I,cAAc8V,GAAoB,KAAM,IAAM9V,cAAc+V,GAAqB,CACxF9T,QAAS,WACP,OAAOgU,MAER,IAAMjW,cAAc,GAAW,CAChCjH,MAAO,OACPC,OAAQ,OACR2c,WAAY,aACT7O,EAAU,IAAM9G,cAAcgW,GAAe,KAAM,IAAMhW,cAAc,GAAQ,CAClFiC,QAAS,WACP,OAAOgU,KAET9lB,KAAM,OACL,oBCnBD+lB,GAAe,IAAOC,OAAO5V,WAAW,CAC1CC,YAAa,0BACbC,YAAa,YAFI,CAGhB,CAAC,qBAAsB,sG7DTC,S6DoCZ,GAzBF,SAAgBrU,GAC3B,IAAIgqB,EAAgBhqB,EAAKgqB,cACrBC,EAASjqB,EAAKiqB,OAEd3N,EAAY,oBAAS,GACrBC,EAAa,aAAeD,EAAW,GACvC4N,EAAY3N,EAAW,GACvB4N,EAAe5N,EAAW,GAE9B,OAAO,IAAM3I,cAAckW,GAAc,KAAM,IAAMlW,cAAc,GAAO,CACxE+I,OAAQuN,EACRL,WAAY,WACV,OAAOM,GAAa,KAErB,IAAMvW,cAAc,KAAM,KAAM,uCAAwC,IAAMA,cAAc,GAAQ,CACrGiC,QAAS,WACP,OAAOsU,GAAa,IAEtBpmB,KAAM,aACL,cAAeimB,GAAiB,IAAMpW,cAAc,GAAQ,CAC7D7P,KAAM,MACN8R,QAASoU,GACR,iBC9BU,MAAa,SAAU3Y,GACpC,MAAO,CACL0Y,cAAe1Y,EAAMI,OAAOsY,iBAFjB,CAIZ,ICLQ,GAAkB,IAAO9V,IAAIC,WAAW,CACjDC,YAAa,yBACbC,YAAa,gBAFc,CAG1B,CAAC,cAAe,KAAK,SAAUC,GAChC,OAAOA,EAAM8H,UAAY,YAAI,CAAC,4FAA6F,M/DNlG,S+DM0H,YAAI,CAAC,wJCC1J,SAAS,GAAgBsE,EAAKliB,EAAKlC,GAYjC,OAXIkC,KAAOkiB,EACTxjB,OAAOC,eAAeujB,EAAKliB,EAAK,CAC9BlC,MAAOA,EACPykB,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIliB,GAAOlC,EAGNokB,EAaT,IC5BI0J,GCDAC,GFsKW,GAvIf,SAAU7J,GAGR,SAAS8J,EAAOhW,GACd,IAAI9Q,EAEJ,YAAgB3H,KAAMyuB,GAEtB9mB,EAAQ,YAA2B3H,KAAM,YAAgByuB,GAAQpV,KAAKrZ,KAAMyY,IAE5E,GAAgB,YAAuB9Q,GAAQ,wBAAyB,KAAS,SAAUwmB,IAEzF1hB,EADgB9E,EAAM8Q,MAAMhM,WAClB,CACR0hB,cAAeA,MAEhB,MAEH,GAAgB,YAAuBxmB,GAAQ,wBAAyB,KAAS,SAAU3F,EAAW+C,GACpG4C,EAAMvB,YAAYsoB,cAAc1sB,EAAW+C,KAC1C,MAEH,GAAgB,YAAuB4C,GAAQ,eAAgB,KAAS,SAAU0H,IAEhFkI,EADe5P,EAAM8Q,MAAMlB,UAClBlI,KACR,MAEH,GAAgB,YAAuB1H,GAAQ,iBAAkB,KAAS,SAAU4H,IAElFiI,EADgB7P,EAAM8Q,MAAMjB,WAClBjI,KACT,MAEH,IAAIuV,EAAcnd,EAAM8Q,MACpBkW,EAAa7J,EAAY9iB,UACzB4sB,EAAY9J,EAAY/f,SACxByH,EAAUsY,EAAYtY,QACtBqiB,EAAa/J,EAAYrY,UACzBC,EAAWoY,EAAYpY,SACvBoiB,EAAShK,EAAYzV,MACrB0f,EAAWjK,EAAYvV,QAc3B,OAbA5H,EAAMymB,OAASzmB,EAAMymB,OAAOY,KAAK,YAAuBrnB,IACxDA,EAAMvB,YAAc,IAAI,cAAYuoB,EAAYC,EAAWpiB,EAASqiB,EAAYniB,GAEhF/E,EAAMvB,YAAY6oB,sBAElBtnB,EAAMunB,aAAaJ,GAEnBnnB,EAAMwnB,eAAeJ,GAErBtW,EAAM/L,SAAS,CACbxE,KAAM,YAAU4E,WAAWsiB,+BAC3BlkB,QAASsB,IAEJ7E,EAgFT,OAnIA,YAAU8mB,EAAQ9J,GAsDlB,YAAa8J,EAAQ,CAAC,CACpB9rB,IAAK,qBACLlC,MAAO,WACeT,KAAKyY,MAAM0V,eAG7BnuB,KAAKqvB,0BAGR,CACD1sB,IAAK,qBACLlC,MAAO,SAA4B6kB,GACjC,IAAIgK,EAAgBhK,EAAUtjB,UAC1ButB,EAAejK,EAAUvgB,SACzByqB,EAAYlK,EAAUjW,MACtBogB,EAAcnK,EAAU/V,QACxBmgB,EAAoBpK,EAAU6I,cAC9BwB,EAAe3vB,KAAKyY,MACpBzW,EAAY2tB,EAAa3tB,UACzB+C,EAAW4qB,EAAa5qB,SACxBsK,EAAQsgB,EAAatgB,MACrBE,EAAUogB,EAAapgB,QAEvB4e,GADUwB,EAAanjB,QACPmjB,EAAaxB,eAE5B,IAAQnsB,EAAWstB,IAAmB,IAAQvqB,EAAUwqB,IAC3DvvB,KAAK4vB,sBAAsB5tB,EAAW+C,GAGnC,IAAQsK,EAAOmgB,IAClBxvB,KAAKkvB,aAAa7f,GAGf,IAAQE,EAASkgB,IACpBzvB,KAAKmvB,eAAe5f,GAGjB,IAAQ4e,EAAeuB,IAC1B1vB,KAAKqvB,sBAAsBlB,KAK9B,CACDxrB,IAAK,SACLlC,MAAO,WACL,IAAIovB,EAAe7vB,KAAKyY,MACpB2V,EAASyB,EAAazB,OACtB1hB,EAAWmjB,EAAanjB,SACxBjG,EAAcopB,EAAappB,YAC3B+F,EAAUqjB,EAAarjB,QACvBnG,EAAcwpB,EAAaxpB,YAET,oBAAX+nB,GACT5hB,EAAQsjB,WAAW1B,EAAQpuB,KAAKoG,YAAaC,EAAaI,GAG5DiG,EAAS,CACPxE,KAAM,YAAU4E,WAAWijB,gBAG9B,CACDptB,IAAK,SACLlC,MAAO,WACL,IAAIuvB,EAAehwB,KAAKyY,MACpB/R,EAAgBspB,EAAatpB,cAC7B8F,EAAUwjB,EAAaxjB,QACvBqU,EAAUmP,EAAa3gB,MAAMwR,QACjC,OAAO,IAAM9I,cAAc,GAAiB8I,EAAS,IAAM9I,cAAc,GAAU,MAAOrR,EAAc8O,OAAS,IAAMuC,cAAc,GAAe,CAClJvL,QAASA,EACTpG,YAAapG,KAAKoG,cAChB,IAAM2R,cAAc,GAAQ,CAC9BqW,OAAQpuB,KAAKouB,cAKZK,EApIT,CAqIE,IAAMvI,WGlKO,MAAa,SAAUzQ,GACpC,MAAO,CACLI,OAAQJ,EAAMI,OACdnP,cAAe+O,EAAM/O,cACrBtB,OAAQqQ,EAAMrQ,OACdqB,YAAagP,MAEd,SAAU/I,GACX,MAAO,CACLA,SAAUA,EACVD,UAAW,SAAmBhI,GAC5B,OAAOiI,EAAS,EAAWjI,KAE7B8S,SAAU,SAAkB9S,GAC1B,OAAOiI,EAAS,EAAUjI,KAE5B+S,UAAW,SAAmB/S,GAC5B,OAAOiI,EAAS,EAAWjI,QAjBlB,CAoBZ,ICxBY,GCUf,SAAUkgB,GAGR,SAASsL,IAGP,OAFA,YAAgBjwB,KAAMiwB,GAEf,YAA2BjwB,KAAM,YAAgBiwB,GAAchvB,MAAMjB,KAAMsG,YA6CpF,OAlDA,YAAU2pB,EAActL,GAQxB,YAAasL,EAAc,CAAC,CAC1BttB,IAAK,SACLlC,MAAO,WACL,IAAIqkB,EAAc9kB,KAAKyY,MACnB0V,EAAgBrJ,EAAYqJ,cAC5B9nB,EAAcye,EAAYze,YAC1B+nB,EAAStJ,EAAYsJ,OACrBpsB,EAAY8iB,EAAY9iB,UACxBkuB,EAAuBpL,EAAY/f,SACnCA,OAAoC,IAAzBmrB,EAAkC,KAAOA,EACpD1jB,EAAUsY,EAAYtY,QACtB6C,EAAQyV,EAAYzV,MACpBE,EAAUuV,EAAYvV,QACtB4gB,EAAsBrL,EAAYjE,QAClCA,OAAkC,IAAxBsP,GAAwCA,EAEtD,GAAuB,oBAAZ3jB,EACT,MAAM,IAAI/C,MAAM,+EAGlB,IAAKzH,EACH,MAAM,IAAIyH,MAAM,wDAGlB,OAAO,IAAMsO,cAAc,GAAQ,CACjCoW,cAAeA,EACf9nB,YAAaA,EACb+nB,OAAQA,EACRpsB,UAAWA,EACX+C,SAAUA,EACVyH,QAAS,IAAIA,EACb+C,QAASA,EACTF,MAAO,YAAc,GAAIA,EAAO,CAC9BwR,QAAS,CACPN,UAAWM,EACXC,QAAQ,WAOXmP,EAnDT,CAoDE,IAAM/J,WC5DO,gBAAgB,GAAI,GAAmB,SAAUzQ,EAAOtR,GACrE,IAAI+G,EAAU/G,EAAK+G,QACnB,OAAO,YAAc,GAAIuK,EAAO,GAAIvK,MCLvB,IACbijB,eAAe,EACfnhB,WAAW,EACX6B,aAAa,EACbzK,QAAS,KACTgB,OAAQ,KACRuH,WAAY,KACZgC,OAAQ,MNAM,IAAA4f,GAAA,GAA4B,aAAgBA,GAAuB,GAAkB,SAAU9Y,EAAOtR,GACpH,IAAI+G,EAAU/G,EAAK+G,QACnB,OAAO,YAAc,GAAIuK,EAAO,GAAIvK,MAClC,aAAgBqjB,GAAuB,GAAmB,SAAU9Y,EAAO7Q,GAC7E,IAAIsG,EAAUtG,EAAMsG,QACpB,OAAO,YAAc,GAAIuK,EAAO,CAC9BlG,QAAS,GAAGpM,OAAO,aAAmBsS,EAAMlG,SAAU,aAAmBrE,SAEzEqjB,IOfW,IACb1N,QAAS,CACPN,WAAW,EACXO,QAAQ,GAEVvR,QAAS,CAAC,CACR/H,KAAM,UACNkL,UAAW,UACXtB,SAAU,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,aAEvK6J,MAAO,UACP0I,OAAQ,CACNC,MAAO,UACPG,gBAAiB,WAEnBvU,eAAgB,UAChB0c,KAAM,OACNC,UAAW,OACXC,YAAa,OACbC,cAAe,QClBN+D,GAAY,EAAa,oBACrB,IACbA,UAAWA,ICAE,gBAAgB,GAAI,IAAmB,SAAU3a,EAAOtR,GACrE,IAAI+G,EAAU/G,EAAK+G,QACnB,OAAO,YAAc,GAAIuK,EAAO,GAAIvK,MCLvB,MTMC,IAAAsjB,GAAA,GAA4B,aAAgBA,GAAuB,IAA0B,SAAU/Y,EAAOtR,GAC5H,IAAI+G,EAAU/G,EAAK+G,QACnB,OAAO,YAAc,GAAIuK,EAAO,GAAIvK,MAClC,aAAgBsjB,GAAuB,IAA4B,SAAU/Y,EAAO7Q,GACtF,IAAIsG,EAAUtG,EAAMsG,QACpB,OAAO,YAAc,GAAIuK,EAAO,GAAIvK,MAClCsjB,IUZW,IACb/mB,MAAO,GACP0B,QAAS,GACTknB,kBAAmB,QACnBtgB,UAAW,MACXC,UAAW,aACXoR,gBAAiB,CAAC,CAChB3gB,MAAO,MACPsP,UAAW,MACXC,UAAW,KACXtE,MAAO,OACN,CACDjL,MAAO,iBACPsP,UAAW,MACXC,UAAW,aACXtE,MAAO,oBACN,CACDjL,MAAO,eACPsP,UAAW,MACXC,UAAW,WACXtE,MAAO,kBACN,CACDjL,MAAO,OACPsP,UAAW,OACXC,UAAW,KACXtE,MAAO,QACN,CACDjL,MAAO,UACPuP,UAAW,aACXtE,MAAO,aC1BI,gBAAgB,GAAI,IAAoB,SAAU+J,EAAOtR,GACtE,IAAI+G,EAAU/G,EAAK+G,QACnB,OAAO,YAAc,GAAIuK,EAAO,GAAIvK,MCLvB,IACbrE,KAAM,ICQJypB,GAAU,CACZ5pB,cAAe,uBAAa,GAC5BmP,OAAQ,uBAAa,GACrBxG,MAAO,uBAAa,GACpBzI,QAAS,uBAAa,GACtBxB,OAAQ,uBAAa,IAER,gBAAgB,GAAI,YAAUiS,cAAe,0BAAgBiZ,K,UCd7D,GADM,e,SCEjBC,GAEJ,KAAoB3tB,KAAK4tB,IACrBC,GAEJ,KAAoB7tB,KAAK8tB,IAOzB,SAASF,KACP,IAAIrsB,EAAMwsB,EAAuBnpB,EAAME,EAAaL,EAAcX,EAElE,OAAO,KAAoB1D,MAAK,SAAsBuG,GACpD,OACE,OAAQA,EAASrG,KAAOqG,EAAS5I,MAC/B,KAAK,EAEH,OADA4I,EAAS5I,KAAO,EACT,eAET,KAAK,EAWH,OAVAwD,EAAOoF,EAAS/F,KAChBmtB,EAAwBxsB,EAAKysB,aAAa/a,OAAOzQ,OAAOV,WACxD8C,EAAOmpB,EAAsBnpB,KAC7BE,EAAcipB,EAAsBjpB,YACpCL,EAAespB,EAAsBtpB,aACrCX,EAAgB,YAAc,GAAIW,EAAa6B,aAAc,CAC3DzB,MAAOD,EACP2B,QAASzB,IAEX6B,EAAS5I,KAAO,GACT,aAAI8W,GAAiB/Q,IAE9B,KAAK,GACL,IAAK,MACH,OAAO6C,EAASzF,UAGrBysB,IAGU,SAASG,KACtB,OAAO,KAAoB1tB,MAAK,SAAmBC,GACjD,OACE,OAAQA,EAAUC,KAAOD,EAAUtC,MACjC,KAAK,EAEH,OADAsC,EAAUtC,KAAO,EACV,aAAW,YAAUmM,WAAWC,+BAAgCyjB,IAEzE,KAAK,EACL,IAAK,MACH,OAAOvtB,EAAUa,UAGtB2sB,ICxDL,IAAI,GAEJ,KAAoB7tB,KAAKiuB,IACrB,GAEJ,KAAoBjuB,KAAK,IACrBkuB,GAEJ,KAAoBluB,KAAKmuB,IACrBC,GAEJ,KAAoBpuB,KAAKquB,IACrBC,GAEJ,KAAoBtuB,KAAKuuB,IACrBC,GAEJ,KAAoBxuB,KAAK,IAOrByuB,GAAa,IAAI,aACjBC,GAAuB,KAE3B,SAASC,GAAc1F,GACrB,OAAO2F,GAAevwB,MAAMjB,KAAMsG,WAGpC,SAASkrB,KAiCP,OAhCAA,GAAiB,aAEjB,KAAoB5uB,MAAK,SAAS0G,EAAQ7C,GACxC,IAAIC,EAAeE,EAASrB,EAAIgJ,EAAgBkjB,EAAiC7vB,EAAcmB,EAAU0B,EAEzG,OAAO,KAAoBzB,MAAK,SAAkBkD,GAChD,OACE,OAAQA,EAAUhD,KAAOgD,EAAUvF,MACjC,KAAK,EAMH,OALA+F,EAAgBD,EAAYC,cAAeE,EAAUH,EAAYG,QAASrB,EAAKkB,EAAYoP,OAAOzR,QAAQmB,GAC1GgJ,EAAiB,IAAI,iBAAe7H,EAAeE,EAASrB,GAC5DksB,EAAWljB,EAAeG,WACoB9M,EAAtB0vB,GAA2D1vB,aACnFsE,EAAUvF,KAAO,EACVyC,MAAM,GAAGD,OAAOvB,EAAc,KAAKuB,OAAOoC,EAAI,SAASpC,OAAOsuB,IAEvE,KAAK,EAGH,OAFA1uB,EAAWmD,EAAU1C,KACrB0C,EAAUvF,KAAO,EACVoC,EAASU,OAElB,KAAK,EAEH,OADAgB,EAAOyB,EAAU1C,KACV0C,EAAUxC,OAAO,SAAUe,GAEpC,KAAK,GACL,IAAK,MACH,OAAOyB,EAAUpC,UAGtBwF,QAEiBrI,MAAMjB,KAAMsG,WAGpC,SAASuqB,GAA0B1sB,GACjC,IAAI+G,EACJ,OAAO,KAAoBlI,MAAK,SAAoCuG,GAClE,OACE,OAAQA,EAASrG,KAAOqG,EAAS5I,MAC/B,KAAK,EACHuK,EAAU/G,EAAK+G,QACfomB,GAAuBpmB,EAEzB,KAAK,EACL,IAAK,MACH,OAAO3B,EAASzF,UAGrB,IAGL,SAAS,KACP,IAAIc,EAAO8sB,EAAoB7b,EAAQnP,EAAe2I,EAAO1C,EAAYtF,EAAcsqB,EAAMxsB,EAAOyrB,EAEpG,OAAO,KAAoB5tB,MAAK,SAAsBC,GACpD,OACE,OAAQA,EAAUC,KAAOD,EAAUtC,MACjC,KAAK,EAEH,OADAsC,EAAUtC,KAAO,EACV,eAET,KAAK,EAUH,OATAiE,EAAQ3B,EAAUO,KAClBkuB,EAAqB9sB,EAAMgsB,aAC3B/a,EAAS6b,EAAmB7b,OAC5BnP,EAAgBgrB,EAAmBhrB,cACnC2I,EAAQqiB,EAAmBriB,MAC3B1C,EAAakJ,EAAOlJ,WACpBtF,EAAewO,EAAOzQ,OAAOV,WAAW2C,aACxCsqB,EAAO,IAAI,cAAYtqB,EAAcsF,EAAYjG,EAAe2I,GAChEpM,EAAUtC,KAAO,GACV,aAAIyvB,GAAUuB,EAAKxhB,aAE5B,KAAK,GAEH,OADAlN,EAAUtC,KAAO,GACV,eAET,KAAK,GACHwE,EAAQlC,EAAUO,KAClBotB,EAAezrB,EAAMyrB,aACrBS,GAAWO,WAAWhB,GAExB,KAAK,GACL,IAAK,MACH,OAAO3tB,EAAUa,UAGtB,IAGL,SAASitB,KACP,IAAIprB,EAAOirB,EAAciB,EAEzB,OAAO,KAAoB7uB,MAAK,SAA2BqB,GACzD,OACE,OAAQA,EAAUnB,KAAOmB,EAAU1D,MACjC,KAAK,EAEH,OADA0D,EAAU1D,KAAO,EACV,eAET,KAAK,EAIH,OAHAgF,EAAQtB,EAAUb,KAClBotB,EAAejrB,EAAMirB,aACrBvsB,EAAU1D,KAAO,EACV,aAAK,CAAC0wB,GAAY,QAAST,GAEpC,KAAK,EAGH,MAFAiB,EAAcxtB,EAAUb,OAEHquB,EAAYtrB,OAAS,GAAI,CAC5ClC,EAAU1D,KAAO,GACjB,MAGF0D,EAAUV,GAAK,KAAoByK,KAAKyjB,GAE1C,KAAK,EACH,IAAKxtB,EAAUytB,GAAKztB,EAAUV,MAAM5C,KAAM,CACxCsD,EAAU1D,KAAO,GACjB,MAKF,OAFAoxB,MAAQ1tB,EAAUytB,GAAGrxB,MACrB4D,EAAU1D,KAAO,GACV,aAAI,CACTuH,KAAM2pB,EAAYE,SAGtB,KAAK,GACH1tB,EAAU1D,KAAO,EACjB,MAEF,KAAK,GACL,IAAK,MACH,OAAO0D,EAAUP,UAGtBgtB,IAGL,SAASG,KACP,IAAIhrB,EAAO+rB,EAAoBnc,EAAQnP,EAAe2I,EAAO1C,EAAYtF,EAAcsqB,EAEvF,OAAO,KAAoB3uB,MAAK,SAAuB8B,GACrD,OACE,OAAQA,EAAU5B,KAAO4B,EAAUnE,MACjC,KAAK,EAEH,OADAmE,EAAUnE,KAAO,EACV,eAET,KAAK,EAOH,GANAsF,EAAQnB,EAAUtB,KAClBwuB,EAAqB/rB,EAAM2qB,aAC3B/a,EAASmc,EAAmBnc,OAC5BnP,EAAgBsrB,EAAmBtrB,cACnC2I,EAAQ2iB,EAAmB3iB,OAEtBwG,EAAOhH,YAAa,CACvB/J,EAAUnE,KAAO,GACjB,MAOF,OAJAgM,EAAakJ,EAAOlJ,WACpBtF,EAAewO,EAAOzQ,OAAOV,WAAW2C,aACxCsqB,EAAO,IAAI,cAAYtqB,EAAcsF,EAAYjG,EAAe2I,GAChEvK,EAAUnE,KAAO,GACV,aAAIyvB,GAAUuB,EAAKxhB,aAE5B,KAAK,GACL,IAAK,MACH,OAAOrL,EAAUhB,UAGtBktB,IAGL,SAASG,KACP,IAAIc,EAAOrB,EAAcjkB,EAEzB,OAAO,KAAoB3J,MAAK,SAA2BqC,GACzD,OACE,OAAQA,EAAUnC,KAAOmC,EAAU1E,MACjC,KAAK,EAEH,OADA0E,EAAU1E,KAAO,EACV,eAET,KAAK,EAIH,OAHAsxB,EAAQ5sB,EAAU7B,KAClBotB,EAAeqB,EAAMrB,aACrBvrB,EAAU1E,KAAO,EACV,aAAK4wB,GAAeX,GAE7B,KAAK,EAGH,KAFAjkB,EAAatH,EAAU7B,MAEPiB,KAAM,CACpBY,EAAU1E,KAAO,GACjB,MAIF,OADA0E,EAAU1E,KAAO,GACV,aAAI,EAAU,CACnBgM,WAAYA,EAAWlI,QAG3B,KAAK,GAEH,OADAY,EAAU1E,KAAO,GACV,aAAKswB,IAEd,KAAK,GACL,IAAK,MACH,OAAO5rB,EAAUvB,UAGtBotB,IAGU,SAAS,KACtB,OAAO,KAAoBluB,MAAK,SAAmB4C,GACjD,OACE,OAAQA,EAAU1C,KAAO0C,EAAUjF,MACjC,KAAK,EAEH,OADAiF,EAAUjF,KAAO,EACV,aAAW,YAAUmM,WAAWolB,8BAA+B,IAExE,KAAK,EAEH,OADAtsB,EAAUjF,KAAO,EACV,aAAW,YAAUmM,WAAWsiB,+BAAgCyB,IAEzE,KAAK,EAEH,OADAjrB,EAAUjF,KAAO,EACV,aAAW,EAAU,oCAAqCowB,IAEnE,KAAK,EAEH,OADAnrB,EAAUjF,KAAO,EACV,aAAW,YAAUmM,WAAWsJ,wBAAyB6a,IAElE,KAAK,EAEH,OADArrB,EAAUjF,KAAO,GACV,aAAW,YAAUmM,WAAWwJ,+BAAgC6a,IAEzE,KAAK,GAEH,OADAvrB,EAAUjF,KAAO,GACV,aAAW,EAAU,yBAA0BswB,IAExD,KAAK,GACL,IAAK,MACH,OAAOrrB,EAAU9B,UAGtBstB,IC5RL,IAAI,GAEJ,KAAoBxuB,KAAKuvB,IAKV,SAASA,KACtB,OAAO,KAAoBnvB,MAAK,SAAeuG,GAC7C,OACE,OAAQA,EAASrG,KAAOqG,EAAS5I,MAC/B,KAAK,EAEH,OADA4I,EAAS5I,KAAO,EACT,aAAI,CAAC,aAAK,IAAS,aAAK,MAEjC,KAAK,EACL,IAAK,MACH,OAAO4I,EAASzF,UAGrB,IClBU,U,UCFFsuB,GAAgBC,uBAAa,4BAE3B,IACbD,kBCHa,mBACZE,IAAwB,SAAC7c,EAAD,OAAUvK,EAAV,EAAUA,QAAV,sBACpBuK,EADoB,GAEpBvK,MCLQ,IACbqnB,UAAW,GACXC,aAAa,EACbC,aAAa,EACbrtB,OAAQ,KACRiK,MAAO,CAAE4L,MAAO,WAChB7W,QAAS,wCC8BIsuB,GAjBG,WAAwB,IAAvBC,EAAsB,uDAAP,GAC1BC,EAAcC,0BAAgB,aAClCC,cAAeC,uBAAaD,IACzBE,KAGCC,EAAcC,0BAAgBC,KAAOC,IACrCC,EAAYC,8BAAoBL,GAGhCM,EAAQC,sBAAYZ,EAAaD,EAAcU,GAIrD,OAFAD,GAAahV,IAAIqV,IAEV,CAAEF,U,qBC5BLG,GAAS,CACb,CACElsB,KAAM,OACNkL,UAAW,UACXtB,SAAU,CACR,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAGJ,CACE5J,KAAM,OACNkL,UAAW,UACXtB,SAAU,CACR,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,aAuCSqd,G,YAjCb,WAAYhW,GAAQ,qEACZA,I,0EAEKkb,GACX/vB,QAAQoc,IAAI,sCACZpc,QAAQoc,IAAI2T,K,+BAGJ,IAAD,EAGH3zB,KAAKyY,MADPqa,cAAiBL,EAFZ,EAEYA,YAAaF,EAFzB,EAEyBA,UAAWnuB,EAFpC,EAEoCA,QAASgB,EAF7C,EAE6CA,OAAQiK,EAFrD,EAEqDA,MAGtD8e,IAAkBoE,GAAaA,EAAUhsB,OAAS,EAExD,OACE,yBAAKkY,UAAU,yBACb,kBAAC,GAAD,CACElP,QAASmkB,GACT7S,QAAS4R,EACTzwB,UAAWoC,EACXW,SAAUK,EACVgpB,OAAQpuB,KAAK4zB,aACbzF,cAAeA,EACf9nB,YAAY,KACZmG,QAAS9K,KACT2N,MAAOA,S,GA3BIwkB,IAAM3N,WC9CZ4N,gBACb,SAAAre,GAAK,MAAK,CACRqd,cAAerd,EAAMqd,iBAEvB,GAJagB,CAKbC,ICmHaC,I,mBAvHb,WAAYvb,GAAQ,IAAD,uBACjB,4CAAMA,KACDhD,MAAQ,CACXwe,QAAS,IAIK7wB,MADI,6EAEjBpC,MAAK,SAAA+B,GAAQ,OAAIA,EAASU,UAC1BzC,MAAK,SAAAkzB,GACJ,EAAK1O,SAAS,CAAEyO,QAASC,EAAczvB,UAV1B,S,sEAcT,IACAwvB,EAAYj0B,KAAKyV,MAAjBwe,QADD,EAYHj0B,KAAKyY,MAZF,IAGLqa,cACEL,EAJG,EAIHA,YACAF,EALG,EAKHA,UACAnuB,EANG,EAMHA,QACAgB,EAPG,EAOHA,OACAotB,EARG,EAQHA,YACAnjB,EATG,EASHA,MAEF+iB,EAXK,EAWLA,cAGI+B,EAAG,+BAA2B3B,EAAc,QAAU,IAE5D,OACE,yBAAK/T,UAAW0V,GACd,qDACA,2BAAOvO,QAAQ,SAAf,cACA,2BACErgB,GAAG,QACH2C,KAAK,OACL2d,YAAY,eACZplB,MAAO8xB,EACPrW,SAAU,SAAAtb,GAAC,OAAIwxB,EAAc,CAAEG,UAAW3xB,EAAEqY,OAAOxY,WAErD,2BAAOmlB,QAAQ,WAAf,kBACA,4BACErgB,GAAG,UACH9E,MAAO2D,EACP8X,SAAU,SAAAtb,GAAC,OACTwxB,EAAc,CAAEhtB,OAAQ,KAAMhB,QAASxD,EAAEqY,OAAOxY,UAGlD,4BAAQA,MAAM,wCAAd,uCAGA,4BAAQA,MAAM,wCAAd,yBAGA,4BAAQA,MAAM,wCAAd,SACA,4BAAQA,MAAM,wCAAd,+BAGA,4BAAQA,MAAM,wCAAd,sBAKF,2BAAOmlB,QAAQ,UAAf,iBACA,4BACErgB,GAAG,SACH9E,MAAS2E,GAAkB,qBAC3B8W,SAAU,SAAAtb,GACe,uBAAnBA,EAAEqY,OAAOxY,MACX2xB,EAAc,CACZhtB,OAAQ,KACRhB,QAAS,yCAGXguB,EAAc,CACZhuB,QAAS6vB,EAAQrqB,MAAK,SAAAwqB,GAAC,OAAIA,EAAE7uB,KAAO3E,EAAEqY,OAAOxY,SAAOiE,WACjDN,QACHgB,OAAQxE,EAAEqY,OAAOxY,UAKvB,4BAAQA,MAAM,sBAAd,KACCwzB,EAAQpsB,KAAI,SAAAwsB,GACX,OACE,4BAAQ1xB,IAAK0xB,EAAS9uB,GAAI9E,MAAO4zB,EAAS9uB,IACvC8uB,EAAS3vB,WAAW8C,UAM7B,2BAAOoe,QAAQ,uBAAf,uBACA,4BAAQ5L,QAAS,kBAAMoY,EAAc,CAAEK,aAAcA,MAClDA,EAAc,mBAAqB,oBAGtC,2BAAO7M,QAAQ,eACb,0BACEnH,UAAU,qBACVwE,MAAO,CAAEyF,WAAYrZ,EAAM4L,SAC1B,IAJL,iBAOA,2BACE1V,GAAG,cACH2C,KAAK,OACL2d,YAAY,SACZplB,MAAO4O,EAAM4L,MACbiB,SAAU,SAAAtb,GAAC,OACTwxB,EAAc,CAAE/iB,MAAM,eAAMA,EAAP,CAAc4L,MAAOra,EAAEqY,OAAOxY,kB,GAhHnCozB,IAAM3N,YCEnB4N,gBACb,SAAAre,GAAK,MAAK,CACRqd,cAAerd,EAAMqd,iBAEvB,CAAEV,kBAJW0B,CAKbQ,ICDaC,GARO,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,cAAepC,EAAoB,EAApBA,cACtC,OACE,4BAAQpY,QAAS,kBAAMoY,EAAc,CAAEI,aAAcgC,MAClDA,EAAgB,gBAAkB,iBCC1BV,gBACb,SAAAre,GAAK,MAAK,CACR+e,cAAe/e,EAAMqd,cAAcN,eAErC,CAAEJ,kBAJW0B,CAKbW,I,OCgBaC,OAhBf,WAAgB,IACNnB,EAAUoB,KAAVpB,MACR,OACE,kBAAC,IAAD,CAAUA,MAAOA,GACf,yBAAK9U,UAAU,OACb,4BAAQA,UAAU,cAAlB,2BAEE,kBAAC,GAAD,OAEF,kBAAC,GAAD,MACA,kBAAC,GAAD,SCTYmW,QACW,cAA7BrW,OAAOsW,SAASC,UAEe,UAA7BvW,OAAOsW,SAASC,UAEhBvW,OAAOsW,SAASC,SAASC,MACvB,2DCZNC,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMt0B,MAAK,SAAAu0B,GACjCA,EAAaC,iB,gCEjInBn0B,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGTc,EAAQmO,kBAAoB,SAAUJ,GACpC,MAAO,CACLmmB,QAAS,6CACT3kB,MAAO,IACPC,OAAQ,IACRtM,KAAM,GACNixB,OAAQ,GACR7zB,OAAQ,GACRwS,QAAS,GACT9D,OAAQ,GACRgC,KAAM,GACN9B,MAAO,GACPyC,KAAM,CACJyiB,cAAe,GACfC,UAAW,OACXC,WAAY,UACZC,aAAc,GACdxiB,OAAO,EACPyiB,SAAU,EACVC,UAAW,UACXC,YAAa,GACbC,WAAW,GAEb/iB,MAAO,CACLgjB,aAAc,GACdC,YAAa,IACbC,YAAa,UACbC,WAAY,SACZC,cAAe,OAEjB3iB,MAAO,CACL1C,QAAQ,EACRolB,WAAY,OACZC,cAAe,SACfN,YAAa,GACbliB,MAAM,EACNT,OAAO,EACPkjB,UAAW,UACXC,YAAa,IAEfriB,OAAQ,CACN1C,KAAM,WAERwC,KAAM,CACJwiB,YAAa,SACbviB,OAAQ,UACRwiB,YAAa,KAKnBp1B,EAAQ4P,UAAY,CAClB1Q,MAAO,IACP2Q,SAAU,KAEZ7P,EAAQiB,QAAU,CAChBkN,kBAAmBnO,EAAQmO,kBAC3ByB,UAAW5P,EAAQ4P,Y,gCC7DrB9P,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAETc,EAAQ8V,cAAgB,eACxB9V,EAAQoM,oBAAsB,CAAC,CAC7BnG,KAAM,4BACNU,KAAM,SACN0uB,SAAU,QACT,CACDpvB,KAAM,uBACNU,KAAM,SACN0uB,SAAU,QACT,CACDpvB,KAAM,sBACNU,KAAM,SACN0uB,SAAU,QACT,CACDpvB,KAAM,sBACNU,KAAM,SACN0uB,SAAU,QACT,CACDpvB,KAAM,UACNU,KAAM,SACN0uB,SAAU,QACT,CACDpvB,KAAM,SACNU,KAAM,SACN0uB,SAAU,SACT,CACDpvB,KAAM,MACNU,KAAM,SACN0uB,SAAU,QACT,CACDpvB,KAAM,UACNU,KAAM,SACN0uB,SAAU,QACT,CACDpvB,KAAM,QACNU,KAAM,SACN0uB,SAAU,OACT,CACDpvB,KAAM,OACNU,KAAM,SACN0uB,SAAU,OACT,CACDpvB,KAAM,SACNU,KAAM,SACN0uB,SAAU,OACT,CACDpvB,KAAM,OACNU,KAAM,SACN0uB,SAAU,OACT,CACDpvB,KAAM,UACNU,KAAM,SACN0uB,SAAU,OACT,CACDpvB,KAAM,SACNU,KAAM,SACN0uB,SAAU,OACT,CACDpvB,KAAM,OACNU,KAAM,SACN0uB,SAAU,OACT,CACDpvB,KAAM,UACNU,KAAM,SACN0uB,SAAU,OACT,CACDpvB,KAAM,sBACNU,KAAM,SACN0uB,SAAU,QACT,CACDpvB,KAAM,OACNU,KAAM,SACN0uB,SAAU,WACT,CACDpvB,KAAM,oBACNU,KAAM,OACN0uB,SAAU,QACT,CACDpvB,KAAM,OACNU,KAAM,OACN0uB,SAAU,OACT,CACDpvB,KAAM,OACNU,KAAM,OACN0uB,SAAU,OACT,CACDpvB,KAAM,YACNU,KAAM,OACN0uB,SAAU,OACT,CACDpvB,KAAM,WACNU,KAAM,OACN0uB,SAAU,OACT,CACDpvB,KAAM,UACNU,KAAM,UACN0uB,SAAU,OACT,CACDpvB,KAAM,QACNU,KAAM,QACN0uB,SAAU,QAEZr1B,EAAQuL,WAAa,CACnBsiB,+BAAgC,GAAGjsB,OAAO5B,EAAQ8V,cAAe,0CACjEtK,+BAAgC,GAAG5J,OAAO5B,EAAQ8V,cAAe,yCACjE/I,qBAAsB,GAAGnL,OAAO5B,EAAQ8V,cAAe,+BACvD6a,8BAA+B,GAAG/uB,OAAO5B,EAAQ8V,cAAe,wCAChEzI,4BAA6B,GAAGzL,OAAO5B,EAAQ8V,cAAe,wCAC9Dwf,uBAAwB,GAAG1zB,OAAO5B,EAAQ8V,cAAe,iCACzD0Y,YAAa,GAAG5sB,OAAO5B,EAAQ8V,cAAe,oCAC9CjB,wBAAyB,GAAGjT,OAAO5B,EAAQ8V,cAAe,iCAC1Df,+BAAgC,GAAGnT,OAAO5B,EAAQ8V,cAAe,yCAEnE9V,EAAQgM,aAAe,CACrBupB,yBAA0B,GAAG3zB,OAAO5B,EAAQ8V,cAAe,mCAC3D0f,kBAAmB,GAAG5zB,OAAO5B,EAAQ8V,cAAe,qBACpD7J,mBAAoB,GAAGrK,OAAO5B,EAAQ8V,cAAe,uBAEvD9V,EAAQiB,QAAU,CAChB6U,cAAe9V,EAAQ8V,cACvBvK,WAAYvL,EAAQuL,WACpBS,aAAchM,EAAQgM,e,gCC5HxB,IAAI3N,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAEvBC,EAAsB,EAAQ,GAE9BC,EAAYC,MAAQA,KAAKD,WAAa,SAAUE,EAASC,EAAYC,EAAGC,GAO1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GACjD,SAASC,EAAUC,GACjB,IACEC,EAAKN,EAAUO,KAAKF,IACpB,MAAOG,GACPL,EAAOK,IAIX,SAASC,EAASJ,GAChB,IACEC,EAAKN,EAAiB,MAAEK,IACxB,MAAOG,GACPL,EAAOK,IAIX,SAASF,EAAKI,GAvBhB,IAAeL,EAwBXK,EAAOC,KAAOT,EAAQQ,EAAOL,QAxBlBA,EAwBiCK,EAAOL,MAvB9CA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAClDA,EAAQG,OAsBkDO,KAAKR,EAAWK,GAG5EH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAI9DO,EAAkBlB,MAAQA,KAAKkB,iBAAmB,SAAUC,GAC9D,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnC,QAAWA,IAIfE,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAIkW,EAAWzV,EAAgB,EAAQ,KAEnCoL,EAAc,EAAQ,IAEtBD,EAAYnL,EAAgB,EAAQ,MAExC,SAAS2J,EAAaC,EAAOC,GAC3B,OAAOhL,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAAS0G,IAChC,IAAI0B,EACJ,OAAOlL,EAAoBkD,MAAK,SAAkBuG,GAChD,OACE,OAAQA,EAASrG,KAAOqG,EAAS5I,MAC/B,KAAK,EACHqK,EAAQ,EAEV,KAAK,EACH,KAAMA,EAAQF,EAAMvE,QAAS,CAC3BgD,EAAS5I,KAAO,EAChB,MAIF,OADA4I,EAAS5I,KAAO,EACToK,EAASD,EAAME,GAAQA,EAAOF,GAEvC,KAAK,EACHE,IACAzB,EAAS5I,KAAO,EAChB,MAEF,KAAK,EACL,IAAK,MACH,OAAO4I,EAASzF,UAGrBwF,OAIP,IAAIF,EAEJ,WACE,SAASA,EAAe1C,EAAeE,EAAS5E,GAC9CpC,EAAgBI,KAAMoJ,GAEtBpJ,KAAK0G,cAAgBA,EACrB1G,KAAK4G,QAAUA,EACf5G,KAAK0F,IAAM,GACX1F,KAAKgC,UAAYA,EACjBhC,KAAKg3B,yBACLh3B,KAAKi3B,mBACLj3B,KAAKk3B,iBACLl3B,KAAKm3B,iBACLn3B,KAAKo3B,iBACLp3B,KAAKq3B,eACLr3B,KAAKs3B,eAuUP,OApUAz3B,EAAauJ,EAAgB,CAAC,CAC5BzG,IAAK,mBACLlC,MAAO,WACL,IAAIqP,EAAsB9P,KAAK0G,cAC3BjG,EAAQqP,EAAoBrP,MAC5B2Q,EAAWtB,EAAoBsB,SAC/BmmB,EAAa92B,EAAMwB,UACnBu1B,EAAapmB,EAASnP,UAE1B,IAAKs1B,IAAeC,EAClB,MAAM,IAAI/tB,MAAM,oEAGlB,OAAO8tB,GAA0BC,IAElC,CACD70B,IAAK,yBACLlC,MAAO,WACL,IAAI2Q,EAAWpR,KAAK0G,cAAc0K,SAClCpR,KAAK0F,IAAM,UAAUvC,OAAOiO,EAAS5J,KAAM,QAAQrE,OAAOmJ,EAAY6E,UAAU1Q,SAEjF,CACDkC,IAAK,mBACLlC,MAAO,WACL,IAAIg3B,EAAuBz3B,KAAK0G,cAC5B2O,EAAoBoiB,EAAqBpiB,kBAEzC7N,EADQiwB,EAAqBh3B,MAChB+G,KAEjB,GAAK6N,EAEE,CACL,IAAIqiB,EAAcriB,EAAkBrL,cAEpC,GAAoB,QAAhB0tB,GAAyC,UAAhBA,EAG3B,MAAM,IAAIjuB,MAAM,uBAAuBtG,OAAOkS,EAAmB,yCAFjErV,KAAK0F,IAAM,GAAGvC,OAAOnD,KAAK0F,IAAK,MAAMvC,OAAOu0B,EAAa,KAAKv0B,OAAOqE,EAAM,SAASrE,OAAOmJ,EAAY6E,UAAUC,SAAU,UAAUjO,OAAOnD,KAAK23B,yBALnJ33B,KAAK0F,IAAM,GAAGvC,OAAOnD,KAAK0F,IAAK,MAAMvC,OAAOqE,EAAM,QAAQrE,OAAOmJ,EAAY6E,UAAUC,SAAU,UAAUjO,OAAOnD,KAAK23B,sBAW1H,CACDh1B,IAAK,cACLlC,MAAO,SAAqBA,EAAO0H,GACjC,MAAoB,SAAbA,GAAoC,WAAbA,EAAwB,IAAIhF,OAAO1C,EAAO,KAAOA,IAEhF,CACDkC,IAAK,iBACLlC,MAAO,SAAwBiF,EAAK0C,EAAQJ,EAAQG,GAElD,MAAO,GAAGhF,OADAuC,EACY,KAAKvC,OAAOiF,EAAQ,QAAQjF,OAAOnD,KAAK43B,YAAY5vB,EAAO,GAAIG,GAAW,SAAShF,OAAOiF,EAAQ,QAAQjF,OAAOnD,KAAK43B,YAAY5vB,EAAO,GAAIG,MAEpK,CACDxF,IAAK,aACLlC,MAAO,SAAoBiF,EAAK0C,EAAQJ,EAAQG,GAC9C,IAAIR,EAAQ3H,KAGZ,MAAO,GAAGmD,OADAuC,EACY,KAAKvC,OAAOiF,EAAQ,SAASjF,OAAO6E,EAAOH,KAAI,SAAUI,GAC7E,OAAON,EAAMiwB,YAAY3vB,EAAExH,MAAO0H,MACjC5D,KAAK,KAAM,OAEf,CACD5B,IAAK,eACLlC,MAAO,SAAsBiF,EAAK0C,EAAQJ,EAAQG,GAEhD,MAAO,GAAGhF,OADAuC,EACY,KAAKvC,OAAOiF,EAAQ,OAAOjF,OAAOnD,KAAK43B,YAAY5vB,EAAQG,MAElF,CACDxF,IAAK,kBACLlC,MAAO,SAAyBiF,EAAK0C,EAAQJ,EAAQG,GAEnD,MAAO,GAAGhF,OADAuC,EACY,KAAKvC,OAAOiF,EAAQ,QAAQjF,OAAOnD,KAAK43B,YAAY5vB,EAAQG,MAEnF,CACDxF,IAAK,iBACLlC,MAAO,SAAwBiF,EAAK0C,EAAQJ,EAAQG,GAElD,MAAO,GAAGhF,OADAuC,EACY,YAAYvC,OAAOiF,EAAQ,YAAYjF,OAAO6E,EAAQ,SAE7E,CACDrF,IAAK,eACLlC,MAAO,SAAsBiF,EAAK0C,EAAQJ,EAAQG,GAEhD,MAAO,GAAGhF,OADAuC,EACY,YAAYvC,OAAOiF,EAAQ,aAAajF,OAAO6E,EAAQ,QAE9E,CACDrF,IAAK,iBACLlC,MAAO,WACL,IAAIilB,EAAS1lB,KAETuH,EAAMvH,KAAK0F,IAEX1F,KAAK4G,SAAW5G,KAAK4G,QAAQL,OAAS,IACxCgB,EAAM,GAAGpE,OAAOoE,EAAK,WACrBvH,KAAK4G,QAAQM,SAAQ,SAAU2wB,EAAU7sB,GACvC,IAAIjD,EAAY8vB,EAAS9vB,UACrBK,EAASyvB,EAASzvB,OAClBD,EAAW0vB,EAAS1vB,SACpBH,EAAS6vB,EAAS/vB,OAAOE,OAC7BT,EAAMyD,EAAQ,EAAI,GAAG7H,OAAOoE,EAAK,SAAWA,EAE1B,UAAdQ,IACFR,EAAMme,EAAOoS,eAAevwB,EAAKa,EAAQJ,EAAQG,IAGjC,qBAAdJ,IACFR,EAAMme,EAAOqS,WAAWxwB,EAAKa,EAAQJ,EAAQG,IAG7B,kBAAdJ,IACFR,EAAMme,EAAOsS,aAAazwB,EAAKa,EAAQJ,EAAQG,IAG/B,sBAAdJ,IACFR,EAAMme,EAAOuS,gBAAgB1wB,EAAKa,EAAQJ,EAAQG,IAGlC,qBAAdJ,IACFR,EAAMme,EAAOwS,eAAe3wB,EAAKa,EAAQJ,EAAQG,IAGjC,mBAAdJ,IACFR,EAAMme,EAAOyS,aAAa5wB,EAAKa,EAAQJ,EAAQG,QAKrDnI,KAAK0F,IAAM6B,EAAImkB,QAAQ,WAAY,MAEpC,CACD/oB,IAAK,iBACLlC,MAAO,WACL,IAAI23B,EAAuBp4B,KAAK0G,cAC5B2xB,EAAUD,EAAqBC,QAC/BhjB,EAAoB+iB,EAAqB/iB,kBAE7C,GAAIgjB,EAAS,CACX,IAAI7wB,EAAO6wB,EAAQ7wB,KACnBxH,KAAK0F,IAAM,GAAGvC,OAAOnD,KAAK0F,IAAK,cAAcvC,OAAOqE,GAAQ8E,EAAY6E,UAAU1Q,YACzE4U,GAA2C,SAAtBA,IAC9BrV,KAAK0F,IAAM,GAAGvC,OAAOnD,KAAK0F,IAAK,cAAcvC,OAAOmJ,EAAY6E,UAAU1Q,UAG7E,CACDkC,IAAK,iBACLlC,MAAO,WACL,IAAI2U,EAAUpV,KAAK0G,cAAc0O,QAEjC,GAAIA,EAAS,CACX,IAAI5N,EAAO4N,EAAQ5N,KACnBxH,KAAK0F,IAAM,GAAGvC,OAAOnD,KAAK0F,IAAK,cAAcvC,OAAOqE,GAAQ8E,EAAY6E,UAAUC,aAGrF,CACDzO,IAAK,eACLlC,MAAO,WACL,IAAI2U,EAAUpV,KAAK0G,cAAc0O,QAEjC,GAAIA,EAAS,CACX,IAAIiR,EAAYjR,EAAQiR,UACxBrmB,KAAK0F,IAAM,GAAGvC,OAAOnD,KAAK0F,IAAK,KAAKvC,OAAOkjB,GAAa,WAG3D,CACD1jB,IAAK,eACLlC,MAAO,WACL,IAAI63B,EAAwBt4B,KAAK0G,cAAc8O,MAC3CA,OAAkC,IAA1B8iB,EAAmC,IAAMA,EACrDt4B,KAAK0F,IAAM,GAAGvC,OAAOnD,KAAK0F,IAAK,WAAWvC,OAAOqS,KAElD,CACD7S,IAAK,oBACLlC,MAAO,WACL,OAAOV,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAASC,IAChC,IAAIE,EAAU0B,EACd,OAAO3E,EAAoBkD,MAAK,SAAmBC,GACjD,OACE,OAAQA,EAAUC,KAAOD,EAAUtC,MACjC,KAAK,EACH,GAAIX,KAAKgC,UAAW,CAClBiB,EAAUtC,KAAO,EACjB,MAGF,MAAM,IAAI8I,MAAM,oDAElB,KAAK,EACH,OAAOxG,EAAUS,OAAO,SAAU,IAEpC,KAAK,EAGH,OAFAX,EAAWE,EAAUO,KACrBP,EAAUtC,KAAO,EACVoC,EAASU,OAElB,KAAK,EAEH,OADAgB,EAAOxB,EAAUO,KACVP,EAAUS,OAAO,SAAUe,GAEpC,KAAK,GACL,IAAK,MACH,OAAOxB,EAAUa,UAGtBjB,EAAU7C,YAGhB,CACD2C,IAAK,WACLlC,MAAO,WACL,OAAOT,KAAK0F,IAAIgmB,QAAQ,WAAY,OAEpC,CAAC,CACH/oB,IAAK,gBACLlC,MAAO,SAAuBmG,EAAS/E,EAAQqJ,GAC7C,OAAOnL,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAAS+B,IAChC,IAEI4zB,EAAkBC,EAAgBC,EAAkB/xB,EAAe1E,EAAW6C,EAAgB0C,EAAKmxB,EAFnGC,EAAS34B,KAGb,OAAOF,EAAoBkD,MAAK,SAAmB8B,GACjD,OACE,OAAQA,EAAU5B,KAAO4B,EAAUnE,MACjC,KAAK,EAUH,OATA43B,EAAmB12B,EAAOuG,OAAQowB,EAAiB32B,EAAOqG,KAAMuwB,EAAmB52B,EAAOmG,OAC1FtB,EAAgBwE,EAAQxE,cAAe1E,EAAYkJ,EAAQlJ,UAAW6C,EAASqG,EAAQrG,OAAiBqG,EAAQ9F,OAChHmC,EAAM,GAENmxB,EAAkB,SAAyBltB,GACzC,OAAO9C,MAAMC,QAAQ6C,IAAuB,IAAfA,EAAIjF,OAAe,QAAU,SAG5DzB,EAAUnE,KAAO,EACVkK,EAAajE,GAAS,SAAUkB,EAAQkD,GAC7C,OAAOjL,EAAU44B,OAAQ,OAAQ,EAEjC74B,EAAoB8C,MAAK,SAASqB,IAChC,IAAI+D,EAAQI,EAAQF,EAAMiD,EAC1B,OAAOrL,EAAoBkD,MAAK,SAAmBqB,GACjD,OACE,OAAQA,EAAUnB,KAAOmB,EAAU1D,MACjC,KAAK,EAeH,OAdAqH,EAASF,EAAO2wB,GAChBrwB,EAASN,EAAOywB,GAChBrwB,EAAOJ,EAAO0wB,GACdrtB,EAAe,IAAIwL,EAASnU,QAAQkE,EAAe1E,EAAW6C,GAC9DR,EAAUV,GAAK4D,EACflD,EAAUytB,GAAK1pB,EACf/D,EAAUu0B,GAAKF,EAAgB1wB,GAC/B3D,EAAUw0B,GAAK,aAAa11B,OAAOiF,EAAQ,KAAKjF,OAAO6H,GACvD3G,EAAUy0B,GAAK5wB,EACf7D,EAAU00B,GAAK,CACb/wB,OAAQA,EACRwC,SAAS,GAEXnG,EAAU1D,KAAO,GACVwK,EAAaG,aAAaxD,EAAQM,GAE3C,KAAK,GACH/D,EAAU20B,GAAK30B,EAAUb,KACzBa,EAAU40B,GAAK,CACb7wB,OAAQ/D,EAAUytB,GAClB/pB,UAAW1D,EAAUu0B,GACrBrzB,GAAIlB,EAAUw0B,GACd1wB,SAAU9D,EAAUy0B,GACpBhxB,OAAQzD,EAAU00B,GAClB3tB,UAAW/G,EAAU20B,IAGvB30B,EAAUV,GAAGyI,KAAKiN,KAAKhV,EAAUV,GAAIU,EAAU40B,IAEjD,KAAK,GACL,IAAK,MACH,OAAO50B,EAAUP,UAGtBG,UAIT,KAAK,EACH,OAAOa,EAAUpB,OAAO,SAAU6D,GAEpC,KAAK,EACL,IAAK,MACH,OAAOzC,EAAUhB,UAGtBa,SAGN,CACDhC,IAAK,eACLlC,MAAO,SAAsBmG,EAASsE,EAASxE,EAAe1E,EAAW6C,GACvE,OAAO9E,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAASoC,IAChC,IAAsBmG,EAAcgB,EACpC,OAAOrM,EAAoBkD,MAAK,SAAmBqC,GACjD,OACE,OAAQA,EAAUnC,KAAOmC,EAAU1E,MACjC,KAAK,EAIH,OAHSuK,EAAQlD,OAAakD,EAAQ3F,GAAW2F,EAAQhD,KACzDiD,EAAe,IAAIwL,EAASnU,QAAQkE,EAAe1E,EAAW6C,GAC9DQ,EAAU1E,KAAO,EACV0L,EAAU7J,QAAQoE,EAASuE,EAAcD,GAElD,KAAK,EAEH,OADAiB,EAAQ9G,EAAU7B,KACX6B,EAAU3B,OAAO,SAAUyI,GAEpC,KAAK,EACL,IAAK,MACH,OAAO9G,EAAUvB,UAGtBkB,WAKFoE,EArVT,GAwVA7H,EAAQiB,QAAU4G,G,gCClblB,IAAItJ,EAAsB,EAAQ,GAE9BF,EAAkB,EAAQ,IAE1BC,EAAe,EAAQ,IAEvBE,EAAYC,MAAQA,KAAKD,WAAa,SAAUE,EAASC,EAAYC,EAAGC,GAO1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GACjD,SAASC,EAAUC,GACjB,IACEC,EAAKN,EAAUO,KAAKF,IACpB,MAAOG,GACPL,EAAOK,IAIX,SAASC,EAASJ,GAChB,IACEC,EAAKN,EAAiB,MAAEK,IACxB,MAAOG,GACPL,EAAOK,IAIX,SAASF,EAAKI,GAvBhB,IAAeL,EAwBXK,EAAOC,KAAOT,EAAQQ,EAAOL,QAxBlBA,EAwBiCK,EAAOL,MAvB9CA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAClDA,EAAQG,OAsBkDO,KAAKR,EAAWK,GAG5EH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAI9DO,EAAkBlB,MAAQA,KAAKkB,iBAAmB,SAAUC,GAC9D,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnC,QAAWA,IAIfE,OAAOC,eAAeC,EAAS,aAAc,CAC3Cd,OAAO,IAGT,IAAIy4B,EAAeh4B,EAAgB,EAAQ,MAEvC0V,EAEJ,WACE,SAASA,EAAclQ,EAAe1E,EAAW6C,GAC/CjF,EAAgBI,KAAM4W,GAEtB5W,KAAKm5B,aAAe,SACpBn5B,KAAKo5B,YAAc,SACnBp5B,KAAKq5B,UAAY,OACjBr5B,KAAK0G,cAAgBA,EACrB1G,KAAKgC,UAAYA,EACjBhC,KAAK6E,OAASA,EAuGhB,OApGAhF,EAAa+W,EAAe,CAAC,CAC3BjU,IAAK,QACLlC,MAAO,SAAe64B,GACpB,OAAOl2B,MAAM,0CAA0CD,OAAOnD,KAAKgC,UAAW,KAAKmB,OAAOm2B,IAAIt4B,MAAK,SAAU+B,GAC3G,GAAIA,EAASyG,QAAU,IAAK,MAAM,IAAIC,MAAM1G,EAAS2G,YACrD,OAAO3G,EAASU,UACfzC,MAAK,SAAUu4B,GAChB,OAAOA,EAAS90B,UAGnB,CACD9B,IAAK,eACLlC,MAAO,WACL,IAAI+4B,EAAiBx5B,KAAK0G,cAAcjG,MAAMwB,UAC1Cw3B,EAAoBz5B,KAAK0G,cAAc0K,SAASnP,UACpD,OAAOu3B,GAAkCC,IAE1C,CACD92B,IAAK,qBACLlC,MAAO,SAA4BgN,GACjC,IAAII,EAAaJ,EAAMI,WACnB5L,EAAYjC,KAAK05B,eACjBC,EAAQ,cAAcx2B,OAAO0K,EAAY,kBAAkB1K,OAAO0K,EAAY,kBAAkB1K,OAAOlB,GAC3G,OAAOjC,KAAK25B,MAAM,OAAOx2B,OAAOw2B,IAAQ34B,MAAK,SAAUyD,GACrD,OAAOA,EAAOA,EAAK,GAAK,QAG3B,CACD9B,IAAK,kBACLlC,MAAO,SAAyBgN,GAC9B,IAAImsB,IAAOtzB,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,KAAmBA,UAAU,GACtEuH,EAAaJ,EAAMI,WACnB5L,EAAYjC,KAAK05B,eACjBG,EAAgBD,EAAO,YAAYz2B,OAAO0K,GAAc,GACxD8rB,EAAQ,UAAUx2B,OAAO0K,EAAY,UAAU1K,OAAOlB,EAAW,KAAKkB,OAAO02B,EAAe,cAAc12B,OAAO0K,GACrH,OAAO7N,KAAK25B,MAAM,OAAOx2B,OAAOw2B,IAAQ34B,MAAK,SAAUyD,GACrD,OAAQA,GAAQ,IAAIoD,KAAI,SAAUsQ,GAChC,OAAOA,EAAEtK,WAId,CACDlL,IAAK,eACLlC,MAAO,SAAsBgN,EAAOrF,GAClC,OAAOrI,EAAUC,UAAM,OAAQ,EAE/BF,EAAoB8C,MAAK,SAAS0G,IAChC,IAAIwwB,EAAeC,EAAKC,EAExB,OAAOl6B,EAAoBkD,MAAK,SAAkBuG,GAChD,OACE,OAAQA,EAASrG,KAAOqG,EAAS5I,MAC/B,KAAK,EAKH,IAJAm5B,EAAgB95B,KAAK6E,OAAO+E,MAAK,SAAUpB,GACzC,OAAOA,EAAEqF,aAAezF,MAGNF,OAASlI,KAAKm5B,cAAgBW,EAAc5xB,OAASlI,KAAKq5B,UAAY,CACxF9vB,EAAS5I,KAAO,EAChB,MAIF,OADA4I,EAAS5I,KAAO,EACTX,KAAKi6B,mBAAmBH,GAEjC,KAAK,EAEH,OADAC,EAAMxwB,EAAS/F,KACR+F,EAAS7F,OAAO,SAAUq2B,GAEnC,KAAK,EACH,GAAMD,EAAc5xB,OAASlI,KAAKo5B,YAAc,CAC9C7vB,EAAS5I,KAAO,GAChB,MAIF,OADA4I,EAAS5I,KAAO,EACTX,KAAKk6B,gBAAgBJ,GAE9B,KAAK,EAEH,OADAE,EAAOzwB,EAAS/F,KACT+F,EAAS7F,OAAO,SAAUs2B,EAAKnyB,KAAI,SAAU2X,GAClD,MAAO,CACL/e,MAAO+e,EACP9T,MAAOwtB,EAAa12B,QAAQgd,QAIlC,KAAK,GACH,OAAOjW,EAAS7F,OAAO,SAAU,GAAGP,OAAO22B,EAAc5xB,KAAM,sBAEjE,KAAK,GACL,IAAK,MACH,OAAOqB,EAASzF,UAGrBwF,EAAStJ,cAKX4W,EAhHT,GAmHArV,EAAQiB,QAAUoU,I","file":"static/js/main.963e253d.chunk.js","sourcesContent":["\"use strict\";\n\nvar _defineProperty = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/defineProperty\");\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar core_1 = require(\"@packages/core\");\n\nvar config_1 = __importDefault(require(\"./helpers/config\"));\n\nfunction asyncForEach(array, callback) {\n  return __awaiter(this, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var index;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            index = 0;\n\n          case 1:\n            if (!(index < array.length)) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 4;\n            return callback(array[index], index, array);\n\n          case 4:\n            index++;\n            _context.next = 1;\n            break;\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\n\nvar RwAdapter =\n/*#__PURE__*/\nfunction () {\n  function RwAdapter() {\n    _classCallCheck(this, RwAdapter);\n\n    this.endpoint = \"https://api.resourcewatch.org/v1\";\n    this.dataEndpoint = \"https://api.resourcewatch.org/v1/query\";\n    this.config = null;\n    this.datasetService = null;\n    this.widgetService = null;\n    this.datasetId = null;\n    this.tableName = null;\n    this.AUTH_TOKEN = null;\n    this.applications = [\"rw\"];\n    this.env = \"production\";\n    this.locale = \"en\";\n    this.widget_params = [\"chartType\", \"visualizationType\", \"limit\", \"value\", \"category\", \"color\", \"size\", \"orderBy\", \"aggregateFunction\", \"filters\", \"areaIntersection\", \"band\", \"layer\"];\n    var asConfig = {\n      applications: this.applications,\n      env: this.env,\n      locale: this.locale\n    };\n    this.config = config_1.default(asConfig);\n    this.datasetService = new core_1.DatasetService(this.config);\n    this.widgetService = new core_1.WidgetService(this.config);\n  }\n\n  _createClass(RwAdapter, [{\n    key: \"payload\",\n    value: function payload() {\n      return {\n        applications: this.applications,\n        env: this.env\n      };\n    }\n  }, {\n    key: \"saveWidgetRW\",\n    value: function saveWidgetRW() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var url, response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                url = \"\".concat(this.endpoint, \"/dataset/\").concat(this.datasetId, \"/widget\");\n\n                if (!this.AUTH_TOKEN) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                _context2.prev = 2;\n                _context2.next = 5;\n                return fetch(url, {\n                  method: \"POST\",\n                  headers: {\n                    Authorization: \"Bearer \".concat(this.AUTH_TOKEN)\n                  }\n                });\n\n              case 5:\n                response = _context2.sent;\n                _context2.next = 8;\n                return response.json();\n\n              case 8:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](2);\n                console.error(\"Cant save widget\", _context2.t0);\n\n              case 14:\n                _context2.next = 17;\n                break;\n\n              case 16:\n                console.error(\"Missing auth token for saveWidget (RW)\");\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[2, 11]]);\n      }));\n    }\n  }, {\n    key: \"hasAuthToken\",\n    value: function hasAuthToken() {\n      return !!this.AUTH_TOKEN;\n    }\n  }, {\n    key: \"setDatasetId\",\n    value: function setDatasetId(datasetId) {\n      if (!datasetId) {\n        console.error(\"Error: datasetId is required\");\n      }\n\n      this.datasetId = datasetId;\n    }\n  }, {\n    key: \"setTableName\",\n    value: function setTableName(tableName) {\n      if (!tableName) {\n        console.error(\"Error: datasetId is required\");\n      }\n\n      this.tableName = tableName;\n    }\n  }, {\n    key: \"getDataset\",\n    value: function getDataset() {\n      var _a, _b;\n\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var _this$config$getConfi, applications, env, locale, includes, url, _ref, dataset;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this$config$getConfi = this.config.getConfig(), applications = _this$config$getConfi.applications, env = _this$config$getConfi.env, locale = _this$config$getConfi.locale;\n                includes = \"metadata,vocabulary,widget,layer\";\n                url = \"\".concat(this.endpoint, \"/dataset/\").concat(this.datasetId, \"?\").concat(applications.join(\",\"), \"&env=\").concat(env, \"&language=\").concat(locale, \"&includes=\").concat(includes, \"&page[size]=999\");\n                _context3.next = 5;\n                return this.datasetService.fetchData(url);\n\n              case 5:\n                _ref = _context3.sent;\n                dataset = _ref.data;\n                this.tableName = ((_b = (_a = dataset) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.tableName) || null;\n                return _context3.abrupt(\"return\", dataset);\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }, {\n    key: \"getFields\",\n    value: function getFields() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var url, _ref2, fields;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                url = \"\".concat(this.endpoint, \"/fields/\").concat(this.datasetId);\n                _context4.next = 3;\n                return this.datasetService.fetchData(url);\n\n              case 3:\n                _ref2 = _context4.sent;\n                fields = _ref2.fields;\n                return _context4.abrupt(\"return\", fields);\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n    }\n  }, {\n    key: \"getWidget\",\n    value: function getWidget(dataset, widgetId) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        var _this$config$getConfi2, applications, env, locale, includes, resolveWidgetId, url, _ref3, widget;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _this$config$getConfi2 = this.config.getConfig(), applications = _this$config$getConfi2.applications, env = _this$config$getConfi2.env, locale = _this$config$getConfi2.locale;\n                includes = \"metadata\";\n                resolveWidgetId = !widgetId ? this.widgetService.fromDataset(dataset).id : widgetId;\n                url = \"\".concat(this.endpoint, \"/widget/\").concat(resolveWidgetId, \"?\").concat(applications.join(\",\"), \"&env=\").concat(env, \"&language=\").concat(locale, \"&includes=\").concat(includes, \"&page[size]=999\");\n                _context5.next = 6;\n                return this.widgetService.fetchWidget(url);\n\n              case 6:\n                _ref3 = _context5.sent;\n                widget = _ref3.data;\n                return _context5.abrupt(\"return\", widget);\n\n              case 9:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n    }\n  }, {\n    key: \"getWidgetData\",\n    value: function getWidgetData(dataset, widget) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6() {\n        var sql, url, _ref4, data;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                sql = this.widgetService.getDataSqlQuery(dataset, widget);\n                url = \"\".concat(this.endpoint, \"/query/\").concat(this.datasetId, \"?sql=\").concat(sql);\n                _context6.next = 4;\n                return this.widgetService.fetchWidgetData(url);\n\n              case 4:\n                _ref4 = _context6.sent;\n                data = _ref4.data;\n                return _context6.abrupt(\"return\", data);\n\n              case 7:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n    }\n  }, {\n    key: \"getLayers\",\n    value: function getLayers() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7() {\n        var _this$config$getConfi3, applications, env, locale, url, _ref5, data;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _this$config$getConfi3 = this.config.getConfig(), applications = _this$config$getConfi3.applications, env = _this$config$getConfi3.env, locale = _this$config$getConfi3.locale;\n                url = \"\".concat(this.endpoint, \"/dataset/\").concat(this.datasetId, \"/layer?app=\").concat(applications.join(\",\"), \"&env=\").concat(env, \"&page[size]=9999\");\n                _context7.next = 4;\n                return this.datasetService.fetchData(url);\n\n              case 4:\n                _ref5 = _context7.sent;\n                data = _ref5.data;\n                return _context7.abrupt(\"return\", data);\n\n              case 7:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n    }\n  }, {\n    key: \"handleSave\",\n    value: function handleSave(consumerOnSave, dataService) {\n      var application = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"rw\";\n      var editorState = arguments.length > 3 ? arguments[3] : undefined;\n      var configuration = editorState.configuration,\n          widget = editorState.widget,\n          editorFilters = editorState.filters.list;\n      var _dataService$dataset = dataService.dataset,\n          id = _dataService$dataset.id,\n          tableName = _dataService$dataset.attributes.tableName;\n      this.setDatasetId(id);\n      this.setTableName(tableName);\n      var widgetParams = {};\n      this.widget_params.forEach(function (param) {\n        if (param in configuration) {\n          widgetParams = Object.assign(Object.assign({}, widgetParams), _defineProperty({}, param, configuration[param]));\n        }\n      });\n      var widgetConfig = widget;\n      delete widgetConfig.data;\n      widgetConfig.filters = this.filterSerializer(editorFilters);\n      var out = {\n        name: configuration.title || null,\n        description: configuration.description || null,\n        application: application,\n        widgetConfig: widgetConfig\n      };\n      consumerOnSave(out);\n    }\n  }, {\n    key: \"filterSerializer\",\n    value: function filterSerializer(filters) {\n      var _this = this;\n\n      var serialize = filters.map(function (filter) {\n        return {\n          value: filter.indicator === \"FILTER_ON_VALUES\" ? filter.filter.values.map(function (v) {\n            return v.value;\n          }) : filter.filter.values,\n          type: filter.dataType,\n          name: filter.column,\n          datasetID: _this.datasetId,\n          tableName: _this.tableName,\n          alias: filter.column\n        };\n      });\n      var REQUIRED_PROPS = [\"value\", \"type\", \"datasetID\", \"tableName\"];\n\n      var validateProperty = function validateProperty(prop) {\n        if (Array.isArray(prop) && prop.length === 0) {\n          return false;\n        }\n\n        if (typeof prop === \"string\" && prop.length === 0) {\n          return false;\n        }\n\n        return prop === null ? false : true;\n      };\n\n      return serialize.filter(function (f) {\n        return [].concat(REQUIRED_PROPS).filter(function (prop) {\n          return validateProperty(f[prop]);\n        }).length === REQUIRED_PROPS.length;\n      });\n    }\n  }, {\n    key: \"requestData\",\n    value: function requestData(sql, dataset) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8() {\n        var response, data;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return fetch(\"https://api.resourcewatch.org/v1/query/\".concat(dataset.id, \"?sql=\").concat(sql));\n\n              case 2:\n                response = _context8.sent;\n                _context8.next = 5;\n                return response.json();\n\n              case 5:\n                data = _context8.sent;\n                return _context8.abrupt(\"return\", data);\n\n              case 7:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8);\n      }));\n    }\n  }, {\n    key: \"filterUpdate\",\n    value: function filterUpdate(filters, fields, widget) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee9() {\n        var _widget$attributes, name, description, widgetConfig, configuration, out;\n\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                if (!(!filters || !Array.isArray(filters) || filters.length === 0)) {\n                  _context9.next = 2;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\", []);\n\n              case 2:\n                _widget$attributes = widget.attributes, name = _widget$attributes.name, description = _widget$attributes.description, widgetConfig = _widget$attributes.widgetConfig;\n                configuration = Object.assign(Object.assign({}, widgetConfig.paramsConfig), {\n                  title: name,\n                  caption: description\n                });\n                _context9.next = 6;\n                return core_1.FiltersService.handleFilters(filters, {\n                  column: \"name\",\n                  values: \"value\",\n                  type: \"type\"\n                }, {\n                  configuration: configuration,\n                  datasetId: this.datasetId,\n                  fields: fields,\n                  widget: widget\n                });\n\n              case 6:\n                out = _context9.sent;\n                return _context9.abrupt(\"return\", out);\n\n              case 8:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n    }\n  }]);\n\n  return RwAdapter;\n}();\n\nexports.default = RwAdapter;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar DatasetService =\n/*#__PURE__*/\nfunction () {\n  function DatasetService(config) {\n    _classCallCheck(this, DatasetService);\n\n    this.config = config;\n  }\n\n  _createClass(DatasetService, [{\n    key: \"fetchData\",\n    value: function fetchData(url) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return fetch(url);\n\n              case 3:\n                response = _context.sent;\n\n                if (!(response.status >= 400)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw new Error(response.statusText);\n\n              case 7:\n                _context.next = 9;\n                return response.json();\n\n              case 9:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](0);\n                console.error(\"Error loading dataset:\", url);\n                return _context.abrupt(\"return\", {});\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 12]]);\n      }));\n    }\n  }]);\n\n  return DatasetService;\n}();\n\nexports.default = DatasetService;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar lodash_1 = require(\"lodash\");\n\nvar WidgetService =\n/*#__PURE__*/\nfunction () {\n  function WidgetService(config) {\n    _classCallCheck(this, WidgetService);\n\n    this.config = config;\n  }\n\n  _createClass(WidgetService, [{\n    key: \"fromDataset\",\n    value: function fromDataset(dataset) {\n      return lodash_1.find(dataset.attributes.widget, function (widget) {\n        return !!widget.attributes.defaultEditableWidget;\n      });\n    }\n  }, {\n    key: \"getDataSqlQuery\",\n    value: function getDataSqlQuery(dataset, widget) {\n      return '';\n    }\n  }, {\n    key: \"fetchWidgetData\",\n    value: function fetchWidgetData(url) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", null);\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n    }\n  }, {\n    key: \"fetchWidget\",\n    value: function fetchWidget(url) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return fetch(url);\n\n              case 3:\n                response = _context2.sent;\n\n                if (!(response.status >= 400)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                throw new Error(response.statusText);\n\n              case 6:\n                _context2.next = 8;\n                return response.json();\n\n              case 8:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                throw new Error(_context2.t0);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 11]]);\n      }));\n    }\n  }]);\n\n  return WidgetService;\n}();\n\nexports.default = WidgetService;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (s) {\n  if (typeof s !== \"string\") return \"\";\n  return s.charAt(0).toUpperCase() + s.slice(1);\n};","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar TYPE_COLUMNS = \"columns\";\nvar TYPE_INDICATOR = \"indicator\";\nvar TYPE_VALUE = \"value\";\nvar TYPE_RANGE = \"range\";\nvar TYPE_STRING = \"string\";\nexports.TYPE_FILTER_ON_VALUES = \"FILTER_ON_VALUES\";\nexports.TYPE_TEXT_CONTAINS = \"TEXT_CONTAINS\";\nexports.TYPE_TEXT_NOT_CONTAINS = \"TEXT_NOT_CONTAINS\";\nexports.TYPE_TEXT_STARTS_WITH = \"TEXT_STARTS_WITH\";\nexports.TYPE_TEXT_ENDS_WITH = \"TEXT_ENDS_WITH\";\nvar DEFAULT_STRING_FILTER = {\n  values: \"\",\n  type: null,\n  notNull: false\n};\nvar DEFAULT_RANGE_FILTER = {\n  values: [0, 100],\n  type: TYPE_RANGE,\n  notNull: true,\n  max: 500,\n  min: 0\n};\nvar DEFAULT_VALUE_FILTER = {\n  values: 0,\n  type: TYPE_VALUE,\n  notNull: true,\n  max: 500,\n  min: 0\n};\n\nfunction asyncForEach(array, callback) {\n  return __awaiter(this, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var index;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            index = 0;\n\n          case 1:\n            if (!(index < array.length)) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 4;\n            return callback(array[index], index, array);\n\n          case 4:\n            index++;\n            _context.next = 1;\n            break;\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\n\nvar patchColumn = function patchColumn(filter, payload, fieldService) {\n  return __awaiter(void 0, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var values, type, fieldInfo, setFilterOnColumn;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            values = payload.values, type = payload.type;\n            _context2.next = 3;\n            return fieldService.getFieldInfo(filter, values.value);\n\n          case 3:\n            fieldInfo = _context2.sent;\n\n            if (values.dataType !== \"string\") {\n              setFilterOnColumn = Object.assign(Object.assign({}, filter.filter), {\n                values: [fieldInfo.min, fieldInfo.max]\n              });\n            } else {\n              setFilterOnColumn = Object.assign(Object.assign({}, filter.filter), {\n                type: \"string\",\n                values: []\n              });\n            }\n\n            return _context2.abrupt(\"return\", Object.assign(Object.assign({}, filter), {\n              column: values.value,\n              indicator: values.dataType === \"string\" ? \"FILTER_ON_VALUES\" : \"range\",\n              dataType: values.dataType,\n              fieldInfo: fieldInfo,\n              filter: setFilterOnColumn\n            }));\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n};\n\nvar resolveStringLikeValue = function resolveStringLikeValue(val) {\n  var isList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  if (isList) {\n    return Array.isArray(val) ? val : [];\n  }\n\n  if (val === null) {\n    return \"\";\n  }\n\n  return Array.isArray(val) ? val.map(function (v) {\n    return v.label;\n  }).join(\",\") : val;\n};\n\nvar resolveNumberLikeValue = function resolveNumberLikeValue(filter, val) {\n  var range = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var min = filter.fieldInfo && filter.fieldInfo.min ? filter.fieldInfo.min : 0;\n  var max = filter.fieldInfo && filter.fieldInfo.max ? filter.fieldInfo.max : 0;\n\n  if (val) {\n    return val;\n  }\n\n  if (range) {\n    return [min, max];\n  }\n\n  return max;\n};\n\nvar patchIndicator = function patchIndicator(filter, payload) {\n  var values = payload.values;\n  var appliedValue = filter.filter.values;\n  var setFilterOnIndicator = null;\n\n  if (values.value === exports.TYPE_FILTER_ON_VALUES) {\n    setFilterOnIndicator = Object.assign(Object.assign({}, DEFAULT_STRING_FILTER), {\n      notNull: true,\n      values: resolveStringLikeValue(appliedValue, true)\n    });\n  } else if (values.value === exports.TYPE_TEXT_CONTAINS || values.value === exports.TYPE_TEXT_NOT_CONTAINS || values.value === exports.TYPE_TEXT_STARTS_WITH || values.value === exports.TYPE_TEXT_ENDS_WITH) {\n    setFilterOnIndicator = Object.assign(Object.assign({}, DEFAULT_STRING_FILTER), {\n      values: resolveStringLikeValue(appliedValue)\n    });\n  } else if (values.value === TYPE_RANGE) {\n    setFilterOnIndicator = Object.assign(Object.assign({}, DEFAULT_RANGE_FILTER), {\n      values: resolveNumberLikeValue(filter, appliedValue, true)\n    });\n  } else if (values.value === TYPE_VALUE) {\n    setFilterOnIndicator = Object.assign(Object.assign({}, DEFAULT_VALUE_FILTER), {\n      values: resolveNumberLikeValue(filter, appliedValue)\n    });\n  } else {\n    throw new Error(\"Filters helper patch indicator, type \".concat(values.value, \" is not a valid indicator.\"));\n  }\n\n  return Object.assign(Object.assign({}, filter), {\n    indicator: values.value,\n    filter: setFilterOnIndicator\n  });\n};\n\nvar patchRange = function patchRange(filter, payload) {\n  var values = payload.values;\n  return Object.assign(Object.assign({}, filter), {\n    filter: Object.assign(Object.assign({}, filter.filter), {\n      values: values\n    })\n  });\n};\n\nvar patchValue = function patchValue(filter, payload) {\n  var values = payload.values;\n  return Object.assign(Object.assign({}, filter), {\n    filter: Object.assign(Object.assign({}, filter.filter), {\n      values: values\n    })\n  });\n};\n\nvar patchNullCheck = function patchNullCheck(filter) {\n  return Object.assign(Object.assign({}, filter), {\n    filter: Object.assign(Object.assign({}, filter.filter), {\n      notNull: !filter.filter.notNull\n    })\n  });\n};\n\nexports.default = function (filters, fieldService, payload) {\n  return __awaiter(void 0, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4() {\n    var values, id, type, out;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            values = payload.values, id = payload.id, type = payload.type;\n            out = [];\n\n            if (!(type === TYPE_COLUMNS)) {\n              _context4.next = 7;\n              break;\n            }\n\n            _context4.next = 5;\n            return asyncForEach(filters, function (filter) {\n              return __awaiter(void 0, void 0, void 0,\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee3() {\n                var patch;\n                return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        if (!(filter.id === id)) {\n                          _context3.next = 7;\n                          break;\n                        }\n\n                        _context3.next = 3;\n                        return patchColumn(filter, payload, fieldService);\n\n                      case 3:\n                        patch = _context3.sent;\n                        out.push(patch);\n                        _context3.next = 8;\n                        break;\n\n                      case 7:\n                        out.push(filter);\n\n                      case 8:\n                      case \"end\":\n                        return _context3.stop();\n                    }\n                  }\n                }, _callee3);\n              }));\n            });\n\n          case 5:\n            _context4.next = 8;\n            break;\n\n          case 7:\n            out = filters.map(function (filter) {\n              if (filter.id === id) {\n                if (type === TYPE_INDICATOR) {\n                  return patchIndicator(filter, payload);\n                } else if (type === TYPE_RANGE) {\n                  return patchRange(filter, payload);\n                } else if (type === TYPE_VALUE || type === exports.TYPE_FILTER_ON_VALUES) {\n                  return patchValue(filter, payload);\n                } else if (type === \"NOT_NULL_CHECK\") {\n                  return patchNullCheck(filter);\n                } else {\n                  throw new Error(\"Error in filter helper type \".concat(type, \" not implemented.\"));\n                }\n              }\n\n              return filter;\n            });\n\n          case 8:\n            return _context4.abrupt(\"return\", out);\n\n          case 9:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n};","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar filters_1 = __importDefault(require(\"./filters\"));\n\nvar constants_1 = require(\"../constants\");\n\nvar DataService =\n/*#__PURE__*/\nfunction () {\n  function DataService(datasetId, widgetId, adapter, setEditor, dispatch) {\n    _classCallCheck(this, DataService);\n\n    this.adapter = adapter;\n    this.setEditor = setEditor;\n    this.dispatch = dispatch;\n    this.dataset = null;\n    this.widgetId = widgetId;\n    this.widget = null;\n    this.widgetData = null;\n    this.adapter.setDatasetId(datasetId);\n  }\n\n  _createClass(DataService, [{\n    key: \"getDatasetAndWidgets\",\n    value: function getDatasetAndWidgets() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.adapter.getDataset();\n\n              case 2:\n                this.dataset = _context.sent;\n                _context.next = 5;\n                return this.adapter.getWidget(this.dataset, this.widgetId);\n\n              case 5:\n                this.widget = _context.sent;\n                this.setEditor({\n                  dataset: this.dataset,\n                  widget: this.widget\n                });\n                this.dispatch({\n                  type: constants_1.sagaEvents.DATA_FLOW_DATASET_WIDGET_READY\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }, {\n    key: \"restoreEditor\",\n    value: function restoreEditor(datasetId, widgetId) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.setEditor({\n                  restoring: true\n                });\n                this.widgetId = widgetId;\n                this.adapter.setDatasetId(datasetId);\n                _context2.next = 5;\n                return this.getDatasetAndWidgets();\n\n              case 5:\n                _context2.next = 7;\n                return this.getFieldsAndLayers();\n\n              case 7:\n                _context2.next = 9;\n                return this.handleFilters();\n\n              case 9:\n                this.setEditor({\n                  restoring: false\n                });\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"handleFilters\",\n    value: function handleFilters() {\n      var _a, _b, _c;\n\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var filters, normalizeFilters;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                filters = (_c = (_b = (_a = this.widget.attributes) === null || _a === void 0 ? void 0 : _a.widgetConfig) === null || _b === void 0 ? void 0 : _b.paramsConfig) === null || _c === void 0 ? void 0 : _c.filters;\n\n                if (!(filters && Array.isArray(filters) && filters.length > 0)) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                _context3.next = 4;\n                return this.adapter.filterUpdate(filters, this.allowedFields, this.widget);\n\n              case 4:\n                normalizeFilters = _context3.sent;\n                this.dispatch({\n                  type: constants_1.reduxActions.EDITOR_SET_FILTERS,\n                  payload: {\n                    list: normalizeFilters\n                  }\n                });\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }, {\n    key: \"isFieldAllowed\",\n    value: function isFieldAllowed(field) {\n      var fieldTypeAllowed = constants_1.ALLOWED_FIELD_TYPES.find(function (val) {\n        return val.name.toLowerCase() === field.type.toLowerCase();\n      });\n      var isCartodbId = field.columnName === \"cartodb_id\";\n      var result = !isCartodbId && fieldTypeAllowed;\n      return result;\n    }\n  }, {\n    key: \"getFieldsAndLayers\",\n    value: function getFieldsAndLayers() {\n      var _a, _b, _c, _d;\n\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var _this = this;\n\n        var fields, layers, columns;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.adapter.getFields();\n\n              case 2:\n                fields = _context4.sent;\n                _context4.next = 5;\n                return this.adapter.getLayers();\n\n              case 5:\n                layers = _context4.sent;\n                columns = (_d = (_c = (_b = (_a = this.dataset) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.metadata[0]) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.columns;\n                this.allowedFields = [];\n\n                if (fields && Object.keys(fields).length > 0) {\n                  Object.keys(fields).forEach(function (field) {\n                    if (columns && field in columns) {\n                      var f = Object.assign(Object.assign({}, fields[field]), {\n                        columnName: field,\n                        metadata: columns[field]\n                      });\n\n                      if (_this.isFieldAllowed(f)) {\n                        _this.allowedFields.push(f);\n                      }\n                    }\n                  });\n                }\n\n                this.setEditor({\n                  layers: layers,\n                  fields: this.allowedFields\n                });\n                this.dispatch({\n                  type: constants_1.sagaEvents.DATA_FLOW_DATA_READY\n                });\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n    }\n  }, {\n    key: \"requestWithFilters\",\n    value: function requestWithFilters(filters, configuration) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        var serialized, filtersService, request;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                serialized = this.adapter.filterSerializer(filters);\n                filtersService = new filters_1.default(Object.assign({}, configuration), filters, this.dataset);\n                _context5.next = 4;\n                return this.adapter.requestData(filtersService.getQuery(), this.dataset);\n\n              case 4:\n                request = _context5.sent;\n\n                if (!request.data || \"errors\" in request) {\n                  this.setEditor({\n                    errors: [\"WIDGET_DATA_UNAVAILABLE\"]\n                  });\n                } else {\n                  this.setEditor({\n                    widgetData: request.data\n                  });\n                  this.dispatch({\n                    type: constants_1.sagaEvents.DATA_FLOW_WIDGET_DATA_READY\n                  });\n                }\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n    }\n  }, {\n    key: \"resolveInitialState\",\n    value: function resolveInitialState() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6() {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this.getDatasetAndWidgets();\n\n              case 2:\n                _context6.next = 4;\n                return this.getFieldsAndLayers();\n\n              case 4:\n                _context6.next = 6;\n                return this.handleFilters();\n\n              case 6:\n                this.setEditor({\n                  initialized: true\n                });\n\n              case 7:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n    }\n  }]);\n\n  return DataService;\n}();\n\nexports.default = DataService;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar pie_1 = __importDefault(require(\"../charts/pie\"));\n\nvar bars_1 = __importDefault(require(\"../charts/bars\"));\n\nvar bars_vertical_1 = __importDefault(require(\"../charts/bars-vertical\"));\n\nvar line_1 = __importDefault(require(\"../charts/line\"));\n\nvar scatter_1 = __importDefault(require(\"../charts/scatter\"));\n\nvar constants_1 = require(\"../charts/constants\");\n\nvar constants_2 = require(\"../helpers/wiget-helper/constants\");\n\nvar VegaService =\n/*#__PURE__*/\nfunction () {\n  function VegaService(widgetConfig, widgetData, configuration, theme) {\n    _classCallCheck(this, VegaService);\n\n    this.scheme = theme.schemes.find(function (scheme) {\n      return scheme.name === theme.selectedScheme;\n    });\n    this.schema = constants_2.defaultVegaSchema();\n    this.widgetConfig = widgetConfig;\n    this.widgetData = widgetData;\n    this.configuration = configuration;\n    this.setConfig();\n    this.resolveChart();\n  }\n\n  _createClass(VegaService, [{\n    key: \"resolveChart\",\n    value: function resolveChart() {\n      var _this$configuration = this.configuration,\n          chartType = _this$configuration.chartType,\n          direction = _this$configuration.direction;\n      var chart;\n\n      if (constants_1.SUPPORTED_CHARTS.indexOf(chartType) === -1) {\n        throw new Error(\"Chart of type: \".concat(chartType, \" is not supported. we support: (\").concat(constants_1.SUPPORTED_CHARTS.join(\"|\"), \")\"));\n      }\n\n      if (chartType === \"pie\") {\n        chart = new pie_1.default(this.schema, this.widgetConfig, this.widgetData, this.scheme).getChart();\n      }\n\n      if (chartType === \"bar\") {\n        if (direction === \"horizontal\") {\n          chart = new bars_1.default(this.schema, this.widgetConfig, this.widgetData, this.scheme).getChart();\n        } else {\n          chart = new bars_vertical_1.default(this.schema, this.widgetConfig, this.widgetData, this.scheme).getChart();\n        }\n      }\n\n      if (chartType === \"line\") {\n        chart = new line_1.default(this.schema, this.widgetConfig, this.widgetData, this.scheme).getChart();\n      }\n\n      if (chartType === \"scatter\") {\n        chart = new scatter_1.default(this.schema, this.widgetConfig, this.widgetData, this.scheme).getChart();\n      }\n\n      this.schema = Object.assign(Object.assign({}, this.schema), chart);\n    }\n  }, {\n    key: \"setConfig\",\n    value: function setConfig() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        config: Object.assign(Object.assign({}, this.schema.config), this.widgetConfig.config)\n      });\n    }\n  }, {\n    key: \"getChart\",\n    value: function getChart() {\n      return this.schema;\n    }\n  }]);\n\n  return VegaService;\n}();\n\nexports.default = VegaService;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"../helpers/wiget-helper/constants\");\n\nvar Pie =\n/*#__PURE__*/\nfunction () {\n  function Pie(schema, widgetConfig, widgetData, scheme) {\n    _classCallCheck(this, Pie);\n\n    this.schema = schema;\n    this.scheme = scheme;\n    this.widgetConfig = widgetConfig;\n    this.widgetData = widgetData;\n    this.generateSchema();\n    this.setGenericSettings();\n  }\n\n  _createClass(Pie, [{\n    key: \"generateSchema\",\n    value: function generateSchema() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        scales: this.setScales(),\n        marks: this.setMarks(),\n        data: this.bindData(),\n        interaction_config: this.interactionConfig()\n      });\n    }\n  }, {\n    key: \"setGenericSettings\",\n    value: function setGenericSettings() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        width: 400,\n        height: 400\n      });\n    }\n  }, {\n    key: \"interactionConfig\",\n    value: function interactionConfig() {\n      return [{\n        name: \"tooltip\",\n        config: {\n          fields: [{\n            column: \"y\",\n            property: \"y\",\n            type: \"number\",\n            format: \".2s\"\n          }, {\n            column: \"x\",\n            property: \"x\",\n            type: \"string\",\n            format: \".2f\"\n          }]\n        }\n      }];\n    }\n  }, {\n    key: \"setScales\",\n    value: function setScales() {\n      return [{\n        name: \"c\",\n        type: \"ordinal\",\n        domain: {\n          data: \"table\",\n          field: constants_1.sqlFields.value\n        },\n        range: this.scheme ? this.scheme.category : 'category20'\n      }];\n    }\n  }, {\n    key: \"setMarks\",\n    value: function setMarks() {\n      return [{\n        type: \"arc\",\n        from: {\n          data: \"table\"\n        },\n        encode: {\n          enter: {\n            tooltip: {\n              signal: \"{'Label': datum.x, 'Value': datum.y }\"\n            },\n            fill: {\n              scale: \"c\",\n              field: constants_1.sqlFields.value\n            },\n            x: {\n              signal: \"width / 2\"\n            },\n            y: {\n              signal: \"height / 2\"\n            }\n          },\n          update: {\n            startAngle: {\n              field: \"startAngle\"\n            },\n            endAngle: {\n              field: \"endAngle\"\n            },\n            innerRadius: {\n              signal: \"width > height ? height / 3 : width / 3\"\n            },\n            outerRadius: {\n              signal: \"width > height ? height / 2 : width / 2\"\n            }\n          },\n          hover: {\n            opacity: {\n              value: 0.8\n            }\n          }\n        }\n      }];\n    }\n  }, {\n    key: \"bindData\",\n    value: function bindData() {\n      var widgetData = this.widgetData;\n      return [{\n        values: widgetData,\n        name: \"table\",\n        transform: [{\n          type: \"pie\",\n          field: constants_1.sqlFields.category,\n          startAngle: 0,\n          endAngle: 6.29\n        }]\n      }];\n    }\n  }, {\n    key: \"getChart\",\n    value: function getChart() {\n      return this.schema;\n    }\n  }]);\n\n  return Pie;\n}();\n\nexports.default = Pie;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"../helpers/wiget-helper/constants\");\n\nvar Bars =\n/*#__PURE__*/\nfunction () {\n  function Bars(schema, widgetConfig, widgetData, scheme) {\n    _classCallCheck(this, Bars);\n\n    this.schema = schema;\n    this.widgetConfig = widgetConfig;\n    this.widgetData = widgetData;\n    this.scheme = scheme;\n    this.generateSchema();\n    this.setGenericSettings();\n  }\n\n  _createClass(Bars, [{\n    key: \"generateSchema\",\n    value: function generateSchema() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        axes: this.setAxes(),\n        scales: this.setScales(),\n        marks: this.setMarks(),\n        data: this.bindData(),\n        interaction_config: this.interactionConfig(),\n        config: Object.assign(Object.assign({}, this.scheme.config), {\n          rect: {\n            fill: this.scheme ? this.scheme.mainColor : this.schema.config.rect.fill\n          }\n        })\n      });\n    }\n  }, {\n    key: \"setGenericSettings\",\n    value: function setGenericSettings() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        height: 400,\n        autosize: {\n          type: \"fit\",\n          contains: \"padding\"\n        },\n        padding: 20\n      });\n    }\n  }, {\n    key: \"setScales\",\n    value: function setScales() {\n      return [{\n        name: \"x\",\n        type: \"band\",\n        domain: {\n          data: \"table\",\n          field: \"id\"\n        },\n        range: \"width\",\n        padding: 0.05\n      }, {\n        name: \"y\",\n        type: \"linear\",\n        domain: {\n          data: \"table\",\n          field: constants_1.sqlFields.category\n        },\n        nice: true,\n        zero: true,\n        range: \"height\"\n      }];\n    }\n  }, {\n    key: \"setMarks\",\n    value: function setMarks() {\n      return [{\n        type: \"rect\",\n        from: {\n          data: \"table\"\n        },\n        encode: {\n          enter: {\n            tooltip: {\n              signal: \"{'Label': datum.x, 'Value': datum.y }\"\n            }\n          },\n          update: {\n            opacity: {\n              value: 1\n            },\n            x: {\n              scale: \"x\",\n              field: \"id\"\n            },\n            width: {\n              scale: \"x\",\n              band: 1\n            },\n            y: {\n              scale: \"y\",\n              field: \"y\"\n            },\n            y2: {\n              scale: \"y\",\n              value: 0\n            }\n          },\n          hover: {\n            opacity: {\n              value: 0.8\n            }\n          }\n        }\n      }];\n    }\n  }, {\n    key: \"interactionConfig\",\n    value: function interactionConfig() {\n      return [{\n        name: \"tooltip\",\n        config: {\n          fields: [{\n            column: \"y\",\n            property: \"y\",\n            type: \"number\",\n            format: \".2s\"\n          }, {\n            column: \"x\",\n            property: \"x\",\n            type: \"string\",\n            format: \".2f\"\n          }]\n        }\n      }];\n    }\n  }, {\n    key: \"setAxes\",\n    value: function setAxes() {\n      return [Object.assign(Object.assign(Object.assign({}, this.schema.axis), this.schema.axisX), {\n        orient: \"bottom\",\n        scale: \"x\",\n        labelOverlap: \"parity\",\n        ticks: false,\n        encode: {\n          labels: {\n            update: {\n              text: {\n                signal: \"width < 300 || data('table')[0].count > 10 ? truncate(data('table')[datum.value - 1].x, 12) : data('table')[datum.value - 1].x\"\n              },\n              align: {\n                signal: \"width < 300 || data('table')[0].count > 10 ? 'right' : 'center'\"\n              },\n              baseline: {\n                signal: \"width < 300 || data('table')[0].count > 10 ? 'middle' : 'top'\"\n              },\n              angle: {\n                signal: \"width < 300 || data('table')[0].count > 10 ? -90 : 0\"\n              }\n            }\n          }\n        }\n      }), Object.assign(Object.assign(Object.assign({}, this.schema.axis), this.schema.axisY), {\n        orient: \"left\",\n        scale: \"y\",\n        labelOverlap: \"parity\",\n        format: \"s\",\n        encode: {\n          labels: {\n            update: {\n              align: {\n                value: \"right\"\n              },\n              baseline: {\n                value: \"bottom\"\n              }\n            }\n          }\n        }\n      })];\n    }\n  }, {\n    key: \"bindData\",\n    value: function bindData() {\n      var widgetData = this.widgetData;\n      return [{\n        values: widgetData,\n        name: \"table\",\n        transform: [{\n          type: \"identifier\",\n          as: \"id\"\n        }, {\n          type: \"joinaggregate\",\n          as: [\"count\"]\n        }]\n      }];\n    }\n  }, {\n    key: \"getChart\",\n    value: function getChart() {\n      return this.schema;\n    }\n  }]);\n\n  return Bars;\n}();\n\nexports.default = Bars;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"../helpers/wiget-helper/constants\");\n\nvar BarsVertical =\n/*#__PURE__*/\nfunction () {\n  function BarsVertical(schema, widgetConfig, widgetData, scheme) {\n    _classCallCheck(this, BarsVertical);\n\n    this.schema = schema;\n    this.widgetConfig = widgetConfig;\n    this.widgetData = widgetData;\n    this.scheme = scheme;\n    this.generateSchema();\n    this.setGenericSettings();\n  }\n\n  _createClass(BarsVertical, [{\n    key: \"generateSchema\",\n    value: function generateSchema() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        axes: this.setAxes(),\n        scales: this.setScales(),\n        marks: this.setMarks(),\n        data: this.bindData(),\n        interaction_config: this.interactionConfig(),\n        config: Object.assign(Object.assign({}, this.scheme.config), {\n          rect: {\n            fill: this.scheme ? this.scheme.mainColor : this.schema.config.rect.fill\n          }\n        })\n      });\n    }\n  }, {\n    key: \"setGenericSettings\",\n    value: function setGenericSettings() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        height: 400,\n        autosize: {\n          type: \"fit\",\n          contains: \"padding\"\n        },\n        padding: 20\n      });\n    }\n  }, {\n    key: \"setScales\",\n    value: function setScales() {\n      return [{\n        name: \"x\",\n        type: \"linear\",\n        domain: {\n          data: \"table\",\n          field: constants_1.sqlFields.category\n        },\n        range: \"width\"\n      }, {\n        name: \"y\",\n        type: \"band\",\n        domain: {\n          data: \"table\",\n          field: \"x\"\n        },\n        range: \"height\",\n        padding: 0.05\n      }];\n    }\n  }, {\n    key: \"setAxes\",\n    value: function setAxes() {\n      return [Object.assign(Object.assign(Object.assign({}, this.schema.axis), this.schema.axisX), {\n        orient: \"bottom\",\n        scale: \"x\",\n        grid: true,\n        labelOverlap: \"parity\"\n      }), Object.assign(Object.assign(Object.assign({}, this.schema.axis), this.schema.axisY), {\n        orient: \"left\",\n        scale: \"y\",\n        labelOverlap: \"parity\",\n        ticks: false,\n        grid: false,\n        encode: {\n          labels: {\n            update: {\n              text: {\n                signal: \"truncate(datum.value, 12)\"\n              },\n              align: {\n                signal: \"width < 300 || data('table')[0].count > 10 ? 'right' : 'center'\"\n              },\n              baseline: {\n                signal: \"width < 300 || data('table')[0].count > 10 ? 'middle' : 'top'\"\n              }\n            }\n          }\n        }\n      })];\n    }\n  }, {\n    key: \"setMarks\",\n    value: function setMarks() {\n      return [{\n        type: \"rect\",\n        from: {\n          data: \"table\"\n        },\n        encode: {\n          enter: {\n            tooltip: {\n              signal: \"{'Label': datum.x, 'Value': datum.y }\"\n            }\n          },\n          update: {\n            opacity: {\n              value: 1\n            },\n            x: {\n              scale: \"x\",\n              value: 0\n            },\n            x2: {\n              scale: \"x\",\n              field: constants_1.sqlFields.category\n            },\n            y: {\n              scale: \"y\",\n              field: \"x\"\n            },\n            height: {\n              scale: \"y\",\n              band: 1\n            }\n          },\n          hover: {\n            opacity: {\n              value: 0.8\n            }\n          }\n        }\n      }];\n    }\n  }, {\n    key: \"interactionConfig\",\n    value: function interactionConfig() {\n      return [{\n        name: \"tooltip\",\n        config: {\n          fields: [{\n            column: \"y\",\n            property: \"y\",\n            type: \"number\",\n            format: \".2s\"\n          }, {\n            column: \"x\",\n            property: \"x\",\n            type: \"string\",\n            format: \".2f\"\n          }]\n        }\n      }];\n    }\n  }, {\n    key: \"bindData\",\n    value: function bindData() {\n      var widgetData = this.widgetData;\n      return [{\n        values: widgetData,\n        name: \"table\",\n        transform: [{\n          type: \"identifier\",\n          as: \"id\"\n        }, {\n          type: \"joinaggregate\",\n          as: [\"count\"]\n        }]\n      }];\n    }\n  }, {\n    key: \"getChart\",\n    value: function getChart() {\n      return this.schema;\n    }\n  }]);\n\n  return BarsVertical;\n}();\n\nexports.default = BarsVertical;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"../helpers/wiget-helper/constants\");\n\nvar Line =\n/*#__PURE__*/\nfunction () {\n  function Line(schema, widgetConfig, widgetData, scheme) {\n    _classCallCheck(this, Line);\n\n    this.schema = schema;\n    this.widgetConfig = widgetConfig;\n    this.widgetData = widgetData;\n    this.scheme = scheme;\n    this.generateSchema();\n    this.setGenericSettings();\n  }\n\n  _createClass(Line, [{\n    key: \"generateSchema\",\n    value: function generateSchema() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        axes: this.setAxes(),\n        scales: this.setScales(),\n        marks: this.setMarks(),\n        data: this.bindData(),\n        interaction_config: this.interactionConfig(),\n        config: Object.assign(Object.assign({}, this.schema.config), {\n          line: Object.assign(Object.assign({}, this.schema.config.line), {\n            stroke: this.scheme ? this.scheme.mainColor : this.schema.config.line.stroke\n          }),\n          symbol: Object.assign(Object.assign({}, this.schema.config.symbol), {\n            fill: this.scheme ? this.scheme.mainColor : this.schema.config.symbol.fill\n          })\n        }),\n        signals: [{\n          name: \"hover\",\n          value: null,\n          on: [{\n            events: \"@cell:mouseover\",\n            update: \"datum\"\n          }, {\n            events: \"@cell:mouseout\",\n            update: \"null\"\n          }]\n        }]\n      });\n    }\n  }, {\n    key: \"setGenericSettings\",\n    value: function setGenericSettings() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        height: 400,\n        autosize: {\n          type: \"fit\",\n          contains: \"padding\"\n        },\n        padding: 20\n      });\n    }\n  }, {\n    key: \"interactionConfig\",\n    value: function interactionConfig() {\n      return [{\n        name: \"tooltip\",\n        config: {\n          fields: [{\n            column: \"y\",\n            property: \"y\",\n            type: \"number\",\n            format: \".2s\"\n          }, {\n            column: \"x\",\n            property: \"x\",\n            type: \"string\"\n          }]\n        }\n      }];\n    }\n  }, {\n    key: \"setScales\",\n    value: function setScales() {\n      return [{\n        name: \"x\",\n        type: \"point\",\n        range: \"width\",\n        domain: {\n          data: \"table\",\n          field: \"x\"\n        }\n      }, {\n        name: \"y\",\n        type: \"linear\",\n        range: \"height\",\n        nice: true,\n        zero: true,\n        domain: {\n          data: \"table\",\n          field: constants_1.sqlFields.category\n        }\n      }];\n    }\n  }, {\n    key: \"setMarks\",\n    value: function setMarks() {\n      return [{\n        name: \"lines\",\n        interactive: false,\n        type: \"line\",\n        from: {\n          data: \"table\"\n        },\n        encode: {\n          enter: {\n            x: {\n              scale: \"x\",\n              field: \"x\"\n            },\n            y: {\n              scale: \"y\",\n              field: \"y\"\n            },\n            strokeCap: {\n              value: \"round\"\n            },\n            strokeWidth: {\n              value: 2\n            },\n            strokeJoin: {\n              value: \"round\"\n            }\n          }\n        }\n      }, {\n        name: \"points\",\n        interactive: false,\n        type: \"symbol\",\n        from: {\n          data: \"dots\"\n        },\n        encode: {\n          enter: {\n            x: {\n              scale: \"x\",\n              field: \"x\"\n            },\n            y: {\n              scale: \"y\",\n              field: \"y\"\n            }\n          },\n          update: {\n            opacity: {\n              value: 1\n            }\n          }\n        }\n      }, {\n        name: \"cell\",\n        type: \"path\",\n        from: {\n          data: \"lines\"\n        },\n        transform: [{\n          type: \"voronoi\",\n          x: \"datum.x\",\n          y: \"datum.y\",\n          size: [{\n            signal: \"width\"\n          }, {\n            signal: \"height\"\n          }]\n        }],\n        encode: {\n          enter: {\n            tooltip: {\n              signal: \"{'Value': datum.x }\"\n            }\n          },\n          update: {\n            path: {\n              field: \"path\"\n            },\n            fill: {\n              value: \"red\"\n            },\n            opacity: {\n              value: 0\n            }\n          }\n        }\n      }];\n    }\n  }, {\n    key: \"setAxes\",\n    value: function setAxes() {\n      return [Object.assign(Object.assign(Object.assign({}, this.schema.axis), this.schema.axisX), {\n        orient: \"bottom\",\n        scale: \"x\",\n        labelOverlap: \"parity\",\n        ticks: false\n      }), Object.assign(Object.assign(Object.assign({}, this.schema.axis), this.schema.axisY), {\n        orient: \"left\",\n        scale: \"y\",\n        labelOverlap: \"parity\",\n        format: \"s\",\n        encode: {\n          labels: {\n            update: {\n              align: {\n                value: \"right\"\n              },\n              baseline: {\n                value: \"bottom\"\n              }\n            }\n          }\n        }\n      })];\n    }\n  }, {\n    key: \"bindData\",\n    value: function bindData() {\n      var widgetData = this.widgetData;\n      return [{\n        values: widgetData,\n        name: \"table\",\n        transform: [{\n          type: \"identifier\",\n          as: \"id\"\n        }, {\n          type: \"joinaggregate\",\n          as: [\"count\"]\n        }]\n      }, {\n        name: \"dots\",\n        source: \"table\",\n        transform: [{\n          type: \"filter\",\n          expr: \"hover && hover.datum.x === datum.x\"\n        }]\n      }];\n    }\n  }, {\n    key: \"getChart\",\n    value: function getChart() {\n      return this.schema;\n    }\n  }]);\n\n  return Line;\n}();\n\nexports.default = Line;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"../helpers/wiget-helper/constants\");\n\nvar Scatter =\n/*#__PURE__*/\nfunction () {\n  function Scatter(schema, widgetConfig, widgetData) {\n    _classCallCheck(this, Scatter);\n\n    this.schema = schema;\n    this.widgetConfig = widgetConfig;\n    this.widgetData = widgetData;\n    this.generateSchema();\n    this.setGenericSettings();\n  }\n\n  _createClass(Scatter, [{\n    key: \"generateSchema\",\n    value: function generateSchema() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        axes: this.setAxes(),\n        scales: this.setScales(),\n        marks: this.setMarks(),\n        data: this.bindData()\n      });\n    }\n  }, {\n    key: \"setGenericSettings\",\n    value: function setGenericSettings() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        height: 300,\n        autosize: {\n          type: \"fit\",\n          contains: \"padding\"\n        },\n        padding: 20\n      });\n    }\n  }, {\n    key: \"setScales\",\n    value: function setScales() {\n      return [{\n        \"name\": \"xscale\",\n        \"type\": \"linear\",\n        \"round\": true,\n        \"nice\": true,\n        \"zero\": false,\n        \"domain\": {\n          data: \"table\",\n          field: constants_1.sqlFields.value\n        },\n        \"range\": \"width\"\n      }, {\n        \"name\": \"yscale\",\n        \"type\": \"linear\",\n        \"round\": true,\n        \"nice\": true,\n        \"zero\": true,\n        \"domain\": {\n          data: \"table\",\n          field: constants_1.sqlFields.category\n        },\n        \"range\": \"height\"\n      }];\n    }\n  }, {\n    key: \"setMarks\",\n    value: function setMarks() {\n      return [{\n        \"name\": \"marks\",\n        \"type\": \"symbol\",\n        \"from\": {\n          \"data\": \"table\"\n        },\n        \"encode\": {\n          \"update\": {\n            \"x\": {\n              \"scale\": \"xscale\",\n              \"field\": \"x\"\n            },\n            \"y\": {\n              \"scale\": \"yscale\",\n              \"field\": \"y\"\n            },\n            \"strokeOpacity\": {\n              \"value\": 0\n            },\n            \"zindex\": {\n              \"value\": 0\n            },\n            \"opacity\": {\n              \"value\": 0.5\n            }\n          },\n          \"hover\": {\n            \"strokeOpacity\": {\n              \"value\": 1\n            },\n            \"zindex\": {\n              \"value\": 1\n            },\n            \"opacity\": {\n              \"value\": 1\n            }\n          }\n        }\n      }];\n    }\n  }, {\n    key: \"setAxes\",\n    value: function setAxes() {\n      return [{\n        \"scale\": \"xscale\",\n        \"labelOverlap\": \"parity\",\n        \"orient\": \"bottom\",\n        \"encode\": {\n          \"labels\": {\n            \"update\": {\n              \"align\": {\n                \"value\": \"center\"\n              },\n              \"baseline\": {\n                \"value\": \"top\"\n              }\n            }\n          }\n        }\n      }, {\n        \"scale\": \"yscale\",\n        \"labelOverlap\": \"parity\",\n        \"orient\": \"left\",\n        \"format\": \"s\"\n      }];\n    }\n  }, {\n    key: \"bindData\",\n    value: function bindData() {\n      var widgetData = this.widgetData;\n      return [{\n        values: widgetData,\n        name: \"table\"\n      }];\n    }\n  }, {\n    key: \"getChart\",\n    value: function getChart() {\n      return this.schema;\n    }\n  }]);\n\n  return Scatter;\n}();\n\nexports.default = Scatter;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SUPPORTED_CHARTS = [\"pie\", \"bar\", \"line\", \"scatter\"];\nexports.default = {\n  SUPPORTED_CHARTS: exports.SUPPORTED_CHARTS\n};","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"../constants\");\n\nvar isEqual_1 = __importDefault(require(\"lodash/isEqual\"));\n\nvar StateProxy =\n/*#__PURE__*/\nfunction () {\n  function StateProxy() {\n    _classCallCheck(this, StateProxy);\n\n    this.chartCache = {\n      chartType: null,\n      direction: null\n    };\n    this.configuration = {\n      value: null,\n      category: null,\n      orderBy: null,\n      aggregateFunction: null,\n      filters: null,\n      areaIntersection: null,\n      band: null,\n      layer: null,\n      limit: null\n    };\n  }\n\n  _createClass(StateProxy, [{\n    key: \"cacheChart\",\n    value: function cacheChart(state) {\n      var _state$configuration = state.configuration,\n          _state$configuration$ = _state$configuration.chartType,\n          chartType = _state$configuration$ === void 0 ? null : _state$configuration$,\n          _state$configuration$2 = _state$configuration.direction,\n          direction = _state$configuration$2 === void 0 ? null : _state$configuration$2;\n      this.chartCache = {\n        chartType: chartType,\n        direction: direction\n      };\n    }\n  }, {\n    key: \"chartHasUpdate\",\n    value: function chartHasUpdate(state) {\n      var editor = state.editor;\n      var _state$configuration2 = state.configuration,\n          chartType = _state$configuration2.chartType,\n          direction = _state$configuration2.direction;\n      var hasUpdate = !isEqual_1.default(this.chartCache, {\n        chartType: chartType,\n        direction: direction\n      });\n      this.chartCache = {\n        chartType: chartType,\n        direction: direction\n      };\n      return hasUpdate && editor.initialized;\n    }\n  }, {\n    key: \"configurationHasUpdate\",\n    value: function configurationHasUpdate(state) {\n      var editor = state.editor;\n      var _state$configuration3 = state.configuration,\n          value = _state$configuration3.value,\n          category = _state$configuration3.category,\n          orderBy = _state$configuration3.orderBy,\n          aggregateFunction = _state$configuration3.aggregateFunction,\n          filters = _state$configuration3.filters,\n          areaIntersection = _state$configuration3.areaIntersection,\n          band = _state$configuration3.band,\n          layer = _state$configuration3.layer,\n          limit = _state$configuration3.limit;\n      var updatedConfiguration = {\n        value: value,\n        category: category,\n        orderBy: orderBy,\n        aggregateFunction: aggregateFunction,\n        filters: filters,\n        areaIntersection: areaIntersection,\n        band: band,\n        layer: layer,\n        limit: limit\n      };\n      var hasUpdate = !isEqual_1.default(this.configuration, updatedConfiguration);\n      this.configuration = updatedConfiguration;\n      return hasUpdate && editor.initialized;\n    }\n  }, {\n    key: \"sync\",\n    value: function sync(editorState) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var UPDATES;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                UPDATES = [];\n\n                if (this.chartHasUpdate(editorState)) {\n                  UPDATES.push(constants_1.sagaEvents.DATA_FLOW_UPDATE_WIDGET);\n                }\n\n                if (this.configurationHasUpdate(editorState)) {\n                  UPDATES.push(constants_1.sagaEvents.DATA_FLOW_CONFIGURATION_UPDATE);\n                }\n\n                return _context.abrupt(\"return\", UPDATES);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }]);\n\n  return StateProxy;\n}();\n\nexports.default = StateProxy;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar dataset_1 = __importDefault(require(\"./services/dataset\"));\n\nexports.DatasetService = dataset_1.default;\n\nvar widget_1 = __importDefault(require(\"./services/widget\"));\n\nexports.WidgetService = widget_1.default;\n\nvar filters_1 = __importDefault(require(\"./services/filters\"));\n\nexports.FiltersService = filters_1.default;\n\nvar data_1 = __importDefault(require(\"./services/data\"));\n\nexports.DataService = data_1.default;\n\nvar vega_1 = __importDefault(require(\"./services/vega\"));\n\nexports.VegaService = vega_1.default;\n\nvar fields_1 = __importDefault(require(\"./services/fields\"));\n\nexports.FieldsService = fields_1.default;\n\nvar state_proxy_1 = __importDefault(require(\"./services/state-proxy\"));\n\nexports.StateProxy = state_proxy_1.default;\n\nvar constants_1 = __importDefault(require(\"./constants\"));\n\nexports.constants = constants_1.default;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar lodash_1 = require(\"lodash\");\n\nvar ConfigHelper =\n/*#__PURE__*/\nfunction () {\n  function ConfigHelper(params) {\n    _classCallCheck(this, ConfigHelper);\n\n    this.setConfig(params);\n  }\n\n  _createClass(ConfigHelper, [{\n    key: \"setConfig\",\n    value: function setConfig(params) {\n      var acceptedParams = lodash_1.pick(params, [\"url\", \"env\", \"applications\", \"authUrl\", \"assetsPath\", \"userToken\", \"userEmail\", \"locale\"]);\n      this.config = Object.assign(Object.assign({}, this.config), acceptedParams);\n    }\n  }, {\n    key: \"getConfig\",\n    value: function getConfig() {\n      return this.config;\n    }\n  }]);\n\n  return ConfigHelper;\n}();\n\nexports.default = function (params) {\n  return new ConfigHelper(params);\n};","import { connect } from \"react-redux\";\nimport { createAction as VzCreateAction } from \"vizzuality-redux-tools\";\nimport { constants } from \"@packages/core\";\n/*\n  REDUX util to connect to our state\n\n  As the widget editor is namespaced in the consumer app\n  this will make it easier to develop for us and only care about the state of the widget editor\n*/\n\nexport var connectState = function connectState(stateHandler, dispatchHandler) {\n  return connect(function (state) {\n    return typeof stateHandler === \"function\" ? stateHandler(state[constants.APP_NAMESPACE]) : {};\n  }, dispatchHandler);\n}; // Create redux actions that namespaces the widget editor\n\nexport var createAction = function createAction(action) {\n  return VzCreateAction(\"\".concat(constants.APP_NAMESPACE, \"/\").concat(action));\n}; // Gets an action with our namespace. used for our sagas\n\nexport var getAction = function getAction(action) {\n  return \"\".concat(constants.APP_NAMESPACE, \"/\").concat(action);\n};\nexport default {\n  connectState: connectState,\n  createAction: createAction,\n  getAction: getAction\n};","import { createAction } from \"../../helpers/redux\";\nexport var setEditor = createAction(\"EDITOR/setEditor\");\nexport default {\n  setEditor: setEditor\n};","import { createAction } from \"../../helpers/redux\";\nexport var setTheme = createAction(\"EDITOR/THEME/setTheme\");\nexport var setScheme = createAction(\"EDITOR/THEME/setScheme\");\nexport default {\n  setTheme: setTheme,\n  setScheme: setScheme\n};","import { createAction } from \"../../helpers/redux\";\nexport var setConfiguration = createAction(\"CONFIGURATION/setConfiguration\");\nexport var patchConfiguration = createAction(\"CONFIGURATION/patchConfiguration\");\nexport var saveConfiguration = createAction(\"CONFIGURATION/saveConfiguration\");\nexport default {\n  saveConfiguration: saveConfiguration,\n  setConfiguration: setConfiguration,\n  patchConfiguration: patchConfiguration\n};","import _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { createSelector } from \"reselect\";\n\nvar getConfiguration = function getConfiguration(state) {\n  return state.configuration;\n};\n\nvar getDataset = function getDataset(state) {\n  return state.editor.dataset;\n};\n\nexport var getWidgetSelectedColumn = createSelector([getConfiguration, getDataset], function (configuration, dataset) {\n  if (!dataset || !dataset.id || !dataset.attributes || !dataset.attributes.metadata) {\n    return null;\n  }\n\n  var value = dataset.attributes.metadata[0].attributes.columns[configuration.value.name];\n  return _objectSpread({}, value, {\n    identifier: configuration.value.name\n  });\n});\nexport var getWidgetColumns = createSelector([getDataset], function (dataset) {\n  if (!dataset || !dataset.id || !dataset.attributes || !dataset.attributes.widgetRelevantProps) {\n    return [];\n  }\n\n  var columns = dataset.attributes.widgetRelevantProps.map(function (prop) {\n    return _objectSpread({}, dataset.attributes.metadata[0].attributes.columns[prop], {\n      identifier: prop,\n      name: prop\n    });\n  });\n  return columns;\n});","import React from 'react';\n\nvar CategoryIcon = function CategoryIcon() {\n  return React.createElement(\"svg\", {\n    width: \"10px\",\n    height: \"10px\",\n    viewBox: \"0 0 10 10\",\n    version: \"1.1\"\n  }, React.createElement(\"g\", {\n    id: \"Iteration\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, React.createElement(\"g\", {\n    id: \"xAxis-Selector\",\n    transform: \"translate(-183.000000, -311.000000)\",\n    fill: \"#2C75B0\"\n  }, React.createElement(\"g\", {\n    id: \"Rectangle-409-+-364-+-MWh-Copy\",\n    transform: \"translate(163.000000, 289.000000)\"\n  }, React.createElement(\"g\", {\n    id: \"Group-20\",\n    transform: \"translate(19.000000, 10.000000)\"\n  }, React.createElement(\"path\", {\n    d: \"M4.5,12 L11,18.5 L7.5,22 L1,15.5 L1,12 L4.5,12 Z M3.5,13.5 C2.94771525,13.5 2.5,13.9477153 2.5,14.5 C2.5,15.0522847 2.94771525,15.5 3.5,15.5 C4.05228475,15.5 4.5,15.0522847 4.5,14.5 C4.5,13.9477153 4.05228475,13.5 3.5,13.5 Z\",\n    id: \"item-category\"\n  }))))));\n};\n\nexport default CategoryIcon;","import styled, { css } from \"styled-components\";\nimport { ALIGN_VERTICAL } from \"../../const\";\nexport var StyledPopupContainer = styled.div.withConfig({\n  displayName: \"style__StyledPopupContainer\",\n  componentId: \"eg9uyn-0\"\n})([\"*{box-sizing:border-box;}position:absolute;box-sizing:border-box;height:auto;width:200px;z-index:2;bottom:40px;left:50%;margin-left:-100px;\", \"\"], function (props) {\n  return props.align === ALIGN_VERTICAL && css([\"padding-left:20px;left:75px;bottom:initial;top:-30px;margin-left:initial;\"]);\n});\nexport var StyledPopupInsideContainer = styled.div.withConfig({\n  displayName: \"style__StyledPopupInsideContainer\",\n  componentId: \"eg9uyn-1\"\n})([\"padding:20px;max-height:200px;overflow-y:auto;border:1px solid rgba(26,28,34,0.1);border-radius:4px;background-color:#FFFFFF;box-shadow:0 20px 30px 0 rgba(0,0,0,0.1);cursor:initial;\", \"::-webkit-scrollbar{width:7px;}::-webkit-scrollbar-track{box-shadow:inset 0 0 2px grey;border-radius:10px;background:rgba(0,0,0,0.05);}::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.3);border-radius:10px;}::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.4);}&:after{content:'';position:absolute;left:calc(50% - 5px);bottom:-20px;border:12px solid transparent;border-top:12px solid #FFFFFF;z-index:3;\", \"}\"], function (props) {\n  return props.align === ALIGN_VERTICAL && css([\"box-shadow:-10px -10px 30px 0 rgba(0,0,0,0.15);\"]);\n}, function (props) {\n  return props.align === ALIGN_VERTICAL && css([\"transform:rotate(90deg);left:0;top:5px;bottom:initial;\"]);\n});\nexport var StyledCategoryAlias = styled.h4.withConfig({\n  displayName: \"style__StyledCategoryAlias\",\n  componentId: \"eg9uyn-2\"\n})([\"position:relative;padding-left:20px;margin-bottom:10px;margin-top:0;color:\", \";font-size:16px;line-height:25px;cursor:pointer;&:hover{color:#C32D7B;}\"], function (props) {\n  return props.active ? '#2C75B0' : '#393F44';\n});\nexport var StyledCategoryDescription = styled.div.withConfig({\n  displayName: \"style__StyledCategoryDescription\",\n  componentId: \"eg9uyn-3\"\n})([\"position:relative;padding-left:20px;margin-top:10px;margin-bottom:10px;color:#393F44;font-size:16px;line-height:25px;\"]);\nexport var StyledValueAlias = styled.div.withConfig({\n  displayName: \"style__StyledValueAlias\",\n  componentId: \"eg9uyn-4\"\n})([\"position:relative;padding-left:20px;margin-top:10px;margin-bottom:10px;color:#393F44;font-size:16px;line-height:25px;min-height:25px;\"]);\nexport var IconBox = styled.div.withConfig({\n  displayName: \"style__IconBox\",\n  componentId: \"eg9uyn-5\"\n})([\"color:#393F44;position:absolute;left:0;top:1px;\"]);","export var ALIGN_VERTICAL = 'vertical';\nexport var ALIGN_HORIZONTAL = 'horizontal';","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { Fragment } from \"react\";\nimport CategoryIcon from \"../../../icons/CategoryIcon\";\nimport { ALIGN_HORIZONTAL } from \"../../const\";\nimport { StyledPopupContainer, StyledPopupInsideContainer, StyledCategoryAlias, StyledValueAlias, IconBox } from \"./style\";\n\nvar Popup = function Popup(_ref) {\n  var options = _ref.options,\n      getValue = _ref.getValue,\n      setValue = _ref.setValue,\n      innerRef = _ref.innerRef,\n      innerProps = _ref.innerProps,\n      selectProps = _ref.selectProps;\n  var selected = getValue()[0];\n  var _selectProps$align = selectProps.align,\n      align = _selectProps$align === void 0 ? ALIGN_HORIZONTAL : _selectProps$align;\n  return React.createElement(StyledPopupContainer, _extends({\n    align: align,\n    ref: innerRef\n  }, innerProps), React.createElement(StyledPopupInsideContainer, {\n    align: align\n  }, options.map(function (op) {\n    return React.createElement(Fragment, {\n      key: op.name\n    }, React.createElement(StyledCategoryAlias, {\n      active: op.name === selected.name,\n      onClick: function onClick() {\n        return setValue(op);\n      }\n    }, React.createElement(IconBox, null, React.createElement(CategoryIcon, null)), op.alias, \" 1\"), React.createElement(StyledValueAlias, null, React.createElement(IconBox, null, \"#\"), op.name, \" 2\"));\n  })));\n};\n\nexport default Popup;","import Popup from \"./component\";\nexport default Popup;","import _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport styled, { css } from 'styled-components';\nexport var StyledSelectBox = styled.div.withConfig({\n  displayName: \"style__StyledSelectBox\",\n  componentId: \"sc-1braopw-0\"\n})([\"position:absolute;bottom:-30px;left:calc(50% - 150px);width:100%;max-width:300px;margin:0 auto;\", \"\"], function (props) {\n  return props.align === 'vertical' && css([\"bottom:0;left:0;max-width:60px;height:100%;display:flex;align-items:center;justify-content:center;\"]);\n});\nexport var StyledOverflow = styled.div.withConfig({\n  displayName: \"style__StyledOverflow\",\n  componentId: \"sc-1braopw-1\"\n})([\"position:absolute;width:100%;height:100%;top:0;left:0;background-color:rgba(0,0,0,0.1);z-index:10;\"]);\nexport var InputStyles = {\n  control: function control() {\n    return {\n      display: 'flex',\n      border: '1px solid rgba(202,204,208,0.85)',\n      borderRadius: '4px',\n      padding: '3px 0'\n    };\n  }\n};\nexport var CustomStyles = {\n  container: function container() {\n    return {\n      position: 'relative',\n      boxSizing: 'border-box',\n      cursor: 'pointer'\n    };\n  },\n  indicatorSeparator: function indicatorSeparator() {\n    return {\n      display: 'none'\n    };\n  },\n  dropdownIndicator: function dropdownIndicator(provided, state) {\n    var _state$selectProps = state.selectProps,\n        menuIsOpen = _state$selectProps.menuIsOpen,\n        align = _state$selectProps.align;\n    return {\n      color: '#c32d7b',\n      transform: menuIsOpen && align === 'horizontal' ? 'rotate(180deg)' : 'none',\n      transition: 'all 0.2s ease-out'\n    };\n  },\n  indicatorsContainer: function indicatorsContainer() {\n    return {\n      color: '#c32d7b',\n      display: 'flex',\n      padding: '8px',\n      transition: 'color 150ms',\n      boxSizing: 'border-box',\n      position: 'relative',\n      top: '5px'\n    };\n  },\n  control: function control(provided, state) {\n    var _state$selectProps2 = state.selectProps,\n        align = _state$selectProps2.align,\n        _state$selectProps2$v = _state$selectProps2.value.alias,\n        alias = _state$selectProps2$v === void 0 ? 'Value' : _state$selectProps2$v;\n    var wordPixel = 10;\n    var width = \"\".concat(50 + alias.length * wordPixel, \"px\");\n    var additionalProps = align === 'vertical' ? {\n      transform: 'rotate(-90deg)'\n    } : null;\n    return _objectSpread({\n      margin: \"0 auto\",\n      display: 'flex',\n      border: 'none',\n      borderRadius: '4px',\n      width: width,\n      maxWidth: '210px',\n      padding: '3px 0'\n    }, additionalProps);\n  },\n  menu: function menu(provided, state) {\n    var align = state.selectProps.align;\n    var additionalProps = align === 'vertical' ? {\n      position: 'absolute',\n      left: '100px',\n      top: '-50px',\n      bottom: 'auto',\n      width: '300px'\n    } : null;\n    return _objectSpread({}, provided, {}, additionalProps);\n  }\n};","import _objectWithoutProperties from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useEffect, Fragment } from \"react\";\nimport Select from \"react-select\";\nimport Popup from \"./components/Popup\";\nimport { ALIGN_HORIZONTAL } from \"./const\";\nimport { StyledSelectBox, StyledOverflow, CustomStyles, InputStyles } from \"./style\";\n/**\n * CustomSelect. Component uses react-select library for customization.\n */\n\nvar CustomSelect = function CustomSelect(_ref) {\n  var _ref$isCustom = _ref.isCustom,\n      isCustom = _ref$isCustom === void 0 ? false : _ref$isCustom,\n      _ref$isPopup = _ref.isPopup,\n      isPopup = _ref$isPopup === void 0 ? false : _ref$isPopup,\n      _ref$configuration = _ref.configuration,\n      configuration = _ref$configuration === void 0 ? {} : _ref$configuration,\n      _ref$align = _ref.align,\n      align = _ref$align === void 0 ? ALIGN_HORIZONTAL : _ref$align,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange,\n      otherProps = _objectWithoutProperties(_ref, [\"isCustom\", \"isPopup\", \"configuration\", \"align\", \"onChange\"]);\n\n  var handleChange = function handleChange(option) {\n    onChange(option);\n  };\n\n  return React.createElement(Fragment, null, React.createElement(StyledSelectBox, {\n    align: align\n  }, React.createElement(Select, _extends({\n    align: align,\n    onChange: handleChange,\n    styles: isCustom ? CustomStyles : InputStyles,\n    components: isCustom ? {\n      Menu: Popup\n    } : null\n  }, otherProps))));\n};\n\nexport default CustomSelect;","import Select from \"./component\";\nexport default Select;","import _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport React, { Fragment } from \"react\";\nimport Select from \"../select\";\n\nvar QueryValues = function QueryValues(_ref) {\n  var columns = _ref.columns,\n      configuration = _ref.configuration,\n      patchConfiguration = _ref.patchConfiguration;\n  var title = configuration.title,\n      category_title = configuration.category_title,\n      _configuration$catego = configuration.category,\n      categoryAlias = _configuration$catego.alias,\n      categoryName = _configuration$catego.name,\n      _configuration$value = configuration.value,\n      valueAlias = _configuration$value.alias,\n      valueName = _configuration$value.name;\n  var verticalValue = {\n    alias: categoryAlias || category_title || valueName,\n    name: categoryName\n  };\n  var horizontalValue = {\n    alias: valueAlias || title || valueName,\n    name: valueName\n  };\n\n  var handleChangeVertical = function handleChangeVertical(selectedOption) {\n    // TODO: Wee need to set type here\n    patchConfiguration({\n      category: _objectSpread({}, configuration.category, {}, selectedOption)\n    });\n  };\n\n  var handleChangeHorizontal = function handleChangeHorizontal(selectedOption) {\n    // TODO: Wee need to set type here\n    patchConfiguration({\n      value: _objectSpread({}, configuration.value, {}, selectedOption)\n    });\n  };\n\n  return React.createElement(Fragment, null, React.createElement(Select, {\n    align: \"vertical\",\n    menuPlacement: \"top\",\n    defaultValue: verticalValue,\n    onChange: handleChangeVertical,\n    getOptionLabel: function getOptionLabel(option) {\n      return option.alias;\n    },\n    getOptionValue: function getOptionValue(option) {\n      return option.identifier;\n    },\n    options: columns,\n    configuration: configuration,\n    isCustom: true,\n    isPopup: true\n  }), React.createElement(Select, {\n    align: \"horizontal\",\n    menuPlacement: \"top\",\n    defaultValue: horizontalValue,\n    onChange: handleChangeHorizontal,\n    getOptionLabel: function getOptionLabel(option) {\n      return option.alias;\n    },\n    getOptionValue: function getOptionValue(option) {\n      return option.identifier;\n    },\n    options: columns,\n    configuration: configuration,\n    isCustom: true,\n    isPopup: true\n  }));\n};\n\nexport default QueryValues;","import { connectState } from \"../../helpers/redux\";\nimport { patchConfiguration } from \"../../modules/configuration/actions\";\nimport * as selectors from \"../../modules/widget/selectors\";\nimport QueryValuesComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    theme: state.theme,\n    configuration: state.configuration,\n    columns: selectors.getWidgetColumns(state)\n  };\n}, {\n  patchConfiguration: patchConfiguration\n})(QueryValuesComponent);","import React, { useEffect, useRef } from \"react\";\nimport * as vega from \"vega\";\nimport vegaTooltip from \"vega-tooltip\";\nimport styled from \"styled-components\";\nimport isEqual from \"lodash/isEqual\";\nimport isEmpty from \"lodash/isEmpty\";\nimport QueryValues from \"../query-values\";\nvar StyledContainer = styled.div.withConfig({\n  displayName: \"component__StyledContainer\",\n  componentId: \"p6fymh-0\"\n})([\"display:flex;position:relative;width:100%;.c-chart{flex:1;text-align:center;overflow:hidden;margin:20px;max-height:400px;align-self:center;}\"]);\n\nvar getTooltipConfigFields = function getTooltipConfigFields(widget) {\n  // We don't have the interaction config object defined\n  if (!widget || !widget.interaction_config || !widget.interaction_config.length) {\n    return [];\n  }\n\n  var tooltipConfig = widget.interaction_config.find(function (c) {\n    return c.name === \"tooltip\";\n  }); // We don't have the tooltip config defined\n\n  if (!tooltipConfig || !tooltipConfig.config || !tooltipConfig.config.fields || !tooltipConfig.config.fields.length) {\n    return [];\n  }\n\n  return tooltipConfig.config.fields;\n};\n\nvar instantiateTooltip = function instantiateTooltip(view, widget) {\n  var fields = getTooltipConfigFields(widget);\n  var res = vegaTooltip(view, {\n    showAllFields: false,\n    fields: fields.map(function (_ref) {\n      var column = _ref.column,\n          property = _ref.property,\n          type = _ref.type,\n          format = _ref.format;\n      return {\n        field: column,\n        title: property,\n        formatType: type === \"date\" ? \"time\" : type,\n        format: format\n      };\n    })\n  });\n};\n\nvar Chart = function Chart(_ref2) {\n  var editor = _ref2.editor,\n      widget = _ref2.widget;\n  var chart = useRef();\n  var vegaContainer = useRef();\n  var memoryStoreWidget = useRef(); // TODO: CLEANUP, probably better to just utalise a traditional Rclass here\n\n  useEffect(function () {\n    if (chart.current && !isEmpty(widget) && !isEqual(widget, memoryStoreWidget)) {\n      var runtime = vega.parse(widget);\n      var width = chart.current.offsetWidth;\n      vegaContainer.current = new vega.View(runtime).initialize(chart.current).renderer(\"canvas\").width(width - 40).hover().run();\n      memoryStoreWidget.current = widget; // We only show the tooltip if the interaction_config\n      // object is defined\n\n      if (vegaContainer.current && widget.interaction_config && widget.interaction_config.length) {\n        instantiateTooltip(vegaContainer.current, widget);\n      }\n\n      vegaContainer.current.resize = function () {\n        if (chart && chart.current) {\n          var _width = chart.current.offsetWidth;\n          vegaContainer.current.width(_width - 40).run();\n          instantiateTooltip(vegaContainer.current, widget);\n        }\n      };\n\n      window.addEventListener(\"resize\", vegaContainer.current.resize);\n    }\n  }, [chart, editor, widget]);\n  return React.createElement(StyledContainer, null, React.createElement(\"div\", {\n    className: \"c-chart\",\n    ref: chart\n  }), React.createElement(QueryValues, null));\n};\n\nexport default Chart;","import { connectState } from \"../../helpers/redux\"; // Components\n\nimport ChartComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    editor: state.editor,\n    widget: state.widget\n  };\n})(ChartComponent);","import _objectWithoutProperties from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from \"react\";\nimport styled, { css } from \"styled-components\";\nvar StyledButton = styled.button.withConfig({\n  displayName: \"component__StyledButton\",\n  componentId: \"l5yyzu-0\"\n})([\"cursor:pointer;font-size:16px;color:#393f44;border:1px solid rgba(202,204,208,0.85);background:transparent;padding:10px 20px;border-radius:5px;outline:1;\", \" \", \" \", \" \", \" \", \"\"], function (props) {\n  return props.size && props.size === \"small\" && css([\"padding:7px 15px;\"]);\n}, function (props) {\n  return props.type && props.type === \"cta\" && css([\"background:\", \";color:#fff;border:1px solid transparent;\"], props.color);\n}, function (props) {\n  return props.type && props.type === \"highlight\" && css([\"color:\", \";border:1px solid \", \";\"], props.color, props.color);\n}, function (props) {\n  return props.type && props.type === \"default\" && css([\"&:hover,&.active{\", \"}\"], function (props) {\n    return props.color && css([\"border:1px solid \", \";color:\", \";\"], props.color, props.color);\n  });\n}, function (props) {\n  return props.active && css([\"border:1px solid \", \";color:\", \";\"], props.color, props.color);\n});\n\nvar Button = function Button(_ref) {\n  var _ref$type = _ref.type,\n      type = _ref$type === void 0 ? \"default\" : _ref$type,\n      theme = _ref.theme,\n      children = _ref.children,\n      props = _objectWithoutProperties(_ref, [\"type\", \"theme\", \"children\"]);\n\n  return React.createElement(StyledButton, _extends({}, props, {\n    color: theme.color,\n    type: type\n  }), children);\n};\n\nexport default Button;","import { connectState } from \"../../helpers/redux\"; // Components\n\nimport ButtonComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    theme: state.theme\n  };\n})(ButtonComponent);","// all column types\nexport var TYPE_COLUMN = 'column';\nexport var TYPE_BAR = 'bar';\nexport var TYPE_SCATTERPLOT = 'scatterplot';\nexport var TYPE_LINE = 'line';\nexport var TYPE_PIE = 'pie';\nexport var TYPE_DONUT = 'donut';\nexport var TYPE_RING = 'ring';\nexport var DIRECTION_VERTICAL = 'vertical';\nexport var DIRECTION_HORIZONTAL = 'horizontal'; // charts for showing data\n\nexport var MENU_DATA = [{\n  type: TYPE_COLUMN,\n  direction: DIRECTION_VERTICAL\n}, {\n  type: TYPE_COLUMN,\n  direction: DIRECTION_HORIZONTAL\n}, {\n  type: TYPE_BAR,\n  direction: DIRECTION_VERTICAL\n}, {\n  type: TYPE_BAR,\n  direction: DIRECTION_HORIZONTAL\n}, {\n  type: TYPE_LINE,\n  direction: null\n}, {\n  type: TYPE_PIE,\n  direction: null\n}, {\n  type: TYPE_SCATTERPLOT,\n  direction: null\n}, // { \n//   type: TYPE_DONUT,\n//   direction:  null\n// },\n{\n  type: TYPE_RING,\n  direction: null\n}];","import styled from 'styled-components';\nexport var StyledContainer = styled.div.withConfig({\n  displayName: \"style__StyledContainer\",\n  componentId: \"kjyq8o-0\"\n})([\"padding-top:10px;position:absolute;top:30px;right:-102px;width:262px;z-index:11;@media only screen and (max-width:767px){right:0;}\"]);\nexport var StyledMenu = styled.div.withConfig({\n  displayName: \"style__StyledMenu\",\n  componentId: \"kjyq8o-1\"\n})([\"box-sizing:border-box;height:auto;max-height:459px;width:100%;border:1px solid #D7D7D7;border-radius:4px;background-color:#FFFFFF;box-shadow:0 20px 30px 0 rgba(0,0,0,0.1);z-index:2;padding:29px 34px;&:before{content:' ';position:absolute;left:131px;top:-8px;border:10px solid transparent;border-top:10px solid #FFFFFF;z-index:3;transform:rotate(180deg);@media only screen and (max-width:767px){right:10px;left:auto;}}\"]);\nexport var StyledTitle = styled.h4.withConfig({\n  displayName: \"style__StyledTitle\",\n  componentId: \"kjyq8o-2\"\n})([\"color:#555555;font-size:10px;font-weight:500;line-height:14px;margin-bottom:0;text-transform:uppercase;\"]);\nexport var StyledIcons = styled.div.withConfig({\n  displayName: \"style__StyledIcons\",\n  componentId: \"kjyq8o-3\"\n})([\"display:flex;align-items:stretch;justify-content:flex-start;flex-wrap:wrap;margin-left:-8px;margin-right:-8px;\"]);","import styled, { css } from 'styled-components';\nexport var StyledBox = styled.div.withConfig({\n  displayName: \"style__StyledBox\",\n  componentId: \"c5gake-0\"\n})([\"box-sizing:border-box;padding:7px 8px;width:50%;\"]);\nexport var StyledIcon = styled.div.withConfig({\n  displayName: \"style__StyledIcon\",\n  componentId: \"c5gake-1\"\n})([\"box-sizing:border-box;height:51px;width:100%;border:\", \";border-radius:4px;background-color:#F7F7F7;display:flex;align-items:center;justify-content:center;text-align:center;opacity:\", \";pointer-events:\", \";&:hover{border:2px solid #C32D7B;}\"], function (props) {\n  return props.active ? '2px solid #C32D7B' : '1px solid #E6E6E6';\n}, function (props) {\n  return props.disabled ? '0.2' : '1';\n}, function (props) {\n  return props.disabled ? 'none' : 'auto';\n});","import React from 'react';\nexport var Line = function Line() {\n  return React.createElement(\"svg\", {\n    width: \"70px\",\n    height: \"35px\",\n    viewBox: \"0 0 70 35\",\n    version: \"1.1\"\n  }, React.createElement(\"g\", {\n    id: \"chart-sparkline\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, React.createElement(\"g\", {\n    id: \"Group-13\",\n    transform: \"translate(6.000000, 2.000000)\",\n    strokeWidth: \"2\"\n  }, React.createElement(\"polyline\", {\n    id: \"Path\",\n    stroke: \"#3BB2D0\",\n    points: \"0 32 19.7727273 13.8 38.2272727 22.2 58 11\"\n  }), React.createElement(\"polyline\", {\n    id: \"Path\",\n    stroke: \"#2C75B0\",\n    points: \"0 20.8695652 19.7727273 32 38.2272727 11.1304348 58 0\"\n  }))));\n};\nexport var Scatterplot = function Scatterplot() {\n  return React.createElement(\"svg\", {\n    width: \"70px\",\n    height: \"35px\",\n    viewBox: \"0 0 70 35\",\n    version: \"1.1\"\n  }, React.createElement(\"g\", {\n    id: \"chart-scatterplot\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, React.createElement(\"g\", {\n    id: \"Group-15\",\n    transform: \"translate(11.000000, 6.000000)\"\n  }, React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#2C75B0\",\n    cx: \"3.5\",\n    cy: \"20.5\",\n    r: \"3.5\"\n  }), React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#3BB2D0\",\n    transform: \"translate(45.500000, 3.500000) rotate(-180.000000) translate(-45.500000, -3.500000) \",\n    cx: \"45.5\",\n    cy: \"3.5\",\n    r: \"3.5\"\n  }), React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#3BB2D0\",\n    transform: \"translate(23.500000, 18.500000) rotate(-180.000000) translate(-23.500000, -18.500000) \",\n    cx: \"23.5\",\n    cy: \"18.5\",\n    r: \"3.5\"\n  }), React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#3BB2D0\",\n    transform: \"translate(38.000000, 9.000000) rotate(-180.000000) translate(-38.000000, -9.000000) \",\n    cx: \"38\",\n    cy: \"9\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#3BB2D0\",\n    transform: \"translate(34.000000, 18.000000) rotate(-180.000000) translate(-34.000000, -18.000000) \",\n    cx: \"34\",\n    cy: \"18\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#3BB2D0\",\n    transform: \"translate(14.000000, 18.000000) rotate(-180.000000) translate(-14.000000, -18.000000) \",\n    cx: \"14\",\n    cy: \"18\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#3BB2D0\",\n    transform: \"translate(27.000000, 11.000000) rotate(-180.000000) translate(-27.000000, -11.000000) \",\n    cx: \"27\",\n    cy: \"11\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#3BB2D0\",\n    transform: \"translate(40.000000, 15.000000) rotate(-180.000000) translate(-40.000000, -15.000000) \",\n    cx: \"40\",\n    cy: \"15\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#2C75B0\",\n    cx: \"21.5\",\n    cy: \"7.5\",\n    r: \"3.5\"\n  }), React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#2C75B0\",\n    cx: \"9\",\n    cy: \"14\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#2C75B0\",\n    cx: \"14\",\n    cy: \"10\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#2C75B0\",\n    cx: \"30\",\n    cy: \"2\",\n    r: \"2\"\n  }), React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#2C75B0\",\n    cx: \"7\",\n    cy: \"9\",\n    r: \"2\"\n  }))));\n};\nexport var Ring = function Ring() {\n  return React.createElement(\"svg\", {\n    width: \"70px\",\n    height: \"35px\",\n    viewBox: \"0 0 70 35\",\n    version: \"1.1\"\n  }, React.createElement(\"defs\", null, React.createElement(\"path\", {\n    d: \"M17.000408,0.00699401962 L17.0007338,8.01289404 C11.9861065,8.27253382 8,12.4207644 8,17.5 C8,22.7467051 12.2532949,27 17.5,27 C19.5656596,27 21.4773362,26.3407203 23.0360914,25.2210993 L28.6406118,30.9964293 C25.6142758,33.4973564 21.7326185,35 17.5,35 C7.83501688,35 0,27.1649831 0,17.5 C0,8.00210483 7.56645547,0.271450021 17.000408,0.00699401962 Z\",\n    id: \"path-1\"\n  }), React.createElement(\"path\", {\n    d: \"M18.0006388,0.00702339299 C27.4341042,0.27202186 35,8.00245611 35,17.5 C35,22.3324916 33.0412458,26.7074916 29.8743687,29.8743687 L24.2175144,24.2175144 C25.9366763,22.4983526 27,20.1233526 27,17.5 C27,12.4213412 23.0147988,8.27347605 18.0009747,8.01298265 Z\",\n    id: \"path-3\"\n  })), React.createElement(\"g\", {\n    id: \"chart-ring\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, React.createElement(\"g\", {\n    id: \"Rectangle\",\n    transform: \"translate(18.000000, 0.000000)\"\n  }, React.createElement(\"mask\", {\n    id: \"mask-2\",\n    fill: \"white\"\n  }, React.createElement(\"use\", {\n    xlinkHref: \"#path-1\"\n  })), React.createElement(\"use\", {\n    id: \"Combined-Shape\",\n    fill: \"#3BB2D0\",\n    xlinkHref: \"#path-1\"\n  }), React.createElement(\"mask\", {\n    id: \"mask-4\",\n    fill: \"white\"\n  }, React.createElement(\"use\", {\n    xlinkHref: \"#path-3\"\n  })), React.createElement(\"use\", {\n    id: \"Combined-Shape\",\n    fill: \"#2C75B0\",\n    xlinkHref: \"#path-3\"\n  }))));\n};\nexport var Pie = function Pie() {\n  return React.createElement(\"svg\", {\n    width: \"70px\",\n    height: \"35px\",\n    viewBox: \"0 0 70 35\",\n    version: \"1.1\"\n  }, React.createElement(\"defs\", null, React.createElement(\"circle\", {\n    id: \"path-1\",\n    cx: \"17.5\",\n    cy: \"17.5\",\n    r: \"17.5\"\n  })), React.createElement(\"g\", {\n    id: \"chart-pie\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, React.createElement(\"g\", {\n    id: \"Rectangle\",\n    transform: \"translate(18.000000, 0.000000)\"\n  }, React.createElement(\"mask\", {\n    id: \"mask-2\",\n    fill: \"white\"\n  }, React.createElement(\"use\", {\n    xlinkHref: \"#path-1\"\n  })), React.createElement(\"use\", {\n    id: \"Mask\",\n    fill: \"#3BB2D0\",\n    xlinkHref: \"#path-1\"\n  }), React.createElement(\"path\", {\n    d: \"M37.5,-1.5 L17.5,-1.5 L17.5,18.2071068 L37.5,38.2071068 L37.5,-1.5 Z\",\n    stroke: \"#F7F7F7\",\n    fill: \"#2C75B0\",\n    mask: \"url(#mask-2)\"\n  }))));\n};\nexport var ColumnB = function ColumnB() {\n  return React.createElement(\"svg\", {\n    width: \"70px\",\n    height: \"35px\",\n    viewBox: \"0 0 70 35\",\n    version: \"1.1\"\n  }, React.createElement(\"g\", {\n    id: \"chart-columns-b\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, React.createElement(\"g\", {\n    id: \"Group-14\",\n    transform: \"translate(10.000000, 3.000000)\"\n  }, React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#2C75B0\",\n    x: \"0\",\n    y: \"16\",\n    width: \"8\",\n    height: \"13\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#2C75B0\",\n    x: \"42\",\n    y: \"16\",\n    width: \"8\",\n    height: \"13\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#2C75B0\",\n    x: \"14\",\n    y: \"24\",\n    width: \"8\",\n    height: \"5\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#2C75B0\",\n    x: \"28\",\n    y: \"19\",\n    width: \"8\",\n    height: \"10\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#3BB2D0\",\n    x: \"0\",\n    y: \"10\",\n    width: \"8\",\n    height: \"5\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#3BB2D0\",\n    x: \"42\",\n    y: \"10\",\n    width: \"8\",\n    height: \"5\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#3BB2D0\",\n    x: \"14\",\n    y: \"0\",\n    width: \"8\",\n    height: \"23\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#3BB2D0\",\n    x: \"28\",\n    y: \"5\",\n    width: \"8\",\n    height: \"13\"\n  }))));\n};\nexport var ColumnA = function ColumnA() {\n  return React.createElement(\"svg\", {\n    width: \"70px\",\n    height: \"35px\",\n    viewBox: \"0 0 70 35\",\n    version: \"1.1\"\n  }, React.createElement(\"g\", {\n    id: \"chart-columns-a\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, React.createElement(\"g\", {\n    id: \"Group-13\",\n    transform: \"translate(8.000000, 3.000000)\"\n  }, React.createElement(\"g\", {\n    id: \"Group-14\"\n  }, React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#2C75B0\",\n    x: \"0\",\n    y: \"15\",\n    width: \"4\",\n    height: \"13\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#2C75B0\",\n    x: \"45\",\n    y: \"15\",\n    width: \"4\",\n    height: \"13\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#2C75B0\",\n    x: \"15\",\n    y: \"5\",\n    width: \"4\",\n    height: \"23\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#2C75B0\",\n    x: \"30\",\n    y: \"18\",\n    width: \"4\",\n    height: \"10\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#3BB2D0\",\n    x: \"5\",\n    y: \"10\",\n    width: \"4\",\n    height: \"18\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#3BB2D0\",\n    x: \"50\",\n    y: \"10\",\n    width: \"4\",\n    height: \"18\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#3BB2D0\",\n    x: \"20\",\n    y: \"0\",\n    width: \"4\",\n    height: \"28\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#3BB2D0\",\n    x: \"35\",\n    y: \"20\",\n    width: \"4\",\n    height: \"8\"\n  })))));\n};\nexport var BarB = function BarB() {\n  return React.createElement(\"svg\", {\n    width: \"70px\",\n    height: \"35px\",\n    viewBox: \"0 0 70 35\",\n    version: \"1.1\"\n  }, React.createElement(\"g\", {\n    id: \"chart-bars-b\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, React.createElement(\"g\", {\n    id: \"Group-14\",\n    transform: \"translate(8.000000, 6.000000)\"\n  }, React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#2C75B0\",\n    x: \"0\",\n    y: \"0\",\n    width: \"27\",\n    height: \"8\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#2C75B0\",\n    x: \"0\",\n    y: \"15\",\n    width: \"18\",\n    height: \"8\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#3BB2D0\",\n    x: \"28\",\n    y: \"0\",\n    width: \"6\",\n    height: \"8\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#3BB2D0\",\n    x: \"19\",\n    y: \"15\",\n    width: \"35\",\n    height: \"8\"\n  }))));\n};\nexport var BarA = function BarA() {\n  return React.createElement(\"svg\", {\n    width: \"70px\",\n    height: \"35px\",\n    viewBox: \"0 0 70 35\",\n    version: \"1.1\"\n  }, React.createElement(\"g\", {\n    id: \"chart-bars-a\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, React.createElement(\"g\", {\n    id: \"Group-14\",\n    transform: \"translate(8.000000, 5.000000)\"\n  }, React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#2C75B0\",\n    x: \"0\",\n    y: \"0\",\n    width: \"38\",\n    height: \"4\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#2C75B0\",\n    x: \"0\",\n    y: \"15\",\n    width: \"55\",\n    height: \"4\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#3BB2D0\",\n    x: \"0\",\n    y: \"5\",\n    width: \"18\",\n    height: \"4\"\n  }), React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    fill: \"#3BB2D0\",\n    x: \"0\",\n    y: \"20\",\n    width: \"44\",\n    height: \"4\"\n  }))));\n};","import ChartIcon from \"./component\";\nexport default ChartIcon;","import React from 'react';\nimport { TYPE_COLUMN, TYPE_LINE, DIRECTION_HORIZONTAL, TYPE_SCATTERPLOT, TYPE_RING, TYPE_BAR, TYPE_PIE } from \"../../const\";\nimport { StyledBox, StyledIcon } from \"./style\";\nimport { Line, Scatterplot, Ring, Pie, ColumnA, ColumnB, BarA, BarB } from \"./svg\";\n\nvar ChartIcon = function ChartIcon(_ref) {\n  var _ref$type = _ref.type,\n      type = _ref$type === void 0 ? TYPE_COLUMN : _ref$type,\n      _ref$direction = _ref.direction,\n      direction = _ref$direction === void 0 ? DIRECTION_HORIZONTAL : _ref$direction,\n      _ref$active = _ref.active,\n      active = _ref$active === void 0 ? false : _ref$active,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      _ref$setData = _ref.setData,\n      setData = _ref$setData === void 0 ? function (data) {\n    console.log(data);\n  } : _ref$setData;\n  return React.createElement(StyledBox, null, React.createElement(StyledIcon, {\n    active: active,\n    disabled: disabled,\n    onClick: function onClick() {\n      return setData({\n        type: type,\n        direction: direction\n      });\n    }\n  }, type === TYPE_LINE && React.createElement(Line, null), type === TYPE_SCATTERPLOT && React.createElement(Scatterplot, null), type === TYPE_RING && React.createElement(Ring, null), type === TYPE_PIE && React.createElement(Pie, null), type === TYPE_BAR && React.createElement(BarA, null), type === TYPE_COLUMN && React.createElement(ColumnA, null)));\n};\n\nexport default ChartIcon;","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { Fragment } from 'react';\nimport { MENU_DATA, TYPE_COLUMN, TYPE_BAR } from \"../../const\";\nimport { StyledContainer, StyledMenu, StyledTitle, StyledIcons } from \"./style\";\nimport ChartIcon from \"../ChartIcon\";\n\nvar ChartList = function ChartList(_ref) {\n  var list = _ref.list,\n      setData = _ref.setData,\n      title = _ref.title;\n  return React.createElement(Fragment, null, list.length > 0 && React.createElement(\"div\", null, React.createElement(StyledTitle, null, title), React.createElement(StyledIcons, null, list.map(function (el, key) {\n    return React.createElement(ChartIcon, _extends({\n      key: key,\n      setData: setData\n    }, el));\n  }))));\n};\n/**\n * MENU_DATA - the array of charts for showing in menu\n * @param {options} - the array of available charts \n */\n\n\nvar ChartMenu = function ChartMenu(_ref2) {\n  var options = _ref2.options,\n      getValue = _ref2.getValue,\n      setValue = _ref2.setValue,\n      innerRef = _ref2.innerRef;\n  var data = getValue()[0];\n  var menu = MENU_DATA.map(function (m) {\n    m.active = m.type === data.chartType && m.direction === data.direction ? true : false;\n    m.disabled = options.find(function (o) {\n      return o.chartType === m.type && o.direction === m.direction;\n    }) ? false : true;\n    return m;\n  });\n  var columns = menu.filter(function (m) {\n    return m.type === TYPE_COLUMN;\n  });\n  var bars = menu.filter(function (m) {\n    return m.type === TYPE_BAR;\n  });\n  var more = menu.filter(function (m) {\n    return m.type !== TYPE_BAR && m.type !== TYPE_COLUMN;\n  });\n\n  var setData = function setData(selected) {\n    var dataSet = options.find(function (el) {\n      return el.chartType === selected.type && el.direction === selected.direction;\n    });\n    if (dataSet) setValue(dataSet);\n  };\n\n  return React.createElement(StyledContainer, {\n    ref: innerRef\n  }, React.createElement(StyledMenu, null, React.createElement(ChartList, {\n    title: \"Columns\",\n    setData: setData,\n    list: columns\n  }), React.createElement(ChartList, {\n    title: \"Bars\",\n    setData: setData,\n    list: bars\n  }), React.createElement(ChartList, {\n    title: \"More\",\n    setData: setData,\n    list: more\n  })));\n};\n\nexport default ChartMenu;","import ChartMenu from \"./component\";\nexport default ChartMenu;","import styled, { css } from \"styled-components\";\nexport var StyledContainer = styled.div.withConfig({\n  displayName: \"style__StyledContainer\",\n  componentId: \"opri8d-0\"\n})([\"margin:10px;\", \"\"], function (props) {\n  return props.isCompact && css([\"display:flex;align-items:center;\"]);\n});\nexport var StyledSelectBox = styled.div.withConfig({\n  displayName: \"style__StyledSelectBox\",\n  componentId: \"opri8d-1\"\n})([\"\", \"\"], function (props) {\n  return props.isCompact && css([\"width:100%;padding-right:15px;\"]);\n});\nexport var StyledOverflow = styled.div.withConfig({\n  displayName: \"style__StyledOverflow\",\n  componentId: \"opri8d-2\"\n})([\"position:absolute;width:100%;height:100%;top:0;left:0;background-color:rgba(0,0,0,0.1);z-index:10;\"]);\nexport var InputStyles = {\n  container: function container() {\n    return {\n      position: \"relative\",\n      boxSizing: \"border-box\",\n      cursor: \"pointer\",\n      border: \"1px solid rgba(202,204,208,0.85)\",\n      borderRadius: \"4px\",\n      backgroundColor: \"rgba(255,255,255,0)\"\n    };\n  },\n  indicatorSeparator: function indicatorSeparator() {\n    return {\n      display: \"none\"\n    };\n  },\n  dropdownIndicator: function dropdownIndicator(provided, state) {\n    return {\n      color: \"#c32d7b\",\n      transition: \"all 0.2s ease-out\"\n    };\n  },\n  indicatorsContainer: function indicatorsContainer() {\n    return {\n      color: \"#c32d7b\",\n      display: \"flex\",\n      padding: \"8px\",\n      transition: \"color 150ms\",\n      boxSizing: \"border-box\",\n      position: \"relative\",\n      top: \"5px\"\n    };\n  },\n  control: function control() {\n    return {\n      display: \"flex\",\n      border: \"none\",\n      borderRadius: \"4px\",\n      padding: \"3px 0\"\n    };\n  }\n};","import _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useRef } from \"react\";\nimport find from \"lodash/find\";\nimport Button from \"../button\";\nimport Select from \"react-select\";\nimport ChartMenu from \"./components/ChartMenu\";\nimport { StyledContainer, StyledSelectBox, InputStyles, StyledOverflow } from \"./style\";\n\nvar SelectChart = function SelectChart(_ref) {\n  var patchConfiguration = _ref.patchConfiguration,\n      options = _ref.options,\n      chartType = _ref.chartType,\n      direction = _ref.direction,\n      theme = _ref.theme,\n      setTheme = _ref.setTheme;\n\n  var _useState = useState(find(options, {\n    chartType: chartType,\n    direction: direction\n  })),\n      _useState2 = _slicedToArray(_useState, 2),\n      selected = _useState2[0],\n      setSelected = _useState2[1];\n\n  var _theme$compact = theme.compact,\n      isCompact = _theme$compact.isCompact,\n      isOpen = _theme$compact.isOpen;\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isOpenMenu = _useState4[0],\n      setIsOpenMenu = _useState4[1];\n\n  var ref = useRef({});\n\n  var handleChange = function handleChange(option) {\n    var chartType = option.chartType,\n        direction = option.direction;\n    patchConfiguration({\n      chartType: chartType,\n      direction: direction\n    });\n    setSelected(option);\n    setIsOpenMenu(false);\n  };\n\n  var hadleSettings = function hadleSettings() {\n    setTheme(_objectSpread({}, theme, {\n      compact: {\n        isCompact: isCompact,\n        isOpen: !isOpen\n      }\n    }));\n  };\n\n  return React.createElement(StyledContainer, {\n    isCompact: isCompact\n  }, React.createElement(StyledSelectBox, {\n    isCompact: isCompact\n  }, React.createElement(Select, {\n    onChange: handleChange,\n    onMenuOpen: function onMenuOpen() {\n      return setIsOpenMenu(true);\n    },\n    value: selected,\n    options: options,\n    styles: InputStyles,\n    components: {\n      Menu: ChartMenu\n    },\n    innerRef: ref,\n    menuIsOpen: isOpenMenu\n  })), isCompact && React.createElement(Button, {\n    type: \"highlight\",\n    onClick: function onClick() {\n      return hadleSettings();\n    }\n  }, \"Settings\"), isOpenMenu && React.createElement(StyledOverflow, {\n    onClick: function onClick() {\n      return setIsOpenMenu(false);\n    }\n  }));\n};\n\nexport default SelectChart;","import { connectState } from \"../../helpers/redux\";\nimport { patchConfiguration } from \"../../modules/configuration/actions\";\nimport { setTheme } from \"../../modules/theme/actions\"; // Components\n\nimport SelectChartComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    options: state.configuration.availableCharts,\n    chartType: state.configuration.chartType,\n    direction: state.configuration.direction,\n    theme: state.theme\n  };\n}, {\n  patchConfiguration: patchConfiguration,\n  setTheme: setTheme\n})(SelectChartComponent);","export var FOOTER_HEIGHT = \"100px\";\nexport var DEFAULT_BORDER = function DEFAULT_BORDER() {\n  var top = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n  var right = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var bottom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var left = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  return \"\\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.09);\\n\\n  border-color: rgba(26, 28, 34, 0.1);\\n  border-style: solid;\\n\\n  border-width: \".concat(top, \"px \").concat(right, \"px \").concat(bottom, \"px \").concat(left, \"px;\\n\");\n};\nexport default {\n  FOOTER_HEIGHT: FOOTER_HEIGHT,\n  DEFAULT_BORDER: DEFAULT_BORDER\n};","import styled from 'styled-components';\nimport { FOOTER_HEIGHT, DEFAULT_BORDER } from \"../../style-constants\";\nexport var StyledContainer = styled.div.withConfig({\n  displayName: \"style__StyledContainer\",\n  componentId: \"sc-1qafyg5-0\"\n})([\"display:flex;flex-flow:column;height:calc(100% - \", \");background:#fff;flex:1;width:100%;\", \"\"], FOOTER_HEIGHT, DEFAULT_BORDER());\nexport var RestoringWidget = styled.div.withConfig({\n  displayName: \"style__RestoringWidget\",\n  componentId: \"sc-1qafyg5-1\"\n})([\"height:300px;display:flex;align-items:center;justify-content:center;\"]);\nexport var RestoringWidgetTitle = styled.h4.withConfig({\n  displayName: \"style__RestoringWidgetTitle\",\n  componentId: \"sc-1qafyg5-2\"\n})([\"color:#a9a9a9;font-size:21px;\"]);","import React from \"react\";\nimport Chart from \"../chart\";\nimport QueryValues from \"../query-values\";\nimport SelectChart from \"../select-chart\";\nimport { StyledContainer, RestoringWidget, RestoringWidgetTitle } from \"./style\";\n\nvar Renderer = function Renderer(_ref) {\n  var widget = _ref.widget,\n      editor = _ref.editor;\n  var restoring = editor.restoring,\n      initialized = editor.initialized;\n  return React.createElement(StyledContainer, null, React.createElement(SelectChart, null), initialized && !restoring && React.createElement(Chart, null), !initialized && React.createElement(RestoringWidget, null, React.createElement(RestoringWidgetTitle, null, \"Loading widget...\")), restoring && React.createElement(RestoringWidget, null, React.createElement(RestoringWidgetTitle, null, \"Building widget...\")));\n};\n\nexport default Renderer;","// TODO: This should be its own package\n// It should be possible to use the renderer without the editor!\nimport { connectState } from \"../../helpers/redux\"; // Components\n\nimport RendererComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    editor: state.editor,\n    widget: state.widget\n  };\n})(RendererComponent);","import styled from \"styled-components\";\nexport var StyledAccordion = styled.div.withConfig({\n  displayName: \"style__StyledAccordion\",\n  componentId: \"mzy7xu-0\"\n})([\"width:100%;padding-top:24px;padding-bottom:24px;\"]);\nexport var StyledAccordionContent = styled.div.withConfig({\n  displayName: \"style__StyledAccordionContent\",\n  componentId: \"mzy7xu-1\"\n})([\"display:\\\"block\\\";max-height:\", \";overflow-y:\", \";transition:all 0.2s ease-out;padding-left:24px;padding-top:\", \";padding-bottom:\", \";\"], function (props) {\n  return props.scrollHeight + \"px\" || \"0\";\n}, function (props) {\n  return props.scrollHeight ? \"visible\" : \"hidden\";\n}, function (props) {\n  return props.scrollHeight ? \"18px\" : \"0\" || \"0\";\n}, function (props) {\n  return props.scrollHeight ? \"18px\" : \"0\" || \"0\";\n});\nexport var StyledAccordionButton = styled.a.withConfig({\n  displayName: \"style__StyledAccordionButton\",\n  componentId: \"mzy7xu-2\"\n})([\"display:block;height:25px;color:#393f44;font-size:16px;font-weight:bold;line-height:25px;position:relative;padding-left:25px;cursor:pointer;&:before{content:\\\" \\\";width:10px;height:10px;border-radius:50%;background:#c32d7b;position:absolute;left:0;top:8px;}\"]);\nexport var StyledAccordionSection = styled.div.withConfig({\n  displayName: \"style__StyledAccordionSection\",\n  componentId: \"mzy7xu-3\"\n})([\"padding-top:11px;padding-bottom:11px;position:relative;&:before{content:\\\" \\\";height:1px;width:calc(100% - 24px);display:block;position:absolute;top:0;background-color:#d2d3d6;margin-left:24px;}&:first-child{&:before{display:none;}}\"]);","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport ReactResizeDetector from 'react-resize-detector';\nimport { StyledAccordionSection, StyledAccordionContent, StyledAccordionButton, StyledAccordion } from \"./style\";\nexport var AccordionSection = function AccordionSection(_ref) {\n  var title = _ref.title,\n      openDefault = _ref.openDefault,\n      children = _ref.children;\n  var contentRef = useRef({});\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      outerHeight = _useState2[0],\n      setOuterHeight = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isOpen = _useState4[0],\n      setOpen = _useState4[1];\n\n  var clickToTitle = function clickToTitle() {\n    setOpen(!isOpen);\n    var panel = contentRef.current;\n    var height = outerHeight ? 0 : panel.scrollHeight;\n    setOuterHeight(height);\n  };\n\n  var updateHeight = function updateHeight() {\n    var panel = contentRef.current;\n\n    if (panel.scrollHeight > 0 && isOpen) {\n      var height = panel.scrollHeight;\n      setOuterHeight(height);\n    }\n  };\n\n  useEffect(function () {\n    setTimeout(function () {\n      return openDefault ? clickToTitle() : null;\n    }, 0);\n  }, []);\n  return React.createElement(StyledAccordionSection, null, React.createElement(StyledAccordionButton, {\n    onClick: function onClick() {\n      return clickToTitle();\n    }\n  }, title), React.createElement(StyledAccordionContent, {\n    ref: contentRef,\n    scrollHeight: outerHeight\n  }, React.createElement(ReactResizeDetector, {\n    handleHeight: true,\n    skipOnMount: true,\n    onResize: updateHeight\n  }, React.createElement(\"div\", null, children))));\n};\nexport var Accordion = function Accordion(_ref2) {\n  var children = _ref2.children;\n  return React.createElement(StyledAccordion, null, children);\n};","import styled from 'styled-components';\nexport var StyledTabsContainer = styled.div.withConfig({\n  displayName: \"style__StyledTabsContainer\",\n  componentId: \"qvkojo-0\"\n})([\"position:relative;height:100%;\"]);\nexport var StyledTabsContentBox = styled.div.withConfig({\n  displayName: \"style__StyledTabsContentBox\",\n  componentId: \"qvkojo-1\"\n})([\"overflow-y:auto;height:calc(100% - 80px);padding-right:30px;::-webkit-scrollbar{width:7px;}::-webkit-scrollbar-track{box-shadow:inset 0 0 2px grey;border-radius:10px;background:rgba(0,0,0,0.05);}::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.3);border-radius:10px;}::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.4);}\"]);\nexport var StyledTabsContent = styled.div.withConfig({\n  displayName: \"style__StyledTabsContent\",\n  componentId: \"qvkojo-2\"\n})([\"display:\", \";\"], function (props) {\n  return props.active ? 'block' : 'none';\n});\nexport var StyledList = styled.ul.withConfig({\n  displayName: \"style__StyledList\",\n  componentId: \"qvkojo-3\"\n})([\"display:flex;justify-content:space-between;padding:20px 30px 20px 0;list-style:none;\"]);\nexport var StyledListLabel = styled.li.withConfig({\n  displayName: \"style__StyledListLabel\",\n  componentId: \"qvkojo-4\"\n})([\"color:red;padding-right:5px;padding-left:5px;&:first-child{padding-left:0;}&:last-child{padding-right:0;}\"]);","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useEffect } from 'react';\nimport Button from \"../button\";\nimport { StyledTabsContainer, StyledTabsContentBox, StyledTabsContent, StyledList, StyledListLabel } from \"./style\";\n\nvar TabButton = function TabButton(props) {\n  return React.createElement(Button, _extends({\n    style: {\n      height: \"100%\"\n    }\n  }, props));\n};\n\nexport var Tabs = function Tabs(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      active = _useState2[0],\n      setActive = _useState2[1];\n\n  useEffect(function () {\n    var defaultNum = children.findIndex(function (child) {\n      return child.props.default;\n    });\n    setActive(defaultNum === -1 ? 0 : defaultNum);\n  }, []);\n  return React.createElement(StyledTabsContainer, null, React.createElement(StyledList, null, children.map(function (child, num) {\n    var label = child.props.label;\n    return label ? React.createElement(StyledListLabel, {\n      key: num\n    }, React.createElement(TabButton, {\n      onClick: function onClick() {\n        return setActive(num);\n      },\n      active: num === active\n    }, label)) : null;\n  })), React.createElement(StyledTabsContentBox, null, children.map(function (child, num) {\n    var tabContent = child.props.children;\n    return React.createElement(StyledTabsContent, {\n      key: num,\n      active: num === active\n    }, tabContent);\n  })));\n};\n/**\n * \n * @param {label} label require for displaying tab\n */\n\nexport var Tab = function Tab(_ref2) {\n  var children = _ref2.children,\n      label = _ref2.label;\n  return label ? children : null;\n};","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from \"react\";\nimport styled, { ThemeProvider } from \"styled-components\";\nimport ReactSlider from \"react-slider\";\nvar StyledSlider = styled(ReactSlider).withConfig({\n  displayName: \"component__StyledSlider\",\n  componentId: \"ps9f57-0\"\n})([\"height:4px;width:inherit;background:\", \";\"], function (props) {\n  return props.array ? \"transparent\" : props.theme.slider.track;\n});\nvar StyledThumb = styled.div.withConfig({\n  displayName: \"component__StyledThumb\",\n  componentId: \"ps9f57-1\"\n})([\"height:18px;line-height:18px;width:18px;background-color:#fff;border:3px solid \", \";border-radius:50%;transform:translateY(-50%);z-index:0 !important;top:50%;cursor:grab;\"], function (props) {\n  return props.theme.slider.track;\n});\nvar StyledTrack = styled.div.withConfig({\n  displayName: \"component__StyledTrack\",\n  componentId: \"ps9f57-2\"\n})([\"top:0;bottom:0;background:\", \";border-radius:999px;\"], function (props) {\n  if (props.isArray) {\n    return props.isArray && props.index === 1 ? props.theme.slider.track : props.theme.slider.trackBackground;\n  } else {\n    return props.index === 2 ? props.theme.slider.track : props.index === 1 ? props.theme.slider.trackBackground : props.theme.slider.track;\n  }\n});\n\nvar Thumb = function Thumb(props, state) {\n  return React.createElement(StyledThumb, props);\n};\n\nvar Track = function Track(props, state) {\n  return React.createElement(StyledTrack, _extends({}, props, {\n    isArray: Array.isArray(state.value),\n    index: state.index\n  }));\n};\n\nvar Slider = function Slider(_ref) {\n  var _ref$min = _ref.min,\n      min = _ref$min === void 0 ? 1 : _ref$min,\n      _ref$max = _ref.max,\n      max = _ref$max === void 0 ? 500 : _ref$max,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 1 : _ref$step,\n      value = _ref.value,\n      defaultValue = _ref.defaultValue,\n      theme = _ref.theme,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange,\n      _ref$onDone = _ref.onDone,\n      onDone = _ref$onDone === void 0 ? function () {} : _ref$onDone;\n  return React.createElement(ThemeProvider, {\n    theme: theme\n  }, React.createElement(StyledSlider, {\n    onAfterChange: onDone,\n    onChange: onChange,\n    renderTrack: Track,\n    renderThumb: Thumb,\n    value: value,\n    step: step,\n    defaultValue: defaultValue,\n    max: max,\n    min: min\n  }));\n};\n\nexport default Slider;","import { connectState } from \"../../helpers/redux\";\nimport SliderComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    theme: state.theme\n  };\n})(SliderComponent);","import styled from \"styled-components\";\nvar FlexContainer = styled.div.withConfig({\n  displayName: \"flex__FlexContainer\",\n  componentId: \"sc-1jjiixp-0\"\n})([\"display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;flex-flow:\", \";width:100%;\", \" label{flex-basis:100%;}\"], function (props) {\n  return props.row ? \"row\" : \"column\";\n}, function (props) {\n  return props.row ? \"> * { padding-right: 20px; &:last-child { padding-right: 0; } } \" : \"\";\n});\nexport default FlexContainer;","import styled from \"styled-components\";\nvar FormLabel = styled.label.withConfig({\n  displayName: \"form-label__FormLabel\",\n  componentId: \"dg5fl6-0\"\n})([\"display:block;padding:0 0 10px 0;color:#393f44;font-weight:700;font-size:13px;\"]);\nexport default FormLabel;","import styled from \"styled-components\";\nvar InputGroup = styled.div.withConfig({\n  displayName: \"input-group__InputGroup\",\n  componentId: \"sc-1dcephl-0\"\n})([\"position:relative;width:100%;\", \"\"], function (props) {\n  return !props.noMargins && \"margin: 0 0 15px 0;\";\n});\nexport default InputGroup;","import styled from \"styled-components\"; // TODO: Move configuration to global config file.\n\nvar Input = styled.input.withConfig({\n  displayName: \"input__Input\",\n  componentId: \"sc-1ao902g-0\"\n})([\"width:100%;box-sizing:border-box;padding:14px 10px;background:#ffffff;border:1px solid rgba(202,204,208,0.85);border-radius:4px;color:#393f44;font-size:14px;&[type=\\\"number\\\"]{box-sizing:content-box;padding:8px 10px;}\"]);\nexport default Input;","import _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport Slider from \"../slider\";\nimport isEqual from \"lodash/isEqual\";\nimport FlexContainer from \"../../styles-common/flex\";\nimport FormLabel from \"../../styles-common/form-label\";\nimport InputGroup from \"../../styles-common/input-group\";\nimport Input from \"../../styles-common/input\";\nimport debounce from \"lodash/debounce\";\nimport * as helpers from \"./helpers\";\n\nvar WidgetInfo =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(WidgetInfo, _React$Component);\n\n  function WidgetInfo(props) {\n    var _this;\n\n    _classCallCheck(this, WidgetInfo);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WidgetInfo).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleUpdate\", debounce(function () {\n      var _this$props = _this.props,\n          configuration = _this$props.configuration,\n          patchConfiguration = _this$props.patchConfiguration;\n      var _this$state = _this.state,\n          title = _this$state.title,\n          caption = _this$state.caption,\n          yAxis = _this$state.yAxis,\n          xAxis = _this$state.xAxis;\n      patchConfiguration({\n        title: title,\n        caption: caption,\n        category: _objectSpread({}, configuration.category, {\n          alias: yAxis\n        }),\n        value: _objectSpread({}, configuration.value, {\n          alias: xAxis\n        })\n      });\n    }, 1000));\n\n    _this.state = _this.stateFromProps(props.configuration);\n    return _this;\n  }\n\n  _createClass(WidgetInfo, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var prevConfiguration = prevProps.configuration;\n      var configuration = this.props.configuration;\n\n      if (!isEqual(this.stateFromProps(prevConfiguration), this.stateFromProps(configuration))) {\n        this.setState(this.stateFromProps(configuration));\n      }\n    }\n  }, {\n    key: \"stateFromProps\",\n    value: function stateFromProps(configuration) {\n      return {\n        title: configuration ? configuration.title : \"\",\n        caption: configuration ? configuration.caption : \"\",\n        yAxis: configuration ? configuration.category.alias : \"\",\n        xAxis: configuration ? configuration.value.alias : \"\"\n      };\n    }\n  }, {\n    key: \"setTitle\",\n    value: function setTitle(title) {\n      this.setState({\n        title: title\n      });\n      this.handleUpdate();\n    }\n  }, {\n    key: \"setCaption\",\n    value: function setCaption(caption) {\n      this.setState({\n        caption: caption\n      });\n      this.handleUpdate();\n    }\n  }, {\n    key: \"setYAxis\",\n    value: function setYAxis(yAxis) {\n      this.setState({\n        yAxis: yAxis\n      });\n      this.handleUpdate();\n    }\n  }, {\n    key: \"setXAxis\",\n    value: function setXAxis(xAxis) {\n      this.setState({\n        xAxis: xAxis\n      });\n      this.handleUpdate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          title = _this$state2.title,\n          caption = _this$state2.caption,\n          xAxis = _this$state2.xAxis,\n          yAxis = _this$state2.yAxis;\n      return React.createElement(FlexContainer, null, React.createElement(InputGroup, null, React.createElement(FormLabel, {\n        htmlFor: \"options-title\"\n      }, \"Title\"), React.createElement(Input, {\n        type: \"text\",\n        placeholder: \"Add title\",\n        name: \"options-title\",\n        value: title,\n        onChange: function onChange(e) {\n          return _this2.setTitle(e.target.value);\n        }\n      })), React.createElement(InputGroup, null, React.createElement(FormLabel, {\n        htmlFor: \"options-title\"\n      }, \"Caption\"), React.createElement(Input, {\n        type: \"text\",\n        placeholder: \"Add caption\",\n        name: \"options-capton\",\n        value: caption,\n        onChange: function onChange(e) {\n          return _this2.setCaption(e.target.value);\n        }\n      })), React.createElement(FlexContainer, {\n        row: true\n      }, React.createElement(InputGroup, null, React.createElement(FormLabel, {\n        htmlFor: \"options-x-axis\"\n      }, \"X axis\"), React.createElement(Input, {\n        type: \"text\",\n        placeholder: \"Overwrite axis name\",\n        name: \"options-x-axis\",\n        value: xAxis,\n        onChange: function onChange(e) {\n          return _this2.setXAxis(e.target.value);\n        }\n      })), React.createElement(InputGroup, null, React.createElement(FormLabel, {\n        htmlFor: \"options-y-axis\"\n      }, \"Y axis\"), React.createElement(Input, {\n        type: \"text\",\n        placeholder: \"Overwrite axis name\",\n        name: \"options-y-axis\",\n        value: yAxis,\n        onChange: function onChange(e) {\n          return _this2.setYaxis(e.target.value);\n        }\n      }))));\n    }\n  }]);\n\n  return WidgetInfo;\n}(React.Component);\n\nexport default WidgetInfo;","import { connectState } from \"../../helpers/redux\";\nimport { patchConfiguration } from \"../../modules/configuration/actions\";\nimport WidgetInfoComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    theme: state.theme,\n    configuration: state.configuration\n  };\n}, {\n  patchConfiguration: patchConfiguration\n})(WidgetInfoComponent);","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport React, { useState, useEffect } from \"react\";\nimport find from \"lodash/find\";\nimport Select from \"react-select\";\nimport FlexContainer from \"../../styles-common/flex\";\nimport FormLabel from \"../../styles-common/form-label\";\nimport InputGroup from \"../../styles-common/input-group\";\nvar InputStyles = {\n  control: function control() {\n    return {\n      // none of react-select's styles are passed to <Control />\n      display: \"flex\",\n      border: \"1px solid rgba(202,204,208,0.85)\",\n      borderRadius: \"4px\",\n      padding: \"3px 0\"\n    };\n  },\n  option: function option(base) {\n    return _objectSpread({}, base);\n  }\n};\nvar ORDER_OPTIONS = [{\n  label: \"Ascending\",\n  value: \"asc\"\n}, {\n  label: \"Descending\",\n  value: \"desc\"\n}];\n\nvar OrderValues = function OrderValues(_ref) {\n  var orderBy = _ref.orderBy,\n      patchConfiguration = _ref.patchConfiguration;\n\n  var _useState = useState(find(ORDER_OPTIONS, {\n    value: orderBy.orderType\n  })),\n      _useState2 = _slicedToArray(_useState, 2),\n      order = _useState2[0],\n      setOrder = _useState2[1];\n\n  useEffect(function () {\n    if (orderBy.orderType !== order.value) {\n      setOrder(find(ORDER_OPTIONS, {\n        value: orderBy.orderType\n      }));\n    }\n  }, [orderBy, order.value]);\n\n  var handleChange = function handleChange(option) {\n    patchConfiguration({\n      orderBy: _objectSpread({}, orderBy, {\n        orderType: option.value\n      })\n    });\n  };\n\n  return React.createElement(FlexContainer, null, React.createElement(InputGroup, null, React.createElement(FormLabel, {\n    htmlFor: \"options-title\"\n  }, \"Ascending or Descending\"), React.createElement(Select, {\n    onChange: handleChange,\n    value: order,\n    options: ORDER_OPTIONS,\n    styles: InputStyles\n  })));\n};\n\nexport default OrderValues;","import { connectState } from \"../../helpers/redux\";\nimport { patchConfiguration } from \"../../modules/configuration/actions\";\nimport OrderValuesComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    orderBy: state.configuration.orderBy\n  };\n}, {\n  patchConfiguration: patchConfiguration\n})(OrderValuesComponent);","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect } from \"react\";\n\nfunction useDebounce(value, delay) {\n  // State and setters for debounced value\n  var _useState = useState(value),\n      _useState2 = _slicedToArray(_useState, 2),\n      debouncedValue = _useState2[0],\n      setDebouncedValue = _useState2[1];\n\n  useEffect(function () {\n    // Update debounced value after delay\n    var handler = setTimeout(function () {\n      setDebouncedValue(value);\n    }, delay); // Cancel the timeout if value changes (also on delay change or unmount)\n    // This is how we prevent debounced value from updating if value is changed ...\n    // .. within the delay period. Timeout gets cleared and restarted.\n\n    return function () {\n      clearTimeout(handler);\n    };\n  }, [value, delay] // Only re-call effect if value or delay changes\n  );\n  return debouncedValue;\n}\n\nexport default useDebounce;","export default function isFloat(n) {\n  return Number(n) === n && n % 1 !== 0;\n}","import _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n} // TODO: Rename this filter!\n\n\nimport React, { useState, useEffect } from \"react\";\nimport useDebounce from \"../../hooks/use-debounce\";\nimport Slider from \"../slider\";\nimport FlexContainer from \"../../styles-common/flex\";\nimport FormLabel from \"../../styles-common/form-label\";\nimport InputGroup from \"../../styles-common/input-group\";\nimport Input from \"../../styles-common/input\";\nimport styled from \"styled-components\";\nimport isFloat from \"../../helpers/isFloat\";\nvar StyledSliderBox = styled.div.withConfig({\n  displayName: \"component__StyledSliderBox\",\n  componentId: \"sc-13c1gwt-0\"\n})([\"width:100%;display:flex;padding:20px 0;\"]);\nvar StyledInputBox = styled.div.withConfig({\n  displayName: \"component__StyledInputBox\",\n  componentId: \"sc-13c1gwt-1\"\n})([\"width:100%;display:flex;align-items:center;justify-content:\", \";input{max-width:100px;}\"], function (props) {\n  return props.isDouble ? \"space-between\" : \"flex-end\";\n});\n\nvar QueryLimit = function QueryLimit(_ref) {\n  var label = _ref.label,\n      _ref$min = _ref.min,\n      min = _ref$min === void 0 ? null : _ref$min,\n      _ref$max = _ref.max,\n      max = _ref$max === void 0 ? null : _ref$max,\n      value = _ref.value,\n      _ref$minDistance = _ref.minDistance,\n      minDistance = _ref$minDistance === void 0 ? 1 : _ref$minDistance,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function (data) {} : _ref$onChange,\n      _ref$handleOnChangeVa = _ref.handleOnChangeValue,\n      handleOnChangeValue = _ref$handleOnChangeVa === void 0 ? function (data, key) {} : _ref$handleOnChangeVa;\n\n  var _useState = useState({\n    value: value,\n    key: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      localValue = _useState2[0],\n      setLocalValue = _useState2[1];\n\n  var debouncedValue = useDebounce(localValue, 400);\n  useEffect(function () {\n    if (!debouncedValue.key) {\n      onChange(debouncedValue.value);\n    } else {\n      handleOnChangeValue(debouncedValue.value, debouncedValue.key);\n    }\n  }, [debouncedValue]);\n  var isDouble = Array.isArray(localValue.value);\n  var isFloatingPoint = isFloat(min) || isFloat(max);\n  var minValue = min;\n  var maxValue = max;\n\n  if (isDouble) {\n    minValue = localValue.value[0];\n    maxValue = localValue.value[1];\n  } else {\n    maxValue = localValue.value ? localValue.value : max;\n  }\n\n  if (maxValue - minValue <= minDistance) {\n    minValue = maxValue - minDistance;\n  }\n\n  var minMaxProps = _objectSpread({}, min !== null && {\n    min: min\n  }, {}, max !== null && {\n    max: max\n  });\n\n  return React.createElement(InputGroup, null, label && React.createElement(FormLabel, {\n    htmlFor: \"options-limit\"\n  }, label), React.createElement(StyledSliderBox, null, React.createElement(Slider, _extends({}, minMaxProps, {\n    step: isFloatingPoint ? 0.1 : 1,\n    value: isDouble ? [minValue, maxValue] : maxValue,\n    defaultValue: isDouble ? min : [min, max],\n    onChange: function onChange(value) {\n      return setLocalValue({\n        value: value,\n        key: null\n      });\n    }\n  }))), React.createElement(StyledInputBox, {\n    isDouble: isDouble\n  }, isDouble && React.createElement(Input, _extends({}, minMaxProps, {\n    value: minValue,\n    type: \"number\",\n    name: \"options-limit\",\n    onChange: function onChange(e) {\n      return setLocalValue({\n        value: e.target.value,\n        key: \"minValue\"\n      });\n    }\n  })), React.createElement(Input, _extends({}, minMaxProps, {\n    value: maxValue,\n    type: \"number\",\n    name: \"options-limit\",\n    onChange: function onChange(e) {\n      return setLocalValue({\n        value: e.target.value,\n        key: \"maxValue\"\n      });\n    }\n  }))));\n};\n\nexport default QueryLimit;","import { connectState } from \"../../helpers/redux\";\nimport QueryLimitComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    theme: state.theme\n  };\n})(QueryLimitComponent);","import styled from 'styled-components';\nexport var StyledTableBox = styled.div.withConfig({\n  displayName: \"style__StyledTableBox\",\n  componentId: \"sc-1dqyv6r-0\"\n})([\"width:100%;height:100%;overflow:auto;\"]);\nexport var StyledTable = styled.table.withConfig({\n  displayName: \"style__StyledTable\",\n  componentId: \"sc-1dqyv6r-1\"\n})([\"border-collapse:separate;border-spacing:0;width:100%;padding:0;border-radius:4px;overflow:hidden;border:1px solid rgba(26,28,34,.1);font-size:14px;margin-bottom:20px;\"]);\nexport var StyledTr = styled.tr.withConfig({\n  displayName: \"style__StyledTr\",\n  componentId: \"sc-1dqyv6r-2\"\n})([\"background-color:#fff;box-sizing:border-box;\"]);\nexport var StyledTd = styled.td.withConfig({\n  displayName: \"style__StyledTd\",\n  componentId: \"sc-1dqyv6r-3\"\n})([\"width:100%;padding:20px;text-align:\", \";\"], function (props) {\n  return props.center ? 'center' : 'left';\n});\nexport var StyledTh = styled.td.withConfig({\n  displayName: \"style__StyledTh\",\n  componentId: \"sc-1dqyv6r-4\"\n})([\"position:relative;font-size:14px;color:#393f44;font-weight:700;white-space:nowrap;padding:20px;\"]);","import React from 'react';\nimport { StyledTableBox, StyledTable, StyledTr, StyledTh, StyledTd } from \"./style\";\n\nvar TableView = function TableView(_ref) {\n  var widgetData = _ref.widgetData,\n      configuration = _ref.configuration;\n  var valueAlias = configuration.value.alias,\n      categoryAlias = configuration.category.alias;\n  return React.createElement(StyledTableBox, null, React.createElement(StyledTable, null, React.createElement(\"thead\", null, React.createElement(StyledTr, null, React.createElement(StyledTh, null, categoryAlias), React.createElement(StyledTh, null, valueAlias))), React.createElement(\"tbody\", null, widgetData && widgetData.map(function (el, key) {\n    return React.createElement(StyledTr, {\n      key: key\n    }, React.createElement(StyledTd, null, el.x), React.createElement(StyledTd, {\n      center: true\n    }, el.y));\n  }))));\n};\n\nexport default TableView;","import { connectState } from \"../../helpers/redux\";\nimport TableView from \"./component\";\nexport default connectState(function (state) {\n  return {\n    widgetData: state.editor.widgetData,\n    configuration: state.configuration\n  };\n})(TableView);","import styled from 'styled-components';\nexport var StyledField = styled.div.withConfig({\n  displayName: \"style__StyledField\",\n  componentId: \"sc-1o5rag-0\"\n})([\"box-sizing:border-box;height:221px;width:100%;border:1px solid rgba(202,204,208,0.85);border-radius:4px;background-color:#FFFFFF;padding:0;font-size:14px;\"]);\nexport var EditorColors = {\n  keys: '#C32D7B',\n  number: '#2C75B0',\n  string: '#C32D7B',\n  background: 'white',\n  background_warning: '#ffebeb'\n};\nexport var EditorStyles = {\n  labelColumn: {\n    display: 'none',\n    boxSizing: 'border-box'\n  },\n  body: {\n    fontSize: '14px',\n    height: '100%',\n    width: '100%'\n  },\n  outerBox: {\n    width: '100%',\n    height: '100%',\n    boxSizing: 'border-box'\n  },\n  container: {\n    height: '100%',\n    width: '100%',\n    boxSizing: 'border-box'\n  },\n  warningBox: {\n    width: '100%',\n    position: 'absolute',\n    left: '0',\n    bottom: '-62px'\n  },\n  contentBox: {\n    padding: '20px 0 20px 20px',\n    height: '100%',\n    width: '100%',\n    boxSizing: 'border-box'\n  }\n};","import JsonEditor from \"./component\";\nexport default JsonEditor;","import React from 'react';\nimport JSONInput from 'react-json-editor-ajrm';\nimport locale from 'react-json-editor-ajrm/locale/en';\nimport { StyledField, EditorColors, EditorStyles } from \"./style\";\n\nvar JsonEditor = function JsonEditor(_ref) {\n  var json = _ref.json,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange;\n  return React.createElement(StyledField, null, React.createElement(JSONInput, {\n    placeholder: json,\n    colors: EditorColors,\n    locale: locale,\n    style: EditorStyles,\n    onChange: onChange\n  }));\n};\n\nexport default JsonEditor;","import { createAction } from \"../../helpers/redux\";\nexport var setFilters = createAction(\"EDITOR/setFilters\");\nexport default {\n  setFilters: setFilters\n};","import React from \"react\"; // General Filter structure types\n\nexport var TYPE_COLUMNS = \"columns\";\nexport var TYPE_INDICATOR = \"indicator\"; // Number types\n\nexport var TYPE_RANGE = \"range\";\nexport var TYPE_VALUE = \"value\"; // String types\n\nexport var TYPE_FILTER_ON_VALUES = \"FILTER_ON_VALUES\";\nexport var TYPE_TEXT_CONTAINS = \"TEXT_CONTAINS\";\nexport var TYPE_TEXT_NOT_CONTAINS = \"TEXT_NOT_CONTAINS\";\nexport var TYPE_TEXT_STARTS_WITH = \"TEXT_STARTS_WITH\";\nexport var TYPE_TEXT_ENDS_WITH = \"TEXT_ENDS_WITH\";\nexport var NUMBER_TYPES = [TYPE_RANGE, TYPE_VALUE];\nexport var STRING_TYPES = [TYPE_FILTER_ON_VALUES, TYPE_TEXT_CONTAINS, TYPE_TEXT_NOT_CONTAINS, TYPE_TEXT_STARTS_WITH, TYPE_TEXT_ENDS_WITH];\nexport var DEFAULT_RANGE_FILTER = {\n  values: [0, 100],\n  type: TYPE_RANGE,\n  notNull: true,\n  max: 500,\n  min: 0\n};\nexport var DEFAULT_VALUE_FILTER = {\n  values: 0,\n  type: TYPE_VALUE,\n  notNull: true,\n  max: 500,\n  min: 0\n};\nexport var DEFAULT_COLUMNS_FILTER = {\n  values: [],\n  type: TYPE_COLUMNS\n};\nexport var COLUMN_FILTER_GROUP = {\n  column: null,\n  label: null,\n  dataType: null,\n  indicator: TYPE_RANGE,\n  filter: DEFAULT_RANGE_FILTER\n};\nexport var FILTER_NUMBER_INDICATOR_TYPES = [{\n  label: \"Between\",\n  value: TYPE_RANGE\n}, {\n  label: \"Equals\",\n  value: TYPE_VALUE\n}];\nexport var FILTER_STRING_INDICATOR_TYPES = [{\n  label: \"Filter by values\",\n  value: TYPE_FILTER_ON_VALUES\n}, {\n  label: \"Text Contains\",\n  value: TYPE_TEXT_CONTAINS\n}, {\n  label: \"Text does not contain\",\n  value: TYPE_TEXT_NOT_CONTAINS\n}, {\n  label: \"Text starts with\",\n  value: TYPE_TEXT_STARTS_WITH\n}, {\n  label: \"Text ends with\",\n  value: TYPE_TEXT_ENDS_WITH\n}];\nexport var DEFAULT_FILTERS = [DEFAULT_RANGE_FILTER, DEFAULT_VALUE_FILTER, DEFAULT_COLUMNS_FILTER, FILTER_NUMBER_INDICATOR_TYPES, FILTER_STRING_INDICATOR_TYPES, COLUMN_FILTER_GROUP];","import styled from \"styled-components\";\nexport var StyledCheckbox = styled.div.withConfig({\n  displayName: \"style__StyledCheckbox\",\n  componentId: \"sc-166tcgo-0\"\n})([\"color:#393f44;input[type=\\\"checkbox\\\"]{opacity:0;position:absolute;}label{cursor:pointer;position:relative;display:inline-block;padding-left:22px;font-size:14px;}label::before,label::after{position:absolute;content:\\\"\\\";display:inline-block;}label::before{height:16px;width:16px;border:1px solid #3bb2d0;border-radius:5px;left:0px;top:0;}label::after{height:3px;width:6px;border-left:2px solid #3bb2d0;border-bottom:2px solid #3bb2d0;-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg);left:5px;top:6px;}input[type=\\\"checkbox\\\"] + label::after{content:none;}input[type=\\\"checkbox\\\"]:checked + label::after{content:\\\"\\\";}input[type=\\\"checkbox\\\"]:focus + label::before{box-shadow:0 0 3px #3bb2d0;}\"]);","import NotNullInput from \"./component\";\nexport default NotNullInput;","import React from \"react\";\nimport { StyledCheckbox } from \"./style\";\n\nvar NotNullInput = function NotNullInput(_ref) {\n  var filter = _ref.filter,\n      _ref$name = _ref.name,\n      name = _ref$name === void 0 ? \"untitled_checkbox\" : _ref$name,\n      _ref$label = _ref.label,\n      label = _ref$label === void 0 ? \"\" : _ref$label,\n      setData = _ref.setData;\n\n  if (!filter) {\n    return null;\n  }\n\n  return React.createElement(StyledCheckbox, null, React.createElement(\"input\", {\n    type: \"checkbox\",\n    id: name,\n    checked: filter.filter.notNull,\n    onChange: function onChange(e) {\n      return setData(e.target.value, filter.id, \"NOT_NULL_CHECK\");\n    }\n  }), React.createElement(\"label\", {\n    htmlFor: name\n  }, label));\n};\n\nexport default NotNullInput;","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React from \"react\";\nimport QueryLimit from \"../../../query-limit\";\nimport { TYPE_RANGE } from \"../../const\"; // TODO: Move to utils\n\nvar yearToUTC = function yearToUTC(y) {\n  return new Date(Date.UTC(y)).toISOString();\n};\n\nvar UTCToYear = function UTCToYear(utcString) {\n  return new Date(utcString).getFullYear();\n};\n\nvar FilterRange = function FilterRange(_ref) {\n  var filter = _ref.filter,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      setData = _ref.setData;\n  var values = filter.filter.values;\n\n  var _ref2 = filter.fieldInfo ? filter.fieldInfo : {\n    min: 0,\n    max: 100\n  },\n      min = _ref2.min,\n      max = _ref2.max;\n\n  var _values = _slicedToArray(values, 2),\n      minValue = _values[0],\n      maxValue = _values[1];\n\n  var onSetData = function onSetData(values) {\n    var serializeValues;\n\n    if (filter.dataType === \"date\") {\n      serializeValues = [yearToUTC(values[0]), yearToUTC(values[1])];\n    } else {\n      serializeValues = values;\n    }\n\n    setData(serializeValues, filter.id, TYPE_RANGE);\n  };\n\n  var handleOnChangeValue = function handleOnChangeValue(value) {\n    var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"maxValue\";\n    var newValues;\n\n    if (filter.dataType === \"date\") {\n      newValues = key === \"maxValue\" ? [yearToUTC(minValue), yearToUTC(Number(value))] : [yearToUTC(Number(value)), yearToUTC(maxValue)];\n    } else {\n      newValues = key === \"maxValue\" ? [minValue, Number(value)] : [Number(value), maxValue];\n    }\n\n    setData(newValues, filter.id, TYPE_RANGE);\n  };\n\n  if (filter.dataType === \"date\") {\n    return React.createElement(QueryLimit, {\n      min: UTCToYear(min),\n      max: UTCToYear(max),\n      disabled: disabled,\n      value: [UTCToYear(minValue), UTCToYear(maxValue)],\n      onChange: function onChange(value) {\n        return onSetData(value);\n      },\n      handleOnChangeValue: handleOnChangeValue\n    });\n  }\n\n  return React.createElement(QueryLimit, {\n    min: min,\n    max: max,\n    disabled: disabled,\n    value: [minValue, maxValue],\n    onChange: function onChange(value) {\n      return onSetData(value);\n    },\n    handleOnChangeValue: handleOnChangeValue\n  });\n};\n\nexport default FilterRange;","import FilterRange from \"./component\";\nexport default FilterRange;","import React from \"react\";\nimport Input from \"../../../../styles-common/input\";\nimport styled from \"styled-components\";\nimport isFloat from \"../../../../helpers/isFloat\";\nimport { TYPE_VALUE } from \"../../const\";\nvar StyledInput = styled(Input).withConfig({\n  displayName: \"component__StyledInput\",\n  componentId: \"sc-8rrlsf-0\"\n})([\"text-align:left !important;\"]);\n\nvar FilterValue = function FilterValue(_ref) {\n  var filter = _ref.filter,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      setData = _ref.setData,\n      _ref$isNumeric = _ref.isNumeric,\n      isNumeric = _ref$isNumeric === void 0 ? true : _ref$isNumeric;\n  var values = filter.filter.values;\n\n  var _ref2 = filter.fieldInfo ? filter.fieldInfo : {\n    min: 0,\n    max: 100\n  },\n      min = _ref2.min,\n      max = _ref2.max;\n\n  var isFloatingPoint = isFloat(min) || isFloat(max);\n  return React.createElement(StyledInput, {\n    min: min,\n    max: max,\n    step: isFloatingPoint ? 0.1 : 1,\n    disabled: disabled,\n    value: values,\n    type: isNumeric ? \"number\" : \"text\",\n    name: \"filter-value-\".concat(filter.id),\n    onChange: function onChange(e) {\n      return setData(e.target.value, filter.id, TYPE_VALUE);\n    }\n  });\n};\n\nexport default FilterValue;","import FilterValue from \"./component\";\nexport default FilterValue;","import FilterColumn from \"./component\";\nexport default FilterColumn;","import React from \"react\";\nimport Select from \"react-select\";\nimport { TYPE_COLUMNS } from \"../../const\";\n\nvar FilterColumn = function FilterColumn(_ref) {\n  var filter = _ref.filter,\n      _ref$setData = _ref.setData,\n      setData = _ref$setData === void 0 ? function () {} : _ref$setData,\n      _ref$optionData = _ref.optionData,\n      optionData = _ref$optionData === void 0 ? [] : _ref$optionData;\n\n  var handleChange = function handleChange(options) {\n    setData(options, filter.id, TYPE_COLUMNS);\n  };\n\n  var value = optionData.find(function (_ref2) {\n    var value = _ref2.value;\n    return value === filter.column;\n  });\n  return React.createElement(Select, {\n    value: value,\n    placeholder: \"Select Column\",\n    name: \"filter-column-\".concat(filter.id),\n    options: optionData,\n    onChange: handleChange\n  });\n};\n\nexport default FilterColumn;","import FilterStrings from \"./component\";\nexport default FilterStrings;","import React from \"react\";\nimport Select from \"react-select\";\nimport { TYPE_FILTER_ON_VALUES } from \"../../const\";\n\nvar FilterStrings = function FilterStrings(_ref) {\n  var filter = _ref.filter,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      _ref$setData = _ref.setData,\n      setData = _ref$setData === void 0 ? function () {} : _ref$setData,\n      _ref$optionData = _ref.optionData,\n      optionData = _ref$optionData === void 0 ? [] : _ref$optionData;\n  var value = filter.filter.values;\n\n  var handleChange = function handleChange(options) {\n    setData(options, filter.id, TYPE_FILTER_ON_VALUES);\n  };\n\n  return React.createElement(Select, {\n    isDisabled: disabled,\n    value: value ? value : null,\n    isMulti: true,\n    placeholder: \"Select \".concat(filter.column),\n    name: \"filter-string-values-\".concat(filter.id),\n    options: optionData,\n    onChange: handleChange\n  });\n};\n\nexport default FilterStrings;","import FilterIndicator from \"./component\";\nexport default FilterIndicator;","import React from \"react\";\nimport Select from \"react-select\";\nimport { TYPE_INDICATOR } from \"../../const\";\n\nvar FilterIndicator = function FilterIndicator(_ref) {\n  var filter = _ref.filter,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      _ref$setData = _ref.setData,\n      setData = _ref$setData === void 0 ? function () {} : _ref$setData,\n      _ref$optionData = _ref.optionData,\n      optionData = _ref$optionData === void 0 ? [] : _ref$optionData;\n  var value = filter.indicator === \"string\" ? filter.filter.values : optionData.find(function (o) {\n    return o.value === filter.indicator;\n  });\n\n  var handleChange = function handleChange(options) {\n    setData(options, filter.id, TYPE_INDICATOR);\n  };\n\n  return React.createElement(Select, {\n    isDisabled: disabled,\n    value: value ? value : null,\n    isMulti: filter.indicator === \"string\",\n    placeholder: filter.indicator === \"string\" ? \"Select \".concat(filter.column) : \"Select Indicator\",\n    name: \"filter-indicator-\".concat(filter.id),\n    options: optionData,\n    onChange: handleChange\n  });\n};\n\nexport default FilterIndicator;","import styled from \"styled-components\";\nexport var StyledAddSection = styled.div.withConfig({\n  displayName: \"style__StyledAddSection\",\n  componentId: \"e43ipm-0\"\n})([\"position:absolute;top:-40px;right:0;\"]);","import AddSection from \"./component\";\nexport default AddSection;","import React, { useState, useRef, useEffect } from \"react\";\nimport Button from \"../../../button\";\nimport { StyledAddSection } from \"./style\";\n\nvar AddSection = function AddSection(_ref) {\n  var addFilter = _ref.addFilter;\n  return React.createElement(StyledAddSection, null, React.createElement(Button, {\n    size: \"small\",\n    onClick: function onClick() {\n      return addFilter();\n    }\n  }, \"Add Filter\"));\n};\n\nexport default AddSection;","import styled from \"styled-components\";\nexport var StyledFilterBox = styled.div.withConfig({\n  displayName: \"style__StyledFilterBox\",\n  componentId: \"wriuir-0\"\n})([\"position:relative;\"]);\nexport var StyledEmpty = styled.div.withConfig({\n  displayName: \"style__StyledEmpty\",\n  componentId: \"wriuir-1\"\n})([\"max-width:300px;margin:0 auto;display:flex;align-items:center;justify-content:center;text-align:center;\"]);\nexport var StyledFilterSection = styled.div.withConfig({\n  displayName: \"style__StyledFilterSection\",\n  componentId: \"wriuir-2\"\n})([\"padding:10px 0;position:relative;label{text-transform:capitalize;}\"]);\nexport var StyledFilter = styled.div.withConfig({\n  displayName: \"style__StyledFilter\",\n  componentId: \"wriuir-3\"\n})([\"padding:15px 0 0 20px;margin:0 0 0 10px;border-left:1px solid #d2d3d6;\"]);\nexport var StyledDeleteBox = styled.div.withConfig({\n  displayName: \"style__StyledDeleteBox\",\n  componentId: \"wriuir-4\"\n})([\"position:absolute;right:0;top:50%;transform:translate(-50px,-50%);button{font-size:12px;padding:7px 10px;border:none;font-weight:500;}\"]);","import _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nimport { FiltersService } from \"@packages/core\";\nimport InputGroup from \"../../styles-common/input-group\";\nimport Button from \"../button\";\nimport uniqueId from \"lodash/uniqueId\"; // FieldsService\n\nimport { DEFAULT_RANGE_FILTER, DEFAULT_VALUE_FILTER, TYPE_RANGE, TYPE_COLUMNS, TYPE_INDICATOR, TYPE_VALUE, COLUMN_FILTER_GROUP, TYPE_FILTER_ON_VALUES, FILTER_NUMBER_INDICATOR_TYPES, FILTER_STRING_INDICATOR_TYPES, STRING_TYPES, NUMBER_TYPES } from \"./const\";\nimport NotNullInput from \"./components/NotNullInput\";\nimport FilterRange from \"./components/FilterRange\";\nimport FilterValue from \"./components/FilterValue\";\nimport FilterColumn from \"./components/FilterColumn\";\nimport FilterStrings from \"./components/FilterStrings\";\nimport FilterIndicator from \"./components/FilterIndicator\";\nimport AddSection from \"./components/AddSection\";\nimport { StyledFilterBox, StyledEmpty, StyledFilterSection, StyledFilter, StyledDeleteBox } from \"./style\";\n\nvar Filter = function Filter(_ref) {\n  var dataService = _ref.dataService,\n      setFilters = _ref.setFilters,\n      _ref$filters = _ref.filters,\n      filters = _ref$filters === void 0 ? [] : _ref$filters,\n      _ref$fields = _ref.fields,\n      fields = _ref$fields === void 0 ? [] : _ref$fields,\n      configuration = _ref.configuration,\n      datasetId = _ref.datasetId;\n  var availableColumns = fields.map(function (field) {\n    return {\n      label: field.metadata && field.metadata.alias ? field.metadata.alias : field.columnName.replace(/_/gi, \" \"),\n      value: field.columnName,\n      dataType: field.type\n    };\n  });\n\n  var setData =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(values, id, type) {\n      var patch;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return FiltersService.patchFilters(filters, {\n                values: values,\n                id: id,\n                type: type\n              }, configuration, datasetId, fields);\n\n            case 2:\n              patch = _context.sent;\n              setFilters({\n                list: patch\n              }); // XXX: Update Data Service with applied filters\n\n              dataService.requestWithFilters(patch, configuration);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function setData(_x, _x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var addFilter = function addFilter() {\n    var patch = [].concat(_toConsumableArray(filters), [_objectSpread({}, COLUMN_FILTER_GROUP, {\n      id: uniqueId(\"we-filter-\")\n    })]);\n    setFilters({\n      list: patch\n    });\n  };\n\n  var removeFilter = function removeFilter(id) {\n    var patch = filters.filter(function (f) {\n      return f.id !== id;\n    }) || [];\n    setFilters({\n      list: patch\n    });\n  };\n\n  return React.createElement(StyledFilterBox, null, React.createElement(AddSection, {\n    addFilter: addFilter\n  }), !filters.length && React.createElement(StyledEmpty, null, \"No filters found. Please, add them.\"), filters.map(function (filter) {\n    return React.createElement(StyledFilterSection, {\n      key: filter.id\n    }, React.createElement(InputGroup, {\n      noMargins: true\n    }, React.createElement(FilterColumn, {\n      filter: filter,\n      setData: setData,\n      optionData: availableColumns\n    }), React.createElement(StyledDeleteBox, null, React.createElement(Button, {\n      type: \"highlight\",\n      onClick: function onClick() {\n        return removeFilter(filter.id);\n      }\n    }, \"Delete\"))), filter.column !== null && React.createElement(StyledFilter, null, NUMBER_TYPES.indexOf(filter.indicator) > -1 && React.createElement(InputGroup, {\n      noMargins: filter.indicator === TYPE_RANGE\n    }, React.createElement(FilterIndicator, {\n      filter: filter,\n      disabled: filter.column === null,\n      setData: setData,\n      optionData: FILTER_NUMBER_INDICATOR_TYPES\n    })), STRING_TYPES.indexOf(filter.indicator) > -1 && React.createElement(InputGroup, null, React.createElement(FilterIndicator, {\n      filter: filter,\n      disabled: filter.column === null,\n      setData: setData,\n      optionData: FILTER_STRING_INDICATOR_TYPES\n    })), STRING_TYPES.indexOf(filter.indicator) > -1 && React.createElement(InputGroup, null, filter.indicator === TYPE_FILTER_ON_VALUES && React.createElement(FilterStrings, {\n      filter: filter,\n      setData: setData,\n      optionData: filter.fieldInfo\n    }), filter.indicator !== TYPE_FILTER_ON_VALUES && React.createElement(FilterValue, {\n      isNumeric: false,\n      filter: filter,\n      setData: setData\n    })), NUMBER_TYPES.indexOf(filter.indicator) > -1 && React.createElement(InputGroup, null, filter.indicator === TYPE_RANGE && React.createElement(FilterRange, {\n      disabled: filter.column === null,\n      filter: filter,\n      setData: setData\n    }), filter.indicator === TYPE_VALUE && React.createElement(FilterValue, {\n      disabled: filter.column === null,\n      filter: filter,\n      setData: setData\n    })), React.createElement(NotNullInput, {\n      filter: filter,\n      name: \"filter-not-null-\".concat(filter.id),\n      label: \"Not null values\",\n      setData: setData\n    })));\n  }));\n};\n\nexport default Filter;","import { connectState } from \"../../helpers/redux\";\nimport { setFilters } from \"../../modules/filters/actions\";\nimport FilterComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    configuration: state.configuration,\n    datasetId: state.editor.dataset.id,\n    filters: state.filters.list,\n    fields: state.editor.fields\n  };\n}, {\n  setFilters: setFilters\n})(FilterComponent);\nexport * from \"./component\";","export var FONTS = [{\n  value: 'lato',\n  label: 'Lato'\n}, {\n  value: 'arial',\n  label: 'Arial'\n}];","export var InputStyles = {\n  container: function container() {\n    return {\n      position: \"relative\",\n      boxSizing: \"border-box\",\n      cursor: \"pointer\",\n      border: \"1px solid rgba(202,204,208,0.85)\",\n      borderRadius: \"4px\",\n      backgroundColor: \"rgba(255,255,255,0)\"\n    };\n  },\n  indicatorSeparator: function indicatorSeparator() {\n    return {\n      display: \"none\"\n    };\n  },\n  dropdownIndicator: function dropdownIndicator(provided, state) {\n    return {\n      color: \"#c32d7b\",\n      transition: \"all 0.2s ease-out\"\n    };\n  },\n  indicatorsContainer: function indicatorsContainer() {\n    return {\n      color: \"#c32d7b\",\n      display: \"flex\",\n      padding: \"8px\",\n      transition: \"color 150ms\",\n      boxSizing: \"border-box\",\n      position: \"relative\",\n      top: \"5px\"\n    };\n  },\n  control: function control() {\n    return {\n      display: \"flex\",\n      border: \"none\",\n      borderRadius: \"4px\",\n      padding: \"3px 0\"\n    };\n  }\n};","import _defineProperty from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport React from 'react';\nimport FlexContainer from \"../../styles-common/flex\";\nimport FormLabel from \"../../styles-common/form-label\";\nimport InputGroup from \"../../styles-common/input-group\";\nimport Input from \"../../styles-common/input\";\nimport Select from 'react-select';\nimport { FONTS } from \"./const\";\nimport { InputStyles } from \"./style\";\n\nvar Typography = function Typography(_ref) {\n  var theme = _ref.theme,\n      setTheme = _ref.setTheme;\n  var font = theme.font,\n      titleSize = theme.titleSize,\n      captionSize = theme.captionSize,\n      axisTitleSize = theme.axisTitleSize;\n  var selectedFont = FONTS.find(function (f) {\n    return f.value === font;\n  }) || FONTS[0];\n\n  var handleChangeFont = function handleChangeFont(option) {\n    setTheme(_objectSpread({}, theme, {\n      font: option.value\n    }));\n  };\n\n  var handleChangeSize = function handleChangeSize(key, value) {\n    var reg = new RegExp('^[0-9]*$');\n    var setValue = value !== '' && reg.test(Number(value)) ? value : 'auto';\n    setTheme(_objectSpread({}, theme, _defineProperty({}, key, setValue)));\n  };\n\n  return React.createElement(\"div\", null, React.createElement(FormLabel, {\n    htmlFor: \"options-title\"\n  }, \"Font\"), React.createElement(Select, {\n    value: selectedFont,\n    onChange: handleChangeFont,\n    options: FONTS,\n    styles: InputStyles\n  }), React.createElement(\"br\", null), React.createElement(FlexContainer, {\n    row: true\n  }, React.createElement(InputGroup, null, React.createElement(FormLabel, {\n    htmlFor: \"typography-title-size\"\n  }, \"Title size\"), React.createElement(Input, {\n    name: \"typography-title-size\",\n    value: titleSize === \"auto\" ? '' : titleSize,\n    type: \"text\",\n    onChange: function onChange(e) {\n      return handleChangeSize('titleSize', e.target.value);\n    },\n    placeholder: \"Auto\"\n  })), React.createElement(InputGroup, null, React.createElement(FormLabel, {\n    htmlF: true,\n    or: \"typography-caption-size\"\n  }, \"Caption size\"), React.createElement(Input, {\n    name: \"typography-caption-size\",\n    value: captionSize === \"auto\" ? '' : captionSize,\n    type: \"text\",\n    onChange: function onChange(e) {\n      return handleChangeSize('captionSize', e.target.value);\n    },\n    placeholder: \"Auto\"\n  })), React.createElement(InputGroup, null, React.createElement(FormLabel, {\n    htmlFor: \"typography-axisTitleSize\"\n  }, \"Axis title size\"), React.createElement(Input, {\n    name: \"typography-axisTitleSize\",\n    value: axisTitleSize === \"auto\" ? '' : axisTitleSize,\n    type: \"text\",\n    onChange: function onChange(e) {\n      return handleChangeSize('axisTitleSize', e.target.value);\n    },\n    placeholder: \"Auto\"\n  }))));\n};\n\nexport default Typography;","import { connectState } from \"../../helpers/redux\";\nimport { setTheme } from \"../../modules/theme/actions\";\nimport Typography from \"./component\";\nexport default connectState(function (state) {\n  return {\n    theme: state.theme\n  };\n}, {\n  setTheme: setTheme\n})(Typography);","import styled, { css } from 'styled-components';\nexport var StyledShemesContainer = styled.div.withConfig({\n  displayName: \"style__StyledShemesContainer\",\n  componentId: \"sc-1noje9x-0\"\n})([\"display:flex;align-items:center;justify-content:flex-start;flex-wrap:wrap;width:100%;margin-left:-5px;margin-right:-5px;*{box-sizing:border-box;}\"]);\nexport var StyledShemesCard = styled.div.withConfig({\n  displayName: \"style__StyledShemesCard\",\n  componentId: \"sc-1noje9x-1\"\n})([\"width:33.333%;display:flex;align-items:center;justify-content:center;padding-right:5px;padding-left:5px;input{display:none;}\"]);\nexport var StyledCardBox = styled.div.withConfig({\n  displayName: \"style__StyledCardBox\",\n  componentId: \"sc-1noje9x-2\"\n})([\"width:100%;box-sizing:border-box;height:100px;border:\", \";border-radius:4px;background-color:rgba(255,255,255,0);padding:15px 18px;&:hover{border:2px solid #C32D7B;cursor:pointer;}\"], function (props) {\n  return props.active ? '2px solid #C32D7B' : '1px solid rgba(202,204,208,0.85)';\n});\nexport var StyledShemeInfo = styled.div.withConfig({\n  displayName: \"style__StyledShemeInfo\",\n  componentId: \"sc-1noje9x-3\"\n})([\"\"]);\nexport var StyledShemeName = styled.div.withConfig({\n  displayName: \"style__StyledShemeName\",\n  componentId: \"sc-1noje9x-4\"\n})([\"font-size:14px;margin:0;padding-bottom:7px;text-transform:uppercase;\"]);\nexport var StyledShemeColors = styled.div.withConfig({\n  displayName: \"style__StyledShemeColors\",\n  componentId: \"sc-1noje9x-5\"\n})([\"div{height:21px;}\"]);","import _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport React from 'react';\nimport { StyledShemesContainer, StyledShemesCard, StyledCardBox, StyledShemeName, StyledShemeInfo, StyledShemeColors } from \"./style\";\n\nvar ColorShemes = function ColorShemes(_ref) {\n  var theme = _ref.theme,\n      setTheme = _ref.setTheme;\n  var schemes = theme.schemes,\n      selectedScheme = theme.selectedScheme;\n\n  var onChangeTheme = function onChangeTheme(sheme) {\n    setTheme(_objectSpread({}, theme, {\n      selectedScheme: sheme.name\n    }));\n  };\n\n  return React.createElement(StyledShemesContainer, null, schemes.map(function (sheme) {\n    return React.createElement(StyledShemesCard, {\n      key: sheme.name\n    }, React.createElement(StyledCardBox, {\n      active: selectedScheme === sheme.name,\n      onClick: function onClick() {\n        return onChangeTheme(sheme);\n      }\n    }, React.createElement(StyledShemeInfo, null, React.createElement(StyledShemeName, null, sheme.name), React.createElement(StyledShemeColors, null, React.createElement(\"div\", {\n      style: {\n        flexBasis: '100%',\n        background: sheme.mainColor\n      }\n    }), React.createElement(\"div\", {\n      style: {\n        flexBasis: '100%',\n        display: 'flex'\n      }\n    }, sheme.category.map(function (color) {\n      return React.createElement(\"div\", {\n        key: color,\n        style: {\n          flexBasis: \"\".concat(100 / sheme.category.length, \"%\"),\n          background: color\n        }\n      });\n    }))))));\n  }));\n};\n\nexport default ColorShemes;","import { connectState } from \"../../helpers/redux\";\nimport { setTheme } from \"../../modules/theme/actions\";\nimport ColorShemes from \"./component\";\nexport default connectState(function (state) {\n  return {\n    theme: state.theme\n  };\n}, {\n  setTheme: setTheme\n})(ColorShemes);","import React from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { Accordion, AccordionSection } from \"../accordion\";\nimport { Tabs, Tab } from \"../tabs\";\nimport WidgetInfo from \"../widget-info\";\nimport OrderValues from \"../order-values\";\nimport QueryLimit from \"../query-limit\";\nimport TableView from \"../table-view\";\nimport JsonEditor from \"../json-editor\";\nimport Filter from \"../filter\";\nimport Typography from \"../typography\";\nimport ColorShemes from \"../color-shemes\";\nimport { FOOTER_HEIGHT, DEFAULT_BORDER } from \"../../style-constants\";\nvar StyleEditorOptionsErrors = styled.div.withConfig({\n  displayName: \"component__StyleEditorOptionsErrors\",\n  componentId: \"sc-1tx06u6-0\"\n})([\"position:absolute;left:50%;bottom:50%;transform:translate(-50%,-50%);h3{color:#ff6464;text-align:center;}p{color:#bfbfbf;font-size:12px;}\"]);\nvar StyledContainer = styled.div.withConfig({\n  displayName: \"component__StyledContainer\",\n  componentId: \"sc-1tx06u6-1\"\n})([\"position:relative;flex:1;background:#fff;height:calc(100% - \", \" - 20px);padding:0 0 0 30px;margin:10px 0;overflow-y:hidden;\", \" \", \" \", \"\"], FOOTER_HEIGHT, DEFAULT_BORDER(1, 1, 1, 0), function (props) {\n  return props.compact.isCompact && css([\"visibility:hidden;max-height:0;position:absolute;top:65px;left:0;margin:0;width:100%;transition:all 0.3s ease-in-out;\"]);\n}, function (props) {\n  return props.compact.isCompact && props.compact.isOpen && css([\"box-sizing:border-box;display:block;z-index:auto;visibility:visible;max-height:calc(100% - \", \" - 65px);\"], FOOTER_HEIGHT);\n});\n\nvar EditorOptions = function EditorOptions(_ref) {\n  var datasetId = _ref.datasetId,\n      limit = _ref.limit,\n      orderBy = _ref.orderBy,\n      patchConfiguration = _ref.patchConfiguration,\n      compact = _ref.compact,\n      dataService = _ref.dataService;\n\n  var handleChange = function handleChange(value, type) {\n    if (type === \"limit\") {\n      patchConfiguration({\n        limit: value\n      });\n    }\n  };\n\n  if (!datasetId) {\n    return React.createElement(StyledContainer, {\n      compact: compact\n    }, React.createElement(StyleEditorOptionsErrors, null, React.createElement(\"h3\", null, \"Error loading dataset\"), React.createElement(\"p\", null, \"Dataset not accessible at this moment.\")));\n  }\n\n  return React.createElement(StyledContainer, {\n    compact: compact\n  }, React.createElement(Tabs, null, React.createElement(Tab, {\n    label: \"General\"\n  }, React.createElement(Accordion, null, React.createElement(AccordionSection, {\n    title: \"Description and labels\"\n  }, React.createElement(WidgetInfo, null)), React.createElement(AccordionSection, {\n    title: \"Filters\"\n  }, React.createElement(Filter, {\n    dataService: dataService\n  })), React.createElement(AccordionSection, {\n    title: \"Order\"\n  }, orderBy && React.createElement(OrderValues, null), limit && React.createElement(QueryLimit, {\n    min: 0,\n    max: 500,\n    onChange: function onChange(value) {\n      return handleChange(value, \"limit\");\n    },\n    handleOnChangeValue: function handleOnChangeValue(value) {\n      return handleChange(value, \"limit\");\n    },\n    label: \"Limit\",\n    value: limit\n  })))), React.createElement(Tab, {\n    label: \"Visual style\",\n    default: true\n  }, React.createElement(Accordion, null, React.createElement(AccordionSection, {\n    title: \"Typography\"\n  }, React.createElement(Typography, null)), React.createElement(AccordionSection, {\n    title: \"Color\",\n    openDefault: true\n  }, React.createElement(ColorShemes, null)))), React.createElement(Tab, {\n    label: \"Advanced\"\n  }, React.createElement(JsonEditor, null)), React.createElement(Tab, {\n    label: \"Table view\"\n  }, React.createElement(TableView, null))));\n};\n\nexport default EditorOptions;","import { connectState } from \"../../helpers/redux\";\nimport { patchConfiguration } from \"../../modules/configuration/actions\";\nimport EditorOptionsComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    datasetId: state.editor.dataset && state.editor.dataset.id ? state.editor.dataset.id : null,\n    limit: state.configuration.limit,\n    orderBy: state.configuration.orderBy,\n    compact: state.theme.compact\n  };\n}, {\n  patchConfiguration: patchConfiguration\n})(EditorOptionsComponent);","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport styled from 'styled-components';\nvar Icon = styled.svg.withConfig({\n  displayName: \"CloseIcon__Icon\",\n  componentId: \"xts4iy-0\"\n})([\"&:hover{path{fill:\", \";}}\"], function (props) {\n  return (props.hoverColor ? props.hoverColor : '#C32D7B') || 'auto';\n});\n\nvar CloseIcon = function CloseIcon(props) {\n  return React.createElement(Icon, _extends({}, props, {\n    viewBox: \"0 0 32 32\"\n  }), React.createElement(\"path\", {\n    d: \"M16 11.636l-11.636-11.636-4.364 4.364 11.636 11.636-11.636 11.636 4.364 4.364 11.636-11.636 11.636 11.636 4.364-4.364-11.636-11.636 11.636-11.636-4.364-4.364z\"\n  }));\n};\n\nexport default CloseIcon;","import styled from 'styled-components';\nexport var StyledModalBox = styled.div.withConfig({\n  displayName: \"style__StyledModalBox\",\n  componentId: \"sc-1ia4c7k-0\"\n})([\"position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.3);transition:all .16s cubic-bezier(.47,0,.745,.715);z-index:\", \";visibility:\", \";opacity:\", \";display:flex;justify-content:center;align-items:center;\"], function (props) {\n  return props.isOpen ? 1100 : -1;\n}, function (props) {\n  return props.isOpen ? 'visible' : 'hidden';\n}, function (props) {\n  return props.isOpen ? 1 : 0;\n});\nexport var StyledModalContainer = styled.div.withConfig({\n  displayName: \"style__StyledModalContainer\",\n  componentId: \"sc-1ia4c7k-1\"\n})([\"-webkit-transition:-webkit-transform .24s cubic-bezier(.215,.61,.355,1);transition:-webkit-transform .24s cubic-bezier(.215,.61,.355,1);transition:transform .24s cubic-bezier(.215,.61,.355,1);transition:transform .24s cubic-bezier(.215,.61,.355,1),-webkit-transform .24s cubic-bezier(.215,.61,.355,1);-webkit-transform:translateY(0);transform:\", \";display:-webkit-box;display:flex;position:relative;width:calc(100% - 50px);max-width:880px;background:#fff;box-shadow:0 1px 1px rgba(0,0,0,.15);z-index:1;\"], function (props) {\n  return props.isOpen ? 'translateY(0)' : 'translateY(-35px)';\n});\nexport var StyledModalContent = styled.div.withConfig({\n  displayName: \"style__StyledModalContent\",\n  componentId: \"sc-1ia4c7k-2\"\n})([\"position:relative;width:100%;max-height:85vh;min-height:150px;overflow:auto;padding:72px;-webkit-overflow-scrolling:touch;box-shadow:0 7px 15px 0 rgba(0,0,0,.15);\"]);\nexport var StyledModalCloseBtn = styled.button.withConfig({\n  displayName: \"style__StyledModalCloseBtn\",\n  componentId: \"sc-1ia4c7k-3\"\n})([\"fill:#000;display:block;position:absolute;top:15px;right:15px;width:30px;height:30px;padding:0;border:0;background-color:transparent;cursor:pointer;z-index:2;outline:none;\"]);\nexport var StyledActions = styled.div.withConfig({\n  displayName: \"style__StyledActions\",\n  componentId: \"sc-1ia4c7k-4\"\n})([\"padding-top:60px;\"]);","import React from 'react';\nimport CloseIcon from \"../icons/CloseIcon\";\nimport Button from \"../button\";\nimport { StyledModalBox, StyledModalContainer, StyledModalContent, StyledModalCloseBtn, StyledActions } from \"./style\";\nexport var Modal = function Modal(_ref) {\n  var isOpen = _ref.isOpen,\n      closeModal = _ref.closeModal,\n      children = _ref.children;\n  return React.createElement(StyledModalBox, {\n    isOpen: isOpen\n  }, React.createElement(StyledModalContainer, {\n    isOpen: isOpen\n  }, React.createElement(StyledModalContent, null, React.createElement(StyledModalCloseBtn, {\n    onClick: function onClick() {\n      return closeModal();\n    }\n  }, React.createElement(CloseIcon, {\n    width: \"20px\",\n    height: \"20px\",\n    hoverColor: \"#C32D7B\"\n  })), children, React.createElement(StyledActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return closeModal();\n    },\n    type: \"cta\"\n  }, \"Ok, got it!\")))));\n};","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"../button\";\nimport { Modal } from \"../modal\";\nimport { FOOTER_HEIGHT } from \"../../style-constants\";\nvar StyledFooter = styled.footer.withConfig({\n  displayName: \"component__StyledFooter\",\n  componentId: \"t079zl-0\"\n})([\"width:100%;height:\", \";align-self:flex-end;display:flex;align-items:center;justify-content:space-between;padding:0 30px;\"], FOOTER_HEIGHT);\n\nvar Footer = function Footer(_ref) {\n  var authenticated = _ref.authenticated,\n      onSave = _ref.onSave;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      modalOpen = _useState2[0],\n      setModalOpen = _useState2[1];\n\n  return React.createElement(StyledFooter, null, React.createElement(Modal, {\n    isOpen: modalOpen,\n    closeModal: function closeModal() {\n      return setModalOpen(false);\n    }\n  }, React.createElement(\"h2\", null, \"How to customize the visualization\")), React.createElement(Button, {\n    onClick: function onClick() {\n      return setModalOpen(true);\n    },\n    type: \"highlight\"\n  }, \"Need help?\"), authenticated && React.createElement(Button, {\n    type: \"cta\",\n    onClick: onSave\n  }, \"Save widget\"));\n};\n\nexport default Footer;","import { connectState } from \"../../helpers/redux\"; // Components\n\nimport FooterComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    authenticated: state.editor.authenticated\n  };\n})(FooterComponent);","import styled, { css } from \"styled-components\";\nimport { FOOTER_HEIGHT } from \"../../style-constants\";\nexport var StyledContainer = styled.div.withConfig({\n  displayName: \"style__StyledContainer\",\n  componentId: \"sc-1testk7-0\"\n})([\"width:100%;\", \"\"], function (props) {\n  return props.isCompact ? css([\"box-sizing:border-box;position:relative;max-width:600px;margin:0 auto;height:calc(100% - \", \");\"], FOOTER_HEIGHT) : css([\"height:100%;display:flex;flex-flow:wrap;justify-content:space-between;flex-flow:column;@media only screen and (min-width:768px){flex-flow:wrap;}\"]);\n});","import _classCallCheck from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React from \"react\";\nimport isEqual from \"lodash/isEqual\";\nimport debounce from \"lodash/debounce\";\nimport Renderer from \"../renderer\";\nimport EditorOptions from \"../editor-options\";\nimport Footer from \"../footer\";\nimport { DataService } from \"@packages/core\";\nimport { constants } from \"@packages/core\";\nimport { StyledContainer } from \"./style\";\n\nvar Editor =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Editor, _React$Component);\n\n  function Editor(props) {\n    var _this;\n\n    _classCallCheck(this, Editor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Editor).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"resolveAuthentication\", debounce(function (authenticated) {\n      var setEditor = _this.props.setEditor;\n      setEditor({\n        authenticated: authenticated\n      });\n    }, 1000));\n\n    _defineProperty(_assertThisInitialized(_this), \"initializeRestoration\", debounce(function (datasetId, widgetId) {\n      _this.dataService.restoreEditor(datasetId, widgetId);\n    }, 1000));\n\n    _defineProperty(_assertThisInitialized(_this), \"resolveTheme\", debounce(function (theme) {\n      var setTheme = _this.props.setTheme;\n      setTheme(theme);\n    }, 1000));\n\n    _defineProperty(_assertThisInitialized(_this), \"resolveSchemes\", debounce(function (schemes) {\n      var setScheme = _this.props.setScheme;\n      setScheme(schemes);\n    }, 1000));\n\n    var _this$props = _this.props,\n        _datasetId = _this$props.datasetId,\n        _widgetId = _this$props.widgetId,\n        adapter = _this$props.adapter,\n        _setEditor = _this$props.setEditor,\n        dispatch = _this$props.dispatch,\n        _theme = _this$props.theme,\n        _schemes = _this$props.schemes;\n    _this.onSave = _this.onSave.bind(_assertThisInitialized(_this));\n    _this.dataService = new DataService(_datasetId, _widgetId, adapter, _setEditor, dispatch);\n\n    _this.dataService.resolveInitialState();\n\n    _this.resolveTheme(_theme);\n\n    _this.resolveSchemes(_schemes);\n\n    props.dispatch({\n      type: constants.sagaEvents.DATA_FLOW_STORE_ADAPTER_CONFIG,\n      payload: adapter\n    });\n    return _this;\n  }\n\n  _createClass(Editor, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var authenticated = this.props.authenticated;\n\n      if (authenticated) {\n        this.resolveAuthentication();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var prevDatasetId = prevProps.datasetId,\n          prevWidgetId = prevProps.widgetId,\n          prevTheme = prevProps.theme,\n          prevSchemes = prevProps.schemes,\n          prevAuthenticated = prevProps.authenticated;\n      var _this$props2 = this.props,\n          datasetId = _this$props2.datasetId,\n          widgetId = _this$props2.widgetId,\n          theme = _this$props2.theme,\n          schemes = _this$props2.schemes,\n          adapter = _this$props2.adapter,\n          authenticated = _this$props2.authenticated; // When datasetId changes, we need to restore the editor itself\n\n      if (!isEqual(datasetId, prevDatasetId) || !isEqual(widgetId, prevWidgetId)) {\n        this.initializeRestoration(datasetId, widgetId);\n      }\n\n      if (!isEqual(theme, prevTheme)) {\n        this.resolveTheme(theme);\n      }\n\n      if (!isEqual(schemes, prevSchemes)) {\n        this.resolveSchemes(schemes);\n      }\n\n      if (!isEqual(authenticated, prevAuthenticated)) {\n        this.resolveAuthentication(authenticated);\n      }\n    } // We debounce all properties here\n    // Then we dont have to care if debouncing is set on the client\n\n  }, {\n    key: \"onSave\",\n    value: function onSave() {\n      var _this$props3 = this.props,\n          onSave = _this$props3.onSave,\n          dispatch = _this$props3.dispatch,\n          editorState = _this$props3.editorState,\n          adapter = _this$props3.adapter,\n          application = _this$props3.application;\n\n      if (typeof onSave === \"function\") {\n        adapter.handleSave(onSave, this.dataService, application, editorState);\n      }\n\n      dispatch({\n        type: constants.sagaEvents.EDITOR_SAVE\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          configuration = _this$props4.configuration,\n          adapter = _this$props4.adapter,\n          compact = _this$props4.theme.compact;\n      return React.createElement(StyledContainer, compact, React.createElement(Renderer, null), configuration.limit && React.createElement(EditorOptions, {\n        adapter: adapter,\n        dataService: this.dataService\n      }), React.createElement(Footer, {\n        onSave: this.onSave\n      }));\n    }\n  }]);\n\n  return Editor;\n}(React.Component);\n\nexport default Editor;","import _defineProperty from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _actions$setTheme$act;\n\nimport * as actions from \"./actions\";\nexport default (_actions$setTheme$act = {}, _defineProperty(_actions$setTheme$act, actions.setTheme, function (state, _ref) {\n  var payload = _ref.payload;\n  return _objectSpread({}, state, {}, payload);\n}), _defineProperty(_actions$setTheme$act, actions.setScheme, function (state, _ref2) {\n  var payload = _ref2.payload;\n  return _objectSpread({}, state, {\n    schemes: [].concat(_toConsumableArray(state.schemes), _toConsumableArray(payload))\n  });\n}), _actions$setTheme$act);","import _defineProperty from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _actions$setConfigura;\n\nimport * as actions from \"./actions\";\nexport default (_actions$setConfigura = {}, _defineProperty(_actions$setConfigura, actions.setConfiguration, function (state, _ref) {\n  var payload = _ref.payload;\n  return _objectSpread({}, state, {}, payload);\n}), _defineProperty(_actions$setConfigura, actions.patchConfiguration, function (state, _ref2) {\n  var payload = _ref2.payload;\n  return _objectSpread({}, state, {}, payload);\n}), _actions$setConfigura);","import { connectState } from \"../../helpers/redux\";\nimport { setEditor as _setEditor } from \"../../modules/editor/actions\";\nimport { setTheme as _setTheme, setScheme as _setScheme } from \"../../modules/theme/actions\"; // Components\n\nimport EditorComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    editor: state.editor,\n    configuration: state.configuration,\n    widget: state.widget,\n    editorState: state\n  };\n}, function (dispatch) {\n  return {\n    dispatch: dispatch,\n    setEditor: function setEditor(data) {\n      return dispatch(_setEditor(data));\n    },\n    setTheme: function setTheme(data) {\n      return dispatch(_setTheme(data));\n    },\n    setScheme: function setScheme(data) {\n      return dispatch(_setScheme(data));\n    }\n  };\n})(EditorComponent);","import WidgetEditorComponent from \"./component\";\nexport default WidgetEditorComponent;","import _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport React from \"react\";\nimport Editor from \"../editor\";\n\nvar WidgetEditor =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(WidgetEditor, _React$Component);\n\n  function WidgetEditor() {\n    _classCallCheck(this, WidgetEditor);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(WidgetEditor).apply(this, arguments));\n  }\n\n  _createClass(WidgetEditor, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          authenticated = _this$props.authenticated,\n          application = _this$props.application,\n          onSave = _this$props.onSave,\n          datasetId = _this$props.datasetId,\n          _this$props$widgetId = _this$props.widgetId,\n          widgetId = _this$props$widgetId === void 0 ? null : _this$props$widgetId,\n          adapter = _this$props.adapter,\n          theme = _this$props.theme,\n          schemes = _this$props.schemes,\n          _this$props$compact = _this$props.compact,\n          compact = _this$props$compact === void 0 ? true : _this$props$compact;\n\n      if (typeof adapter !== \"function\") {\n        throw new Error(\"Widget editor: Missing prop adapter and adapter needs to be of type Adapter\");\n      }\n\n      if (!datasetId) {\n        throw new Error(\"Widget editor: Missing prop datasetId of type string\");\n      }\n\n      return React.createElement(Editor, {\n        authenticated: authenticated,\n        application: application,\n        onSave: onSave,\n        datasetId: datasetId,\n        widgetId: widgetId,\n        adapter: new adapter(),\n        schemes: schemes,\n        theme: _objectSpread({}, theme, {\n          compact: {\n            isCompact: compact,\n            isOpen: false\n          }\n        })\n      });\n    }\n  }]);\n\n  return WidgetEditor;\n}(React.Component);\n\nexport default WidgetEditor;","import _defineProperty from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as actions from \"./actions\";\nexport default _defineProperty({}, actions.setEditor, function (state, _ref) {\n  var payload = _ref.payload;\n  return _objectSpread({}, state, {}, payload);\n});","export default {\n  authenticated: false,\n  restoring: false,\n  initialized: false,\n  dataset: null,\n  widget: null,\n  widgetData: null,\n  errors: null\n};","export default {\n  compact: {\n    isCompact: true,\n    isOpen: false\n  },\n  schemes: [{\n    name: \"default\",\n    mainColor: \"#97bd3d\",\n    category: [\"#97bd3d\", \"#2C75B0\", \"#FAB72E\", \"#EF4848\", \"#3BB2D0\", \"#C32D7B\", \"#F577B9\", \"#5FD2B8\", \"#F1800F\", \"#9F1C00\", \"#A5E9E3\", \"#B9D765\", \"#393F44\", \"#CACCD0\", \"#717171\"]\n  }],\n  color: \"#C32D7B\",\n  slider: {\n    track: \"#a3daf3\",\n    trackBackground: \"#f5f5f5\"\n  },\n  selectedScheme: 'default',\n  font: 'lato',\n  titleSize: 'auto',\n  captionSize: 'auto',\n  axisTitleSize: 'auto'\n};","import { createAction } from \"../../helpers/redux\";\nexport var setWidget = createAction(\"WIDGET/setWidget\");\nexport default {\n  setWidget: setWidget\n};","import _defineProperty from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as actions from \"./actions\";\nexport default _defineProperty({}, actions.setWidget, function (state, _ref) {\n  var payload = _ref.payload;\n  return _objectSpread({}, state, {}, payload);\n});","export default {};","export default {\n  title: \"\",\n  caption: \"\",\n  visualizationType: \"chart\",\n  chartType: \"bar\",\n  direction: 'horizontal',\n  availableCharts: [{\n    value: \"pie\",\n    chartType: 'pie',\n    direction: null,\n    label: \"Pie\"\n  }, {\n    value: \"bar-horizontal\",\n    chartType: 'bar',\n    direction: 'horizontal',\n    label: \"Bar (Horizontal)\"\n  }, {\n    value: \"bar-vertical\",\n    chartType: 'bar',\n    direction: 'vertical',\n    label: \"Bar (Vertical)\"\n  }, {\n    value: \"line\",\n    chartType: 'line',\n    direction: null,\n    label: \"Line\"\n  }, {\n    value: \"scatter\",\n    direction: 'horizontal',\n    label: \"Scatter\"\n  }]\n};","import _defineProperty from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as actions from \"./actions\";\nexport default _defineProperty({}, actions.setFilters, function (state, _ref) {\n  var payload = _ref.payload;\n  return _objectSpread({}, state, {}, payload);\n});","export default {\n  list: []\n};","import _defineProperty from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { combineReducers } from \"redux\";\nimport { handleModule } from \"vizzuality-redux-tools\";\nimport { constants } from \"@packages/core\";\nimport * as editor from \"./editor\";\nimport * as theme from \"./theme\";\nimport * as widget from \"./widget\";\nimport * as configuration from \"./configuration\";\nimport * as filters from \"./filters\";\nvar modules = {\n  configuration: handleModule(configuration),\n  editor: handleModule(editor),\n  theme: handleModule(theme),\n  filters: handleModule(filters),\n  widget: handleModule(widget)\n};\nexport default _defineProperty({}, constants.APP_NAMESPACE, combineReducers(modules));","import createSagaMiddleware from \"redux-saga\";\nvar sagaMiddleware = createSagaMiddleware();\nexport default sagaMiddleware;","import _regeneratorRuntime from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(preloadData),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(baseSaga);\n\nimport { takeLatest, put, select } from \"redux-saga/effects\";\nimport { getAction } from \"../../helpers/redux\";\nimport { constants } from \"@packages/core\";\nimport { setConfiguration } from \"../../modules/configuration/actions\";\n\nfunction preloadData() {\n  var _ref, _ref$widgetEditor$edi, name, description, widgetConfig, configuration;\n\n  return _regeneratorRuntime.wrap(function preloadData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return select();\n\n        case 2:\n          _ref = _context.sent;\n          _ref$widgetEditor$edi = _ref.widgetEditor.editor.widget.attributes;\n          name = _ref$widgetEditor$edi.name;\n          description = _ref$widgetEditor$edi.description;\n          widgetConfig = _ref$widgetEditor$edi.widgetConfig;\n          configuration = _objectSpread({}, widgetConfig.paramsConfig, {\n            title: name,\n            caption: description\n          });\n          _context.next = 10;\n          return put(setConfiguration(configuration));\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n\nexport default function baseSaga() {\n  return _regeneratorRuntime.wrap(function baseSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return takeLatest(constants.sagaEvents.DATA_FLOW_DATASET_WIDGET_READY, preloadData);\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}","import _regeneratorRuntime from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(storeAdapterConfigInState),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(preloadData),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(resolveWithProxy),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(updateWidget),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(updateWidgetData),\n    _marked6 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(baseSaga);\n\nimport { takeLatest, put, call, select } from \"redux-saga/effects\";\nimport { getAction } from \"../../helpers/redux\";\nimport { FiltersService, constants, VegaService, StateProxy } from \"@packages/core\";\nimport { setEditor } from \"../../modules/editor/actions\";\nimport { setWidget } from \"../../modules/widget/actions\";\nvar stateProxy = new StateProxy();\nvar adapterConfiguration = null;\n\nfunction getWidgetData(_x) {\n  return _getWidgetData.apply(this, arguments);\n}\n\nfunction _getWidgetData() {\n  _getWidgetData = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(editorState) {\n    var configuration, filters, id, filtersService, sqlQuery, _adapterConfiguration, dataEndpoint, response, data;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            configuration = editorState.configuration, filters = editorState.filters, id = editorState.editor.dataset.id;\n            filtersService = new FiltersService(configuration, filters, id);\n            sqlQuery = filtersService.getQuery();\n            _adapterConfiguration = adapterConfiguration, dataEndpoint = _adapterConfiguration.dataEndpoint;\n            _context7.next = 6;\n            return fetch(\"\".concat(dataEndpoint, \"/\").concat(id, \"?sql=\").concat(sqlQuery));\n\n          case 6:\n            response = _context7.sent;\n            _context7.next = 9;\n            return response.json();\n\n          case 9:\n            data = _context7.sent;\n            return _context7.abrupt(\"return\", data);\n\n          case 11:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getWidgetData.apply(this, arguments);\n}\n\nfunction storeAdapterConfigInState(_ref) {\n  var payload;\n  return _regeneratorRuntime.wrap(function storeAdapterConfigInState$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          payload = _ref.payload;\n          adapterConfiguration = payload;\n\n        case 2:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n\nfunction preloadData() {\n  var _ref2, _ref2$widgetEditor, editor, configuration, theme, widgetData, widgetConfig, vega, _ref3, widgetEditor;\n\n  return _regeneratorRuntime.wrap(function preloadData$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return select();\n\n        case 2:\n          _ref2 = _context2.sent;\n          _ref2$widgetEditor = _ref2.widgetEditor;\n          editor = _ref2$widgetEditor.editor;\n          configuration = _ref2$widgetEditor.configuration;\n          theme = _ref2$widgetEditor.theme;\n          widgetData = editor.widgetData;\n          widgetConfig = editor.widget.attributes.widgetConfig;\n          vega = new VegaService(widgetConfig, widgetData, configuration, theme);\n          _context2.next = 12;\n          return put(setWidget(vega.getChart()));\n\n        case 12:\n          _context2.next = 14;\n          return select();\n\n        case 14:\n          _ref3 = _context2.sent;\n          widgetEditor = _ref3.widgetEditor;\n          stateProxy.cacheChart(widgetEditor);\n\n        case 17:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n\nfunction resolveWithProxy() {\n  var _ref4, widgetEditor, proxyResult;\n\n  return _regeneratorRuntime.wrap(function resolveWithProxy$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return select();\n\n        case 2:\n          _ref4 = _context3.sent;\n          widgetEditor = _ref4.widgetEditor;\n          _context3.next = 6;\n          return call([stateProxy, \"sync\"], widgetEditor);\n\n        case 6:\n          proxyResult = _context3.sent;\n\n          if (!(proxyResult && proxyResult.length > 0)) {\n            _context3.next = 15;\n            break;\n          }\n\n          _context3.t0 = _regeneratorRuntime.keys(proxyResult);\n\n        case 9:\n          if ((_context3.t1 = _context3.t0()).done) {\n            _context3.next = 15;\n            break;\n          }\n\n          event = _context3.t1.value;\n          _context3.next = 13;\n          return put({\n            type: proxyResult[event]\n          });\n\n        case 13:\n          _context3.next = 9;\n          break;\n\n        case 15:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n\nfunction updateWidget() {\n  var _ref5, _ref5$widgetEditor, editor, configuration, theme, widgetData, widgetConfig, vega;\n\n  return _regeneratorRuntime.wrap(function updateWidget$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return select();\n\n        case 2:\n          _ref5 = _context4.sent;\n          _ref5$widgetEditor = _ref5.widgetEditor;\n          editor = _ref5$widgetEditor.editor;\n          configuration = _ref5$widgetEditor.configuration;\n          theme = _ref5$widgetEditor.theme;\n\n          if (!editor.initialized) {\n            _context4.next = 13;\n            break;\n          }\n\n          widgetData = editor.widgetData;\n          widgetConfig = editor.widget.attributes.widgetConfig;\n          vega = new VegaService(widgetConfig, widgetData, configuration, theme);\n          _context4.next = 13;\n          return put(setWidget(vega.getChart()));\n\n        case 13:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\n\nfunction updateWidgetData() {\n  var _ref6, widgetEditor, widgetData;\n\n  return _regeneratorRuntime.wrap(function updateWidgetData$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return select();\n\n        case 2:\n          _ref6 = _context5.sent;\n          widgetEditor = _ref6.widgetEditor;\n          _context5.next = 6;\n          return call(getWidgetData, widgetEditor);\n\n        case 6:\n          widgetData = _context5.sent;\n\n          if (!widgetData.data) {\n            _context5.next = 12;\n            break;\n          }\n\n          _context5.next = 10;\n          return put(setEditor({\n            widgetData: widgetData.data\n          }));\n\n        case 10:\n          _context5.next = 12;\n          return call(updateWidget);\n\n        case 12:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\n\nexport default function baseSaga() {\n  return _regeneratorRuntime.wrap(function baseSaga$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return takeLatest(constants.sagaEvents.DATA_FLOW_VISUALISATION_READY, preloadData);\n\n        case 2:\n          _context6.next = 4;\n          return takeLatest(constants.sagaEvents.DATA_FLOW_STORE_ADAPTER_CONFIG, storeAdapterConfigInState);\n\n        case 4:\n          _context6.next = 6;\n          return takeLatest(getAction(\"CONFIGURATION/patchConfiguration\"), resolveWithProxy);\n\n        case 6:\n          _context6.next = 8;\n          return takeLatest(constants.sagaEvents.DATA_FLOW_UPDATE_WIDGET, updateWidget);\n\n        case 8:\n          _context6.next = 10;\n          return takeLatest(constants.sagaEvents.DATA_FLOW_CONFIGURATION_UPDATE, updateWidgetData);\n\n        case 10:\n          _context6.next = 12;\n          return takeLatest(getAction(\"EDITOR/THEME/setTheme\"), updateWidget);\n\n        case 12:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6);\n}","import _regeneratorRuntime from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(root);\n\nimport { all, fork } from \"redux-saga/effects\";\nimport editor from \"./editor\";\nimport widget from \"./widget\";\nexport default function root() {\n  return _regeneratorRuntime.wrap(function root$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return all([fork(editor), fork(widget)]);\n\n        case 2:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}","import WidgetEditor from \"./components/widget-editor\";\nexport { default as reducers } from \"./modules\";\nexport { default as middleware } from \"./middleware\";\nexport { default as sagas } from \"./sagas\";\nexport default WidgetEditor;","import { createAction } from \"vizzuality-redux-tools\";\n\nexport const modifyOptions = createAction(\"PLAYGROUND/modifyOptions\");\n\nexport default {\n  modifyOptions\n};\n","import * as actions from \"./actions\";\n\nexport default {\n  [actions.modifyOptions]: (state, { payload }) => ({\n    ...state,\n    ...payload\n  })\n};\n","export default {\n  authToken: \"\",\n  optionsOpen: false,\n  compactMode: false,\n  widget: null,\n  theme: { color: \"#C32D7B\" },\n  dataset: \"d446a52e-c4c1-4e74-ae30-3204620a0365\"\n};\n","import { createStore, combineReducers, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\n\nimport {\n  reducers,\n  middleware as WEmiddleware,\n  sagas\n} from \"@packages/widget-editor\";\n\nimport thunk from \"redux-thunk\";\n\n// import sagas from \"sagas\";\n\n// New modules\nimport { handleModule } from \"vizzuality-redux-tools\";\n\n// Modules\nimport * as editorOptions from \"modules/editor-options\";\n\nconst initStore = (initialState = {}) => {\n  const appReducers = combineReducers({\n    editorOptions: handleModule(editorOptions),\n    ...reducers\n  });\n\n  const middlewares = applyMiddleware(thunk, WEmiddleware);\n  const enhancers = composeWithDevTools(middlewares);\n\n  // create store\n  const store = createStore(appReducers, initialState, enhancers);\n\n  WEmiddleware.run(sagas);\n\n  return { store };\n};\n\nexport default initStore;\n","import React from \"react\";\n\nimport RwAdapter from \"@packages/rw-adapter\";\nimport WidgetEditor from \"@packages/widget-editor\";\n\nconst THEMES = [\n  {\n    name: \"pine\",\n    mainColor: \"#907A59\",\n    category: [\n      \"#907A59\",\n      \"#6AAC9F\",\n      \"#D5C0A1\",\n      \"#5C7D86\",\n      \"#F9AF38\",\n      \"#F05B3F\",\n      \"#89AD24\",\n      \"#CE4861\",\n      \"#F5808F\",\n      \"#86C48F\",\n      \"#F28627\",\n      \"#B23912\",\n      \"#BAD6AF\",\n      \"#C9C857\",\n      \"#665436\"\n    ]\n  },\n  {\n    name: \"wind\",\n    mainColor: \"#5A7598\",\n    category: [\n      \"#5A7598\",\n      \"#C1CCDC\",\n      \"#DBB86F\",\n      \"#B7597B\",\n      \"#5FAB55\",\n      \"#8D439E\",\n      \"#CD87CA\",\n      \"#6BC8CB\",\n      \"#C58857\",\n      \"#712932\",\n      \"#ACE3E9\",\n      \"#B1D193\",\n      \"#294260\",\n      \"#49ACDB\",\n      \"#2A75C3\"\n    ]\n  }\n];\n\nclass Editor extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  handleOnSave(diff) {\n    console.log(\"on save called from consumer with:\");\n    console.log(diff);\n  }\n\n  render() {\n    const {\n      editorOptions: { compactMode, authToken, dataset, widget, theme }\n    } = this.props;\n\n    const authenticated = !!authToken && authToken.length > 0;\n\n    return (\n      <div className=\"widget-editor-wrapper\">\n        <WidgetEditor\n          schemes={THEMES}\n          compact={compactMode}\n          datasetId={dataset}\n          widgetId={widget}\n          onSave={this.handleOnSave}\n          authenticated={authenticated}\n          application=\"rw\"\n          adapter={RwAdapter}\n          theme={theme}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Editor;\n","import { connect } from \"react-redux\";\n\nimport EditorComponent from \"./component\";\n\nexport default connect(\n  state => ({\n    editorOptions: state.editorOptions\n  }),\n  {}\n)(EditorComponent);\n","import React, { Fragment } from \"react\";\n\nimport \"./styles.css\";\n\nclass EditorOptions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      widgets: []\n    };\n\n    const widgetEndpoint = `https://api.resourcewatch.org/v1/widget?includes=metadata,user,vocabulary`;\n    const widgets = fetch(widgetEndpoint)\n      .then(response => response.json())\n      .then(widgetPayload => {\n        this.setState({ widgets: widgetPayload.data });\n      });\n  }\n\n  render() {\n    const { widgets } = this.state;\n    const {\n      editorOptions: {\n        compactMode,\n        authToken,\n        dataset,\n        widget,\n        optionsOpen,\n        theme\n      },\n      modifyOptions\n    } = this.props;\n\n    const clx = `c-playground-options ${optionsOpen ? \"-open\" : \"\"}`;\n\n    return (\n      <div className={clx}>\n        <h4>Widget editor options</h4>\n        <label htmlFor=\"token\">Auth token</label>\n        <input\n          id=\"token\"\n          type=\"text\"\n          placeholder=\"Bearer token\"\n          value={authToken}\n          onChange={e => modifyOptions({ authToken: e.target.value })}\n        />\n        <label htmlFor=\"dataset\">Active Dataset</label>\n        <select\n          id=\"dataset\"\n          value={dataset}\n          onChange={e =>\n            modifyOptions({ widget: null, dataset: e.target.value })\n          }\n        >\n          <option value=\"03bfb30e-829f-4299-bab9-b2be1b66b5d4\">\n            Forest Sector Economic Contribution\n          </option>\n          <option value=\"d446a52e-c4c1-4e74-ae30-3204620a0365\">\n            Access to Electricity\n          </option>\n          <option value=\"20cc5eca-8c63-4c41-8e8e-134dcf1e6d76\">Fires</option>\n          <option value=\"a86d906d-9862-4783-9e30-cdb68cd808b8\">\n            Global Power Plant Database\n          </option>\n          <option value=\"1bc94710-d7ec-46f9-aa27-edddd87b1625\">\n            Cold Water Corals\n          </option>\n        </select>\n\n        <label htmlFor=\"widget\">Select widget</label>\n        <select\n          id=\"widget\"\n          value={!!widget ? widget : \"NO_WIDGET_SELECTED\"}\n          onChange={e => {\n            if (e.target.value === \"NO_WIDGET_SELECTED\") {\n              modifyOptions({\n                widget: null,\n                dataset: \"d446a52e-c4c1-4e74-ae30-3204620a0365\"\n              });\n            } else {\n              modifyOptions({\n                dataset: widgets.find(w => w.id === e.target.value).attributes\n                  .dataset,\n                widget: e.target.value\n              });\n            }\n          }}\n        >\n          <option value=\"NO_WIDGET_SELECTED\">-</option>\n          {widgets.map(rwWidget => {\n            return (\n              <option key={rwWidget.id} value={rwWidget.id}>\n                {rwWidget.attributes.name}\n              </option>\n            );\n          })}\n        </select>\n\n        <label htmlFor=\"editor-compact-mode\">Toggle Compact mode</label>\n        <button onClick={() => modifyOptions({ compactMode: !compactMode })}>\n          {compactMode ? \"Set Default mode\" : \"Set Compact mode\"}\n        </button>\n\n        <label htmlFor=\"theme-color\">\n          <span\n            className=\"color-presentation\"\n            style={{ background: theme.color }}\n          />{\" \"}\n          THEME - Color\n        </label>\n        <input\n          id=\"theme-color\"\n          type=\"text\"\n          placeholder=\"#00000\"\n          value={theme.color}\n          onChange={e =>\n            modifyOptions({ theme: { ...theme, color: e.target.value } })\n          }\n        />\n      </div>\n    );\n  }\n}\n\nexport default EditorOptions;\n","import { connect } from \"react-redux\";\n\nimport EditorOptionsComponent from \"./component\";\n\nimport { modifyOptions } from \"modules/editor-options/actions\";\n\nexport default connect(\n  state => ({\n    editorOptions: state.editorOptions\n  }),\n  { modifyOptions }\n)(EditorOptionsComponent);\n","import React from \"react\";\n\nconst ToggleOptions = ({ optionsActive, modifyOptions }) => {\n  return (\n    <button onClick={() => modifyOptions({ optionsOpen: !optionsActive })}>\n      {optionsActive ? \"Close options\" : \"View options\"}\n    </button>\n  );\n};\n\nexport default ToggleOptions;\n","import { connect } from \"react-redux\";\n\nimport ToggleOptionsComponent from \"./component\";\n\nimport { modifyOptions } from \"modules/editor-options/actions\";\n\nexport default connect(\n  state => ({\n    optionsActive: state.editorOptions.optionsOpen\n  }),\n  { modifyOptions }\n)(ToggleOptionsComponent);\n","import React, { useState } from \"react\";\nimport { Provider } from \"react-redux\";\n\nimport configureStore from \"store\";\n\nimport Editor from \"components/editor\";\nimport EditorOptions from \"components/editor-options\";\nimport ToggleOptions from \"components/toggle-options\";\n\nimport \"./App.css\";\n\nfunction App() {\n  const { store } = configureStore();\n  return (\n    <Provider store={store}>\n      <div className=\"App\">\n        <header className=\"App-header\">\n          Widget editor playground\n          <ToggleOptions />\n        </header>\n        <Editor />\n        <EditorOptions />\n      </div>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.defaultVegaSchema = function (scheme) {\n  return {\n    $schema: \"https://vega.github.io/schema/vega/v5.json\",\n    width: 100,\n    height: 100,\n    data: [],\n    legend: [],\n    config: {},\n    signals: [],\n    scales: [],\n    axes: [],\n    marks: [],\n    axis: {\n      labelFontSize: 13,\n      labelFont: \"Lato\",\n      labelColor: \"#717171\",\n      labelPadding: 10,\n      ticks: true,\n      tickSize: 8,\n      tickColor: \"#A9ABAD\",\n      tickOpacity: 0.5,\n      tickExtra: false\n    },\n    axisX: {\n      bandPosition: 0.5,\n      domainWidth: 1.2,\n      domainColor: \"#A9ABAD\",\n      labelAlign: \"center\",\n      labelBaseline: \"top\"\n    },\n    axisY: {\n      domain: false,\n      labelAlign: \"left\",\n      labelBaseline: \"bottom\",\n      tickOpacity: 0.5,\n      grid: true,\n      ticks: false,\n      gridColor: \"#A9ABAD\",\n      gridOpacity: 0.5\n    },\n    symbol: {\n      fill: \"#3BB2D0\"\n    },\n    line: {\n      interpolate: \"linear\",\n      stroke: \"#3BB2D0\",\n      fillOpacity: 0\n    }\n  };\n};\n\nexports.sqlFields = {\n  value: \"x\",\n  category: \"y\"\n};\nexports.default = {\n  defaultVegaSchema: exports.defaultVegaSchema,\n  sqlFields: exports.sqlFields\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.APP_NAMESPACE = \"widgetEditor\";\nexports.ALLOWED_FIELD_TYPES = [{\n  name: \"esriFieldTypeSmallInteger\",\n  type: \"number\",\n  provider: \"esri\"\n}, {\n  name: \"esriFieldTypeInteger\",\n  type: \"number\",\n  provider: \"esri\"\n}, {\n  name: \"esriFieldTypeSingle\",\n  type: \"number\",\n  provider: \"esri\"\n}, {\n  name: \"esriFieldTypeDouble\",\n  type: \"number\",\n  provider: \"esri\"\n}, {\n  name: \"numeric\",\n  type: \"number\",\n  provider: \"psql\"\n}, {\n  name: \"number\",\n  type: \"number\",\n  provider: \"carto\"\n}, {\n  name: \"int\",\n  type: \"number\",\n  provider: \"psql\"\n}, {\n  name: \"integer\",\n  type: \"number\",\n  provider: \"psql\"\n}, {\n  name: \"float\",\n  type: \"number\",\n  provider: \"sql\"\n}, {\n  name: \"long\",\n  type: \"number\",\n  provider: \"sql\"\n}, {\n  name: \"double\",\n  type: \"number\",\n  provider: \"sql\"\n}, {\n  name: \"real\",\n  type: \"number\",\n  provider: \"sql\"\n}, {\n  name: \"decimal\",\n  type: \"number\",\n  provider: \"sql\"\n}, {\n  name: \"string\",\n  type: \"string\",\n  provider: \"sql\"\n}, {\n  name: \"char\",\n  type: \"string\",\n  provider: \"sql\"\n}, {\n  name: \"varchar\",\n  type: \"string\",\n  provider: \"sql\"\n}, {\n  name: \"esriFieldTypeString\",\n  type: \"string\",\n  provider: \"esri\"\n}, {\n  name: \"text\",\n  type: \"string\",\n  provider: \"elastic\"\n}, {\n  name: \"esriFieldTypeDate\",\n  type: \"date\",\n  provider: \"esri\"\n}, {\n  name: \"date\",\n  type: \"date\",\n  provider: \"sql\"\n}, {\n  name: \"time\",\n  type: \"date\",\n  provider: \"sql\"\n}, {\n  name: \"timestamp\",\n  type: \"date\",\n  provider: \"sql\"\n}, {\n  name: \"interval\",\n  type: \"date\",\n  provider: \"sql\"\n}, {\n  name: \"boolean\",\n  type: \"boolean\",\n  provider: \"sql\"\n}, {\n  name: \"array\",\n  type: \"array\",\n  provider: \"sql\"\n}];\nexports.sagaEvents = {\n  DATA_FLOW_STORE_ADAPTER_CONFIG: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/adapter_configuration\"),\n  DATA_FLOW_DATASET_WIDGET_READY: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/dataset_widget_ready\"),\n  DATA_FLOW_DATA_READY: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/data_ready\"),\n  DATA_FLOW_VISUALISATION_READY: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/visualisation_ready\"),\n  DATA_FLOW_WIDGET_DATA_READY: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/visualisation_ready\"),\n  DATA_FLOW_PROXY_UPDATE: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/proxy_update\"),\n  EDITOR_SAVE: \"\".concat(exports.APP_NAMESPACE, \"/CONFIGURATION/saveConfiguration\"),\n  DATA_FLOW_UPDATE_WIDGET: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/updateWidget\"),\n  DATA_FLOW_CONFIGURATION_UPDATE: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/configurationUpdate\")\n};\nexports.reduxActions = {\n  EDITOR_SET_CONFIGURATION: \"\".concat(exports.APP_NAMESPACE, \"/CONFIGURATION/setConfiguration\"),\n  EDITOR_SET_WIDGET: \"\".concat(exports.APP_NAMESPACE, \"/WIDGET/setWidget\"),\n  EDITOR_SET_FILTERS: \"\".concat(exports.APP_NAMESPACE, \"/EDITOR/setFilters\")\n};\nexports.default = {\n  APP_NAMESPACE: exports.APP_NAMESPACE,\n  sagaEvents: exports.sagaEvents,\n  reduxActions: exports.reduxActions\n};","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar fields_1 = __importDefault(require(\"./fields\"));\n\nvar constants_1 = require(\"../helpers/wiget-helper/constants\");\n\nvar filters_1 = __importDefault(require(\"../helpers/filters\"));\n\nfunction asyncForEach(array, callback) {\n  return __awaiter(this, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var index;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            index = 0;\n\n          case 1:\n            if (!(index < array.length)) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 4;\n            return callback(array[index], index, array);\n\n          case 4:\n            index++;\n            _context.next = 1;\n            break;\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\n\nvar FiltersService =\n/*#__PURE__*/\nfunction () {\n  function FiltersService(configuration, filters, datasetId) {\n    _classCallCheck(this, FiltersService);\n\n    this.configuration = configuration;\n    this.filters = filters;\n    this.sql = \"\";\n    this.datasetId = datasetId;\n    this.prepareSelectStatement();\n    this.prepareAggregate();\n    this.prepareFilters();\n    this.prepareGroupBy();\n    this.prepareOrderBy();\n    this.prepareOrder();\n    this.prepareLimit();\n  }\n\n  _createClass(FiltersService, [{\n    key: \"resolveTableName\",\n    value: function resolveTableName() {\n      var _this$configuration = this.configuration,\n          value = _this$configuration.value,\n          category = _this$configuration.category;\n      var xTableName = value.tableName;\n      var yTableName = category.tableName;\n\n      if (!xTableName && !yTableName) {\n        throw new Error(\"Filters service: canot parse table name from value nor category.\");\n      }\n\n      return xTableName ? xTableName : yTableName;\n    }\n  }, {\n    key: \"prepareSelectStatement\",\n    value: function prepareSelectStatement() {\n      var category = this.configuration.category;\n      this.sql = \"SELECT \".concat(category.name, \" as \").concat(constants_1.sqlFields.value);\n    }\n  }, {\n    key: \"prepareAggregate\",\n    value: function prepareAggregate() {\n      var _this$configuration2 = this.configuration,\n          aggregateFunction = _this$configuration2.aggregateFunction,\n          value = _this$configuration2.value;\n      var name = value.name;\n\n      if (!aggregateFunction) {\n        this.sql = \"\".concat(this.sql, \", \").concat(name, \" as \").concat(constants_1.sqlFields.category, \" FROM \").concat(this.resolveTableName());\n      } else {\n        var aggregation = aggregateFunction.toUpperCase();\n\n        if (aggregation === \"SUM\" || aggregation === \"COUNT\") {\n          this.sql = \"\".concat(this.sql, \", \").concat(aggregation, \"(\").concat(name, \") as \").concat(constants_1.sqlFields.category, \" FROM \").concat(this.resolveTableName());\n        } else {\n          throw new Error(\"Aggragate function (\".concat(aggregateFunction, \") not implemented in filter service.\"));\n        }\n      }\n    }\n  }, {\n    key: \"escapeValue\",\n    value: function escapeValue(value, dataType) {\n      return dataType === \"date\" || dataType === \"string\" ? \"'\".concat(value, \"'\") : value;\n    }\n  }, {\n    key: \"rangeCondition\",\n    value: function rangeCondition(sql, column, values, dataType) {\n      var out = sql;\n      return \"\".concat(out, \" \").concat(column, \" >= \").concat(this.escapeValue(values[0], dataType), \" AND \").concat(column, \" <= \").concat(this.escapeValue(values[1], dataType));\n    }\n  }, {\n    key: \"valueRange\",\n    value: function valueRange(sql, column, values, dataType) {\n      var _this = this;\n\n      var out = sql;\n      return \"\".concat(out, \" \").concat(column, \" IN (\").concat(values.map(function (v) {\n        return _this.escapeValue(v.value, dataType);\n      }).join(\",\"), \")\");\n    }\n  }, {\n    key: \"textContains\",\n    value: function textContains(sql, column, values, dataType) {\n      var out = sql;\n      return \"\".concat(out, \" \").concat(column, \" = \").concat(this.escapeValue(values, dataType));\n    }\n  }, {\n    key: \"textNotContains\",\n    value: function textNotContains(sql, column, values, dataType) {\n      var out = sql;\n      return \"\".concat(out, \" \").concat(column, \" != \").concat(this.escapeValue(values, dataType));\n    }\n  }, {\n    key: \"textStartsWith\",\n    value: function textStartsWith(sql, column, values, dataType) {\n      var out = sql;\n      return \"\".concat(out, \" (lower(\").concat(column, \") LIKE '\").concat(values, \"%')\");\n    }\n  }, {\n    key: \"textEndsWith\",\n    value: function textEndsWith(sql, column, values, dataType) {\n      var out = sql;\n      return \"\".concat(out, \" (lower(\").concat(column, \") LIKE '%\").concat(values, \"')\");\n    }\n  }, {\n    key: \"prepareFilters\",\n    value: function prepareFilters() {\n      var _this2 = this;\n\n      var out = this.sql;\n\n      if (this.filters && this.filters.length > 0) {\n        out = \"\".concat(out, \" WHERE \");\n        this.filters.forEach(function (weFilter, index) {\n          var indicator = weFilter.indicator,\n              column = weFilter.column,\n              dataType = weFilter.dataType,\n              values = weFilter.filter.values;\n          out = index > 0 ? \"\".concat(out, \" AND \") : out;\n\n          if (indicator === \"range\") {\n            out = _this2.rangeCondition(out, column, values, dataType);\n          }\n\n          if (indicator === \"FILTER_ON_VALUES\") {\n            out = _this2.valueRange(out, column, values, dataType);\n          }\n\n          if (indicator === \"TEXT_CONTAINS\") {\n            out = _this2.textContains(out, column, values, dataType);\n          }\n\n          if (indicator === \"TEXT_NOT_CONTAINS\") {\n            out = _this2.textNotContains(out, column, values, dataType);\n          }\n\n          if (indicator === \"TEXT_STARTS_WITH\") {\n            out = _this2.textStartsWith(out, column, values, dataType);\n          }\n\n          if (indicator === \"TEXT_ENDS_WITH\") {\n            out = _this2.textEndsWith(out, column, values, dataType);\n          }\n        });\n      }\n\n      this.sql = out.replace(/ +(?= )/g, \"\");\n    }\n  }, {\n    key: \"prepareGroupBy\",\n    value: function prepareGroupBy() {\n      var _this$configuration3 = this.configuration,\n          groupBy = _this$configuration3.groupBy,\n          aggregateFunction = _this$configuration3.aggregateFunction;\n\n      if (groupBy) {\n        var name = groupBy.name;\n        this.sql = \"\".concat(this.sql, \" GROUP BY \").concat(name || constants_1.sqlFields.value);\n      } else if (aggregateFunction && aggregateFunction !== \"none\") {\n        this.sql = \"\".concat(this.sql, \" GROUP BY \").concat(constants_1.sqlFields.value);\n      }\n    }\n  }, {\n    key: \"prepareOrderBy\",\n    value: function prepareOrderBy() {\n      var orderBy = this.configuration.orderBy;\n\n      if (orderBy) {\n        var name = orderBy.name;\n        this.sql = \"\".concat(this.sql, \" ORDER BY \").concat(name || constants_1.sqlFields.category);\n      }\n    }\n  }, {\n    key: \"prepareOrder\",\n    value: function prepareOrder() {\n      var orderBy = this.configuration.orderBy;\n\n      if (orderBy) {\n        var orderType = orderBy.orderType;\n        this.sql = \"\".concat(this.sql, \" \").concat(orderType || \"desc\");\n      }\n    }\n  }, {\n    key: \"prepareLimit\",\n    value: function prepareLimit() {\n      var _this$configuration$l = this.configuration.limit,\n          limit = _this$configuration$l === void 0 ? 500 : _this$configuration$l;\n      this.sql = \"\".concat(this.sql, \" LIMIT \").concat(limit);\n    }\n  }, {\n    key: \"requestWidgetData\",\n    value: function requestWidgetData() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var response, data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.datasetId) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Error, datasetId not present in Filters service.\");\n\n              case 2:\n                return _context2.abrupt(\"return\", []);\n\n              case 5:\n                response = _context2.sent;\n                _context2.next = 8;\n                return response.json();\n\n              case 8:\n                data = _context2.sent;\n                return _context2.abrupt(\"return\", data);\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      return this.sql.replace(/ +(?= )/g, \"\");\n    }\n  }], [{\n    key: \"handleFilters\",\n    value: function handleFilters(filters, config, payload) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var _this3 = this;\n\n        var configuredColumn, configuredType, configuredValues, configuration, datasetId, fields, widget, out, assignIndicator;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                configuredColumn = config.column, configuredType = config.type, configuredValues = config.values;\n                configuration = payload.configuration, datasetId = payload.datasetId, fields = payload.fields, widget = payload.widget;\n                out = [];\n\n                assignIndicator = function assignIndicator(val) {\n                  return Array.isArray(val) || val.length === 2 ? \"range\" : \"value\";\n                };\n\n                _context4.next = 6;\n                return asyncForEach(filters, function (filter, index) {\n                  return __awaiter(_this3, void 0, void 0,\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee3() {\n                    var values, column, type, fieldService;\n                    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            values = filter[configuredValues];\n                            column = filter[configuredColumn];\n                            type = filter[configuredType];\n                            fieldService = new fields_1.default(configuration, datasetId, fields);\n                            _context3.t0 = out;\n                            _context3.t1 = column;\n                            _context3.t2 = assignIndicator(values);\n                            _context3.t3 = \"we-filter-\".concat(column, \"-\").concat(index);\n                            _context3.t4 = type;\n                            _context3.t5 = {\n                              values: values,\n                              notNull: true\n                            };\n                            _context3.next = 12;\n                            return fieldService.getFieldInfo(filter, column);\n\n                          case 12:\n                            _context3.t6 = _context3.sent;\n                            _context3.t7 = {\n                              column: _context3.t1,\n                              indicator: _context3.t2,\n                              id: _context3.t3,\n                              dataType: _context3.t4,\n                              filter: _context3.t5,\n                              fieldInfo: _context3.t6\n                            };\n\n                            _context3.t0.push.call(_context3.t0, _context3.t7);\n\n                          case 15:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3);\n                  }));\n                });\n\n              case 6:\n                return _context4.abrupt(\"return\", out);\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n    }\n  }, {\n    key: \"patchFilters\",\n    value: function patchFilters(filters, payload, configuration, datasetId, fields) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        var values, id, type, fieldService, patch;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                values = payload.values, id = payload.id, type = payload.type;\n                fieldService = new fields_1.default(configuration, datasetId, fields);\n                _context5.next = 4;\n                return filters_1.default(filters, fieldService, payload);\n\n              case 4:\n                patch = _context5.sent;\n                return _context5.abrupt(\"return\", patch);\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n    }\n  }]);\n\n  return FiltersService;\n}();\n\nexports.default = FiltersService;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar capitalize_1 = __importDefault(require(\"../helpers/capitalize\"));\n\nvar FieldsService =\n/*#__PURE__*/\nfunction () {\n  function FieldsService(configuration, datasetId, fields) {\n    _classCallCheck(this, FieldsService);\n\n    this.NUMERIC_TYPE = \"number\";\n    this.COLUMN_TYPE = \"string\";\n    this.DATE_TYPE = \"date\";\n    this.configuration = configuration;\n    this.datasetId = datasetId;\n    this.fields = fields;\n  }\n\n  _createClass(FieldsService, [{\n    key: \"query\",\n    value: function query(q) {\n      return fetch(\"https://api.resourcewatch.org/v1/query/\".concat(this.datasetId, \"?\").concat(q)).then(function (response) {\n        if (response.status >= 400) throw new Error(response.statusText);\n        return response.json();\n      }).then(function (jsonData) {\n        return jsonData.data;\n      });\n    }\n  }, {\n    key: \"getTableName\",\n    value: function getTableName() {\n      var valueTableName = this.configuration.value.tableName;\n      var categoryTableName = this.configuration.category.tableName;\n      return valueTableName ? valueTableName : categoryTableName;\n    }\n  }, {\n    key: \"getColumnMinAndMax\",\n    value: function getColumnMinAndMax(field) {\n      var columnName = field.columnName;\n      var tableName = this.getTableName();\n      var query = \"SELECT MIN(\".concat(columnName, \") AS min, MAX(\").concat(columnName, \") AS max FROM \").concat(tableName);\n      return this.query(\"sql=\".concat(query)).then(function (data) {\n        return data ? data[0] : {};\n      });\n    }\n  }, {\n    key: \"getColumnValues\",\n    value: function getColumnValues(field) {\n      var uniq = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var columnName = field.columnName;\n      var tableName = this.getTableName();\n      var uniqQueryPart = uniq ? \"GROUP BY \".concat(columnName) : \"\";\n      var query = \"SELECT \".concat(columnName, \" FROM \").concat(tableName, \" \").concat(uniqQueryPart, \" ORDER BY \").concat(columnName);\n      return this.query(\"sql=\".concat(query)).then(function (data) {\n        return (data || []).map(function (d) {\n          return d[columnName];\n        });\n      });\n    }\n  }, {\n    key: \"getFieldInfo\",\n    value: function getFieldInfo(field, column) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var selectedField, res, _res;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                selectedField = this.fields.find(function (f) {\n                  return f.columnName === column;\n                });\n\n                if (!(selectedField.type === this.NUMERIC_TYPE || selectedField.type === this.DATE_TYPE)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 4;\n                return this.getColumnMinAndMax(selectedField);\n\n              case 4:\n                res = _context.sent;\n                return _context.abrupt(\"return\", res);\n\n              case 6:\n                if (!(selectedField.type === this.COLUMN_TYPE)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                _context.next = 9;\n                return this.getColumnValues(selectedField);\n\n              case 9:\n                _res = _context.sent;\n                return _context.abrupt(\"return\", _res.map(function (r) {\n                  return {\n                    value: r,\n                    label: capitalize_1.default(r)\n                  };\n                }));\n\n              case 11:\n                return _context.abrupt(\"return\", \"\".concat(selectedField.type, \" Not implemented.\"));\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }]);\n\n  return FieldsService;\n}();\n\nexports.default = FieldsService;"],"sourceRoot":""}