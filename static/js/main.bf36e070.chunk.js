(this["webpackJsonp@applications/widget-editor"]=this["webpackJsonp@applications/widget-editor"]||[]).push([[0],{126:function(e,t,n){"use strict";var a=n(262),i=n(26),r=n(27),o=n(6),c=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{l(a.next(e))}catch(t){r(t)}}function c(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((a=a.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(21),u=l(n(263));var d=function(){function e(){i(this,e),this.endpoint="https://api.resourcewatch.org/v1",this.dataEndpoint="https://api.resourcewatch.org/v1/query",this.config=null,this.datasetService=null,this.widgetService=null,this.datasetId=null,this.tableName=null,this.AUTH_TOKEN=null,this.applications=["rw"],this.env="production",this.locale="en",this.widget_params=["chartType","visualizationType","limit","value","category","color","size","orderBy","aggregateFunction","filters","areaIntersection","band","layer"];var t={applications:this.applications,env:this.env,locale:this.locale};this.config=u.default(t),this.datasetService=new s.DatasetService(this.config),this.widgetService=new s.WidgetService(this.config)}return r(e,[{key:"payload",value:function(){return{applications:this.applications,env:this.env}}},{key:"saveWidgetRW",value:function(){return c(this,void 0,void 0,o.mark((function e(){var t,n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(this.endpoint,"/dataset/").concat(this.datasetId,"/widget"),!this.AUTH_TOKEN){e.next=16;break}return e.prev=2,e.next=5,fetch(t,{method:"POST",headers:{Authorization:"Bearer ".concat(this.AUTH_TOKEN)}});case 5:return n=e.sent,e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(2),console.error("Cant save widget",e.t0);case 14:e.next=17;break;case 16:console.error("Missing auth token for saveWidget (RW)");case 17:case"end":return e.stop()}}),e,this,[[2,11]])})))}},{key:"hasAuthToken",value:function(){return!!this.AUTH_TOKEN}},{key:"setDatasetId",value:function(e){e||console.error("Error: datasetId is required"),this.datasetId=e}},{key:"setTableName",value:function(e){e||console.error("Error: datasetId is required"),this.tableName=e}},{key:"getDataset",value:function(){var e,t;return c(this,void 0,void 0,o.mark((function n(){var a,i,r,c,l,s,u;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=this.config.getConfig(),i=a.applications,r=a.env,c=a.locale,"metadata,vocabulary,widget,layer",l="".concat(this.endpoint,"/dataset/").concat(this.datasetId,"?").concat(i.join(","),"&env=").concat(r,"&language=").concat(c,"&includes=").concat("metadata,vocabulary,widget,layer","&page[size]=999"),n.next=5,this.datasetService.fetchData(l);case 5:return s=n.sent,u=s.data,this.tableName=(null===(t=null===(e=u)||void 0===e?void 0:e.attributes)||void 0===t?void 0:t.tableName)||null,n.abrupt("return",u);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getFields",value:function(){return c(this,void 0,void 0,o.mark((function e(){var t,n,a;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.endpoint,"/fields/").concat(this.datasetId),e.next=3,this.datasetService.fetchData(t);case 3:return n=e.sent,a=n.fields,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"getWidget",value:function(e,t){return c(this,void 0,void 0,o.mark((function n(){var a,i,r,c,l,s,u,d;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=this.config.getConfig(),i=a.applications,r=a.env,c=a.locale,"metadata",l=t||this.widgetService.fromDataset(e).id,s="".concat(this.endpoint,"/widget/").concat(l,"?").concat(i.join(","),"&env=").concat(r,"&language=").concat(c,"&includes=").concat("metadata","&page[size]=999"),n.next=6,this.widgetService.fetchWidget(s);case 6:return u=n.sent,d=u.data,n.abrupt("return",d);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getWidgetData",value:function(e,t){return c(this,void 0,void 0,o.mark((function n(){var a,i,r,c;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=this.widgetService.getDataSqlQuery(e,t),i="".concat(this.endpoint,"/query/").concat(this.datasetId,"?sql=").concat(a),n.next=4,this.widgetService.fetchWidgetData(i);case 4:return r=n.sent,c=r.data,n.abrupt("return",c);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"getLayers",value:function(){return c(this,void 0,void 0,o.mark((function e(){var t,n,a,i,r,c;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config.getConfig(),n=t.applications,a=t.env,t.locale,i="".concat(this.endpoint,"/dataset/").concat(this.datasetId,"/layer?app=").concat(n.join(","),"&env=").concat(a,"&page[size]=9999"),e.next=4,this.datasetService.fetchData(i);case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"handleSave",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rw",i=arguments.length>3?arguments[3]:void 0,r=i.configuration,o=i.widget,c=i.filters.list,l=t.dataset,s=l.id,u=l.attributes.tableName;this.setDatasetId(s),this.setTableName(u);var d={};this.widget_params.forEach((function(e){e in r&&(d=Object.assign(Object.assign({},d),a({},e,r[e])))}));var p=o;delete p.data,p.filters=this.filterSerializer(c);var f={name:r.title||null,description:r.description||null,application:n,widgetConfig:p};e(f)}},{key:"filterSerializer",value:function(e){var t=this,n=e.map((function(e){return{value:"FILTER_ON_VALUES"===e.indicator?e.filter.values.map((function(e){return e.value})):e.filter.values,type:e.dataType,name:e.column,datasetID:t.datasetId,tableName:t.tableName,alias:e.column}})),a=["value","type","datasetID","tableName"];return n.filter((function(e){return[].concat(a).filter((function(t){return function(e){return(!Array.isArray(e)||0!==e.length)&&(("string"!==typeof e||0!==e.length)&&null!==e)}(e[t])})).length===a.length}))}},{key:"requestData",value:function(e,t){return c(this,void 0,void 0,o.mark((function n(){var a,i;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.resourcewatch.org/v1/query/".concat(t.id,"?sql=").concat(e));case 2:return a=n.sent,n.next=5,a.json();case 5:return i=n.sent,n.abrupt("return",i);case 7:case"end":return n.stop()}}),n)})))}},{key:"filterUpdate",value:function(e,t,n,a){return c(this,void 0,void 0,o.mark((function i(){var r,c,l,u,d,p;return o.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e&&Array.isArray(e)&&0!==e.length){i.next=2;break}return i.abrupt("return",[]);case 2:return r=n.attributes,c=r.name,l=r.description,u=r.widgetConfig,d=Object.assign(Object.assign({},u.paramsConfig),{title:c,caption:l}),i.next=6,s.FiltersService.handleFilters(e,{column:"name",values:"value",type:"type"},{configuration:d,dataset:a,fields:t,widget:n});case 6:return p=i.sent,i.abrupt("return",p);case 8:case"end":return i.stop()}}),i)})))}}]),e}();t.default=d},136:function(e,t,n){e.exports=n(266)},141:function(e,t,n){},146:function(e,t,n){"use strict";var a=n(6),i=n(26),r=n(27),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{l(a.next(e))}catch(t){r(t)}}function c(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(t){i(this,e),this.config=t}return r(e,[{key:"fetchData",value:function(e){return o(this,void 0,void 0,a.mark((function t(){var n;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:if(!((n=t.sent).status>=400)){t.next=7;break}throw new Error(n.statusText);case 7:return t.next=9,n.json();case 9:return t.abrupt("return",t.sent);case 12:return t.prev=12,t.t0=t.catch(0),console.error("Error loading dataset:",e),t.abrupt("return",{});case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))}}]),e}();t.default=c},148:function(e,t,n){"use strict";var a=n(6),i=n(26),r=n(27),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{l(a.next(e))}catch(t){r(t)}}function c(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var c=n(91),l=function(){function e(t){i(this,e),this.config=t}return r(e,[{key:"fromDataset",value:function(e){return c.find(e.attributes.widget,(function(e){return!!e.attributes.defaultEditableWidget}))}},{key:"getDataSqlQuery",value:function(e,t){return""}},{key:"fetchWidgetData",value:function(e){return o(this,void 0,void 0,a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})))}},{key:"fetchWidget",value:function(e){return o(this,void 0,void 0,a.mark((function t(){var n;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:if(!((n=t.sent).status>=400)){t.next=6;break}throw new Error(n.statusText);case 6:return t.next=8,n.json();case 8:return t.abrupt("return",t.sent);case 11:throw t.prev=11,t.t0=t.catch(0),new Error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))}}]),e}();t.default=l},153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)}},154:function(e,t,n){"use strict";var a=n(6),i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{l(a.next(e))}catch(t){r(t)}}function c(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});t.TYPE_FILTER_ON_VALUES="FILTER_ON_VALUES",t.TYPE_TEXT_CONTAINS="TEXT_CONTAINS",t.TYPE_TEXT_NOT_CONTAINS="TEXT_NOT_CONTAINS",t.TYPE_TEXT_STARTS_WITH="TEXT_STARTS_WITH",t.TYPE_TEXT_ENDS_WITH="TEXT_ENDS_WITH";var r={values:"",type:null,notNull:!1},o={values:[0,100],type:"range",notNull:!0,max:500,min:0},c={values:0,type:"value",notNull:!0,max:500,min:0};function l(e,t){return i(this,void 0,void 0,a.mark((function n(){var i;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=0;case 1:if(!(i<e.length)){n.next=7;break}return n.next=4,t(e[i],i,e);case 4:i++,n.next=1;break;case 7:case"end":return n.stop()}}),n)})))}var s=function(e,t,n){return i(void 0,void 0,void 0,a.mark((function i(){var r,o,c;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.values,t.type,a.next=3,n.getFieldInfo(e,r.value);case 3:return o=a.sent,c="string"!==r.dataType?Object.assign(Object.assign({},e.filter),{values:[o.min,o.max]}):Object.assign(Object.assign({},e.filter),{type:"string",values:[]}),a.abrupt("return",Object.assign(Object.assign({},e),{column:r.value,indicator:"string"===r.dataType?"FILTER_ON_VALUES":"range",dataType:r.dataType,fieldInfo:o,filter:c}));case 6:case"end":return a.stop()}}),i)})))},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Array.isArray(e)?e:[]:null===e?"":Array.isArray(e)?e.map((function(e){return e.label})).join(","):e},d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.fieldInfo&&e.fieldInfo.min?e.fieldInfo.min:0,i=e.fieldInfo&&e.fieldInfo.max?e.fieldInfo.max:0;return t||(n?[a,i]:i)},p=function(e,n){var a=n.values,i=e.filter.values,l=null;if(a.value===t.TYPE_FILTER_ON_VALUES)l=Object.assign(Object.assign({},r),{notNull:!0,values:u(i,!0)});else if(a.value===t.TYPE_TEXT_CONTAINS||a.value===t.TYPE_TEXT_NOT_CONTAINS||a.value===t.TYPE_TEXT_STARTS_WITH||a.value===t.TYPE_TEXT_ENDS_WITH)l=Object.assign(Object.assign({},r),{values:u(i)});else if("range"===a.value)l=Object.assign(Object.assign({},o),{values:d(e,i,!0)});else{if("value"!==a.value)throw new Error("Filters helper patch indicator, type ".concat(a.value," is not a valid indicator."));l=Object.assign(Object.assign({},c),{values:d(e,i)})}return Object.assign(Object.assign({},e),{indicator:a.value,filter:l})},f=function(e,t){var n=t.values;return Object.assign(Object.assign({},e),{filter:Object.assign(Object.assign({},e.filter),{values:n})})},h=function(e,t){var n=t.values;return Object.assign(Object.assign({},e),{filter:Object.assign(Object.assign({},e.filter),{values:n})})},m=function(e){return Object.assign(Object.assign({},e),{filter:Object.assign(Object.assign({},e.filter),{notNull:!e.filter.notNull})})};t.default=function(e,n,r){return i(void 0,void 0,void 0,a.mark((function o(){var c,u,d;return a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(r.values,c=r.id,u=r.type,d=[],"columns"!==u){o.next=7;break}return o.next=5,l(e,(function(e){return i(void 0,void 0,void 0,a.mark((function t(){var i;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.id!==c){t.next=7;break}return t.next=3,s(e,r,n);case 3:i=t.sent,d.push(i),t.next=8;break;case 7:d.push(e);case 8:case"end":return t.stop()}}),t)})))}));case 5:o.next=8;break;case 7:d=e.map((function(e){if(e.id===c){if("indicator"===u)return p(e,r);if("range"===u)return f(e,r);if("value"===u||u===t.TYPE_FILTER_ON_VALUES)return h(e,r);if("NOT_NULL_CHECK"===u)return m(e);throw new Error("Error in filter helper type ".concat(u," not implemented."))}return e}));case 8:return o.abrupt("return",d);case 9:case"end":return o.stop()}}),o)})))}},155:function(e,t,n){"use strict";var a=n(6),i=n(26),r=n(27),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{l(a.next(e))}catch(t){r(t)}}function c(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((a=a.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=c(n(29)),s=c(n(92)),u=n(73),d=function(){function e(t,n,a,r,o){i(this,e),this.adapter=a,this.setEditor=r,this.dispatch=o,this.dataset=null,this.widgetId=n,this.widget=null,this.widgetData=null,this.adapter.setDatasetId(t)}return r(e,[{key:"getDatasetAndWidgets",value:function(){return o(this,void 0,void 0,a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.adapter.getDataset();case 2:return this.dataset=e.sent,e.next=5,this.adapter.getWidget(this.dataset,this.widgetId);case 5:this.widget=e.sent,this.setEditor({dataset:this.dataset,widget:this.widget}),this.dispatch({type:u.sagaEvents.DATA_FLOW_DATASET_WIDGET_READY});case 8:case"end":return e.stop()}}),e,this)})))}},{key:"restoreEditor",value:function(e,t){return o(this,void 0,void 0,a.mark((function n(){return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.setEditor({restoring:!0}),this.widgetId=t,this.adapter.setDatasetId(e),n.next=5,this.getDatasetAndWidgets();case 5:return n.next=7,this.getFieldsAndLayers();case 7:return n.next=9,this.handleFilters();case 9:this.setEditor({restoring:!1});case 10:case"end":return n.stop()}}),n,this)})))}},{key:"handleFilters",value:function(){var e,t,n;return o(this,void 0,void 0,a.mark((function i(){var r,o,c,s,d,p;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=null===(t=null===(e=this.widget.attributes)||void 0===e?void 0:e.widgetConfig)||void 0===t?void 0:t.paramsConfig,o=null===(n=r)||void 0===n?void 0:n.filters,c=null,s=null,!(o&&Array.isArray(o)&&o.length>0)){a.next=12;break}return d=o.filter((function(e){return!!e.operation})),l.default(r.orderBy)&&(c=r.orderBy),l.default(r.color)&&(s=r.color),a.next=10,this.adapter.filterUpdate(d,this.allowedFields,this.widget,this.dataset);case 10:p=a.sent,this.dispatch({type:u.reduxActions.EDITOR_SET_FILTERS,payload:{color:s,orderBy:c,list:p}});case 12:case"end":return a.stop()}}),i,this)})))}},{key:"isFieldAllowed",value:function(e){var t=u.ALLOWED_FIELD_TYPES.find((function(t){return t.name.toLowerCase()===e.type.toLowerCase()}));return!("cartodb_id"===e.columnName)&&t}},{key:"getFieldsAndLayers",value:function(){var e,t,n,i;return o(this,void 0,void 0,a.mark((function r(){var o,c,l,s=this;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.adapter.getFields();case 2:return o=a.sent,a.next=5,this.adapter.getLayers();case 5:c=a.sent,l=null===(i=null===(n=null===(t=null===(e=this.dataset)||void 0===e?void 0:e.attributes)||void 0===t?void 0:t.metadata[0])||void 0===n?void 0:n.attributes)||void 0===i?void 0:i.columns,this.allowedFields=[],o&&Object.keys(o).length>0&&Object.keys(o).forEach((function(e){if(l&&e in l){var t=Object.assign(Object.assign({},o[e]),{columnName:e,metadata:l[e]});s.isFieldAllowed(t)&&s.allowedFields.push(t)}})),this.dispatch({type:u.sagaEvents.DATA_FLOW_FIELDS_AND_LAYERS_READY}),this.setEditor({layers:c,fields:this.allowedFields});case 11:case"end":return a.stop()}}),r,this)})))}},{key:"requestWithFilters",value:function(e,t){return o(this,void 0,void 0,a.mark((function n(){var i,r;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.adapter.filterSerializer(e),i=new s.default(Object.assign({},t),e,this.dataset),n.next=4,this.adapter.requestData(i.getQuery(),this.dataset);case 4:!(r=n.sent).data||"errors"in r?this.setEditor({errors:["WIDGET_DATA_UNAVAILABLE"]}):(this.setEditor({widgetData:r.data}),this.dispatch({type:u.sagaEvents.DATA_FLOW_WIDGET_DATA_READY}));case 6:case"end":return n.stop()}}),n,this)})))}},{key:"resolveInitialState",value:function(){return o(this,void 0,void 0,a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDatasetAndWidgets();case 2:return e.next=4,this.getFieldsAndLayers();case 4:return e.next=6,this.handleFilters();case 6:this.setEditor({initialized:!0});case 7:case"end":return e.stop()}}),e,this)})))}}]),e}();t.default=d},156:function(e,t,n){"use strict";var a=n(26),i=n(27),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(157)),c=r(n(158)),l=r(n(159)),s=r(n(160)),u=r(n(161)),d=n(162),p=n(43),f=function(){function e(t,n,i,r){a(this,e),this.scheme=r.schemes.find((function(e){return e.name===r.selectedScheme})),this.schema=p.defaultVegaSchema(),this.widgetConfig=t,this.widgetData=n,this.configuration=i,this.setConfig(),this.resolveChart()}return i(e,[{key:"groupSimilar",value:function(e){var t={};e.forEach((function(e){e.x in t?t[e.x]=Object.assign(Object.assign({},t[e.x]),{y:t[e.x].y+e.y}):t[e.x]=Object.assign({},e)}));var n=[];return Object.keys(t).forEach((function(e){n.push(t[e])})),n}},{key:"groupByTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=this.groupSimilar(e),a=n.sort((function(e,t){return e.y-t.y})),i=a.slice(0,t),r=a.slice(t,a.length+1),o=[],c={x:"Others",y:0};return r.forEach((function(e){c=Object.assign(Object.assign({},c),{y:c.y+e.y})})),i.forEach((function(e){o.push({x:e.x,y:e.y})})),[].concat(o,[c])}},{key:"groupByColor",value:function(e){var t={};e.forEach((function(e){e.color&&(e.color in t?t[e.color]=Object.assign(Object.assign({},n[e.color]),{y:n[e.color].y+e.y}):t[e.color]=e)}));var n=[];return Object.keys(t).forEach((function(e){n.push(t[e])})),n}},{key:"resolveDataFormat",value:function(){var e=this.configuration,t=e.chartType,n=(e.direction,e.color);return"pie"===t?this.groupByTop(this.widgetData):n?this.groupByColor(this.widgetData):this.groupSimilar(this.widgetData)}},{key:"resolveChart",value:function(){var e,t=this.configuration,n=t.chartType,a=t.direction,i=(t.color,this.resolveDataFormat());if(-1===d.SUPPORTED_CHARTS.indexOf(n))throw new Error("Chart of type: ".concat(n," is not supported. we support: (").concat(d.SUPPORTED_CHARTS.join("|"),")"));"pie"===n&&(e=new o.default(this.schema,this.widgetConfig,i,this.scheme).getChart()),"bar"===n&&(e="horizontal"===a?new c.default(this.schema,this.widgetConfig,i,this.scheme).getChart():new l.default(this.schema,this.widgetConfig,i,this.scheme).getChart()),"line"===n&&(e=new s.default(this.schema,this.widgetConfig,i,this.scheme).getChart()),"scatter"===n&&(e=new u.default(this.schema,this.widgetConfig,i,this.scheme).getChart()),this.schema=Object.assign(Object.assign({},this.schema),e)}},{key:"setConfig",value:function(){this.schema=Object.assign(Object.assign({},this.schema),{config:Object.assign(Object.assign({},this.schema.config),this.widgetConfig.config)})}},{key:"getChart",value:function(){return this.schema}}]),e}();t.default=f},157:function(e,t,n){"use strict";var a=n(26),i=n(27);Object.defineProperty(t,"__esModule",{value:!0});var r=n(43),o=function(){function e(t,n,i,r){a(this,e),this.schema=t,this.scheme=r,this.widgetConfig=n,this.widgetData=i,this.generateSchema(),this.setGenericSettings()}return i(e,[{key:"generateSchema",value:function(){this.schema=Object.assign(Object.assign({},this.schema),{scales:this.setScales(),marks:this.setMarks(),data:this.bindData(),interaction_config:this.interactionConfig()})}},{key:"setGenericSettings",value:function(){this.schema=Object.assign(Object.assign({},this.schema),{width:400,height:400})}},{key:"interactionConfig",value:function(){return[{name:"tooltip",config:{fields:[{column:"y",property:"y",type:"number",format:".2s"},{column:"x",property:"x",type:"string",format:".2f"}]}}]}},{key:"setScales",value:function(){return[{name:"c",type:"ordinal",domain:{data:"table",field:r.sqlFields.value},range:this.scheme?this.scheme.category:"category20"}]}},{key:"setMarks",value:function(){return[{type:"arc",from:{data:"table"},encode:{enter:{tooltip:{signal:"{'Label': datum.x, 'Value': datum.y }"},fill:{scale:"c",field:r.sqlFields.value},x:{signal:"width / 2"},y:{signal:"height / 2"}},update:{startAngle:{field:"startAngle"},endAngle:{field:"endAngle"},innerRadius:{signal:"width > height ? height / 3 : width / 3"},outerRadius:{signal:"width > height ? height / 2 : width / 2"}},hover:{opacity:{value:.8}}}}]}},{key:"bindData",value:function(){return[{values:this.widgetData,name:"table",transform:[{type:"pie",field:r.sqlFields.category,startAngle:0,endAngle:6.29}]}]}},{key:"getChart",value:function(){return this.schema}}]),e}();t.default=o},158:function(e,t,n){"use strict";var a=n(26),i=n(27);Object.defineProperty(t,"__esModule",{value:!0});var r=n(43),o=function(){function e(t,n,i,r){a(this,e),this.schema=t,this.widgetConfig=n,this.widgetData=i,this.scheme=r,this.generateSchema(),this.setGenericSettings()}return i(e,[{key:"generateSchema",value:function(){this.schema=Object.assign(Object.assign({},this.schema),{axes:this.setAxes(),scales:this.setScales(),marks:this.setMarks(),data:this.bindData(),interaction_config:this.interactionConfig(),config:Object.assign(Object.assign({},this.scheme.config),{rect:{fill:this.scheme?this.scheme.mainColor:this.schema.config.rect.fill}})})}},{key:"setGenericSettings",value:function(){this.schema=Object.assign(Object.assign({},this.schema),{height:400,autosize:{type:"fit",contains:"padding"},padding:20})}},{key:"setScales",value:function(){return[{name:"x",type:"band",domain:{data:"table",field:"id"},range:"width",padding:.05},{name:"y",type:"linear",domain:{data:"table",field:r.sqlFields.category},nice:!0,zero:!0,range:"height"}]}},{key:"setMarks",value:function(){return[{type:"rect",from:{data:"table"},encode:{enter:{tooltip:{signal:"{'Label': datum.x, 'Value': datum.y }"}},update:{opacity:{value:1},x:{scale:"x",field:"id"},width:{scale:"x",band:1},y:{scale:"y",field:"y"},y2:{scale:"y",value:0}},hover:{opacity:{value:.8}}}}]}},{key:"interactionConfig",value:function(){return[{name:"tooltip",config:{fields:[{column:"y",property:"y",type:"number",format:".2s"},{column:"x",property:"x",type:"string",format:".2f"}]}}]}},{key:"setAxes",value:function(){return[Object.assign(Object.assign(Object.assign({},this.schema.axis),this.schema.axisX),{orient:"bottom",scale:"x",labelOverlap:"parity",ticks:!1,encode:{labels:{update:{text:{signal:"width < 300 || data('table')[0].count > 10 ? truncate(data('table')[datum.value - 1].x, 12) : data('table')[datum.value - 1].x"},align:{signal:"width < 300 || data('table')[0].count > 10 ? 'right' : 'center'"},baseline:{signal:"width < 300 || data('table')[0].count > 10 ? 'middle' : 'top'"},angle:{signal:"width < 300 || data('table')[0].count > 10 ? -90 : 0"}}}}}),Object.assign(Object.assign(Object.assign({},this.schema.axis),this.schema.axisY),{orient:"left",scale:"y",labelOverlap:"parity",format:"s",encode:{labels:{update:{align:{value:"right"},baseline:{value:"bottom"}}}}})]}},{key:"bindData",value:function(){return[{values:this.widgetData,name:"table",transform:[{type:"identifier",as:"id"},{type:"joinaggregate",as:["count"]}]}]}},{key:"getChart",value:function(){return this.schema}}]),e}();t.default=o},159:function(e,t,n){"use strict";var a=n(26),i=n(27);Object.defineProperty(t,"__esModule",{value:!0});var r=n(43),o=function(){function e(t,n,i,r){a(this,e),this.schema=t,this.widgetConfig=n,this.widgetData=i,this.scheme=r,this.generateSchema(),this.setGenericSettings()}return i(e,[{key:"generateSchema",value:function(){this.schema=Object.assign(Object.assign({},this.schema),{axes:this.setAxes(),scales:this.setScales(),marks:this.setMarks(),data:this.bindData(),interaction_config:this.interactionConfig(),config:Object.assign(Object.assign({},this.scheme.config),{rect:{fill:this.scheme?this.scheme.mainColor:this.schema.config.rect.fill}})})}},{key:"setGenericSettings",value:function(){this.schema=Object.assign(Object.assign({},this.schema),{height:400,autosize:{type:"fit",contains:"padding"},padding:20})}},{key:"setScales",value:function(){return[{name:"x",type:"linear",domain:{data:"table",field:r.sqlFields.category},range:"width"},{name:"y",type:"band",domain:{data:"table",field:"x"},range:"height",padding:.05}]}},{key:"setAxes",value:function(){return[Object.assign(Object.assign(Object.assign({},this.schema.axis),this.schema.axisX),{orient:"bottom",scale:"x",grid:!0,labelOverlap:"parity"}),Object.assign(Object.assign(Object.assign({},this.schema.axis),this.schema.axisY),{orient:"left",scale:"y",labelOverlap:"parity",ticks:!1,grid:!1,encode:{labels:{update:{text:{signal:"truncate(datum.value, 12)"},align:{signal:"width < 300 || data('table')[0].count > 10 ? 'right' : 'center'"},baseline:{signal:"width < 300 || data('table')[0].count > 10 ? 'middle' : 'top'"}}}}})]}},{key:"setMarks",value:function(){return[{type:"rect",from:{data:"table"},encode:{enter:{tooltip:{signal:"{'Label': datum.x, 'Value': datum.y }"}},update:{opacity:{value:1},x:{scale:"x",value:0},x2:{scale:"x",field:r.sqlFields.category},y:{scale:"y",field:"x"},height:{scale:"y",band:1}},hover:{opacity:{value:.8}}}}]}},{key:"interactionConfig",value:function(){return[{name:"tooltip",config:{fields:[{column:"y",property:"y",type:"number",format:".2s"},{column:"x",property:"x",type:"string",format:".2f"}]}}]}},{key:"bindData",value:function(){return[{values:this.widgetData,name:"table",transform:[{type:"identifier",as:"id"},{type:"joinaggregate",as:["count"]}]}]}},{key:"getChart",value:function(){return this.schema}}]),e}();t.default=o},160:function(e,t,n){"use strict";var a=n(26),i=n(27);Object.defineProperty(t,"__esModule",{value:!0});var r=n(43),o=function(){function e(t,n,i,r){a(this,e),this.schema=t,this.widgetConfig=n,this.widgetData=i,this.scheme=r,this.generateSchema(),this.setGenericSettings()}return i(e,[{key:"generateSchema",value:function(){this.schema=Object.assign(Object.assign({},this.schema),{axes:this.setAxes(),scales:this.setScales(),marks:this.setMarks(),data:this.bindData(),interaction_config:this.interactionConfig(),config:Object.assign(Object.assign({},this.schema.config),{line:Object.assign(Object.assign({},this.schema.config.line),{stroke:this.scheme?this.scheme.mainColor:this.schema.config.line.stroke}),symbol:Object.assign(Object.assign({},this.schema.config.symbol),{fill:this.scheme?this.scheme.mainColor:this.schema.config.symbol.fill})}),signals:[{name:"hover",value:null,on:[{events:"@cell:mouseover",update:"datum"},{events:"@cell:mouseout",update:"null"}]}]})}},{key:"setGenericSettings",value:function(){this.schema=Object.assign(Object.assign({},this.schema),{height:400,autosize:{type:"fit",contains:"padding"},padding:20})}},{key:"interactionConfig",value:function(){return[{name:"tooltip",config:{fields:[{column:"y",property:"y",type:"number",format:".2s"},{column:"x",property:"x",type:"string"}]}}]}},{key:"setScales",value:function(){return[{name:"x",type:"point",range:"width",domain:{data:"table",field:"x"}},{name:"y",type:"linear",range:"height",nice:!0,zero:!0,domain:{data:"table",field:r.sqlFields.category}}]}},{key:"setMarks",value:function(){return[{name:"lines",interactive:!1,type:"line",from:{data:"table"},encode:{enter:{x:{scale:"x",field:"x"},y:{scale:"y",field:"y"},strokeCap:{value:"round"},strokeWidth:{value:2},strokeJoin:{value:"round"}}}},{name:"points",interactive:!1,type:"symbol",from:{data:"dots"},encode:{enter:{x:{scale:"x",field:"x"},y:{scale:"y",field:"y"}},update:{opacity:{value:1}}}},{name:"cell",type:"path",from:{data:"lines"},transform:[{type:"voronoi",x:"datum.x",y:"datum.y",size:[{signal:"width"},{signal:"height"}]}],encode:{enter:{tooltip:{signal:"{'Value': datum.x }"}},update:{path:{field:"path"},fill:{value:"red"},opacity:{value:0}}}}]}},{key:"setAxes",value:function(){return[Object.assign(Object.assign(Object.assign({},this.schema.axis),this.schema.axisX),{orient:"bottom",scale:"x",labelOverlap:"parity",ticks:!1}),Object.assign(Object.assign(Object.assign({},this.schema.axis),this.schema.axisY),{orient:"left",scale:"y",labelOverlap:"parity",format:"s",encode:{labels:{update:{align:{value:"right"},baseline:{value:"bottom"}}}}})]}},{key:"bindData",value:function(){return[{values:this.widgetData,name:"table",transform:[{type:"identifier",as:"id"},{type:"joinaggregate",as:["count"]}]},{name:"dots",source:"table",transform:[{type:"filter",expr:"hover && hover.datum.x === datum.x"}]}]}},{key:"getChart",value:function(){return this.schema}}]),e}();t.default=o},161:function(e,t,n){"use strict";var a=n(26),i=n(27);Object.defineProperty(t,"__esModule",{value:!0});var r=n(43),o=function(){function e(t,n,i){a(this,e),this.schema=t,this.widgetConfig=n,this.widgetData=i,this.generateSchema(),this.setGenericSettings()}return i(e,[{key:"generateSchema",value:function(){this.schema=Object.assign(Object.assign({},this.schema),{axes:this.setAxes(),scales:this.setScales(),marks:this.setMarks(),data:this.bindData()})}},{key:"setGenericSettings",value:function(){this.schema=Object.assign(Object.assign({},this.schema),{height:300,autosize:{type:"fit",contains:"padding"},padding:20})}},{key:"setScales",value:function(){return[{name:"xscale",type:"linear",round:!0,nice:!0,zero:!1,domain:{data:"table",field:r.sqlFields.value},range:"width"},{name:"yscale",type:"linear",round:!0,nice:!0,zero:!0,domain:{data:"table",field:r.sqlFields.category},range:"height"}]}},{key:"setMarks",value:function(){return[{name:"marks",type:"symbol",from:{data:"table"},encode:{update:{x:{scale:"xscale",field:"x"},y:{scale:"yscale",field:"y"},strokeOpacity:{value:0},zindex:{value:0},opacity:{value:.5}},hover:{strokeOpacity:{value:1},zindex:{value:1},opacity:{value:1}}}}]}},{key:"setAxes",value:function(){return[{scale:"xscale",labelOverlap:"parity",orient:"bottom",encode:{labels:{update:{align:{value:"center"},baseline:{value:"top"}}}}},{scale:"yscale",labelOverlap:"parity",orient:"left",format:"s"}]}},{key:"bindData",value:function(){return[{values:this.widgetData,name:"table"}]}},{key:"getChart",value:function(){return this.schema}}]),e}();t.default=o},162:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUPPORTED_CHARTS=["pie","bar","line","scatter"],t.default={SUPPORTED_CHARTS:t.SUPPORTED_CHARTS}},163:function(e,t,n){"use strict";var a=n(6),i=n(26),r=n(27),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{l(a.next(e))}catch(t){r(t)}}function c(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((a=a.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(73),s=c(n(33)),u=function(){function e(){i(this,e),this.chartCache={chartType:null,direction:null},this.configuration={value:null,category:null,orderBy:null,color:null,aggregateFunction:null,filters:null,areaIntersection:null,band:null,layer:null,limit:null}}return r(e,[{key:"cacheChart",value:function(e){var t=e.configuration,n=t.chartType,a=void 0===n?null:n,i=t.direction,r=void 0===i?null:i;this.chartCache={chartType:a,direction:r}}},{key:"chartHasUpdate",value:function(e){var t=e.editor,n=e.configuration,a=n.chartType,i=n.direction,r=!s.default(this.chartCache,{chartType:a,direction:i});return this.chartCache={chartType:a,direction:i},r&&t.initialized}},{key:"configurationHasUpdate",value:function(e){var t=e.editor,n=e.configuration,a={value:n.value,category:n.category,orderBy:n.orderBy,color:n.color,aggregateFunction:n.aggregateFunction,filters:n.filters,areaIntersection:n.areaIntersection,band:n.band,layer:n.layer,limit:n.limit},i=!s.default(this.configuration,a);return this.configuration=a,i&&t.initialized}},{key:"sync",value:function(e){return o(this,void 0,void 0,a.mark((function t(){var n;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],this.chartHasUpdate(e)&&n.push(l.sagaEvents.DATA_FLOW_UPDATE_WIDGET),this.configurationHasUpdate(e)&&n.push(l.sagaEvents.DATA_FLOW_CONFIGURATION_UPDATE),t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)})))}}]),e}();t.default=u},21:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(146));t.DatasetService=i.default;var r=a(n(148));t.WidgetService=r.default;var o=a(n(92));t.FiltersService=o.default;var c=a(n(155));t.DataService=c.default;var l=a(n(156));t.VegaService=l.default;var s=a(n(95));t.FieldsService=s.default;var u=a(n(163));t.StateProxy=u.default;var d=a(n(73));t.constants=d.default},263:function(e,t,n){"use strict";var a=n(26),i=n(27);Object.defineProperty(t,"__esModule",{value:!0});var r=n(91),o=function(){function e(t){a(this,e),this.setConfig(t)}return i(e,[{key:"setConfig",value:function(e){var t=r.pick(e,["url","env","applications","authUrl","assetsPath","userToken","userEmail","locale"]);this.config=Object.assign(Object.assign({},this.config),t)}},{key:"getConfig",value:function(){return this.config}}]),e}();t.default=function(e){return new o(e)}},264:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setEditor",(function(){return L})),n.d(a,"default",(function(){return M}));var i={};n.r(i),n.d(i,"setTheme",(function(){return W})),n.d(i,"setScheme",(function(){return q})),n.d(i,"default",(function(){return U}));var r={};n.r(r),n.d(r,"setConfiguration",(function(){return ee})),n.d(r,"patchConfiguration",(function(){return te})),n.d(r,"saveConfiguration",(function(){return ne})),n.d(r,"default",(function(){return ae}));var o={};n.r(o),n.d(o,"setFilters",(function(){return Te})),n.d(o,"default",(function(){return De}));var c={};n.r(c),n.d(c,"default",(function(){return Xa}));var l={};n.r(l),n.d(l,"actions",(function(){return a})),n.d(l,"initialState",(function(){return Ka})),n.d(l,"reducers",(function(){return c}));var s={};n.r(s),n.d(s,"default",(function(){return Qa}));var u={};n.r(u),n.d(u,"actions",(function(){return i})),n.d(u,"initialState",(function(){return Za})),n.d(u,"reducers",(function(){return s}));var d={};n.r(d),n.d(d,"setWidget",(function(){return Ja})),n.d(d,"default",(function(){return $a}));var p={};n.r(p),n.d(p,"default",(function(){return ei}));var f={};n.r(f),n.d(f,"actions",(function(){return d})),n.d(f,"initialState",(function(){return ti})),n.d(f,"reducers",(function(){return p}));var h={};n.r(h),n.d(h,"default",(function(){return ni}));var m={};n.r(m),n.d(m,"actions",(function(){return r})),n.d(m,"initialState",(function(){return ai})),n.d(m,"reducers",(function(){return h}));var g={};n.r(g),n.d(g,"default",(function(){return ii}));var v={};n.r(v),n.d(v,"actions",(function(){return o})),n.d(v,"initialState",(function(){return ri})),n.d(v,"reducers",(function(){return g}));var b={};n.r(b),n.d(b,"modifyOptions",(function(){return Pi})),n.d(b,"default",(function(){return Bi}));var y={};n.r(y),n.d(y,"default",(function(){return zi}));var x={};n.r(x),n.d(x,"actions",(function(){return b})),n.d(x,"initialState",(function(){return Ri})),n.d(x,"reducers",(function(){return y}));var E=n(1),w=n.n(E),O=n(28),_=n.n(O),C=(n(141),n(36)),k=n(9),S=n(32),A=n(115),j=n(11),T=n(10),D=n(14),I=n(15),N=n(16),F=n(30),P=n(21),B=function(e,t){return Object(C.b)((function(t){return"function"===typeof e?e(t[P.constants.APP_NAMESPACE]):{}}),t)},z=function(e){return Object(F.createAction)("".concat(P.constants.APP_NAMESPACE,"/").concat(e))},R=function(e){return"".concat(P.constants.APP_NAMESPACE,"/").concat(e)},L=z("EDITOR/setEditor"),M={setEditor:L},W=z("EDITOR/THEME/setTheme"),q=z("EDITOR/THEME/setScheme"),U={setTheme:W,setScheme:q},V=n(3),G=n(33),Y=n.n(G),H=n(45),X=n.n(H),K=n(89),Q=n(127),Z=n(4),J=n(117),$=n.n(J),ee=z("CONFIGURATION/setConfiguration"),te=z("CONFIGURATION/patchConfiguration"),ne=z("CONFIGURATION/saveConfiguration"),ae={saveConfiguration:ne,setConfiguration:ee,patchConfiguration:te},ie=n(49),re=function(e){return e.editor.dataset},oe=(Object(ie.a)([function(e){return e.configuration},re],(function(e,t){if(!t||!t.id||!t.attributes||!t.attributes.metadata)return null;var n=t.attributes.metadata[0].attributes.columns[e.value.name];return Object(k.a)({},n,{identifier:e.value.name})})),Object(ie.a)([re],(function(e){return e&&e.id&&e.attributes&&e.attributes.widgetRelevantProps?e.attributes.widgetRelevantProps.map((function(t){return Object(k.a)({},e.attributes.metadata[0].attributes.columns[t],{identifier:t,name:t})})):[]}))),ce=n(25),le=n(24),se=function(){return w.a.createElement("svg",{width:"10px",height:"10px",viewBox:"0 0 10 10",version:"1.1"},w.a.createElement("g",{id:"Iteration",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},w.a.createElement("g",{id:"xAxis-Selector",transform:"translate(-183.000000, -311.000000)",fill:"#2C75B0"},w.a.createElement("g",{id:"Rectangle-409-+-364-+-MWh-Copy",transform:"translate(163.000000, 289.000000)"},w.a.createElement("g",{id:"Group-20",transform:"translate(19.000000, 10.000000)"},w.a.createElement("path",{d:"M4.5,12 L11,18.5 L7.5,22 L1,15.5 L1,12 L4.5,12 Z M3.5,13.5 C2.94771525,13.5 2.5,13.9477153 2.5,14.5 C2.5,15.0522847 2.94771525,15.5 3.5,15.5 C4.05228475,15.5 4.5,15.0522847 4.5,14.5 C4.5,13.9477153 4.05228475,13.5 3.5,13.5 Z",id:"item-category"}))))))},ue=Z.c.div.withConfig({displayName:"style__StyledPopupContainer",componentId:"eg9uyn-0"})(["*{box-sizing:border-box;}position:absolute;box-sizing:border-box;height:auto;min-width:200px;max-width:400px;z-index:2;bottom:40px;left:50%;margin-left:-100px;",""],(function(e){return"vertical"===e.align&&Object(Z.b)(["padding-left:20px;left:75px;bottom:initial;top:-30px;margin-left:initial;"])})),de=Z.c.div.withConfig({displayName:"style__StyledPopupInsideContainer",componentId:"eg9uyn-1"})(["padding:20px;max-height:200px;overflow-y:auto;border:1px solid rgba(26,28,34,0.1);border-radius:4px;background-color:#ffffff;box-shadow:0 20px 30px 0 rgba(0,0,0,0.1);cursor:initial;",'::-webkit-scrollbar{width:7px;}::-webkit-scrollbar-track{box-shadow:inset 0 0 2px grey;border-radius:10px;background:rgba(0,0,0,0.05);}::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.3);border-radius:10px;}::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.4);}&:after{content:"";position:absolute;left:calc(50% - 5px);bottom:-20px;border:12px solid transparent;border-top:12px solid #ffffff;z-index:3;',"}"],(function(e){return"vertical"===e.align&&Object(Z.b)(["box-shadow:-10px -10px 30px 0 rgba(0,0,0,0.15);"])}),(function(e){return"vertical"===e.align&&Object(Z.b)(["transform:rotate(90deg);left:0;top:5px;bottom:initial;"])})),pe=Z.c.h4.withConfig({displayName:"style__StyledCategoryAlias",componentId:"eg9uyn-2"})(["position:relative;padding-left:20px;margin-top:0;color:",";"," font-size:16px;line-height:25px;cursor:pointer;&:hover{color:#c32d7b;}"],(function(e){return e.active?"#2C75B0":"#393F44"}),(function(e){return e.nonSelectedCategory&&Object(Z.b)(["margin-bottom:5px;"])})),fe=(Z.c.div.withConfig({displayName:"style__StyledCategoryDescription",componentId:"eg9uyn-3"})(["position:relative;padding-left:20px;margin-top:10px;margin-bottom:10px;color:#393f44;font-size:16px;line-height:25px;"]),Z.c.div.withConfig({displayName:"style__StyledValueAlias",componentId:"eg9uyn-4"})(["position:relative;padding-left:20px;margin-top:10px;margin-bottom:10px;color:#393f44;font-size:16px;line-height:25px;min-height:25px;white-space:nowrap;max-width:200px;overflow:hidden;text-overflow:ellipsis;"])),he=Z.c.p.withConfig({displayName:"style__StyledDescription",componentId:"eg9uyn-5"})(["min-width:240px;font-size:16px;color:#717171;font-style:italic;padding-left:20px;"]),me=Z.c.div.withConfig({displayName:"style__StyledCategoryInfoContainer",componentId:"eg9uyn-6"})(["display:flex;flex-flow:row;justify-content:space-between;align-items:center;"]),ge=Z.c.div.withConfig({displayName:"style__IconBox",componentId:"eg9uyn-7"})(["color:#393f44;position:absolute;left:0;top:1px;"]);function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var be=function(e){var t=e.options,n=e.getValue,a=e.setValue,i=e.innerRef,r=e.innerProps,o=e.selectProps,c=n()[0],l=o.align,s=void 0===l?"horizontal":l;return w.a.createElement(ue,ve({align:s,ref:i},r),w.a.createElement(de,{align:s},t.map((function(e){return w.a.createElement(E.Fragment,{key:e.name},w.a.createElement(pe,{nonSelectedCategory:"___single_color"===e.identifier,active:e.name===c.name,onClick:function(){return a(e)}},w.a.createElement(ge,null,w.a.createElement(se,null)),"___single_color"===e.identifier?"Single color":e.identifier),"___single_color"!==e.identifier&&w.a.createElement(me,null,w.a.createElement(fe,null,w.a.createElement(ge,null,"#"),e.alias||e.name),e.description&&w.a.createElement(he,null,e.description)))}))))},ye=Z.c.div.withConfig({displayName:"style__StyledSelectBox",componentId:"sc-1braopw-0"})(["width:100%;max-width:300px;margin:0 auto;"," ",""],(function(e){return!e.relative&&Object(Z.b)(["position:absolute;bottom:-30px;left:calc(50% - 150px);"])}),(function(e){return"vertical"===e.align&&Object(Z.b)(["bottom:0;left:0;max-width:60px;height:100%;display:flex;align-items:center;justify-content:center;"])})),xe=(Z.c.div.withConfig({displayName:"style__StyledOverflow",componentId:"sc-1braopw-1"})(["position:absolute;width:100%;height:100%;top:0;left:0;background-color:rgba(0,0,0,0.1);z-index:10;"]),{control:function(){return{display:"flex",border:"1px solid rgba(202,204,208,0.85)",borderRadius:"4px",padding:"3px 0"}}}),Ee={container:function(){return{position:"relative",boxSizing:"border-box",cursor:"pointer"}},indicatorSeparator:function(){return{display:"none"}},dropdownIndicator:function(e,t){var n=t.selectProps,a=n.menuIsOpen,i=n.align;return{color:"#c32d7b",transform:a&&"horizontal"===i?"rotate(180deg)":"none",transition:"all 0.2s ease-out"}},indicatorsContainer:function(){return{color:"#c32d7b",display:"flex",padding:"8px",transition:"color 150ms",boxSizing:"border-box",position:"relative",top:"5px"}},control:function(e,t){var n="vertical"===t.selectProps.align?{transform:"rotate(-90deg)"}:null;return Object(k.a)({margin:"0 auto",display:"flex",border:"none",minWidth:"90px",borderRadius:"4px",maxWidth:"210px",padding:"3px 0"},n)},menu:function(e,t){var n="vertical"===t.selectProps.align?{position:"absolute",left:"100px",top:"-50px",bottom:"auto",width:"300px"}:null;return Object(k.a)({},e,{},n)}};function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Oe=function(e){var t=e.isCustom,n=void 0!==t&&t,a=(e.isPopup,e.relative),i=void 0!==a&&a,r=(e.configuration,e.align),o=void 0===r?"horizontal":r,c=e.onChange,l=void 0===c?function(){}:c,s=Object(ce.a)(e,["isCustom","isPopup","relative","configuration","align","onChange"]);return w.a.createElement(E.Fragment,null,w.a.createElement(ye,{align:o,relative:i},w.a.createElement(le.a,we({align:o,onChange:function(e){l(e)},styles:n?Ee:xe,components:n?{Menu:be}:null},s))))},_e=function(e){var t=e.columns,n=e.configuration,a=e.patchConfiguration,i=n.title,r=n.category_title,o=n.category,c=o.alias,l=o.name,s=n.value,u=s.alias,d=s.name,p={alias:c||r||d,name:l},f={alias:u||i||d,name:d};return w.a.createElement(E.Fragment,null,w.a.createElement(Oe,{align:"vertical",menuPlacement:"top",defaultValue:p,onChange:function(e){a({category:Object(k.a)({},n.category,{},e)})},getOptionLabel:function(e){return e.alias},getOptionValue:function(e){return e.identifier},options:t,configuration:n,isCustom:!0,isPopup:!0}),w.a.createElement(Oe,{align:"horizontal",menuPlacement:"top",defaultValue:f,onChange:function(e){a({value:Object(k.a)({},n.value,{},e)})},getOptionLabel:function(e){return e.alias},getOptionValue:function(e){return e.identifier},options:t,configuration:n,isCustom:!0,isPopup:!0}))},Ce=B((function(e){return{theme:e.theme,configuration:e.configuration,columns:oe(e)}}),{patchConfiguration:te})(_e),ke=Z.c.div.withConfig({displayName:"component__StyledContainer",componentId:"p6fymh-0"})(["display:flex;position:relative;width:100%;.c-chart{flex:1;text-align:center;overflow:hidden;margin:20px;max-height:400px;align-self:center;}"]),Se=function(e,t){var n=function(e){if(!e||!e.interaction_config||!e.interaction_config.length)return[];var t=e.interaction_config.find((function(e){return"tooltip"===e.name}));return t&&t.config&&t.config.fields&&t.config.fields.length?t.config.fields:[]}(t);Object(Q.a)(e,{showAllFields:!1,fields:n.map((function(e){var t=e.column,n=e.property,a=e.type;return{field:t,title:n,formatType:"date"===a?"time":a,format:e.format}}))})},Ae=function(e){var t=e.editor,n=e.widget,a=Object(E.useRef)(),i=Object(E.useRef)(),r=Object(E.useRef)();return Object(E.useEffect)((function(){if(a.current&&!$()(n)&&!Y()(n,r)){var e=K.b(n),t=a.current.offsetWidth;i.current=new K.a(e).initialize(a.current).renderer("canvas").width(t-40).hover().run(),r.current=n,i.current&&n.interaction_config&&n.interaction_config.length&&Se(i.current,n),i.current.resize=function(){if(a&&a.current){var e=a.current.offsetWidth;i.current.width(e-40).run(),Se(i.current,n)}},window.addEventListener("resize",i.current.resize)}}),[a,t,n]),w.a.createElement(ke,null,w.a.createElement("div",{className:"c-chart",ref:a}),w.a.createElement(Ce,null))},je=B((function(e){return{editor:e.editor,widget:e.widget}}))(Ae),Te=z("EDITOR/setFilters"),De={setFilters:Te},Ie=n(23),Ne=(n(225),n(29)),Fe=n.n(Ne),Pe=n(40);function Be(){var e=Object(Pe.a)(["\n      background: ",";\n    "]);return Be=function(){return e},e}function ze(){var e=Object(Pe.a)(["\n      float: left;\n      width: 110px;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      margin: 5px;\n      padding-left: 20px;\n      position: relative;\n      > span {\n        position: absolute;\n        left: 0;\n      }\n    "]);return ze=function(){return e},e}function Re(){var e=Object(Pe.a)(["\n      max-height: 70px;\n      overflow-y: scroll;\n    "]);return Re=function(){return e},e}function Le(){var e=Object(Pe.a)(["\n      align-items: center;\n      display: flex;\n    "]);return Le=function(){return e},e}var Me=Z.c.div.withConfig({displayName:"style__StyledDropdownBox",componentId:"sc-10sjti7-0"})(["flex:0 0 30%;"]),We=Z.c.div.withConfig({displayName:"style__StyledColorsBoxContainer",componentId:"sc-10sjti7-1"})(["flex:0 0 70%;"," ",""],(function(e){return e.alignCenter&&Object(Z.b)(Le())}),(function(e){return e.list&&Object(Z.b)(Re())})),qe=Z.c.div.withConfig({displayName:"style__StyledColorsBox",componentId:"sc-10sjti7-2"})(["display:flex;align-items:center;font-size:14px;color:#717171;",""],(function(e){return e.list&&Object(Z.b)(ze())})),Ue=Z.c.span.withConfig({displayName:"style__StyledColorDot",componentId:"sc-10sjti7-3"})([""," width:14px;height:14px;display:block;border-radius:14px;margin:0 5px 0 0;"],(function(e){return e.color&&Object(Z.b)(Be(),e.color)})),Ve=Z.c.div.withConfig({displayName:"style__StyledContainer",componentId:"sc-10sjti7-4"})(["box-sizing:border-box;border-top:1px solid #d7d7d7;position:absolute;bottom:0;left:0;width:100%;min-height:55px;padding:15px 36px;display:flex;justify-content:space-between;*{box-sizing:border-box;outline:0;}"]),Ge={alias:"Single color",identifier:"___single_color"},Ye=function(e){var t=e.color,n=e.configuration,a=e.schemeColor,i=e.activeScheme,r=e.columns,o=e.widgetData,c=e.setFilters,l=e.patchConfiguration,s=Fe()(t)?t:Ge;return w.a.createElement(Ve,null,!Fe()(t)&&w.a.createElement(We,{alignCenter:!Fe()(t)},w.a.createElement(qe,null,w.a.createElement(Ue,{color:a}),"Single color")),Fe()(t)&&w.a.createElement(We,{list:!0},o.map((function(e,t){return w.a.createElement(qe,{list:!0,key:e.x},w.a.createElement(Ue,{color:i.category[t]}),e.x)}))),w.a.createElement(Me,null,w.a.createElement(Oe,{align:"horizontal",relative:!0,menuPlacement:"top",defaultValue:s,onChange:function(e){var t="___single_color"===e.identifier?null:e;c({color:t}),l({color:t})},getOptionLabel:function(e){return e.alias||e.name},getOptionValue:function(e){return e.identifier},options:[Ge].concat(Object(Ie.a)(r)),configuration:n,isCustom:!0,isPopup:!0})))},He=function(e){return e.theme.schemes},Xe=function(e){return e.theme.selectedScheme},Ke=Object(ie.a)([He,Xe],(function(e,t){return e.find((function(e){return e.name===t})).mainColor})),Qe=Object(ie.a)([He,Xe],(function(e,t){return e.find((function(e){return e.name===t}))})),Ze=B((function(e){return{widget:e.widget,color:e.filters.color,configuration:e.configuration,columns:oe(e),schemeColor:Ke(e),activeScheme:Qe(e),widgetData:e.widget&&e.widget.data?e.widget.data[0].values:null}}),{setFilters:Te,patchConfiguration:te})(Ye),Je=n(12),$e=n(69),et=n.n($e);function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var nt=Z.c.button.withConfig({displayName:"component__StyledButton",componentId:"l5yyzu-0"})(["cursor:pointer;font-size:16px;color:#393f44;border:1px solid rgba(202,204,208,0.85);background:transparent;padding:10px 20px;border-radius:5px;outline:1;"," "," "," "," ",""],(function(e){return e.size&&"small"===e.size&&Object(Z.b)(["padding:7px 15px;"])}),(function(e){return e.type&&"cta"===e.type&&Object(Z.b)(["background:",";color:#fff;border:1px solid transparent;"],e.color)}),(function(e){return e.type&&"highlight"===e.type&&Object(Z.b)(["color:",";border:1px solid ",";"],e.color,e.color)}),(function(e){return e.type&&"default"===e.type&&Object(Z.b)(["&:hover,&.active{","}"],(function(e){return e.color&&Object(Z.b)(["border:1px solid ",";color:",";"],e.color,e.color)}))}),(function(e){return e.active&&Object(Z.b)(["border:1px solid ",";color:",";"],e.color,e.color)})),at=function(e){var t=e.type,n=void 0===t?"default":t,a=e.theme,i=e.children,r=Object(ce.a)(e,["type","theme","children"]);return w.a.createElement(nt,tt({},r,{color:a.color,type:n}),i)},it=B((function(e){return{theme:e.theme}}))(at),rt=[{type:"column",direction:"vertical"},{type:"column",direction:"horizontal"},{type:"bar",direction:"vertical"},{type:"bar",direction:"horizontal"},{type:"line",direction:null},{type:"pie",direction:null},{type:"scatterplot",direction:null},{type:"ring",direction:null}],ot=Z.c.div.withConfig({displayName:"style__StyledContainer",componentId:"kjyq8o-0"})(["padding-top:10px;position:absolute;top:30px;right:-102px;width:262px;z-index:11;@media only screen and (max-width:767px){right:0;}"]),ct=Z.c.div.withConfig({displayName:"style__StyledMenu",componentId:"kjyq8o-1"})(["box-sizing:border-box;height:auto;max-height:459px;width:100%;border:1px solid #D7D7D7;border-radius:4px;background-color:#FFFFFF;box-shadow:0 20px 30px 0 rgba(0,0,0,0.1);z-index:2;padding:29px 34px;&:before{content:' ';position:absolute;left:131px;top:-8px;border:10px solid transparent;border-top:10px solid #FFFFFF;z-index:3;transform:rotate(180deg);@media only screen and (max-width:767px){right:10px;left:auto;}}"]),lt=Z.c.h4.withConfig({displayName:"style__StyledTitle",componentId:"kjyq8o-2"})(["color:#555555;font-size:10px;font-weight:500;line-height:14px;margin-bottom:0;text-transform:uppercase;"]),st=Z.c.div.withConfig({displayName:"style__StyledIcons",componentId:"kjyq8o-3"})(["display:flex;align-items:stretch;justify-content:flex-start;flex-wrap:wrap;margin-left:-8px;margin-right:-8px;"]),ut=Z.c.div.withConfig({displayName:"style__StyledBox",componentId:"c5gake-0"})(["box-sizing:border-box;padding:7px 8px;width:50%;"]),dt=Z.c.div.withConfig({displayName:"style__StyledIcon",componentId:"c5gake-1"})(["box-sizing:border-box;height:51px;width:100%;border:",";border-radius:4px;background-color:#F7F7F7;display:flex;align-items:center;justify-content:center;text-align:center;opacity:",";pointer-events:",";&:hover{border:2px solid #C32D7B;}"],(function(e){return e.active?"2px solid #C32D7B":"1px solid #E6E6E6"}),(function(e){return e.disabled?"0.2":"1"}),(function(e){return e.disabled?"none":"auto"})),pt=function(){return w.a.createElement("svg",{width:"70px",height:"35px",viewBox:"0 0 70 35",version:"1.1"},w.a.createElement("g",{id:"chart-sparkline",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},w.a.createElement("g",{id:"Group-13",transform:"translate(6.000000, 2.000000)",strokeWidth:"2"},w.a.createElement("polyline",{id:"Path",stroke:"#3BB2D0",points:"0 32 19.7727273 13.8 38.2272727 22.2 58 11"}),w.a.createElement("polyline",{id:"Path",stroke:"#2C75B0",points:"0 20.8695652 19.7727273 32 38.2272727 11.1304348 58 0"}))))},ft=function(){return w.a.createElement("svg",{width:"70px",height:"35px",viewBox:"0 0 70 35",version:"1.1"},w.a.createElement("g",{id:"chart-scatterplot",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},w.a.createElement("g",{id:"Group-15",transform:"translate(11.000000, 6.000000)"},w.a.createElement("circle",{id:"Oval",fill:"#2C75B0",cx:"3.5",cy:"20.5",r:"3.5"}),w.a.createElement("circle",{id:"Oval",fill:"#3BB2D0",transform:"translate(45.500000, 3.500000) rotate(-180.000000) translate(-45.500000, -3.500000) ",cx:"45.5",cy:"3.5",r:"3.5"}),w.a.createElement("circle",{id:"Oval",fill:"#3BB2D0",transform:"translate(23.500000, 18.500000) rotate(-180.000000) translate(-23.500000, -18.500000) ",cx:"23.5",cy:"18.5",r:"3.5"}),w.a.createElement("circle",{id:"Oval",fill:"#3BB2D0",transform:"translate(38.000000, 9.000000) rotate(-180.000000) translate(-38.000000, -9.000000) ",cx:"38",cy:"9",r:"2"}),w.a.createElement("circle",{id:"Oval",fill:"#3BB2D0",transform:"translate(34.000000, 18.000000) rotate(-180.000000) translate(-34.000000, -18.000000) ",cx:"34",cy:"18",r:"2"}),w.a.createElement("circle",{id:"Oval",fill:"#3BB2D0",transform:"translate(14.000000, 18.000000) rotate(-180.000000) translate(-14.000000, -18.000000) ",cx:"14",cy:"18",r:"2"}),w.a.createElement("circle",{id:"Oval",fill:"#3BB2D0",transform:"translate(27.000000, 11.000000) rotate(-180.000000) translate(-27.000000, -11.000000) ",cx:"27",cy:"11",r:"2"}),w.a.createElement("circle",{id:"Oval",fill:"#3BB2D0",transform:"translate(40.000000, 15.000000) rotate(-180.000000) translate(-40.000000, -15.000000) ",cx:"40",cy:"15",r:"2"}),w.a.createElement("circle",{id:"Oval",fill:"#2C75B0",cx:"21.5",cy:"7.5",r:"3.5"}),w.a.createElement("circle",{id:"Oval",fill:"#2C75B0",cx:"9",cy:"14",r:"2"}),w.a.createElement("circle",{id:"Oval",fill:"#2C75B0",cx:"14",cy:"10",r:"2"}),w.a.createElement("circle",{id:"Oval",fill:"#2C75B0",cx:"30",cy:"2",r:"2"}),w.a.createElement("circle",{id:"Oval",fill:"#2C75B0",cx:"7",cy:"9",r:"2"}))))},ht=function(){return w.a.createElement("svg",{width:"70px",height:"35px",viewBox:"0 0 70 35",version:"1.1"},w.a.createElement("defs",null,w.a.createElement("path",{d:"M17.000408,0.00699401962 L17.0007338,8.01289404 C11.9861065,8.27253382 8,12.4207644 8,17.5 C8,22.7467051 12.2532949,27 17.5,27 C19.5656596,27 21.4773362,26.3407203 23.0360914,25.2210993 L28.6406118,30.9964293 C25.6142758,33.4973564 21.7326185,35 17.5,35 C7.83501688,35 0,27.1649831 0,17.5 C0,8.00210483 7.56645547,0.271450021 17.000408,0.00699401962 Z",id:"path-1"}),w.a.createElement("path",{d:"M18.0006388,0.00702339299 C27.4341042,0.27202186 35,8.00245611 35,17.5 C35,22.3324916 33.0412458,26.7074916 29.8743687,29.8743687 L24.2175144,24.2175144 C25.9366763,22.4983526 27,20.1233526 27,17.5 C27,12.4213412 23.0147988,8.27347605 18.0009747,8.01298265 Z",id:"path-3"})),w.a.createElement("g",{id:"chart-ring",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},w.a.createElement("g",{id:"Rectangle",transform:"translate(18.000000, 0.000000)"},w.a.createElement("mask",{id:"mask-2",fill:"white"},w.a.createElement("use",{xlinkHref:"#path-1"})),w.a.createElement("use",{id:"Combined-Shape",fill:"#3BB2D0",xlinkHref:"#path-1"}),w.a.createElement("mask",{id:"mask-4",fill:"white"},w.a.createElement("use",{xlinkHref:"#path-3"})),w.a.createElement("use",{id:"Combined-Shape",fill:"#2C75B0",xlinkHref:"#path-3"}))))},mt=function(){return w.a.createElement("svg",{width:"70px",height:"35px",viewBox:"0 0 70 35",version:"1.1"},w.a.createElement("defs",null,w.a.createElement("circle",{id:"path-1",cx:"17.5",cy:"17.5",r:"17.5"})),w.a.createElement("g",{id:"chart-pie",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},w.a.createElement("g",{id:"Rectangle",transform:"translate(18.000000, 0.000000)"},w.a.createElement("mask",{id:"mask-2",fill:"white"},w.a.createElement("use",{xlinkHref:"#path-1"})),w.a.createElement("use",{id:"Mask",fill:"#3BB2D0",xlinkHref:"#path-1"}),w.a.createElement("path",{d:"M37.5,-1.5 L17.5,-1.5 L17.5,18.2071068 L37.5,38.2071068 L37.5,-1.5 Z",stroke:"#F7F7F7",fill:"#2C75B0",mask:"url(#mask-2)"}))))},gt=function(){return w.a.createElement("svg",{width:"70px",height:"35px",viewBox:"0 0 70 35",version:"1.1"},w.a.createElement("g",{id:"chart-columns-a",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},w.a.createElement("g",{id:"Group-13",transform:"translate(8.000000, 3.000000)"},w.a.createElement("g",{id:"Group-14"},w.a.createElement("rect",{id:"Rectangle",fill:"#2C75B0",x:"0",y:"15",width:"4",height:"13"}),w.a.createElement("rect",{id:"Rectangle",fill:"#2C75B0",x:"45",y:"15",width:"4",height:"13"}),w.a.createElement("rect",{id:"Rectangle",fill:"#2C75B0",x:"15",y:"5",width:"4",height:"23"}),w.a.createElement("rect",{id:"Rectangle",fill:"#2C75B0",x:"30",y:"18",width:"4",height:"10"}),w.a.createElement("rect",{id:"Rectangle",fill:"#3BB2D0",x:"5",y:"10",width:"4",height:"18"}),w.a.createElement("rect",{id:"Rectangle",fill:"#3BB2D0",x:"50",y:"10",width:"4",height:"18"}),w.a.createElement("rect",{id:"Rectangle",fill:"#3BB2D0",x:"20",y:"0",width:"4",height:"28"}),w.a.createElement("rect",{id:"Rectangle",fill:"#3BB2D0",x:"35",y:"20",width:"4",height:"8"})))))},vt=function(){return w.a.createElement("svg",{width:"70px",height:"35px",viewBox:"0 0 70 35",version:"1.1"},w.a.createElement("g",{id:"chart-bars-a",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},w.a.createElement("g",{id:"Group-14",transform:"translate(8.000000, 5.000000)"},w.a.createElement("rect",{id:"Rectangle",fill:"#2C75B0",x:"0",y:"0",width:"38",height:"4"}),w.a.createElement("rect",{id:"Rectangle",fill:"#2C75B0",x:"0",y:"15",width:"55",height:"4"}),w.a.createElement("rect",{id:"Rectangle",fill:"#3BB2D0",x:"0",y:"5",width:"18",height:"4"}),w.a.createElement("rect",{id:"Rectangle",fill:"#3BB2D0",x:"0",y:"20",width:"44",height:"4"}))))},bt=function(e){var t=e.type,n=void 0===t?"column":t,a=e.direction,i=void 0===a?"horizontal":a,r=e.active,o=void 0!==r&&r,c=e.disabled,l=void 0!==c&&c,s=e.setData,u=void 0===s?function(e){console.log(e)}:s;return w.a.createElement(ut,null,w.a.createElement(dt,{active:o,disabled:l,onClick:function(){return u({type:n,direction:i})}},"line"===n&&w.a.createElement(pt,null),"scatterplot"===n&&w.a.createElement(ft,null),"ring"===n&&w.a.createElement(ht,null),"pie"===n&&w.a.createElement(mt,null),"bar"===n&&w.a.createElement(vt,null),"column"===n&&w.a.createElement(gt,null)))};function yt(){return(yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var xt=function(e){var t=e.list,n=e.setData,a=e.title;return w.a.createElement(E.Fragment,null,t.length>0&&w.a.createElement("div",null,w.a.createElement(lt,null,a),w.a.createElement(st,null,t.map((function(e,t){return w.a.createElement(bt,yt({key:t,setData:n},e))})))))},Et=function(e){var t=e.options,n=e.getValue,a=e.setValue,i=e.innerRef,r=e.innerProps,o=n()[0],c=rt.map((function(e){return e.active=e.type===o.chartType&&e.direction===o.direction,e.disabled=!t.find((function(t){return t.chartType===e.type&&t.direction===e.direction})),e})),l=c.filter((function(e){return"column"===e.type})),s=c.filter((function(e){return"bar"===e.type})),u=c.filter((function(e){return"bar"!==e.type&&"column"!==e.type})),d=function(e){var n=t.find((function(t){return t.chartType===e.type&&t.direction===e.direction}));n&&a(n)};return w.a.createElement(ot,yt({ref:i},r),w.a.createElement(ct,null,w.a.createElement(xt,{title:"Columns",setData:d,list:l}),w.a.createElement(xt,{title:"Bars",setData:d,list:s}),w.a.createElement(xt,{title:"More",setData:d,list:u})))},wt=Z.c.div.withConfig({displayName:"style__StyledContainer",componentId:"opri8d-0"})(["margin:10px;",""],(function(e){return e.isCompact&&Object(Z.b)(["display:flex;align-items:center;"])})),Ot=Z.c.div.withConfig({displayName:"style__StyledSelectBox",componentId:"opri8d-1"})(["",""],(function(e){return e.isCompact&&Object(Z.b)(["width:100%;padding-right:15px;"])})),_t=(Z.c.div.withConfig({displayName:"style__StyledOverflow",componentId:"opri8d-2"})(["position:absolute;width:100%;height:100%;top:0;left:0;background-color:rgba(0,0,0,0.1);z-index:10;"]),{container:function(){return{position:"relative",boxSizing:"border-box",cursor:"pointer",border:"1px solid rgba(202,204,208,0.85)",borderRadius:"4px",backgroundColor:"rgba(255,255,255,0)"}},indicatorSeparator:function(){return{display:"none"}},dropdownIndicator:function(e,t){return{color:"#c32d7b",transition:"all 0.2s ease-out"}},indicatorsContainer:function(){return{color:"#c32d7b",display:"flex",padding:"8px",transition:"color 150ms",boxSizing:"border-box",position:"relative",top:"5px"}},control:function(){return{display:"flex",border:"none",borderRadius:"4px",padding:"3px 0"}}}),Ct=function(e){var t=e.patchConfiguration,n=e.options,a=e.chartType,i=e.direction,r=e.theme,o=e.setTheme,c=Object(E.useState)(et()(n,{chartType:a,direction:i})),l=Object(Je.a)(c,2),s=l[0],u=l[1],d=r.compact,p=d.isCompact,f=d.isOpen,h=Object(E.useState)(!1),m=Object(Je.a)(h,2),g=m[0],v=m[1];return w.a.createElement(wt,{isCompact:p},w.a.createElement(Ot,{isCompact:p},w.a.createElement(le.a,{onChange:function(e){var n=e.chartType,a=e.direction;t({chartType:n,direction:a}),u(e),v(!1)},onMenuOpen:function(){return v(!0)},onMenuClose:function(){return v(!1)},value:s,options:n,styles:_t,components:{Menu:Et},menuIsOpen:g})),p&&w.a.createElement(it,{type:"highlight",onClick:function(){o(Object(k.a)({},r,{compact:{isCompact:p,isOpen:!f}}))}},"Settings"))},kt=B((function(e){return{options:e.configuration.availableCharts,chartType:e.configuration.chartType,direction:e.configuration.direction,theme:e.theme}}),{patchConfiguration:te,setTheme:W})(Ct),St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return"\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.09);\n\n  border-color: rgba(26, 28, 34, 0.1);\n  border-style: solid;\n\n  border-width: ".concat(e,"px ").concat(t,"px ").concat(n,"px ").concat(a,"px;\n")},At=Z.c.div.withConfig({displayName:"style__StyledContainer",componentId:"sc-1qafyg5-0"})(["position:relative;display:flex;flex-flow:column;height:calc(100% - ",");background:#fff;flex:1;width:100%;",""],"100px",St()),jt=Z.c.div.withConfig({displayName:"style__RestoringWidget",componentId:"sc-1qafyg5-1"})(["height:300px;display:flex;align-items:center;justify-content:center;"]),Tt=Z.c.h4.withConfig({displayName:"style__RestoringWidgetTitle",componentId:"sc-1qafyg5-2"})(["color:#a9a9a9;font-size:21px;"]),Dt=function(e){e.widget;var t=e.editor,n=t.restoring,a=t.initialized;return w.a.createElement(At,null,w.a.createElement(kt,null),a&&!n&&w.a.createElement(je,null),!a&&w.a.createElement(jt,null,w.a.createElement(Tt,null,"Loading widget...")),n&&w.a.createElement(jt,null,w.a.createElement(Tt,null,"Building widget...")),w.a.createElement(Ze,null))},It=B((function(e){return{editor:e.editor,widget:e.widget}}))(Dt),Nt=n(128),Ft=Z.c.div.withConfig({displayName:"style__StyledAccordion",componentId:"mzy7xu-0"})(["width:100%;padding-top:24px;padding-bottom:24px;"]),Pt=Z.c.div.withConfig({displayName:"style__StyledAccordionContent",componentId:"mzy7xu-1"})(['display:"block";max-height:',";overflow-y:",";transition:all 0.2s ease-out;padding-left:24px;padding-top:",";padding-bottom:",";"],(function(e){return e.scrollHeight+"px"||!1}),(function(e){return e.scrollHeight?"visible":"hidden"}),(function(e){return e.scrollHeight?"18px":"0"}),(function(e){return e.scrollHeight?"18px":"0"})),Bt=Z.c.a.withConfig({displayName:"style__StyledAccordionButton",componentId:"mzy7xu-2"})(['display:block;height:25px;color:#393f44;font-size:16px;font-weight:bold;line-height:25px;position:relative;padding-left:25px;cursor:pointer;&:before{content:" ";width:10px;height:10px;border-radius:50%;background:#c32d7b;position:absolute;left:0;top:8px;}']),zt=Z.c.div.withConfig({displayName:"style__StyledAccordionSection",componentId:"mzy7xu-3"})(['padding-top:11px;padding-bottom:11px;position:relative;&:before{content:" ";height:1px;width:calc(100% - 24px);display:block;position:absolute;top:0;background-color:#d2d3d6;margin-left:24px;}&:first-child{&:before{display:none;}}']),Rt=function(e){var t=e.title,n=e.openDefault,a=e.children,i=Object(E.useRef)({}),r=Object(E.useState)(0),o=Object(Je.a)(r,2),c=o[0],l=o[1],s=Object(E.useState)(!1),u=Object(Je.a)(s,2),d=u[0],p=u[1],f=function(){p(!d);var e=i.current,t=c?0:e.scrollHeight;l(t)};return Object(E.useEffect)((function(){setTimeout((function(){return n?f():null}),0)}),[]),w.a.createElement(zt,null,w.a.createElement(Bt,{onClick:function(){return f()}},t),w.a.createElement(Pt,{ref:i,scrollHeight:c},w.a.createElement(Nt.a,{handleHeight:!0,skipOnMount:!0,onResize:function(){var e=i.current;if(e.scrollHeight>0&&d){var t=e.scrollHeight;l(t)}}},w.a.createElement("div",null,a))))},Lt=function(e){var t=e.children;return w.a.createElement(Ft,null,t)},Mt=Z.c.div.withConfig({displayName:"style__StyledTabsContainer",componentId:"qvkojo-0"})(["position:relative;height:100%;"]),Wt=Z.c.div.withConfig({displayName:"style__StyledTabsContentBox",componentId:"qvkojo-1"})(["overflow-y:auto;height:calc(100% - 80px);padding-right:30px;::-webkit-scrollbar{width:7px;}::-webkit-scrollbar-track{box-shadow:inset 0 0 2px grey;border-radius:10px;background:rgba(0,0,0,0.05);}::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.3);border-radius:10px;}::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.4);}"]),qt=Z.c.div.withConfig({displayName:"style__StyledTabsContent",componentId:"qvkojo-2"})(["display:",";"],(function(e){return e.active?"block":"none"})),Ut=Z.c.ul.withConfig({displayName:"style__StyledList",componentId:"qvkojo-3"})(["display:flex;justify-content:space-between;padding:20px 30px 20px 0;list-style:none;"]),Vt=Z.c.li.withConfig({displayName:"style__StyledListLabel",componentId:"qvkojo-4"})(["color:red;padding-right:5px;padding-left:5px;&:first-child{padding-left:0;}&:last-child{padding-right:0;}"]);function Gt(){return(Gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Yt=function(e){return w.a.createElement(it,Gt({style:{height:"100%"}},e))},Ht=function(e){var t=e.children,n=Object(E.useState)(0),a=Object(Je.a)(n,2),i=a[0],r=a[1];return Object(E.useEffect)((function(){var e=t.findIndex((function(e){return e.props.default}));r(-1===e?0:e)}),[]),w.a.createElement(Mt,null,w.a.createElement(Ut,null,t.map((function(e,t){var n=e.props.label;return n?w.a.createElement(Vt,{key:t},w.a.createElement(Yt,{onClick:function(){return r(t)},active:t===i},n)):null}))),w.a.createElement(Wt,null,t.map((function(e,t){var n=e.props.children;return w.a.createElement(qt,{key:t,active:t===i},n)}))))},Xt=function(e){var t=e.children;return e.label?t:null},Kt=n(122);function Qt(){return(Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Zt=Object(Z.c)(Kt.a).withConfig({displayName:"component__StyledSlider",componentId:"ps9f57-0"})(["height:4px;width:inherit;background:",";"],(function(e){return e.array?"transparent":e.theme.slider.track})),Jt=Z.c.div.withConfig({displayName:"component__StyledThumb",componentId:"ps9f57-1"})(["height:18px;line-height:18px;width:18px;background-color:#fff;border:3px solid ",";border-radius:50%;transform:translateY(-50%);z-index:0 !important;top:50%;cursor:grab;"],(function(e){return e.theme.slider.track})),$t=Z.c.div.withConfig({displayName:"component__StyledTrack",componentId:"ps9f57-2"})(["top:0;bottom:0;background:",";border-radius:999px;"],(function(e){return e.isArray?e.isArray&&1===e.index?e.theme.slider.track:e.theme.slider.trackBackground:2===e.index?e.theme.slider.track:1===e.index?e.theme.slider.trackBackground:e.theme.slider.track})),en=function(e,t){return w.a.createElement(Jt,e)},tn=function(e,t){return w.a.createElement($t,Qt({},e,{isArray:Array.isArray(t.value),index:t.index}))},nn=function(e){var t=e.min,n=void 0===t?1:t,a=e.max,i=void 0===a?500:a,r=e.step,o=void 0===r?1:r,c=e.value,l=e.defaultValue,s=e.theme,u=e.onChange,d=void 0===u?function(){}:u,p=e.onDone,f=void 0===p?function(){}:p;return w.a.createElement(Z.a,{theme:s},w.a.createElement(Zt,{onAfterChange:f,onChange:d,renderTrack:tn,renderThumb:en,value:c,step:o,defaultValue:l,max:i,min:n}))},an=B((function(e){return{theme:e.theme}}))(nn),rn=Z.c.div.withConfig({displayName:"flex__FlexContainer",componentId:"sc-1jjiixp-0"})(["display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;flex-flow:",";width:100%;"," label{flex-basis:100%;}"],(function(e){return e.row?"row":"column"}),(function(e){return e.row?"> * { padding-right: 20px; &:last-child { padding-right: 0; } } ":""})),on=Z.c.label.withConfig({displayName:"form-label__FormLabel",componentId:"dg5fl6-0"})(["display:block;padding:0 0 10px 0;color:#393f44;font-weight:700;font-size:13px;"]),cn=Z.c.div.withConfig({displayName:"input-group__InputGroup",componentId:"sc-1dcephl-0"})(["position:relative;width:100%;",""],(function(e){return!e.noMargins&&"margin: 0 0 15px 0;"})),ln=Z.c.input.withConfig({displayName:"input__Input",componentId:"sc-1ao902g-0"})(['width:100%;box-sizing:border-box;padding:14px 10px;background:#ffffff;border:1px solid rgba(202,204,208,0.85);border-radius:4px;color:#393f44;font-size:14px;&[type="number"]{box-sizing:content-box;padding:8px 10px;}']);var sn=function(e){function t(e){var n,a,i,r;return Object(j.a)(this,t),n=Object(D.a)(this,Object(I.a)(t).call(this,e)),a=Object(V.a)(n),i="handleUpdate",r=X()((function(){var e=n.props,t=e.configuration,a=e.patchConfiguration,i=n.state,r=i.title,o=i.caption,c=i.yAxis,l=i.xAxis;a({title:r,caption:o,category:Object(k.a)({},t.category,{alias:c}),value:Object(k.a)({},t.value,{alias:l})})}),1e3),i in a?Object.defineProperty(a,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[i]=r,n.state=n.stateFromProps(e.configuration),n}return Object(N.a)(t,e),Object(T.a)(t,[{key:"componentDidUpdate",value:function(e){var t=e.configuration,n=this.props.configuration;Y()(this.stateFromProps(t),this.stateFromProps(n))||this.setState(this.stateFromProps(n))}},{key:"stateFromProps",value:function(e){return{title:e?e.title:"",caption:e?e.caption:"",yAxis:e?e.category.alias:"",xAxis:e?e.value.alias:""}}},{key:"setTitle",value:function(e){this.setState({title:e}),this.handleUpdate()}},{key:"setCaption",value:function(e){this.setState({caption:e}),this.handleUpdate()}},{key:"setYAxis",value:function(e){this.setState({yAxis:e}),this.handleUpdate()}},{key:"setXAxis",value:function(e){this.setState({xAxis:e}),this.handleUpdate()}},{key:"render",value:function(){var e=this,t=this.state,n=t.title,a=t.caption,i=t.xAxis,r=t.yAxis;return w.a.createElement(rn,null,w.a.createElement(cn,null,w.a.createElement(on,{htmlFor:"options-title"},"Title"),w.a.createElement(ln,{type:"text",placeholder:"Add title",name:"options-title",value:n,onChange:function(t){return e.setTitle(t.target.value)}})),w.a.createElement(cn,null,w.a.createElement(on,{htmlFor:"options-title"},"Caption"),w.a.createElement(ln,{type:"text",placeholder:"Add caption",name:"options-capton",value:a,onChange:function(t){return e.setCaption(t.target.value)}})),w.a.createElement(rn,{row:!0},w.a.createElement(cn,null,w.a.createElement(on,{htmlFor:"options-x-axis"},"X axis"),w.a.createElement(ln,{type:"text",placeholder:"Overwrite axis name",name:"options-x-axis",value:i,onChange:function(t){return e.setXAxis(t.target.value)}})),w.a.createElement(cn,null,w.a.createElement(on,{htmlFor:"options-y-axis"},"Y axis"),w.a.createElement(ln,{type:"text",placeholder:"Overwrite axis name",name:"options-y-axis",value:r,onChange:function(t){return e.setYaxis(t.target.value)}}))))}}]),t}(w.a.Component),un=B((function(e){return{theme:e.theme,configuration:e.configuration}}),{patchConfiguration:te})(sn),dn={control:function(){return{display:"flex",border:"1px solid rgba(202,204,208,0.85)",borderRadius:"4px",padding:"3px 0"}},option:function(e){return Object(k.a)({},e)}},pn=[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],fn=function(e){var t=e.orderBy,n=e.columns,a=e.setFilters,i=e.onChange,r=n.map((function(e){return{value:e.name||e.alias||e.identifier,label:e.name||e.alias||e.identifier}})),o=r.find((function(e){return t?e.label===t.name:null})),c=t&&t.orderType?et()(pn,{value:t.orderType.toLowerCase()}):pn[0],l=Object(E.useState)(c||pn[0]),s=Object(Je.a)(l,2),u=s[0],d=s[1],p=function(e,r){var o;"orderByType"===r?(o=t,d(e)):o=n.find((function(t){return t.name===e.value})),a({orderBy:o}),i(Object(k.a)({},o,{orderType:"orderByType"===r?e.value:u.value}))};return w.a.createElement(rn,null,w.a.createElement(cn,null,w.a.createElement(on,{htmlFor:"options-title"},"Order by"),w.a.createElement(le.a,{onChange:function(e){return p(e,"column")},value:o,options:r,styles:dn})),w.a.createElement(cn,null,w.a.createElement(on,{htmlFor:"options-title"},"Ascending or Descending"),w.a.createElement(le.a,{onChange:function(e){return p(e,"orderByType")},value:u,options:pn,styles:dn})))},hn=B((function(e){return{orderBy:e.filters.orderBy,columns:oe(e)}}),{setFilters:Te})(fn);var mn=function(e,t){var n=Object(E.useState)(e),a=Object(Je.a)(n,2),i=a[0],r=a[1];return Object(E.useEffect)((function(){var n=setTimeout((function(){r(e)}),t);return function(){clearTimeout(n)}}),[e,t]),i};function gn(e){return Number(e)===e&&e%1!==0}function vn(){return(vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var bn=Z.c.div.withConfig({displayName:"component__StyledSliderBox",componentId:"sc-13c1gwt-0"})(["width:100%;display:flex;padding:20px 0;"]),yn=Z.c.div.withConfig({displayName:"component__StyledInputBox",componentId:"sc-13c1gwt-1"})(["width:100%;display:flex;align-items:center;justify-content:",";input{max-width:100px;}"],(function(e){return e.isDouble?"space-between":"flex-end"})),xn=function(e){var t=e.label,n=e.min,a=void 0===n?null:n,i=e.max,r=void 0===i?null:i,o=e.value,c=e.minDistance,l=void 0===c?1:c,s=e.onChange,u=void 0===s?function(e){}:s,d=e.handleOnChangeValue,p=void 0===d?function(e,t){}:d,f=Object(E.useState)({value:o,key:null}),h=Object(Je.a)(f,2),m=h[0],g=h[1],v=mn(m,400);Object(E.useEffect)((function(){v.key?p(v.value,v.key):u(v.value)}),[v]);var b=Array.isArray(m.value),y=gn(a)||gn(r),x=a,O=r;b?(x=m.value[0],O=m.value[1]):O=m.value?m.value:r,O-x<=l&&(x=O-l);var _=Object(k.a)({},null!==a&&{min:a},{},null!==r&&{max:r});return w.a.createElement(cn,null,t&&w.a.createElement(on,{htmlFor:"options-limit"},t),w.a.createElement(bn,null,w.a.createElement(an,vn({},_,{step:y?.1:1,value:b?[x,O]:O,defaultValue:b?a:[a,r],onChange:function(e){return g({value:e,key:null})}}))),w.a.createElement(yn,{isDouble:b},b&&w.a.createElement(ln,vn({},_,{value:x,type:"number",name:"options-limit",onChange:function(e){return g({value:e.target.value,key:"minValue"})}})),w.a.createElement(ln,vn({},_,{value:O,type:"number",name:"options-limit",onChange:function(e){return g({value:e.target.value,key:"maxValue"})}}))))},En=B((function(e){return{theme:e.theme}}))(xn),wn=Z.c.div.withConfig({displayName:"style__StyledTableBox",componentId:"sc-1dqyv6r-0"})(["width:100%;height:100%;overflow:auto;"]),On=Z.c.table.withConfig({displayName:"style__StyledTable",componentId:"sc-1dqyv6r-1"})(["border-collapse:separate;border-spacing:0;width:100%;padding:0;border-radius:4px;overflow:hidden;border:1px solid rgba(26,28,34,.1);font-size:14px;margin-bottom:20px;"]),_n=Z.c.tr.withConfig({displayName:"style__StyledTr",componentId:"sc-1dqyv6r-2"})(["background-color:#fff;box-sizing:border-box;"]),Cn=Z.c.td.withConfig({displayName:"style__StyledTd",componentId:"sc-1dqyv6r-3"})(["width:100%;padding:20px;text-align:",";"],(function(e){return e.center?"center":"left"})),kn=Z.c.td.withConfig({displayName:"style__StyledTh",componentId:"sc-1dqyv6r-4"})(["position:relative;font-size:14px;color:#393f44;font-weight:700;white-space:nowrap;padding:20px;"]),Sn=function(e){var t=e.widgetData,n=e.configuration,a=n.value.alias,i=n.category.alias;return w.a.createElement(wn,null,w.a.createElement(On,null,w.a.createElement("thead",null,w.a.createElement(_n,null,w.a.createElement(kn,null,i),w.a.createElement(kn,null,a))),w.a.createElement("tbody",null,t&&t.map((function(e,t){return w.a.createElement(_n,{key:t},w.a.createElement(Cn,null,e.x),w.a.createElement(Cn,{center:!0},e.y))})))))},An=B((function(e){return{widgetData:e.editor.widgetData,configuration:e.configuration}}))(Sn),jn=n(129),Tn=n(123),Dn=n.n(Tn),In=Z.c.div.withConfig({displayName:"style__StyledField",componentId:"sc-1o5rag-0"})(["box-sizing:border-box;height:221px;width:100%;border:1px solid rgba(202,204,208,0.85);border-radius:4px;background-color:#FFFFFF;padding:0;font-size:14px;"]),Nn={keys:"#C32D7B",number:"#2C75B0",string:"#C32D7B",background:"white",background_warning:"#ffebeb"},Fn={labelColumn:{display:"none",boxSizing:"border-box"},body:{fontSize:"14px",height:"100%",width:"100%"},outerBox:{width:"100%",height:"100%",boxSizing:"border-box"},container:{height:"100%",width:"100%",boxSizing:"border-box"},warningBox:{width:"100%",position:"absolute",left:"0",bottom:"-62px"},contentBox:{padding:"20px 0 20px 20px",height:"100%",width:"100%",boxSizing:"border-box"}},Pn=function(e){var t=e.json,n=e.onChange,a=void 0===n?function(){}:n;return w.a.createElement(In,null,w.a.createElement(jn.a,{placeholder:t,colors:Nn,locale:Dn.a,style:Fn,onChange:a}))},Bn=n(6),zn=n.n(Bn),Rn=n(19),Ln=n(124),Mn=n.n(Ln),Wn=["range","value"],qn=["FILTER_ON_VALUES","TEXT_CONTAINS","TEXT_NOT_CONTAINS","TEXT_STARTS_WITH","TEXT_ENDS_WITH"],Un={values:[0,100],type:"range",notNull:!0,max:500,min:0},Vn={column:null,label:null,dataType:null,indicator:"range",filter:Un},Gn=[{label:"Between",value:"range"},{label:"Equals",value:"value"}],Yn=[{label:"Filter by values",value:"FILTER_ON_VALUES"},{label:"Text Contains",value:"TEXT_CONTAINS"},{label:"Text does not contain",value:"TEXT_NOT_CONTAINS"},{label:"Text starts with",value:"TEXT_STARTS_WITH"},{label:"Text ends with",value:"TEXT_ENDS_WITH"}],Hn=Z.c.div.withConfig({displayName:"style__StyledCheckbox",componentId:"sc-166tcgo-0"})(['color:#393f44;input[type="checkbox"]{opacity:0;position:absolute;}label{cursor:pointer;position:relative;display:inline-block;padding-left:22px;font-size:14px;}label::before,label::after{position:absolute;content:"";display:inline-block;}label::before{height:16px;width:16px;border:1px solid #3bb2d0;border-radius:5px;left:0px;top:0;}label::after{height:3px;width:6px;border-left:2px solid #3bb2d0;border-bottom:2px solid #3bb2d0;-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg);left:5px;top:6px;}input[type="checkbox"] + label::after{content:none;}input[type="checkbox"]:checked + label::after{content:"";}input[type="checkbox"]:focus + label::before{box-shadow:0 0 3px #3bb2d0;}']),Xn=function(e){var t=e.filter,n=e.name,a=void 0===n?"untitled_checkbox":n,i=e.label,r=void 0===i?"":i,o=e.setData;return t?w.a.createElement(Hn,null,w.a.createElement("input",{type:"checkbox",id:a,checked:t.filter.notNull,onChange:function(e){return o(e.target.value,t.id,"NOT_NULL_CHECK")}}),w.a.createElement("label",{htmlFor:a},r)):null},Kn=function(e){return new Date(Date.UTC(e)).toISOString()},Qn=function(e){return new Date(e).getFullYear()},Zn=function(e){var t=e.filter,n=e.disabled,a=void 0!==n&&n,i=e.setData,r=t.filter.values,o=t.fieldInfo?t.fieldInfo:{min:0,max:100},c=o.min,l=o.max,s=Object(Je.a)(r,2),u=s[0],d=s[1],p=function(e){var n;n="date"===t.dataType?[Kn(e[0]),Kn(e[1])]:e,i(n,t.id,"range")},f=function(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"maxValue";n="date"===t.dataType?"maxValue"===a?[Kn(u),Kn(Number(e))]:[Kn(Number(e)),Kn(d)]:"maxValue"===a?[u,Number(e)]:[Number(e),d],i(n,t.id,"range")};return"date"===t.dataType?w.a.createElement(En,{min:Qn(c),max:Qn(l),disabled:a,value:[Qn(u),Qn(d)],onChange:function(e){return p(e)},handleOnChangeValue:f}):w.a.createElement(En,{min:c,max:l,disabled:a,value:[u,d],onChange:function(e){return p(e)},handleOnChangeValue:f})},Jn=Object(Z.c)(ln).withConfig({displayName:"component__StyledInput",componentId:"sc-8rrlsf-0"})(["text-align:left !important;"]),$n=function(e){var t=e.filter,n=e.disabled,a=void 0!==n&&n,i=e.setData,r=e.isNumeric,o=void 0===r||r,c=t.filter.values,l=t.fieldInfo?t.fieldInfo:{min:0,max:100},s=l.min,u=l.max,d=gn(s)||gn(u);return w.a.createElement(Jn,{min:s,max:u,step:d?.1:1,disabled:a,value:c,type:o?"number":"text",name:"filter-value-".concat(t.id),onChange:function(e){return i(e.target.value,t.id,"value")}})},ea=function(e){var t=e.filter,n=e.setData,a=void 0===n?function(){}:n,i=e.optionData,r=void 0===i?[]:i,o=r.find((function(e){return e.value===t.column}));return w.a.createElement(le.a,{value:o,placeholder:"Select Column",name:"filter-column-".concat(t.id),options:r,onChange:function(e){a(e,t.id,"columns")}})},ta=function(e){var t=e.filter,n=e.disabled,a=void 0!==n&&n,i=e.setData,r=void 0===i?function(){}:i,o=e.optionData,c=void 0===o?[]:o,l=t.filter.values;return w.a.createElement(le.a,{isDisabled:a,value:l||null,isMulti:!0,placeholder:"Select ".concat(t.column),name:"filter-string-values-".concat(t.id),options:c,onChange:function(e){r(e,t.id,"FILTER_ON_VALUES")}})},na=function(e){var t=e.filter,n=e.disabled,a=void 0!==n&&n,i=e.setData,r=void 0===i?function(){}:i,o=e.optionData,c=void 0===o?[]:o,l="string"===t.indicator?t.filter.values:c.find((function(e){return e.value===t.indicator}));return w.a.createElement(le.a,{isDisabled:a,value:l||null,isMulti:"string"===t.indicator,placeholder:"string"===t.indicator?"Select ".concat(t.column):"Select Indicator",name:"filter-indicator-".concat(t.id),options:c,onChange:function(e){r(e,t.id,"indicator")}})},aa=Z.c.div.withConfig({displayName:"style__StyledAddSection",componentId:"e43ipm-0"})(["position:absolute;top:-40px;right:0;"]),ia=function(e){var t=e.addFilter;return w.a.createElement(aa,null,w.a.createElement(it,{size:"small",onClick:function(){return t()}},"Add Filter"))},ra=Z.c.div.withConfig({displayName:"style__StyledFilterBox",componentId:"wriuir-0"})(["position:relative;"]),oa=Z.c.div.withConfig({displayName:"style__StyledEmpty",componentId:"wriuir-1"})(["max-width:300px;margin:0 auto;display:flex;align-items:center;justify-content:center;text-align:center;"]),ca=Z.c.div.withConfig({displayName:"style__StyledFilterSection",componentId:"wriuir-2"})(["padding:10px 0;position:relative;label{text-transform:capitalize;}"]),la=Z.c.div.withConfig({displayName:"style__StyledFilter",componentId:"wriuir-3"})(["padding:15px 0 0 20px;margin:0 0 0 10px;border-left:1px solid #d2d3d6;"]),sa=Z.c.div.withConfig({displayName:"style__StyledDeleteBox",componentId:"wriuir-4"})(["position:absolute;right:0;top:50%;transform:translate(-50px,-50%);button{font-size:12px;padding:7px 10px;border:none;font-weight:500;}"]),ua=function(e){var t=e.dataService,n=e.setFilters,a=e.filters,i=void 0===a?[]:a,r=e.fields,o=void 0===r?[]:r,c=e.configuration,l=e.dataset,s=o.map((function(e){return{label:e.metadata&&e.metadata.alias?e.metadata.alias:e.columnName.replace(/_/gi," "),value:e.columnName,dataType:e.type}})),u=function(){var e=Object(Rn.a)(zn.a.mark((function e(a,r,s){var u;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.FiltersService.patchFilters(i,{values:a,id:r,type:s},c,l,o);case 2:u=e.sent,n({list:u}),t.requestWithFilters(u,c);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return w.a.createElement(ra,null,w.a.createElement(ia,{addFilter:function(){var e=[].concat(Object(Ie.a)(i),[Object(k.a)({},Vn,{id:Mn()("we-filter-")})]);n({list:e})}}),!i.length&&w.a.createElement(oa,null,"No filters found. Please, add them."),i.map((function(e){return w.a.createElement(ca,{key:e.id},w.a.createElement(cn,{noMargins:!0},w.a.createElement(ea,{filter:e,setData:u,optionData:s}),w.a.createElement(sa,null,w.a.createElement(it,{type:"highlight",onClick:function(){return function(e){var t=i.filter((function(t){return t.id!==e}))||[];n({list:t})}(e.id)}},"Delete"))),null!==e.column&&w.a.createElement(la,null,Wn.indexOf(e.indicator)>-1&&w.a.createElement(cn,{noMargins:"range"===e.indicator},w.a.createElement(na,{filter:e,disabled:null===e.column,setData:u,optionData:Gn})),qn.indexOf(e.indicator)>-1&&w.a.createElement(cn,null,w.a.createElement(na,{filter:e,disabled:null===e.column,setData:u,optionData:Yn})),qn.indexOf(e.indicator)>-1&&w.a.createElement(cn,null,"FILTER_ON_VALUES"===e.indicator&&w.a.createElement(ta,{filter:e,setData:u,optionData:e.fieldInfo}),"FILTER_ON_VALUES"!==e.indicator&&w.a.createElement($n,{isNumeric:!1,filter:e,setData:u})),Wn.indexOf(e.indicator)>-1&&w.a.createElement(cn,null,"range"===e.indicator&&w.a.createElement(Zn,{disabled:null===e.column,filter:e,setData:u}),"value"===e.indicator&&w.a.createElement($n,{disabled:null===e.column,filter:e,setData:u})),w.a.createElement(Xn,{filter:e,name:"filter-not-null-".concat(e.id),label:"Not null values",setData:u})))})))},da=B((function(e){return{configuration:e.configuration,dataset:e.editor.dataset,filters:e.filters.list,fields:e.editor.fields}}),{setFilters:Te})(ua),pa=n(2),fa=[{value:"lato",label:"Lato"},{value:"arial",label:"Arial"}],ha={container:function(){return{position:"relative",boxSizing:"border-box",cursor:"pointer",border:"1px solid rgba(202,204,208,0.85)",borderRadius:"4px",backgroundColor:"rgba(255,255,255,0)"}},indicatorSeparator:function(){return{display:"none"}},dropdownIndicator:function(e,t){return{color:"#c32d7b",transition:"all 0.2s ease-out"}},indicatorsContainer:function(){return{color:"#c32d7b",display:"flex",padding:"8px",transition:"color 150ms",boxSizing:"border-box",position:"relative",top:"5px"}},control:function(){return{display:"flex",border:"none",borderRadius:"4px",padding:"3px 0"}}},ma=function(e){var t=e.theme,n=e.setTheme,a=t.font,i=t.titleSize,r=t.captionSize,o=t.axisTitleSize,c=fa.find((function(e){return e.value===a}))||fa[0],l=function(e,a){var i=new RegExp("^[0-9]*$"),r=""!==a&&i.test(Number(a))?a:"auto";n(Object(k.a)({},t,Object(pa.a)({},e,r)))};return w.a.createElement("div",null,w.a.createElement(on,{htmlFor:"options-title"},"Font"),w.a.createElement(le.a,{value:c,onChange:function(e){n(Object(k.a)({},t,{font:e.value}))},options:fa,styles:ha}),w.a.createElement("br",null),w.a.createElement(rn,{row:!0},w.a.createElement(cn,null,w.a.createElement(on,{htmlFor:"typography-title-size"},"Title size"),w.a.createElement(ln,{name:"typography-title-size",value:"auto"===i?"":i,type:"text",onChange:function(e){return l("titleSize",e.target.value)},placeholder:"Auto"})),w.a.createElement(cn,null,w.a.createElement(on,{htmlF:!0,or:"typography-caption-size"},"Caption size"),w.a.createElement(ln,{name:"typography-caption-size",value:"auto"===r?"":r,type:"text",onChange:function(e){return l("captionSize",e.target.value)},placeholder:"Auto"})),w.a.createElement(cn,null,w.a.createElement(on,{htmlFor:"typography-axisTitleSize"},"Axis title size"),w.a.createElement(ln,{name:"typography-axisTitleSize",value:"auto"===o?"":o,type:"text",onChange:function(e){return l("axisTitleSize",e.target.value)},placeholder:"Auto"}))))},ga=B((function(e){return{theme:e.theme}}),{setTheme:W})(ma),va=Z.c.div.withConfig({displayName:"style__StyledShemesContainer",componentId:"sc-1noje9x-0"})(["display:flex;align-items:center;justify-content:flex-start;flex-wrap:wrap;width:100%;margin-left:-5px;margin-right:-5px;*{box-sizing:border-box;}"]),ba=Z.c.div.withConfig({displayName:"style__StyledShemesCard",componentId:"sc-1noje9x-1"})(["width:33.333%;display:flex;align-items:center;justify-content:center;padding-right:5px;padding-left:5px;input{display:none;}"]),ya=Z.c.div.withConfig({displayName:"style__StyledCardBox",componentId:"sc-1noje9x-2"})(["width:100%;box-sizing:border-box;height:100px;border:",";border-radius:4px;background-color:rgba(255,255,255,0);padding:15px 18px;&:hover{border:2px solid #C32D7B;cursor:pointer;}"],(function(e){return e.active?"2px solid #C32D7B":"1px solid rgba(202,204,208,0.85)"})),xa=Z.c.div.withConfig({displayName:"style__StyledShemeInfo",componentId:"sc-1noje9x-3"})([""]),Ea=Z.c.div.withConfig({displayName:"style__StyledShemeName",componentId:"sc-1noje9x-4"})(["font-size:14px;margin:0;padding-bottom:7px;text-transform:uppercase;"]),wa=Z.c.div.withConfig({displayName:"style__StyledShemeColors",componentId:"sc-1noje9x-5"})(["div{height:21px;}"]),Oa=function(e){var t=e.theme,n=e.setTheme,a=t.schemes,i=t.selectedScheme;return w.a.createElement(va,null,a.map((function(e){return w.a.createElement(ba,{key:e.name},w.a.createElement(ya,{active:i===e.name,onClick:function(){return function(e){n(Object(k.a)({},t,{selectedScheme:e.name}))}(e)}},w.a.createElement(xa,null,w.a.createElement(Ea,null,e.name),w.a.createElement(wa,null,w.a.createElement("div",{style:{flexBasis:"100%",background:e.mainColor}}),w.a.createElement("div",{style:{flexBasis:"100%",display:"flex"}},e.category.map((function(t){return w.a.createElement("div",{key:t,style:{flexBasis:"".concat(100/e.category.length,"%"),background:t}})})))))))})))},_a=B((function(e){return{theme:e.theme}}),{setTheme:W})(Oa),Ca=Z.c.div.withConfig({displayName:"component__StyleEditorOptionsErrors",componentId:"sc-1tx06u6-0"})(["position:absolute;left:50%;bottom:50%;transform:translate(-50%,-50%);h3{color:#ff6464;text-align:center;}p{color:#bfbfbf;font-size:12px;}"]),ka=Z.c.div.withConfig({displayName:"component__StyledContainer",componentId:"sc-1tx06u6-1"})(["position:relative;flex:1;background:#fff;height:calc(100% - "," - 20px);padding:0 0 0 30px;margin:10px 0;overflow-y:hidden;"," "," ",""],"100px",St(1,1,1,0),(function(e){return e.compact.isCompact&&Object(Z.b)(["visibility:hidden;max-height:0;position:absolute;top:65px;left:0;margin:0;width:100%;transition:all 0.3s ease-in-out;"])}),(function(e){return e.compact.isCompact&&e.compact.isOpen&&Object(Z.b)(["box-sizing:border-box;display:block;z-index:auto;visibility:visible;max-height:calc(100% - "," - 65px);"],"100px")})),Sa=function(e){var t=e.datasetId,n=e.limit,a=e.orderBy,i=e.patchConfiguration,r=e.compact,o=e.dataService,c=function(e,t){"limit"===t&&i({limit:e}),"orderBy"===t&&i({orderBy:e})};return t?w.a.createElement(ka,{compact:r},w.a.createElement(Ht,null,w.a.createElement(Xt,{label:"General"},w.a.createElement(Lt,null,w.a.createElement(Rt,{title:"Description and labels"},w.a.createElement(un,null)),w.a.createElement(Rt,{title:"Filters"},w.a.createElement(da,{dataService:o})),w.a.createElement(Rt,{title:"Order"},a&&w.a.createElement(hn,{onChange:function(e){return c(e,"orderBy")}}),n&&w.a.createElement(En,{min:0,max:500,onChange:function(e){return c(e,"limit")},handleOnChangeValue:function(e){return c(e,"limit")},label:"Limit",value:n})))),w.a.createElement(Xt,{label:"Visual style",default:!0},w.a.createElement(Lt,null,w.a.createElement(Rt,{title:"Typography"},w.a.createElement(ga,null)),w.a.createElement(Rt,{title:"Color",openDefault:!0},w.a.createElement(_a,null)))),w.a.createElement(Xt,{label:"Advanced"},w.a.createElement(Pn,null)),w.a.createElement(Xt,{label:"Table view"},w.a.createElement(An,null)))):w.a.createElement(ka,{compact:r},w.a.createElement(Ca,null,w.a.createElement("h3",null,"Error loading dataset"),w.a.createElement("p",null,"Dataset not accessible at this moment.")))},Aa=B((function(e){return{datasetId:e.editor.dataset&&e.editor.dataset.id?e.editor.dataset.id:null,limit:e.configuration.limit,orderBy:e.configuration.orderBy,compact:e.theme.compact}}),{patchConfiguration:te})(Sa);function ja(){return(ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Ta=Z.c.svg.withConfig({displayName:"CloseIcon__Icon",componentId:"xts4iy-0"})(["&:hover{path{fill:",";}}"],(function(e){return(e.hoverColor?e.hoverColor:"#C32D7B")||"auto"})),Da=function(e){return w.a.createElement(Ta,ja({},e,{viewBox:"0 0 32 32"}),w.a.createElement("path",{d:"M16 11.636l-11.636-11.636-4.364 4.364 11.636 11.636-11.636 11.636 4.364 4.364 11.636-11.636 11.636 11.636 4.364-4.364-11.636-11.636 11.636-11.636-4.364-4.364z"}))},Ia=Z.c.div.withConfig({displayName:"style__StyledModalBox",componentId:"sc-1ia4c7k-0"})(["position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.3);transition:all .16s cubic-bezier(.47,0,.745,.715);z-index:",";visibility:",";opacity:",";display:flex;justify-content:center;align-items:center;"],(function(e){return e.isOpen?1100:-1}),(function(e){return e.isOpen?"visible":"hidden"}),(function(e){return e.isOpen?1:0})),Na=Z.c.div.withConfig({displayName:"style__StyledModalContainer",componentId:"sc-1ia4c7k-1"})(["-webkit-transition:-webkit-transform .24s cubic-bezier(.215,.61,.355,1);transition:-webkit-transform .24s cubic-bezier(.215,.61,.355,1);transition:transform .24s cubic-bezier(.215,.61,.355,1);transition:transform .24s cubic-bezier(.215,.61,.355,1),-webkit-transform .24s cubic-bezier(.215,.61,.355,1);-webkit-transform:translateY(0);transform:",";display:-webkit-box;display:flex;position:relative;width:calc(100% - 50px);max-width:880px;background:#fff;box-shadow:0 1px 1px rgba(0,0,0,.15);z-index:1;"],(function(e){return e.isOpen?"translateY(0)":"translateY(-35px)"})),Fa=Z.c.div.withConfig({displayName:"style__StyledModalContent",componentId:"sc-1ia4c7k-2"})(["position:relative;width:100%;max-height:85vh;min-height:150px;overflow:auto;padding:72px;-webkit-overflow-scrolling:touch;box-shadow:0 7px 15px 0 rgba(0,0,0,.15);"]),Pa=Z.c.button.withConfig({displayName:"style__StyledModalCloseBtn",componentId:"sc-1ia4c7k-3"})(["fill:#000;display:block;position:absolute;top:15px;right:15px;width:30px;height:30px;padding:0;border:0;background-color:transparent;cursor:pointer;z-index:2;outline:none;"]),Ba=Z.c.div.withConfig({displayName:"style__StyledActions",componentId:"sc-1ia4c7k-4"})(["padding-top:60px;"]),za=function(e){var t=e.isOpen,n=e.closeModal,a=e.children;return w.a.createElement(Ia,{isOpen:t},w.a.createElement(Na,{isOpen:t},w.a.createElement(Fa,null,w.a.createElement(Pa,{onClick:function(){return n()}},w.a.createElement(Da,{width:"20px",height:"20px",hoverColor:"#C32D7B"})),a,w.a.createElement(Ba,null,w.a.createElement(it,{onClick:function(){return n()},type:"cta"},"Ok, got it!")))))},Ra=Z.c.footer.withConfig({displayName:"component__StyledFooter",componentId:"t079zl-0"})(["width:100%;height:",";align-self:flex-end;display:flex;align-items:center;justify-content:space-between;padding:0 30px;"],"100px"),La=function(e){var t=e.authenticated,n=e.onSave,a=Object(E.useState)(!1),i=Object(Je.a)(a,2),r=i[0],o=i[1];return w.a.createElement(Ra,null,w.a.createElement(za,{isOpen:r,closeModal:function(){return o(!1)}},w.a.createElement("h2",null,"How to customize the visualization")),w.a.createElement(it,{onClick:function(){return o(!0)},type:"highlight"},"Need help?"),t&&w.a.createElement(it,{type:"cta",onClick:n},"Save widget"))},Ma=B((function(e){return{authenticated:e.editor.authenticated}}))(La),Wa=Z.c.div.withConfig({displayName:"style__StyledContainer",componentId:"sc-1testk7-0"})(["width:100%;",""],(function(e){return e.isCompact?Object(Z.b)(["box-sizing:border-box;position:relative;max-width:600px;margin:0 auto;height:calc(100% - ",");"],"100px"):Object(Z.b)(["height:100%;display:flex;flex-flow:wrap;justify-content:space-between;flex-flow:column;@media only screen and (min-width:768px){flex-flow:wrap;}"])}));function qa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ua,Va,Ga=function(e){function t(e){var n;Object(j.a)(this,t),n=Object(D.a)(this,Object(I.a)(t).call(this,e)),qa(Object(V.a)(n),"resolveAuthentication",X()((function(e){(0,n.props.setEditor)({authenticated:e})}),1e3)),qa(Object(V.a)(n),"initializeRestoration",X()((function(e,t){n.dataService.restoreEditor(e,t)}),1e3)),qa(Object(V.a)(n),"resolveTheme",X()((function(e){(0,n.props.setTheme)(e)}),1e3)),qa(Object(V.a)(n),"resolveSchemes",X()((function(e){(0,n.props.setScheme)(e)}),1e3));var a=n.props,i=a.datasetId,r=a.widgetId,o=a.adapter,c=a.setEditor,l=a.dispatch,s=a.theme,u=a.schemes;return n.onSave=n.onSave.bind(Object(V.a)(n)),n.dataService=new P.DataService(i,r,o,c,l),n.dataService.resolveInitialState(),n.resolveTheme(s),n.resolveSchemes(u),e.dispatch({type:P.constants.sagaEvents.DATA_FLOW_STORE_ADAPTER_CONFIG,payload:o}),n}return Object(N.a)(t,e),Object(T.a)(t,[{key:"componentWillMount",value:function(){this.props.authenticated&&this.resolveAuthentication()}},{key:"componentDidUpdate",value:function(e){var t=e.datasetId,n=e.widgetId,a=e.theme,i=e.schemes,r=e.authenticated,o=this.props,c=o.datasetId,l=o.widgetId,s=o.theme,u=o.schemes,d=(o.adapter,o.authenticated);Y()(c,t)&&Y()(l,n)||this.initializeRestoration(c,l),Y()(s,a)||this.resolveTheme(s),Y()(u,i)||this.resolveSchemes(u),Y()(d,r)||this.resolveAuthentication(d)}},{key:"onSave",value:function(){var e=this.props,t=e.onSave,n=e.dispatch,a=e.editorState,i=e.adapter,r=e.application;"function"===typeof t&&i.handleSave(t,this.dataService,r,a),n({type:P.constants.sagaEvents.EDITOR_SAVE})}},{key:"render",value:function(){var e=this.props,t=e.configuration,n=e.adapter,a=e.theme.compact;return w.a.createElement(Wa,a,w.a.createElement(It,null),t.limit&&w.a.createElement(Aa,{adapter:n,dataService:this.dataService}),w.a.createElement(Ma,{onSave:this.onSave}))}}]),t}(w.a.Component),Ya=B((function(e){return{editor:e.editor,configuration:e.configuration,widget:e.widget,editorState:e}}),(function(e){return{dispatch:e,setEditor:function(t){return e(L(t))},setTheme:function(t){return e(W(t))},setScheme:function(t){return e(q(t))}}}))(Ga),Ha=function(e){function t(){return Object(j.a)(this,t),Object(D.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authenticated,n=e.application,a=e.onSave,i=e.datasetId,r=e.widgetId,o=void 0===r?null:r,c=e.adapter,l=e.theme,s=e.schemes,u=e.compact,d=void 0===u||u;if("function"!==typeof c)throw new Error("Widget editor: Missing prop adapter and adapter needs to be of type Adapter");if(!i)throw new Error("Widget editor: Missing prop datasetId of type string");return w.a.createElement(Ya,{authenticated:t,application:n,onSave:a,datasetId:i,widgetId:o,adapter:new c,schemes:s,theme:Object(k.a)({},l,{compact:{isCompact:d,isOpen:!1}})})}}]),t}(w.a.Component),Xa=Object(pa.a)({},L,(function(e,t){var n=t.payload;return Object(k.a)({},e,{},n)})),Ka={authenticated:!1,restoring:!1,initialized:!1,dataset:null,widget:null,widgetData:null,errors:null},Qa=(Ua={},Object(pa.a)(Ua,W,(function(e,t){var n=t.payload;return Object(k.a)({},e,{},n)})),Object(pa.a)(Ua,q,(function(e,t){var n=t.payload;return Object(k.a)({},e,{schemes:[].concat(Object(Ie.a)(e.schemes),Object(Ie.a)(n))})})),Ua),Za={compact:{isCompact:!0,isOpen:!1},schemes:[{name:"default",mainColor:"#97bd3d",category:["#97bd3d","#2C75B0","#FAB72E","#EF4848","#3BB2D0","#C32D7B","#F577B9","#5FD2B8","#F1800F","#9F1C00","#A5E9E3","#B9D765","#393F44","#CACCD0","#717171"]}],color:"#C32D7B",slider:{track:"#a3daf3",trackBackground:"#f5f5f5"},selectedScheme:"default",font:"lato",titleSize:"auto",captionSize:"auto",axisTitleSize:"auto"},Ja=z("WIDGET/setWidget"),$a={setWidget:Ja},ei=Object(pa.a)({},Ja,(function(e,t){var n=t.payload;return Object(k.a)({},e,{},n)})),ti={},ni=(Va={},Object(pa.a)(Va,ee,(function(e,t){var n=t.payload;return Object(k.a)({},e,{},n)})),Object(pa.a)(Va,te,(function(e,t){var n=t.payload;return Object(k.a)({},e,{},n)})),Va),ai={title:"",caption:"",visualizationType:"chart",chartType:"bar",direction:"horizontal",availableCharts:[{value:"pie",chartType:"pie",direction:null,label:"Pie"},{value:"bar-horizontal",chartType:"bar",direction:"horizontal",label:"Bar (Horizontal)"},{value:"bar-vertical",chartType:"bar",direction:"vertical",label:"Bar (Vertical)"},{value:"line",chartType:"line",direction:null,label:"Line"},{value:"scatter",direction:"horizontal",label:"Scatter"}]},ii=Object(pa.a)({},Te,(function(e,t){var n=t.payload;return Object(k.a)({},e,{},n)})),ri={orderBy:null,color:null,list:[]},oi={configuration:Object(F.handleModule)(m),editor:Object(F.handleModule)(l),theme:Object(F.handleModule)(u),filters:Object(F.handleModule)(v),widget:Object(F.handleModule)(f)},ci=Object(pa.a)({},P.constants.APP_NAMESPACE,Object(S.combineReducers)(oi)),li=n(130),si=Object(li.a)(),ui=n(18),di=zn.a.mark(fi),pi=zn.a.mark(hi);function fi(){var e,t,n,a,i,r;return zn.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(ui.e)();case 2:return e=o.sent,t=e.widgetEditor.editor.widget.attributes,n=t.name,a=t.description,i=t.widgetConfig,r=Object(k.a)({},i.paramsConfig,{title:n,caption:a}),o.next=10,Object(ui.d)(ee(r));case 10:case"end":return o.stop()}}),di)}function hi(){return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ui.f)(P.constants.sagaEvents.DATA_FLOW_DATASET_WIDGET_READY,fi);case 2:case"end":return e.stop()}}),pi)}var mi=zn.a.mark(Ci),gi=zn.a.mark(ki),vi=zn.a.mark(Si),bi=zn.a.mark(Ai),yi=zn.a.mark(ji),xi=zn.a.mark(Ti),Ei=new P.StateProxy,wi=null;function Oi(e){return _i.apply(this,arguments)}function _i(){return(_i=Object(Rn.a)(zn.a.mark((function e(t){var n,a,i,r,o,c,l,s;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.configuration,a=t.filters,i=t.editor.dataset,r=new P.FiltersService(n,a,i),o=r.getQuery(),c=wi.dataEndpoint,e.next=6,fetch("".concat(c,"/").concat(i.id,"?sql=").concat(o));case 6:return l=e.sent,e.next=9,l.json();case 9:return s=e.sent,e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ci(e){var t;return zn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.payload,wi=t;case 2:case"end":return n.stop()}}),mi)}function ki(){var e,t,n,a,i,r,o,c,l,s;return zn.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(ui.e)();case 2:return e=u.sent,t=e.widgetEditor,n=t.editor,a=t.configuration,i=t.theme,r=n.widgetData,o=n.widget.attributes.widgetConfig,c=new P.VegaService(o,r,a,i),u.next=12,Object(ui.d)(Ja(c.getChart()));case 12:return u.next=14,Object(ui.e)();case 14:l=u.sent,s=l.widgetEditor,Ei.cacheChart(s);case 17:case"end":return u.stop()}}),gi)}function Si(){var e,t,n;return zn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ui.e)();case 2:return e=a.sent,t=e.widgetEditor,a.next=6,Object(ui.b)([Ei,"sync"],t);case 6:if(!((n=a.sent)&&n.length>0)){a.next=15;break}a.t0=zn.a.keys(n);case 9:if((a.t1=a.t0()).done){a.next=15;break}return event=a.t1.value,a.next=13,Object(ui.d)({type:n[event]});case 13:a.next=9;break;case 15:case"end":return a.stop()}}),vi)}function Ai(){var e,t,n,a,i,r,o,c;return zn.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(ui.e)();case 2:if(e=l.sent,t=e.widgetEditor,n=t.editor,a=t.configuration,i=t.theme,!n.initialized){l.next=13;break}return r=n.widgetData,o=n.widget.attributes.widgetConfig,c=new P.VegaService(o,r,a,i),l.next=13,Object(ui.d)(Ja(c.getChart()));case 13:case"end":return l.stop()}}),bi)}function ji(){var e,t,n;return zn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ui.e)();case 2:return e=a.sent,t=e.widgetEditor,a.next=6,Object(ui.b)(Oi,t);case 6:if(!(n=a.sent).data){a.next=15;break}return a.next=10,Object(ui.d)(L({widgetData:n.data}));case 10:return a.next=12,Object(ui.b)(Ai);case 12:if(t.editor.initialized){a.next=15;break}return a.next=15,Object(ui.d)({type:P.constants.sagaEvents.DATA_FLOW_VISUALISATION_READY});case 15:case"end":return a.stop()}}),yi)}function Ti(){return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ui.f)(P.constants.sagaEvents.DATA_FLOW_FIELDS_AND_LAYERS_READY,ji);case 2:return e.next=4,Object(ui.f)(P.constants.sagaEvents.DATA_FLOW_VISUALISATION_READY,ki);case 4:return e.next=6,Object(ui.f)(P.constants.sagaEvents.DATA_FLOW_STORE_ADAPTER_CONFIG,Ci);case 6:return e.next=8,Object(ui.f)(P.constants.sagaEvents.DATA_FLOW_UPDATE_WIDGET,Ai);case 8:return e.next=10,Object(ui.f)(P.constants.sagaEvents.DATA_FLOW_CONFIGURATION_UPDATE,ji);case 10:return e.next=12,Object(ui.f)(R("CONFIGURATION/patchConfiguration"),Si);case 12:return e.next=14,Object(ui.f)(R("EDITOR/THEME/setTheme"),Ai);case 14:case"end":return e.stop()}}),xi)}var Di=zn.a.mark(Ii);function Ii(){return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ui.a)([Object(ui.c)(hi),Object(ui.c)(Ti)]);case 2:case"end":return e.stop()}}),Di)}var Ni=Ha,Fi=n(125),Pi=Object(F.createAction)("PLAYGROUND/modifyOptions"),Bi={modifyOptions:Pi},zi=Object(pa.a)({},Pi,(function(e,t){var n=t.payload;return Object(k.a)({},e,{},n)})),Ri={authToken:"",optionsOpen:!1,compactMode:!1,widget:null,theme:{color:"#C32D7B"},dataset:"1ad53858-f5da-47cb-8006-5b4aa5aad589"},Li=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(S.combineReducers)(Object(k.a)({editorOptions:Object(F.handleModule)(x)},ci)),n=Object(S.applyMiddleware)(Fi.a,si),a=Object(A.composeWithDevTools)(n),i=Object(S.createStore)(t,e,a);return si.run(Ii),{store:i}},Mi=n(126),Wi=n.n(Mi),qi=[{name:"pine",mainColor:"#907A59",category:["#907A59","#6AAC9F","#D5C0A1","#5C7D86","#F9AF38","#F05B3F","#89AD24","#CE4861","#F5808F","#86C48F","#F28627","#B23912","#BAD6AF","#C9C857","#665436"]},{name:"wind",mainColor:"#5A7598",category:["#5A7598","#C1CCDC","#DBB86F","#B7597B","#5FAB55","#8D439E","#CD87CA","#6BC8CB","#C58857","#712932","#ACE3E9","#B1D193","#294260","#49ACDB","#2A75C3"]}],Ui=function(e){function t(e){return Object(j.a)(this,t),Object(D.a)(this,Object(I.a)(t).call(this,e))}return Object(N.a)(t,e),Object(T.a)(t,[{key:"handleOnSave",value:function(e){console.log("on save called from consumer with:"),console.log(e)}},{key:"render",value:function(){var e=this.props.editorOptions,t=e.compactMode,n=e.authToken,a=e.dataset,i=e.widget,r=e.theme,o=!!n&&n.length>0;return w.a.createElement("div",{className:"widget-editor-wrapper"},w.a.createElement(Ni,{schemes:qi,compact:t,datasetId:a,widgetId:i,onSave:this.handleOnSave,authenticated:o,application:"rw",adapter:Wi.a,theme:r}))}}]),t}(w.a.Component),Vi=Object(C.b)((function(e){return{editorOptions:e.editorOptions}}),{})(Ui),Gi=(n(264),function(e){function t(e){var n;Object(j.a)(this,t),(n=Object(D.a)(this,Object(I.a)(t).call(this,e))).state={widgets:[]};fetch("https://api.resourcewatch.org/v1/widget?includes=metadata,user,vocabulary").then((function(e){return e.json()})).then((function(e){n.setState({widgets:e.data})}));return n}return Object(N.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.state.widgets,t=this.props,n=t.editorOptions,a=n.compactMode,i=n.authToken,r=n.dataset,o=n.widget,c=n.optionsOpen,l=n.theme,s=t.modifyOptions,u="c-playground-options ".concat(c?"-open":"");return w.a.createElement("div",{className:u},w.a.createElement("h4",null,"Widget editor options"),w.a.createElement("label",{htmlFor:"token"},"Auth token"),w.a.createElement("input",{id:"token",type:"text",placeholder:"Bearer token",value:i,onChange:function(e){return s({authToken:e.target.value})}}),w.a.createElement("label",{htmlFor:"dataset"},"Active Dataset"),w.a.createElement("select",{id:"dataset",value:r,onChange:function(e){return s({widget:null,dataset:e.target.value})}},w.a.createElement("option",{value:"03bfb30e-829f-4299-bab9-b2be1b66b5d4"},"Forest Sector Economic Contribution"),w.a.createElement("option",{value:"1ad53858-f5da-47cb-8006-5b4aa5aad589"},"Countries lacking access to electricity (urban)"),w.a.createElement("option",{value:"20cc5eca-8c63-4c41-8e8e-134dcf1e6d76"},"Fires"),w.a.createElement("option",{value:"a86d906d-9862-4783-9e30-cdb68cd808b8"},"Global Power Plant Database"),w.a.createElement("option",{value:"1bc94710-d7ec-46f9-aa27-edddd87b1625"},"Cold Water Corals")),w.a.createElement("label",{htmlFor:"widget"},"Select widget"),w.a.createElement("select",{id:"widget",value:o||"NO_WIDGET_SELECTED",onChange:function(t){"NO_WIDGET_SELECTED"===t.target.value?s({widget:null,dataset:"d446a52e-c4c1-4e74-ae30-3204620a0365"}):s({dataset:e.find((function(e){return e.id===t.target.value})).attributes.dataset,widget:t.target.value})}},w.a.createElement("option",{value:"NO_WIDGET_SELECTED"},"-"),e.map((function(e){return w.a.createElement("option",{key:e.id,value:e.id},e.attributes.name)}))),w.a.createElement("label",{htmlFor:"editor-compact-mode"},"Toggle Compact mode"),w.a.createElement("button",{onClick:function(){return s({compactMode:!a})}},a?"Set Default mode":"Set Compact mode"),w.a.createElement("label",{htmlFor:"theme-color"},w.a.createElement("span",{className:"color-presentation",style:{background:l.color}})," ","THEME - Color"),w.a.createElement("input",{id:"theme-color",type:"text",placeholder:"#00000",value:l.color,onChange:function(e){return s({theme:Object(k.a)({},l,{color:e.target.value})})}}))}}]),t}(w.a.Component)),Yi=Object(C.b)((function(e){return{editorOptions:e.editorOptions}}),{modifyOptions:Pi})(Gi),Hi=function(e){var t=e.optionsActive,n=e.modifyOptions;return w.a.createElement("button",{onClick:function(){return n({optionsOpen:!t})}},t?"Close options":"View options")},Xi=Object(C.b)((function(e){return{optionsActive:e.editorOptions.optionsOpen}}),{modifyOptions:Pi})(Hi);n(265);var Ki=function(){var e=Li().store;return w.a.createElement(C.a,{store:e},w.a.createElement("div",{className:"App"},w.a.createElement("header",{className:"App-header"},"Widget editor playground",w.a.createElement(Xi,null)),w.a.createElement(Vi,null),w.a.createElement(Yi,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));_.a.render(w.a.createElement(Ki,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultVegaSchema=function(e){return{$schema:"https://vega.github.io/schema/vega/v5.json",width:100,height:100,data:[],legend:[],config:{},signals:[],scales:[],axes:[],marks:[],axis:{labelFontSize:13,labelFont:"Lato",labelColor:"#717171",labelPadding:10,ticks:!0,tickSize:8,tickColor:"#A9ABAD",tickOpacity:.5,tickExtra:!1},axisX:{bandPosition:.5,domainWidth:1.2,domainColor:"#A9ABAD",labelAlign:"center",labelBaseline:"top"},axisY:{domain:!1,labelAlign:"left",labelBaseline:"bottom",tickOpacity:.5,grid:!0,ticks:!1,gridColor:"#A9ABAD",gridOpacity:.5},symbol:{fill:"#3BB2D0"},line:{interpolate:"linear",stroke:"#3BB2D0",fillOpacity:0}}},t.sqlFields={value:"x",category:"y"},t.default={defaultVegaSchema:t.defaultVegaSchema,sqlFields:t.sqlFields}},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_NAMESPACE="widgetEditor",t.ALLOWED_FIELD_TYPES=[{name:"esriFieldTypeSmallInteger",type:"number",provider:"esri"},{name:"esriFieldTypeInteger",type:"number",provider:"esri"},{name:"esriFieldTypeSingle",type:"number",provider:"esri"},{name:"esriFieldTypeDouble",type:"number",provider:"esri"},{name:"numeric",type:"number",provider:"psql"},{name:"number",type:"number",provider:"carto"},{name:"int",type:"number",provider:"psql"},{name:"integer",type:"number",provider:"psql"},{name:"float",type:"number",provider:"sql"},{name:"long",type:"number",provider:"sql"},{name:"double",type:"number",provider:"sql"},{name:"real",type:"number",provider:"sql"},{name:"decimal",type:"number",provider:"sql"},{name:"string",type:"string",provider:"sql"},{name:"char",type:"string",provider:"sql"},{name:"varchar",type:"string",provider:"sql"},{name:"esriFieldTypeString",type:"string",provider:"esri"},{name:"text",type:"string",provider:"elastic"},{name:"esriFieldTypeDate",type:"date",provider:"esri"},{name:"date",type:"date",provider:"sql"},{name:"time",type:"date",provider:"sql"},{name:"timestamp",type:"date",provider:"sql"},{name:"interval",type:"date",provider:"sql"},{name:"boolean",type:"boolean",provider:"sql"},{name:"array",type:"array",provider:"sql"}],t.sagaEvents={DATA_FLOW_STORE_ADAPTER_CONFIG:"".concat(t.APP_NAMESPACE,"/SAGAS/DATA_FLOW/adapter_configuration"),DATA_FLOW_DATASET_WIDGET_READY:"".concat(t.APP_NAMESPACE,"/SAGAS/DATA_FLOW/dataset_widget_ready"),DATA_FLOW_FIELDS_AND_LAYERS_READY:"".concat(t.APP_NAMESPACE,"/SAGAS/DATA_FLOW/fields_and_layers_ready"),DATA_FLOW_DATA_READY:"".concat(t.APP_NAMESPACE,"/SAGAS/DATA_FLOW/data_ready"),DATA_FLOW_VISUALISATION_READY:"".concat(t.APP_NAMESPACE,"/SAGAS/DATA_FLOW/visualisation_ready"),DATA_FLOW_WIDGET_DATA_READY:"".concat(t.APP_NAMESPACE,"/SAGAS/DATA_FLOW/visualisation_ready"),DATA_FLOW_PROXY_UPDATE:"".concat(t.APP_NAMESPACE,"/SAGAS/DATA_FLOW/proxy_update"),EDITOR_SAVE:"".concat(t.APP_NAMESPACE,"/CONFIGURATION/saveConfiguration"),DATA_FLOW_UPDATE_WIDGET:"".concat(t.APP_NAMESPACE,"/SAGAS/DATA_FLOW/updateWidget"),DATA_FLOW_CONFIGURATION_UPDATE:"".concat(t.APP_NAMESPACE,"/SAGAS/DATA_FLOW/configurationUpdate")},t.reduxActions={EDITOR_SET_CONFIGURATION:"".concat(t.APP_NAMESPACE,"/CONFIGURATION/setConfiguration"),EDITOR_SET_WIDGET:"".concat(t.APP_NAMESPACE,"/WIDGET/setWidget"),EDITOR_SET_FILTERS:"".concat(t.APP_NAMESPACE,"/EDITOR/setFilters")},t.default={APP_NAMESPACE:t.APP_NAMESPACE,sagaEvents:t.sagaEvents,reduxActions:t.reduxActions}},92:function(e,t,n){"use strict";var a=n(26),i=n(27),r=n(6),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{l(a.next(e))}catch(t){r(t)}}function c(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((a=a.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=c(n(149)),s=c(n(35)),u=c(n(95)),d=n(43),p=c(n(154));function f(e,t){return o(this,void 0,void 0,r.mark((function n(){var a;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=0;case 1:if(!(a<e.length)){n.next=7;break}return n.next=4,t(e[a],a,e);case 4:a++,n.next=1;break;case 7:case"end":return n.stop()}}),n)})))}var h=function(){function e(t,n,i){a(this,e),this.configuration=t,this.filters=n,this.sql="",this.dataset=i,this.prepareSelectStatement(),this.prepareAggregate(),this.prepareFilters(),this.prepareGroupBy(),this.prepareOrderBy(),this.prepareOrder(),this.prepareLimit()}return i(e,[{key:"resolveTableName",value:function(){return this.dataset.attributes.tableName}},{key:"prepareColor",value:function(){var e=this.configuration.color;return l.default(e)?", ".concat(e.identifier," as color"):""}},{key:"prepareSelectStatement",value:function(){var e=this.configuration.category;this.sql="SELECT ".concat(e.name," as ").concat(d.sqlFields.value," ").concat(this.prepareColor())}},{key:"prepareAggregate",value:function(){var e=this.configuration,t=e.aggregateFunction,n=e.value.name;if(t){var a=t.toUpperCase();if("SUM"!==a&&"COUNT"!==a)throw new Error("Aggragate function (".concat(t,") not implemented in filter service."));this.sql="".concat(this.sql,", ").concat(a,"(").concat(n,") as ").concat(d.sqlFields.category," FROM ").concat(this.resolveTableName())}else this.sql="".concat(this.sql,", ").concat(n," as ").concat(d.sqlFields.category," FROM ").concat(this.resolveTableName())}},{key:"escapeValue",value:function(e,t){return"date"===t||"string"===t?"'".concat(e,"'"):e}},{key:"rangeCondition",value:function(e,t,n,a){return"".concat(e," ").concat(t," >= ").concat(this.escapeValue(n[0],a)," AND ").concat(t," <= ").concat(this.escapeValue(n[1],a))}},{key:"valueRange",value:function(e,t,n,a){var i=this;return"".concat(e," ").concat(t," IN (").concat(n.map((function(e){return i.escapeValue(e.value,a)})).join(","),")")}},{key:"textContains",value:function(e,t,n,a){return"".concat(e," ").concat(t," = ").concat(this.escapeValue(n,a))}},{key:"valueEquals",value:function(e,t,n,a){return"".concat(e," ").concat(t," = ").concat(this.escapeValue(n,a))}},{key:"textNotContains",value:function(e,t,n,a){return"".concat(e," ").concat(t," != ").concat(this.escapeValue(n,a))}},{key:"textStartsWith",value:function(e,t,n,a){return"".concat(e," (lower(").concat(t,") LIKE '").concat(n,"%')")}},{key:"textEndsWith",value:function(e,t,n,a){return"".concat(e," (lower(").concat(t,") LIKE '%").concat(n,"')")}},{key:"prepareFilters",value:function(){var e=this,t=this.sql;this.filters&&this.filters.length>0&&(t="".concat(t," WHERE "),this.filters.forEach((function(n,a){var i=n.indicator,r=n.column,o=n.dataType,c=n.filter.values;t=a>0?"".concat(t," AND "):t,"range"===i&&(t=e.rangeCondition(t,r,c,o)),"FILTER_ON_VALUES"===i&&(t=e.valueRange(t,r,c,o)),"TEXT_CONTAINS"===i&&(t=e.textContains(t,r,c,o)),"TEXT_NOT_CONTAINS"===i&&(t=e.textNotContains(t,r,c,o)),"TEXT_STARTS_WITH"===i&&(t=e.textStartsWith(t,r,c,o)),"TEXT_ENDS_WITH"===i&&(t=e.textEndsWith(t,r,c,o)),"value"===i&&(t=e.valueEquals(t,r,c,o))}))),this.sql=t.replace(/ +(?= )/g,"")}},{key:"prepareGroupBy",value:function(){var e=this.configuration,t=e.groupBy,n=e.aggregateFunction;if(t){var a=t.name;this.sql="".concat(this.sql," GROUP BY ").concat(a||d.sqlFields.value)}else n&&"none"!==n&&(this.sql="".concat(this.sql," GROUP BY ").concat(d.sqlFields.value))}},{key:"prepareOrderBy",value:function(){var e=this.configuration.orderBy;if(e){var t=e.name;this.sql="".concat(this.sql," ORDER BY ").concat(t||d.sqlFields.category)}}},{key:"prepareOrder",value:function(){var e=this.configuration.orderBy;if(e){var t=e.orderType;this.sql="".concat(this.sql," ").concat(t||"asc")}}},{key:"prepareLimit",value:function(){var e=this.configuration.limit,t=void 0===e?500:e;this.sql="".concat(this.sql," LIMIT ").concat(t)}},{key:"requestWidgetData",value:function(){return o(this,void 0,void 0,r.mark((function e(){var t,n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dataset.id){e.next=2;break}throw new Error("Error, datasetId not present in Filters service.");case 2:return e.abrupt("return",[]);case 5:return t=e.sent,e.next=8,t.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"getQuery",value:function(){return this.sql.replace(/ +(?= )/g,"")}}],[{key:"handleFilters",value:function(e,t,n){return o(this,void 0,void 0,r.mark((function a(){var i,c,d,p,h,m,g,v,b=this;return r.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=t.column,c=t.type,d=t.values,p=n.configuration,h=n.dataset,m=n.fields,n.widget,g=[],v=function(e){return l.default(e)?2===Object.keys(e).length?"range":"value":s.default(e)&&2===e.length?"range":"value"},a.next=6,f(e,(function(e,t){return o(b,void 0,void 0,r.mark((function n(){var a,o,l,s;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e[d]||0,o=e[i],l=e[c],s=new u.default(p,h,m),n.t0=g,n.t1=o,n.t2=v(a),n.t3="we-filter-".concat(o,"-").concat(t),n.t4=!e.operation,n.t5=l,n.t6={values:a,notNull:!0},n.next=13,s.getFieldInfo(e,o);case 13:n.t7=n.sent,n.t8={column:n.t1,indicator:n.t2,id:n.t3,exlude:n.t4,dataType:n.t5,filter:n.t6,fieldInfo:n.t7},n.t0.push.call(n.t0,n.t8);case 16:case"end":return n.stop()}}),n)})))}));case 6:return a.abrupt("return",g);case 7:case"end":return a.stop()}}),a)})))}},{key:"patchFilters",value:function(e,t,n,a,i){return o(this,void 0,void 0,r.mark((function o(){var c,l;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.values,t.id,t.type,c=new u.default(n,a,i),r.next=4,p.default(e,c,t);case 4:return l=r.sent,r.abrupt("return",l);case 6:case"end":return r.stop()}}),o)})))}}]),e}();t.default=h},95:function(e,t,n){"use strict";var a=n(6),i=n(26),r=n(27),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{l(a.next(e))}catch(t){r(t)}}function c(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((a=a.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=c(n(153)),s=function(){function e(t,n,a){i(this,e),this.NUMERIC_TYPE="number",this.COLUMN_TYPE="string",this.DATE_TYPE="date",this.configuration=t,this.dataset=n,this.fields=a}return r(e,[{key:"query",value:function(e){return fetch("https://api.resourcewatch.org/v1/query/".concat(this.dataset.id,"?").concat(e)).then((function(e){if(e.status>=400)throw new Error(e.statusText);return e.json()})).then((function(e){return e.data}))}},{key:"getTableName",value:function(){return this.dataset.attributes.tableName}},{key:"getColumnMinAndMax",value:function(e){var t=e.columnName,n=this.getTableName(!0),a="SELECT MIN(".concat(t,") AS min, MAX(").concat(t,") AS max FROM ").concat(n);return this.query("sql=".concat(a)).then((function(e){return e?e[0]:{}}))}},{key:"getColumnValues",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.columnName;console.log(e,"FIELD");var a=this.getTableName(),i=t?"GROUP BY ".concat(n):"",r="SELECT ".concat(n," FROM ").concat(a," ").concat(i," ORDER BY ").concat(n);return this.query("sql=".concat(r)).then((function(e){return(e||[]).map((function(e){return e[n]}))}))}},{key:"getFieldInfo",value:function(e,t){return o(this,void 0,void 0,a.mark((function e(){var n,i,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this.fields.find((function(e){return e.columnName===t}))).type!==this.NUMERIC_TYPE&&n.type!==this.DATE_TYPE){e.next=6;break}return e.next=4,this.getColumnMinAndMax(n);case 4:return i=e.sent,e.abrupt("return",i);case 6:if(n.type!==this.COLUMN_TYPE){e.next=11;break}return e.next=9,this.getColumnValues(n);case 9:return r=e.sent,e.abrupt("return",r.map((function(e){return{value:e,label:l.default(e)}})));case 11:return e.abrupt("return","".concat(n.type," Not implemented."));case 12:case"end":return e.stop()}}),e,this)})))}}]),e}();t.default=s}},[[136,1,2]]]);
//# sourceMappingURL=main.bf36e070.chunk.js.map