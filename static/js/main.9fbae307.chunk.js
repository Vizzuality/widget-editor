(this["webpackJsonp@widget-editor/playground"]=this["webpackJsonp@widget-editor/playground"]||[]).push([[0],{369:function(e,t,a){e.exports=a(882)},374:function(e,t,a){},858:function(e,t,a){},878:function(e,t,a){},879:function(e,t,a){},882:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"modifyOptions",(function(){return w})),a.d(n,"default",(function(){return g}));var r={};a.r(r),a.d(r,"default",(function(){return O}));var c={};a.r(c),a.d(c,"actions",(function(){return n})),a.d(c,"initialState",(function(){return j})),a.d(c,"reducers",(function(){return r}));var o=a(1),u=a.n(o),i=a(22),l=a.n(i),s=(a(374),a(33)),d=a(129),f=a(68),m=a(357),b=a(75),p=a.n(b),v=a(363),h=a(109),w=Object(h.createAction)("PLAYGROUND/modifyOptions"),g={modifyOptions:w},E=a(5),O=Object(E.a)({},w,(function(e,t){var a=t.payload;return Object(d.a)(Object(d.a)({},e),a)})),j={authToken:"",unmounted:!1,renderer:!1,optionsOpen:!1,compactMode:!1,theme:{color:"#C32D7B"},dataset:null,datasets:[{label:"Forest Sector Economic Contribution",value:"03bfb30e-829f-4299-bab9-b2be1b66b5d4"},{label:"MAP LAYER 1",value:"852f2275-91a8-4500-9f10-89880dc53f22"},{label:"MAP LAYER 2",value:"f8d3e79c-c3d0-4f9a-9b68-9c5ad1f025e4"},{label:"MAP LAYER 3",value:"266ed113-396c-4c69-885a-ead30df95810"},{label:"MAP LAYER 4",value:"0e565ddf-74fd-4f90-a6b8-c89d747a89ab"},{label:"Countries lacking access to electricity (urban)",value:"1ad53858-f5da-47cb-8006-5b4aa5aad589"},{label:"Global Power Plant Database",value:"a86d906d-9862-4783-9e30-cdb68cd808b8"}]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(f.combineReducers)(Object(d.a)({editorOptions:Object(h.handleModule)(c)},b.reducers)),a=Object(f.applyMiddleware)(v.a,b.middleware),n=Object(m.composeWithDevTools)(a),r=Object(f.createStore)(t,e,n);return b.middleware.run(b.sagas),{store:r}},C=a(91),A=a(17),k=a(364),x=a.n(k),B=(a(858),{scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"}),D=function(){var e=Object(o.useState)(null),t=Object(A.a)(e,2),a=t[0],n=t[1];return u.a.createElement("div",{className:"c-debug-options"},u.a.createElement("button",{type:"button",onClick:function(){return n(Object(b.getEditorState)())}},u.a.createElement(C.b,null)," Get Editor state"),a&&u.a.createElement("div",{className:"debug-options--debug-view"},u.a.createElement("header",{className:"debug-options--debug-view--header"},"Get editor state hook result",u.a.createElement("button",{onClick:function(){return n(null)}},u.a.createElement(C.a,null))),u.a.createElement("div",{className:"debug-options--debug-view--result"},u.a.createElement(x.a,{data:a,theme:B,invertTheme:!0,shouldExpandNode:function(e,t,a){return a<=2}}))),a&&u.a.createElement("div",{className:"debug-options--debug-backdrop"}))},F=function(e){return{type:"PLAYGROUND/modifyOptions",payload:e}},N=function(){var e=Object(s.useDispatch)(),t=Object(s.useSelector)((function(e){return e.editorOptions.renderer})),a=Object(s.useSelector)((function(e){return e.editorOptions.unmounted}));return u.a.createElement("header",{className:"App-header"},"Widget editor",u.a.createElement("div",{className:"App-header--nav"},u.a.createElement("button",{type:"button",onClick:function(){return e(F({renderer:!t}))}},t?u.a.createElement(C.d,null):u.a.createElement(C.e,null)," ",t?"View editor":"View renderer"),u.a.createElement("button",{type:"button",onClick:function(){return e(F({unmounted:!a}))}},u.a.createElement(C.c,null),a&&"Mount editor",!a&&"Un-mount editor"),u.a.createElement(D,null)))},S=a(174),P=a.n(S),M=a(242),R=a.n(M),L=function(){var e=Object(s.useSelector)((function(e){return e.widgetEditor.widgetConfig}));return e?u.a.createElement("div",{className:"column"},u.a.createElement("div",{className:"c-widget-block"},u.a.createElement("div",{className:"renderer-wrapper"},u.a.createElement(R.a,{adapter:P.a,thumbnail:!1,widgetConfig:e})))):u.a.createElement("div",{className:"c-unmounted"},u.a.createElement("p",null,"No modified styles found"),u.a.createElement("span",null,"Update your widget within the editor and your changes will be reflected here"))},Y=[{name:"default",mainColor:"#3BB2D0",category:["#3BB2D0","#2C75B0","#FAB72E","#EF4848","#65B60D","#C32D7B","#F577B9","#5FD2B8","#F1800F","#9F1C00","#A5E9E3","#B9D765","#393F44","#CACCD0","#717171"]},{name:"pine",mainColor:"#907A59",category:["#907A59","#6AAC9F","#D5C0A1","#5C7D86","#F9AF38","#F05B3F","#89AD24","#CE4861","#F5808F","#86C48F","#F28627","#B23912","#BAD6AF","#C9C857","#665436"]},{name:"wind",mainColor:"#5A7598",category:["#5A7598","#C1CCDC","#DBB86F","#B7597B","#5FAB55","#8D439E","#CD87CA","#6BC8CB","#C58857","#712932","#ACE3E9","#B1D193","#294260","#49ACDB","#2A75C3"]}],G=function(){var e=Object(s.useSelector)((function(e){return e.editorOptions})),t=e.compactMode,a=e.dataset,n=e.widget,r=e.theme,c=Object(s.useSelector)((function(e){return e.editorOptions.renderer})),o=Object(s.useSelector)((function(e){return e.editorOptions.unmounted}));return a?o?u.a.createElement("div",{className:"c-unmounted"},u.a.createElement("p",null,"Editor is unmounted."),u.a.createElement("span",null,"Redux dev tools wont show updates, so if you need to debug redux you need to refresh your browser. But in this context you can make sure that the editor does not crash and cancels all necessary events when un-mounting the editor.")):u.a.createElement(u.a.Fragment,null,c&&u.a.createElement(L,null),u.a.createElement("div",{className:"widget-editor-wrapper ".concat(c?"-hidden":"")},u.a.createElement(p.a,{schemes:Y,compact:t,datasetId:a,widgetId:n,onSave:function(e){var t=JSON.stringify(e,null,2),a=window.open();a.document.open(),a.document.write("<html><body><pre>"+t+"</pre></body></html>"),a.document.close()},authenticated:!0,application:"rw",adapter:P.a,theme:r,disable:["typography"]}))):u.a.createElement("p",{className:"generic-playground-errror"},"Please select a dataset")},T=a(32),U=a(3),W=a.n(U),I=a(23),J=a(243),V=a(244),z=function(){var e=Object(I.a)(W.a.mark((function e(t){var a,n,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.resourcewatch.org/v1/dataset/".concat(t,"/widget"));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,r=n.data,e.abrupt("return",r.map((function(e){return{label:e.attributes.name,value:e.id}})));case 11:e.prev=11,e.t0=e.catch(0),console.error("(Playground) failed to fetch widgets");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),$=function(e){return{type:"PLAYGROUND/modifyOptions",payload:e}};a(878);var q=function(){var e=Object(o.useState)(!1),t=Object(A.a)(e,2),a=t[0],n=t[1],r=Object(o.useState)(""),c=Object(A.a)(r,2),i=c[0],l=c[1],d=function(e){var t=Object(o.useRef)(),a=Object(s.useDispatch)(),n=Object(s.useSelector)((function(e){return e.editorOptions.datasets})),r=Object(s.useSelector)((function(e){return e.editorOptions.widgets})),c=Object(o.useState)(!1),u=Object(A.a)(c,2),i=u[0],l=u[1],d=Object(o.useCallback)(Object(I.a)(W.a.mark((function e(){var t,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n[0].value,e.next=3,z(t);case 3:r=e.sent,a($({dataset:n[0].value,widgets:r,widget:null}));case 5:case"end":return e.stop()}}),e)}))),[n,a]);Object(o.useEffect)((function(){f||function(){var e=Object(I.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(o.useEffect)((function(){var n=setTimeout(Object(I.a)(W.a.mark((function n(){var r,c,o,u,i;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.length>0)){n.next=26;break}return n.prev=1,n.next=4,fetch(e);case 4:return r=n.sent,n.next=7,r.json();case 7:if(c=n.sent,"widget"!==(o=c.data).type){n.next=14;break}return n.next=12,z(o.attributes.dataset);case 12:u=n.sent,a($({dataset:o.attributes.dataset,widget:o.id,widgets:u}));case 14:if("dataset"!==o.type){n.next=19;break}return n.next=17,z(o.id);case 17:i=n.sent,a($({dataset:o.id,widget:null,widgets:i}));case 19:l(!1),n.next=26;break;case 22:n.prev=22,n.t0=n.catch(1),console.error("(Playground) failed to fetch widgets"),l(!0);case 26:if(0!==e.length||!t.current){n.next=29;break}return n.next=29,d();case 29:t.current=e;case 30:case"end":return n.stop()}}),n,null,[[1,22]])}))),500);return function(){clearTimeout(n)}}),[e,n,a,d]);var f=Object(s.useSelector)((function(e){var t=e.editorOptions,a=t.datasets,n=t.dataset;return a.find((function(e){return e.value===n}))||""})),m=Object(s.useSelector)((function(e){var t=e.editorOptions,a=t.widgets,n=t.widget;return n&&a.find((function(e){return e.value===n}))||""})),b=!n.find((function(e){return e.value===f.value}));return[n,r,f,m,b,i,function(){var e=Object(I.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===t||void 0===t?void 0:t.value)){e.next=7;break}return e.next=3,z(t.value);case 3:n=e.sent,a($({dataset:t.value,widgets:n})),e.next=8;break;case 7:a($({dataset:null,widgets:null,widget:null}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(I.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a($({widget:t.value}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]}(i),f=Object(A.a)(d,8),m=f[0],b=f[1],p=f[2],v=f[3],h=f[4],w=f[5],g=f[6],E=f[7],O=function(){var e=Object(I.a)(W.a.mark((function e(t){var a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,l(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement("div",{className:"c-editor-form ".concat(a?"-active":""),onMouseEnter:function(){return n(!0)},onMouseLeave:function(){return n(!1)}},u.a.createElement("div",{className:"input"},u.a.createElement("label",{htmlFor:"smart-fill"},"Auto fill: enter a resoucewatch widget or dataset api endpoint and auto fill details"),u.a.createElement("input",{value:i,onChange:O,autoComplete:"off",className:"text-input",type:"text",placeholder:"Paste here"}),i.length>0&&w&&u.a.createElement("p",{className:"error"},"Failed to autofill")),u.a.createElement("div",{className:"input"},u.a.createElement("label",{htmlFor:"dataset"},"Dataset"),u.a.createElement(V.default,{value:p?h?{label:"Custom dataset",value:p?p.value:""}:p||"":null,onChange:g,name:"dataset",options:[].concat(Object(T.a)(m),[h&&p&&{label:"Custom dataset",value:p.value}]),isClearable:!0})),u.a.createElement("div",{className:"input"},u.a.createElement("label",{htmlFor:"widget"},"Widget"),u.a.createElement(J.default,{value:v||"",onChange:E,name:"widget",options:b||[]})))};a(879);var H=function(){var e=y().store;return u.a.createElement(s.Provider,{store:e},u.a.createElement("div",{className:"App"},u.a.createElement(N,null),u.a.createElement(q,null),u.a.createElement(G,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(u.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[369,1,2]]]);
//# sourceMappingURL=main.9fbae307.chunk.js.map