{"version":3,"sources":["../../../packages/rw-adapter/build/index.js","../../../packages/core/build/services/dataset.js","../../../packages/core/build/services/widget.js","../../../packages/core/build/services/data.js","../../../packages/core/build/services/vega.js","../../../packages/core/build/charts/pie.js","../../../packages/core/build/charts/bars.js","../../../packages/core/build/charts/line.js","../../../packages/core/build/charts/scatter.js","../../../packages/core/build/charts/constants.js","../../../packages/core/build/services/state-proxy.js","../../../packages/core/build/index.js","../../../packages/rw-adapter/build/helpers/config.js","../../../packages/widget-editor/lib/helpers/redux.js","../../../packages/widget-editor/lib/modules/editor/actions.js","../../../packages/widget-editor/lib/modules/theme/actions.js","../../../packages/widget-editor/lib/components/chart/component.js","../../../packages/widget-editor/lib/components/chart/index.js","../../../packages/widget-editor/lib/modules/configuration/actions.js","../../../packages/widget-editor/lib/modules/widget/selectors.js","../../../packages/widget-editor/lib/styles-common/flex.js","../../../packages/widget-editor/lib/components/icons/CategoryIcon/index.js","../../../packages/widget-editor/lib/components/select/components/Popup/style.js","../../../packages/widget-editor/lib/components/select/components/Popup/index.js","../../../packages/widget-editor/lib/components/select/components/Popup/component.js","../../../packages/widget-editor/lib/components/select/components/CustomOption/style.js","../../../packages/widget-editor/lib/components/select/components/CustomOption/index.js","../../../packages/widget-editor/lib/components/select/components/CustomOption/component.js","../../../packages/widget-editor/lib/components/select/style.js","../../../packages/widget-editor/lib/components/select/component.js","../../../packages/widget-editor/lib/components/select/index.js","../../../packages/widget-editor/lib/components/query-values/component.js","../../../packages/widget-editor/lib/components/query-values/index.js","../../../packages/widget-editor/lib/components/select-chart/component.js","../../../packages/widget-editor/lib/components/select-chart/index.js","../../../packages/widget-editor/lib/style-constants.js","../../../packages/widget-editor/lib/components/renderer/component.js","../../../packages/widget-editor/lib/components/renderer/index.js","../../../packages/widget-editor/lib/components/accordion/component.js","../../../packages/widget-editor/lib/components/button/component.js","../../../packages/widget-editor/lib/components/button/index.js","../../../packages/widget-editor/lib/components/tabs/style.js","../../../packages/widget-editor/lib/components/tabs/component.js","../../../packages/widget-editor/lib/components/slider/component.js","../../../packages/widget-editor/lib/components/slider/index.js","../../../packages/widget-editor/lib/styles-common/form-label.js","../../../packages/widget-editor/lib/styles-common/input.js","../../../packages/widget-editor/lib/components/query-limit/component.js","../../../packages/widget-editor/lib/components/query-limit/index.js","../../../packages/widget-editor/lib/styles-common/input-group.js","../../../packages/widget-editor/lib/components/widget-info/component.js","../../../packages/widget-editor/lib/components/widget-info/index.js","../../../packages/widget-editor/lib/components/order-values/component.js","../../../packages/widget-editor/lib/components/order-values/index.js","../../../packages/widget-editor/lib/components/table-view/style.js","../../../packages/widget-editor/lib/components/table-view/component.js","../../../packages/widget-editor/lib/components/table-view/index.js","../../../packages/widget-editor/lib/components/json-editor/style.js","../../../packages/widget-editor/lib/components/json-editor/index.js","../../../packages/widget-editor/lib/components/json-editor/component.js","../../../packages/widget-editor/lib/components/editor-options/component.js","../../../packages/widget-editor/lib/components/editor-options/index.js","../../../packages/widget-editor/lib/components/icons/CloseIcon/index.js","../../../packages/widget-editor/lib/components/modal/style.js","../../../packages/widget-editor/lib/components/modal/component.js","../../../packages/widget-editor/lib/components/footer/component.js","../../../packages/widget-editor/lib/components/footer/index.js","../../../packages/widget-editor/lib/components/editor/component.js","../../../packages/widget-editor/lib/modules/configuration/reducers.js","../../../packages/widget-editor/lib/components/editor/index.js","../../../packages/widget-editor/lib/components/widget-editor/index.js","../../../packages/widget-editor/lib/components/widget-editor/component.js","../../../packages/widget-editor/lib/modules/editor/reducers.js","../../../packages/widget-editor/lib/modules/editor/initial-state.js","../../../packages/widget-editor/lib/modules/theme/reducers.js","../../../packages/widget-editor/lib/modules/theme/initial-state.js","../../../packages/widget-editor/lib/modules/widget/actions.js","../../../packages/widget-editor/lib/modules/widget/reducers.js","../../../packages/widget-editor/lib/modules/widget/initial-state.js","../../../packages/widget-editor/lib/modules/configuration/initial-state.js","../../../packages/widget-editor/lib/modules/index.js","../../../packages/widget-editor/lib/middleware/index.js","../../../packages/widget-editor/lib/sagas/editor/index.js","../../../packages/widget-editor/lib/sagas/widget/index.js","../../../packages/widget-editor/lib/sagas/index.js","../../../packages/widget-editor/lib/index.js","modules/editor-options/actions.js","modules/editor-options/reducers.js","modules/editor-options/initial-state.js","store/index.js","components/editor/component.js","components/editor/index.js","components/editor-options/component.js","components/editor-options/index.js","components/toggle-options/component.js","components/toggle-options/index.js","App.js","serviceWorker.js","index.js","../../../packages/core/build/helpers/wiget-helper/constants.js","../../../packages/core/build/services/filters.js","../../../packages/core/build/constants.js"],"names":["_regeneratorRuntime","_classCallCheck","_createClass","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__importDefault","mod","__esModule","Object","defineProperty","exports","core_1","config_1","RwAdapter","endpoint","config","datasetService","widgetService","datasetId","AUTH_TOKEN","applications","env","locale","widget_params","asConfig","default","DatasetService","WidgetService","key","mark","_callee","url","response","wrap","_context","prev","concat","fetch","method","headers","Authorization","sent","json","abrupt","t0","console","error","stop","_callee2","_this$config$getConfi","_ref","dataset","_context2","getConfig","join","fetchData","data","_callee3","_ref2","fields","_context3","_callee4","_this$config$getConfi2","widgetId","_ref3","widget","_context4","fromDataset","id","fetchWidget","_callee5","sql","_ref4","_context5","getDataSqlQuery","fetchWidgetData","_callee6","_this$config$getConfi3","_ref5","_context6","status","Error","statusText","lodash_1","find","attributes","defaultEditableWidget","_defineProperty","filters_1","constants_1","DataService","adapter","setEditor","dispatch","widgetData","setDatasetId","getDataset","getWidget","type","sagaEvents","DATA_FLOW_DATASET_WIDGET_READY","restoring","getDatasetAndWidgets","getFieldsAndLayers","getWidgetData","paramsConfig","filtersService","widgetConfig","requestWidgetData","DATA_FLOW_WIDGET_DATA_READY","layers","getFields","getLayers","DATA_FLOW_DATA_READY","configuration","widgetParams","forEach","param","assign","warn","payload","title","description","params","scales","axes","marks","interaction_config","initialized","pie_1","bars_1","line_1","scatter_1","constants_2","VegaService","schema","defaultVegaSchema","setConfig","resolveChart","chart","chartType","SUPPORTED_CHARTS","indexOf","getChart","Pie","generateSchema","setGenericSettings","setScales","setMarks","bindData","interactionConfig","width","height","name","column","property","format","domain","field","sqlFields","range","scheme","from","encode","enter","tooltip","signal","fill","scale","x","y","update","startAngle","endAngle","innerRadius","outerRadius","hover","opacity","values","transform","category","Bars","setAxes","autosize","contains","padding","nice","zero","band","y2","axis","axisX","orient","labelOverlap","ticks","labels","text","align","baseline","angle","axisY","as","Line","signals","on","events","interactive","strokeCap","strokeWidth","strokeJoin","size","path","source","expr","Scatter","isEqual_1","StateProxy","cache","limit","orderBy","state","_this","keys","hasUpdate","checkHasUpdate","cacheCurrent","hasUpdates","dataset_1","widget_1","FiltersService","data_1","vega_1","state_proxy_1","constants","ConfigHelper","acceptedParams","pick","stateHandler","dispatchHandler","APP_NAMESPACE","action","setTheme","StyledContainer","div","withConfig","displayName","componentId","view","length","tooltipConfig","c","getTooltipConfigFields","showAllFields","map","formatType","editor","vegaContainer","memoryStoreWidget","current","runtime","offsetWidth","initialize","renderer","run","resize","window","addEventListener","createElement","className","ref","setConfiguration","saveConfiguration","patchConfiguration","getWidgetSelectedColumn","metadata","columns","identifier","getWidgetColumns","widgetRelevantProps","prop","props","row","viewBox","version","stroke","fillRule","d","StyledPopupContainer","StyledCategoryAlias","h4","StyledCategoryDescription","StyledValueAlias","IconBox","valueAlias","alias","categoryAlias","StyledSelectOptionTitle","StyledSelectOptionDescription","StyledSelectOption","isDisabled","innerProps","StyledSelectBox","InputStyles","control","display","border","borderRadius","CustomStyles","container","position","boxSizing","cursor","indicatorSeparator","dropdownIndicator","provided","color","selectProps","menuIsOpen","transition","indicatorsContainer","top","_extends","target","i","arguments","prototype","hasOwnProperty","call","isCustom","isPopup","otherProps","_useState","_useState2","isPopupOpen","setPopup","_useState3","_useState4","isOpen","setOpen","onMouseEnter","onMouseLeave","onMenuOpen","onMenuClose","styles","components","Option","theme","menuPlacement","defaultValue","onChange","selectedOption","getOptionLabel","option","getOptionValue","options","base","selected","setSelected","availableCharts","DEFAULT_BORDER","undefined","right","bottom","left","RestoringWidget","RestoringWidgetTitle","StyledAccordion","StyledAccordionContent","scrollHeight","StyledAccordionButton","a","StyledAccordionSection","openDefault","children","contentRef","outerHeight","setOuterHeight","clickToTitle","panel","onClick","StyledButton","button","active","_ref$type","StyledTabsContainer","StyledTabsContent","StyledList","ul","StyledListLabel","li","style","setActive","defaultNum","findIndex","child","num","label","tabContent","Tab","StyledSlider","ReactSlider","StyledThumb","slider","track","StyledTrack","isArray","index","trackBackground","Array","_ref$min","min","_ref$max","max","_ref$onChange","_ref$onDone","onDone","onAfterChange","renderTrack","renderThumb","input","StyledSliderBox","StyledInputBox","isDouble","_ref$label","_ref$minDistance","minDistance","_onChange","_ref$handleOnChangeVa","handleOnChangeValue","minValue","maxValue","htmlFor","_React$Component","WidgetInfo","obj","_this$props","_this$state","caption","yAxis","xAxis","enumerable","configurable","writable","stateFromProps","prevProps","prevConfiguration","setState","handleUpdate","_this2","_this$state2","placeholder","setTitle","setCaption","setXAxis","setYaxis","Component","ORDER_OPTIONS","orderType","order","setOrder","StyledTableBox","StyledTable","table","StyledTr","tr","StyledTd","td","center","StyledTh","el","StyledField","EditorColors","number","string","background","background_warning","EditorStyles","labelColumn","body","fontSize","outerBox","warningBox","contentBox","colors","setMinValue","setMaxValue","Number","onSetData","Icon","svg","hoverColor","StyledModalBox","StyledModalContainer","StyledModalContent","StyledModalCloseBtn","StyledActions","closeModal","StyledFooter","footer","authenticated","onSave","modalOpen","setModalOpen","_actions$setConfigura","Editor","dataService","restoreEditor","_datasetId","_setEditor","bind","resolveInitialState","_this$props2","resolveAuthentication","prevDatasetId","prevTheme","prevAuthenticated","_this$props3","initializeRestoration","resolveTheme","_this$props4","resolveUpdates","EDITOR_SAVE","WidgetEditor","setWidget","visualizationType","modules","_marked","preloadData","_marked2","baseSaga","_ref$widgetEditor$edi","widgetEditor","resolveWithProxy","_marked3","updateWidget","_marked4","stateProxy","_ref$widgetEditor","vega","_ref2$widgetEditor","proxyResult","DATA_FLOW_PROXY_UPDATE","_ref3$widgetEditor","DATA_FLOW_VISUALISATION_READY","root","modifyOptions","createAction","actions","authToken","optionsOpen","initStore","initialState","appReducers","combineReducers","editorOptions","handleModule","reducers","middlewares","applyMiddleware","thunk","WEmiddleware","enhancers","composeWithDevTools","store","createStore","sagas","diff","log","handleOnSave","React","connect","EditorComponent","EditorOptions","clx","EditorOptionsComponent","ToggleOptions","optionsActive","ToggleOptionsComponent","App","configureStore","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","$schema","legend","dotSize","category20","ordinal","ramp","labelFontSize","labelFont","labelColor","labelPadding","tickSize","tickColor","tickOpacity","tickExtra","bandPosition","domainWidth","domainColor","labelAlign","labelBaseline","grid","gridColor","gridOpacity","line","interpolate","fillOpacity","prepareSelectStatement","prepareAggregate","prepareFilters","prepareGroupBy","prepareOrderBy","prepareOrder","prepareLimit","_this$configuration","xTableName","tableName","yTableName","_this$configuration2","aggregateFunction","aggregation","toUpperCase","resolveTableName","condition","v","serializeValue","statement","filters","filtersQuery","rangeCondition","_this$configuration3","groupBy","_this$configuration$l","reduxActions","EDITOR_SET_CONFIGURATION","EDITOR_SET_WIDGET"],"mappings":"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","file":"static/js/main.01c3037b.chunk.js","sourcesContent":["\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar core_1 = require(\"@packages/core\");\n\nvar config_1 = __importDefault(require(\"./helpers/config\"));\n\nvar RwAdapter =\n/*#__PURE__*/\nfunction () {\n  function RwAdapter() {\n    _classCallCheck(this, RwAdapter);\n\n    this.endpoint = \"https://api.resourcewatch.org/v1\";\n    this.config = null;\n    this.datasetService = null;\n    this.widgetService = null;\n    this.datasetId = null;\n    this.AUTH_TOKEN = null;\n    this.applications = [\"rw\"];\n    this.env = \"production\";\n    this.locale = \"en\";\n    this.widget_params = [\"chartType\", \"visualizationType\", \"limit\", \"value\", \"category\", \"color\", \"size\", \"orderBy\", \"aggregateFunction\", \"filters\", \"areaIntersection\", \"band\", \"layer\"];\n    var asConfig = {\n      applications: this.applications,\n      env: this.env,\n      locale: this.locale\n    };\n    this.config = config_1.default(asConfig);\n    this.datasetService = new core_1.DatasetService(this.config);\n    this.widgetService = new core_1.WidgetService(this.config);\n  }\n\n  _createClass(RwAdapter, [{\n    key: \"payload\",\n    value: function payload() {\n      return {\n        applications: this.applications,\n        env: this.env\n      };\n    }\n  }, {\n    key: \"saveWidgetRW\",\n    value: function saveWidgetRW() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var url, response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                url = \"\".concat(this.endpoint, \"/dataset/\").concat(this.datasetId, \"/widget\");\n\n                if (!this.AUTH_TOKEN) {\n                  _context.next = 16;\n                  break;\n                }\n\n                _context.prev = 2;\n                _context.next = 5;\n                return fetch(url, {\n                  method: \"POST\",\n                  headers: {\n                    Authorization: \"Bearer \".concat(this.AUTH_TOKEN)\n                  }\n                });\n\n              case 5:\n                response = _context.sent;\n                _context.next = 8;\n                return response.json();\n\n              case 8:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Cant save widget\", _context.t0);\n\n              case 14:\n                _context.next = 17;\n                break;\n\n              case 16:\n                console.error(\"Missing auth token for saveWidget (RW)\");\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 11]]);\n      }));\n    }\n  }, {\n    key: \"hasAuthToken\",\n    value: function hasAuthToken() {\n      return !!this.AUTH_TOKEN;\n    }\n  }, {\n    key: \"setDatasetId\",\n    value: function setDatasetId(datasetId) {\n      if (!datasetId) {\n        console.error(\"Error: datasetId is required\");\n      }\n\n      this.datasetId = datasetId;\n    }\n  }, {\n    key: \"getDataset\",\n    value: function getDataset() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var _this$config$getConfi, applications, env, locale, includes, url, _ref, dataset;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$config$getConfi = this.config.getConfig(), applications = _this$config$getConfi.applications, env = _this$config$getConfi.env, locale = _this$config$getConfi.locale;\n                includes = \"metadata,vocabulary,widget,layer\";\n                url = \"\".concat(this.endpoint, \"/dataset/\").concat(this.datasetId, \"?\").concat(applications.join(\",\"), \"&env=\").concat(env, \"&language=\").concat(locale, \"&includes=\").concat(includes, \"&page[size]=999\");\n                _context2.next = 5;\n                return this.datasetService.fetchData(url);\n\n              case 5:\n                _ref = _context2.sent;\n                dataset = _ref.data;\n                return _context2.abrupt(\"return\", dataset);\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"getFields\",\n    value: function getFields() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var url, _ref2, fields;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                url = \"\".concat(this.endpoint, \"/fields/\").concat(this.datasetId);\n                _context3.next = 3;\n                return this.datasetService.fetchData(url);\n\n              case 3:\n                _ref2 = _context3.sent;\n                fields = _ref2.fields;\n                return _context3.abrupt(\"return\", fields);\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }, {\n    key: \"getWidget\",\n    value: function getWidget(dataset) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var _this$config$getConfi2, applications, env, locale, includes, widgetId, url, _ref3, widget;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this$config$getConfi2 = this.config.getConfig(), applications = _this$config$getConfi2.applications, env = _this$config$getConfi2.env, locale = _this$config$getConfi2.locale;\n                includes = \"metadata\";\n                widgetId = this.widgetService.fromDataset(dataset).id;\n                url = \"\".concat(this.endpoint, \"/widget/\").concat(widgetId, \"?\").concat(applications.join(\",\"), \"&env=\").concat(env, \"&language=\").concat(locale, \"&includes=\").concat(includes, \"&page[size]=999\");\n                _context4.next = 6;\n                return this.widgetService.fetchWidget(url);\n\n              case 6:\n                _ref3 = _context4.sent;\n                widget = _ref3.data;\n                return _context4.abrupt(\"return\", widget);\n\n              case 9:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n    }\n  }, {\n    key: \"getWidgetData\",\n    value: function getWidgetData(dataset, widget) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        var sql, url, _ref4, data;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                sql = this.widgetService.getDataSqlQuery(dataset, widget);\n                url = \"\".concat(this.endpoint, \"/query/\").concat(this.datasetId, \"?sql=\").concat(sql);\n                _context5.next = 4;\n                return this.widgetService.fetchWidgetData(url);\n\n              case 4:\n                _ref4 = _context5.sent;\n                data = _ref4.data;\n                return _context5.abrupt(\"return\", data);\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n    }\n  }, {\n    key: \"getLayers\",\n    value: function getLayers() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6() {\n        var _this$config$getConfi3, applications, env, locale, url, _ref5, data;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _this$config$getConfi3 = this.config.getConfig(), applications = _this$config$getConfi3.applications, env = _this$config$getConfi3.env, locale = _this$config$getConfi3.locale;\n                url = \"\".concat(this.endpoint, \"/dataset/\").concat(this.datasetId, \"/layer?app=\").concat(applications.join(\",\"), \"&env=\").concat(env, \"&page[size]=9999\");\n                _context6.next = 4;\n                return this.datasetService.fetchData(url);\n\n              case 4:\n                _ref5 = _context6.sent;\n                data = _ref5.data;\n                return _context6.abrupt(\"return\", data);\n\n              case 7:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n    }\n  }]);\n\n  return RwAdapter;\n}();\n\nexports.default = RwAdapter;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar DatasetService =\n/*#__PURE__*/\nfunction () {\n  function DatasetService(config) {\n    _classCallCheck(this, DatasetService);\n\n    this.config = config;\n  }\n\n  _createClass(DatasetService, [{\n    key: \"fetchData\",\n    value: function fetchData(url) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return fetch(url);\n\n              case 3:\n                response = _context.sent;\n\n                if (!(response.status >= 400)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                throw new Error(response.statusText);\n\n              case 6:\n                _context.next = 8;\n                return response.json();\n\n              case 8:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](0);\n                throw new Error(_context.t0);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 11]]);\n      }));\n    }\n  }]);\n\n  return DatasetService;\n}();\n\nexports.default = DatasetService;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar lodash_1 = require(\"lodash\");\n\nvar WidgetService =\n/*#__PURE__*/\nfunction () {\n  function WidgetService(config) {\n    _classCallCheck(this, WidgetService);\n\n    this.config = config;\n  }\n\n  _createClass(WidgetService, [{\n    key: \"fromDataset\",\n    value: function fromDataset(dataset) {\n      return lodash_1.find(dataset.attributes.widget, function (widget) {\n        return !!widget.attributes.defaultEditableWidget;\n      });\n    }\n  }, {\n    key: \"getDataSqlQuery\",\n    value: function getDataSqlQuery(dataset, widget) {\n      return '';\n    }\n  }, {\n    key: \"fetchWidgetData\",\n    value: function fetchWidgetData(url) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", null);\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n    }\n  }, {\n    key: \"fetchWidget\",\n    value: function fetchWidget(url) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return fetch(url);\n\n              case 3:\n                response = _context2.sent;\n\n                if (!(response.status >= 400)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                throw new Error(response.statusText);\n\n              case 6:\n                _context2.next = 8;\n                return response.json();\n\n              case 8:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                throw new Error(_context2.t0);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 11]]);\n      }));\n    }\n  }]);\n\n  return WidgetService;\n}();\n\nexports.default = WidgetService;","\"use strict\";\n\nvar _defineProperty = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/defineProperty\");\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar filters_1 = __importDefault(require(\"./filters\"));\n\nvar constants_1 = require(\"../constants\");\n\nvar DataService =\n/*#__PURE__*/\nfunction () {\n  function DataService(datasetId, adapter, setEditor, dispatch) {\n    _classCallCheck(this, DataService);\n\n    this.adapter = adapter;\n    this.setEditor = setEditor;\n    this.dispatch = dispatch;\n    this.dataset = null;\n    this.widget = null;\n    this.widgetData = null;\n    this.adapter.setDatasetId(datasetId);\n  }\n\n  _createClass(DataService, [{\n    key: \"getDatasetAndWidgets\",\n    value: function getDatasetAndWidgets() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.adapter.getDataset();\n\n              case 2:\n                this.dataset = _context.sent;\n                _context.next = 5;\n                return this.adapter.getWidget(this.dataset);\n\n              case 5:\n                this.widget = _context.sent;\n                this.setEditor({\n                  dataset: this.dataset,\n                  widget: this.widget\n                });\n                this.dispatch({\n                  type: constants_1.sagaEvents.DATA_FLOW_DATASET_WIDGET_READY\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }, {\n    key: \"restoreEditor\",\n    value: function restoreEditor(datasetId) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.setEditor({\n                  restoring: true\n                });\n                this.adapter.setDatasetId(datasetId);\n                _context2.next = 4;\n                return this.getDatasetAndWidgets();\n\n              case 4:\n                _context2.next = 6;\n                return this.getFieldsAndLayers();\n\n              case 6:\n                _context2.next = 8;\n                return this.getWidgetData();\n\n              case 8:\n                this.setEditor({\n                  restoring: false\n                });\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"getWidgetData\",\n    value: function getWidgetData() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var paramsConfig, filtersService;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                paramsConfig = this.widget.attributes.widgetConfig.paramsConfig;\n                filtersService = new filters_1.default(paramsConfig, this.dataset.id);\n                _context3.next = 4;\n                return filtersService.requestWidgetData();\n\n              case 4:\n                this.widgetData = _context3.sent;\n                this.setEditor({\n                  widgetData: this.widgetData.data\n                });\n                this.dispatch({\n                  type: constants_1.sagaEvents.DATA_FLOW_WIDGET_DATA_READY\n                });\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }, {\n    key: \"getFieldsAndLayers\",\n    value: function getFieldsAndLayers() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var fields, layers;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.adapter.getFields();\n\n              case 2:\n                fields = _context4.sent;\n                _context4.next = 5;\n                return this.adapter.getLayers();\n\n              case 5:\n                layers = _context4.sent;\n                this.setEditor({\n                  layers: layers,\n                  fields: fields\n                });\n                this.dispatch({\n                  type: constants_1.sagaEvents.DATA_FLOW_DATA_READY\n                });\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n    }\n  }, {\n    key: \"resolveUpdates\",\n    value: function resolveUpdates(configuration, widget) {\n      var widgetParams = {};\n      this.adapter.widget_params.forEach(function (param) {\n        if (param in configuration) {\n          widgetParams = Object.assign(Object.assign({}, widgetParams), _defineProperty({}, param, configuration[param]));\n        } else {\n          console.warn(\"Widget Editor: Param(\".concat(param, \") does not exsist in widget, make sure adapter.widget_params has fields that match with your API widget payload. Refer to documentation for adapter.widget_params for aditional information.\"));\n        }\n      });\n      var payload = Object.assign(Object.assign({}, this.adapter.payload()), {\n        title: configuration.title || null,\n        description: configuration.description || null,\n        widget: {\n          params: widgetParams,\n          data: widget.data || null,\n          scales: widget.scales || null,\n          axes: widget.axes || null,\n          marks: widget.marks || null,\n          interaction_config: widget.interaction_config || null,\n          config: widget.config || null\n        }\n      });\n      return payload;\n    }\n  }, {\n    key: \"resolveInitialState\",\n    value: function resolveInitialState() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.getDatasetAndWidgets();\n\n              case 2:\n                _context5.next = 4;\n                return this.getWidgetData();\n\n              case 4:\n                _context5.next = 6;\n                return this.getFieldsAndLayers();\n\n              case 6:\n                this.setEditor({\n                  initialized: true\n                });\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n    }\n  }]);\n\n  return DataService;\n}();\n\nexports.default = DataService;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar pie_1 = __importDefault(require(\"../charts/pie\"));\n\nvar bars_1 = __importDefault(require(\"../charts/bars\"));\n\nvar line_1 = __importDefault(require(\"../charts/line\"));\n\nvar scatter_1 = __importDefault(require(\"../charts/scatter\"));\n\nvar constants_1 = require(\"../charts/constants\");\n\nvar constants_2 = require(\"../helpers/wiget-helper/constants\");\n\nvar VegaService =\n/*#__PURE__*/\nfunction () {\n  function VegaService(widgetConfig, widgetData, configuration) {\n    _classCallCheck(this, VegaService);\n\n    this.schema = constants_2.defaultVegaSchema();\n    this.widgetConfig = widgetConfig;\n    this.widgetData = widgetData;\n    this.configuration = configuration;\n    this.setConfig();\n    this.resolveChart();\n  }\n\n  _createClass(VegaService, [{\n    key: \"resolveChart\",\n    value: function resolveChart() {\n      var chartType = this.configuration.chartType;\n      var chart;\n\n      if (constants_1.SUPPORTED_CHARTS.indexOf(chartType) === -1) {\n        throw new Error(\"Chart of type: \".concat(chartType, \" is not supported. we support: (\").concat(constants_1.SUPPORTED_CHARTS.join(\"|\"), \")\"));\n      }\n\n      if (chartType === \"pie\") {\n        chart = new pie_1.default(this.schema, this.widgetConfig, this.widgetData).getChart();\n      }\n\n      if (chartType === \"bar\") {\n        chart = new bars_1.default(this.schema, this.widgetConfig, this.widgetData).getChart();\n      }\n\n      if (chartType === \"line\") {\n        chart = new line_1.default(this.schema, this.widgetConfig, this.widgetData).getChart();\n      }\n\n      if (chartType === \"scatter\") {\n        chart = new scatter_1.default(this.schema, this.widgetConfig, this.widgetData).getChart();\n      }\n\n      this.schema = Object.assign(Object.assign({}, this.schema), chart);\n    }\n  }, {\n    key: \"setConfig\",\n    value: function setConfig() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        config: this.widgetConfig.config\n      });\n    }\n  }, {\n    key: \"getChart\",\n    value: function getChart() {\n      return this.schema;\n    }\n  }]);\n\n  return VegaService;\n}();\n\nexports.default = VegaService;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"../helpers/wiget-helper/constants\");\n\nvar Pie =\n/*#__PURE__*/\nfunction () {\n  function Pie(schema, widgetConfig, widgetData) {\n    _classCallCheck(this, Pie);\n\n    this.schema = schema;\n    this.widgetConfig = widgetConfig;\n    this.widgetData = widgetData;\n    this.generateSchema();\n    this.setGenericSettings();\n  }\n\n  _createClass(Pie, [{\n    key: \"generateSchema\",\n    value: function generateSchema() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        scales: this.setScales(),\n        marks: this.setMarks(),\n        data: this.bindData(),\n        interaction_config: this.interactionConfig()\n      });\n    }\n  }, {\n    key: \"setGenericSettings\",\n    value: function setGenericSettings() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        width: 400,\n        height: 400\n      });\n    }\n  }, {\n    key: \"interactionConfig\",\n    value: function interactionConfig() {\n      return [{\n        name: \"tooltip\",\n        config: {\n          fields: [{\n            column: \"y\",\n            property: \"y\",\n            type: \"number\",\n            format: \".2s\"\n          }, {\n            column: \"x\",\n            property: \"x\",\n            type: \"string\",\n            format: \".2f\"\n          }]\n        }\n      }];\n    }\n  }, {\n    key: \"setScales\",\n    value: function setScales() {\n      return [{\n        name: \"c\",\n        type: \"ordinal\",\n        domain: {\n          data: \"table\",\n          field: constants_1.sqlFields.value\n        },\n        range: {\n          scheme: \"category20\"\n        }\n      }];\n    }\n  }, {\n    key: \"setMarks\",\n    value: function setMarks() {\n      return [{\n        type: \"arc\",\n        from: {\n          data: \"table\"\n        },\n        encode: {\n          enter: {\n            tooltip: {\n              signal: \"{'Label': datum.x, 'Value': datum.y }\"\n            },\n            fill: {\n              scale: \"c\",\n              field: constants_1.sqlFields.value\n            },\n            x: {\n              signal: \"width / 2\"\n            },\n            y: {\n              signal: \"height / 2\"\n            }\n          },\n          update: {\n            startAngle: {\n              field: \"startAngle\"\n            },\n            endAngle: {\n              field: \"endAngle\"\n            },\n            innerRadius: {\n              signal: \"width > height ? height / 3 : width / 3\"\n            },\n            outerRadius: {\n              signal: \"width > height ? height / 2 : width / 2\"\n            }\n          },\n          hover: {\n            opacity: {\n              value: 0.8\n            }\n          }\n        }\n      }];\n    }\n  }, {\n    key: \"bindData\",\n    value: function bindData() {\n      var widgetData = this.widgetData;\n      return [{\n        values: widgetData,\n        name: \"table\",\n        transform: [{\n          type: \"pie\",\n          field: constants_1.sqlFields.category,\n          startAngle: 0,\n          endAngle: 6.29\n        }]\n      }];\n    }\n  }, {\n    key: \"getChart\",\n    value: function getChart() {\n      return this.schema;\n    }\n  }]);\n\n  return Pie;\n}();\n\nexports.default = Pie;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"../helpers/wiget-helper/constants\");\n\nvar Bars =\n/*#__PURE__*/\nfunction () {\n  function Bars(schema, widgetConfig, widgetData) {\n    _classCallCheck(this, Bars);\n\n    this.schema = schema;\n    this.widgetConfig = widgetConfig;\n    this.widgetData = widgetData;\n    this.generateSchema();\n    this.setGenericSettings();\n  }\n\n  _createClass(Bars, [{\n    key: \"generateSchema\",\n    value: function generateSchema() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        axes: this.setAxes(),\n        scales: this.setScales(),\n        marks: this.setMarks(),\n        data: this.bindData(),\n        interaction_config: this.interactionConfig()\n      });\n    }\n  }, {\n    key: \"setGenericSettings\",\n    value: function setGenericSettings() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        height: 400,\n        autosize: {\n          type: \"fit\",\n          contains: \"padding\"\n        },\n        padding: 20\n      });\n    }\n  }, {\n    key: \"setScales\",\n    value: function setScales() {\n      return [{\n        name: \"x\",\n        type: \"band\",\n        domain: {\n          data: \"table\",\n          field: \"id\"\n        },\n        range: \"width\",\n        padding: 0.05\n      }, {\n        name: \"y\",\n        type: \"linear\",\n        domain: {\n          data: \"table\",\n          field: constants_1.sqlFields.category\n        },\n        nice: true,\n        zero: true,\n        range: \"height\"\n      }];\n    }\n  }, {\n    key: \"setMarks\",\n    value: function setMarks() {\n      return [{\n        type: \"rect\",\n        from: {\n          data: \"table\"\n        },\n        encode: {\n          enter: {\n            tooltip: {\n              signal: \"{'Label': datum.x, 'Value': datum.y }\"\n            }\n          },\n          update: {\n            opacity: {\n              value: 1\n            },\n            x: {\n              scale: \"x\",\n              field: \"id\"\n            },\n            width: {\n              scale: \"x\",\n              band: 1\n            },\n            y: {\n              scale: \"y\",\n              field: \"y\"\n            },\n            y2: {\n              scale: \"y\",\n              value: 0\n            }\n          },\n          hover: {\n            opacity: {\n              value: 0.8\n            }\n          }\n        }\n      }];\n    }\n  }, {\n    key: \"interactionConfig\",\n    value: function interactionConfig() {\n      return [{\n        name: \"tooltip\",\n        config: {\n          fields: [{\n            column: \"y\",\n            property: \"y\",\n            type: \"number\",\n            format: \".2s\"\n          }, {\n            column: \"x\",\n            property: \"x\",\n            type: \"string\",\n            format: \".2f\"\n          }]\n        }\n      }];\n    }\n  }, {\n    key: \"setAxes\",\n    value: function setAxes() {\n      return [Object.assign(Object.assign(Object.assign({}, this.schema.axis), this.schema.axisX), {\n        orient: \"bottom\",\n        scale: \"x\",\n        labelOverlap: \"parity\",\n        ticks: false,\n        encode: {\n          labels: {\n            update: {\n              text: {\n                signal: \"width < 300 || data('table')[0].count > 10 ? truncate(data('table')[datum.value - 1].x, 12) : data('table')[datum.value - 1].x\"\n              },\n              align: {\n                signal: \"width < 300 || data('table')[0].count > 10 ? 'right' : 'center'\"\n              },\n              baseline: {\n                signal: \"width < 300 || data('table')[0].count > 10 ? 'middle' : 'top'\"\n              },\n              angle: {\n                signal: \"width < 300 || data('table')[0].count > 10 ? -90 : 0\"\n              }\n            }\n          }\n        }\n      }), Object.assign(Object.assign(Object.assign({}, this.schema.axis), this.schema.axisY), {\n        orient: \"left\",\n        scale: \"y\",\n        labelOverlap: \"parity\",\n        format: \"s\",\n        encode: {\n          labels: {\n            update: {\n              align: {\n                value: \"right\"\n              },\n              baseline: {\n                value: \"bottom\"\n              }\n            }\n          }\n        }\n      })];\n    }\n  }, {\n    key: \"bindData\",\n    value: function bindData() {\n      var widgetData = this.widgetData;\n      return [{\n        values: widgetData,\n        name: \"table\",\n        transform: [{\n          type: \"identifier\",\n          as: \"id\"\n        }, {\n          type: \"joinaggregate\",\n          as: [\"count\"]\n        }]\n      }];\n    }\n  }, {\n    key: \"getChart\",\n    value: function getChart() {\n      return this.schema;\n    }\n  }]);\n\n  return Bars;\n}();\n\nexports.default = Bars;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"../helpers/wiget-helper/constants\");\n\nvar Line =\n/*#__PURE__*/\nfunction () {\n  function Line(schema, widgetConfig, widgetData) {\n    _classCallCheck(this, Line);\n\n    this.schema = schema;\n    this.widgetConfig = widgetConfig;\n    this.widgetData = widgetData;\n    this.generateSchema();\n    this.setGenericSettings();\n  }\n\n  _createClass(Line, [{\n    key: \"generateSchema\",\n    value: function generateSchema() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        axes: this.setAxes(),\n        scales: this.setScales(),\n        marks: this.setMarks(),\n        data: this.bindData(),\n        interaction_config: this.interactionConfig(),\n        signals: [{\n          name: \"hover\",\n          value: null,\n          on: [{\n            events: \"@cell:mouseover\",\n            update: \"datum\"\n          }, {\n            events: \"@cell:mouseout\",\n            update: \"null\"\n          }]\n        }]\n      });\n    }\n  }, {\n    key: \"setGenericSettings\",\n    value: function setGenericSettings() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        height: 400,\n        autosize: {\n          type: \"fit\",\n          contains: \"padding\"\n        },\n        padding: 20\n      });\n    }\n  }, {\n    key: \"interactionConfig\",\n    value: function interactionConfig() {\n      return [{\n        name: \"tooltip\",\n        config: {\n          fields: [{\n            column: \"y\",\n            property: \"y\",\n            type: \"number\",\n            format: \".2s\"\n          }, {\n            column: \"x\",\n            property: \"x\",\n            type: \"string\"\n          }]\n        }\n      }];\n    }\n  }, {\n    key: \"setScales\",\n    value: function setScales() {\n      return [{\n        name: \"x\",\n        type: \"point\",\n        range: \"width\",\n        domain: {\n          data: \"table\",\n          field: \"x\"\n        }\n      }, {\n        name: \"y\",\n        type: \"linear\",\n        range: \"height\",\n        nice: true,\n        zero: true,\n        domain: {\n          data: \"table\",\n          field: constants_1.sqlFields.category\n        }\n      }];\n    }\n  }, {\n    key: \"setMarks\",\n    value: function setMarks() {\n      return [{\n        name: \"lines\",\n        interactive: false,\n        type: \"line\",\n        from: {\n          data: \"table\"\n        },\n        encode: {\n          enter: {\n            x: {\n              scale: \"x\",\n              field: \"x\"\n            },\n            y: {\n              scale: \"y\",\n              field: \"y\"\n            },\n            strokeCap: {\n              value: \"round\"\n            },\n            strokeWidth: {\n              value: 2\n            },\n            strokeJoin: {\n              value: \"round\"\n            }\n          }\n        }\n      }, {\n        name: \"points\",\n        interactive: false,\n        type: \"symbol\",\n        from: {\n          data: \"dots\"\n        },\n        encode: {\n          enter: {\n            x: {\n              scale: \"x\",\n              field: \"x\"\n            },\n            y: {\n              scale: \"y\",\n              field: \"y\"\n            }\n          },\n          update: {\n            opacity: {\n              value: 1\n            }\n          }\n        }\n      }, {\n        name: \"cell\",\n        type: \"path\",\n        from: {\n          data: \"lines\"\n        },\n        transform: [{\n          type: \"voronoi\",\n          x: \"datum.x\",\n          y: \"datum.y\",\n          size: [{\n            signal: \"width\"\n          }, {\n            signal: \"height\"\n          }]\n        }],\n        encode: {\n          enter: {\n            tooltip: {\n              signal: \"{'Value': datum.x }\"\n            }\n          },\n          update: {\n            path: {\n              field: \"path\"\n            },\n            fill: {\n              value: \"red\"\n            },\n            opacity: {\n              value: 0\n            }\n          }\n        }\n      }];\n    }\n  }, {\n    key: \"setAxes\",\n    value: function setAxes() {\n      return [Object.assign(Object.assign(Object.assign({}, this.schema.axis), this.schema.axisX), {\n        orient: \"bottom\",\n        scale: \"x\",\n        labelOverlap: \"parity\",\n        ticks: false\n      }), Object.assign(Object.assign(Object.assign({}, this.schema.axis), this.schema.axisY), {\n        orient: \"left\",\n        scale: \"y\",\n        labelOverlap: \"parity\",\n        format: \"s\",\n        encode: {\n          labels: {\n            update: {\n              align: {\n                value: \"right\"\n              },\n              baseline: {\n                value: \"bottom\"\n              }\n            }\n          }\n        }\n      })];\n    }\n  }, {\n    key: \"bindData\",\n    value: function bindData() {\n      var widgetData = this.widgetData;\n      return [{\n        values: widgetData,\n        name: \"table\",\n        transform: [{\n          type: \"identifier\",\n          as: \"id\"\n        }, {\n          type: \"joinaggregate\",\n          as: [\"count\"]\n        }]\n      }, {\n        name: \"dots\",\n        source: \"table\",\n        transform: [{\n          type: \"filter\",\n          expr: \"hover && hover.datum.x === datum.x\"\n        }]\n      }];\n    }\n  }, {\n    key: \"getChart\",\n    value: function getChart() {\n      return this.schema;\n    }\n  }]);\n\n  return Line;\n}();\n\nexports.default = Line;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"../helpers/wiget-helper/constants\");\n\nvar Scatter =\n/*#__PURE__*/\nfunction () {\n  function Scatter(schema, widgetConfig, widgetData) {\n    _classCallCheck(this, Scatter);\n\n    this.schema = schema;\n    this.widgetConfig = widgetConfig;\n    this.widgetData = widgetData;\n    this.generateSchema();\n    this.setGenericSettings();\n  }\n\n  _createClass(Scatter, [{\n    key: \"generateSchema\",\n    value: function generateSchema() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        axes: this.setAxes(),\n        scales: this.setScales(),\n        marks: this.setMarks(),\n        data: this.bindData()\n      });\n    }\n  }, {\n    key: \"setGenericSettings\",\n    value: function setGenericSettings() {\n      this.schema = Object.assign(Object.assign({}, this.schema), {\n        height: 300,\n        autosize: {\n          type: \"fit\",\n          contains: \"padding\"\n        },\n        padding: 20\n      });\n    }\n  }, {\n    key: \"setScales\",\n    value: function setScales() {\n      return [{\n        \"name\": \"xscale\",\n        \"type\": \"linear\",\n        \"round\": true,\n        \"nice\": true,\n        \"zero\": false,\n        \"domain\": {\n          data: \"table\",\n          field: constants_1.sqlFields.value\n        },\n        \"range\": \"width\"\n      }, {\n        \"name\": \"yscale\",\n        \"type\": \"linear\",\n        \"round\": true,\n        \"nice\": true,\n        \"zero\": true,\n        \"domain\": {\n          data: \"table\",\n          field: constants_1.sqlFields.category\n        },\n        \"range\": \"height\"\n      }];\n    }\n  }, {\n    key: \"setMarks\",\n    value: function setMarks() {\n      return [{\n        \"name\": \"marks\",\n        \"type\": \"symbol\",\n        \"from\": {\n          \"data\": \"table\"\n        },\n        \"encode\": {\n          \"update\": {\n            \"x\": {\n              \"scale\": \"xscale\",\n              \"field\": \"x\"\n            },\n            \"y\": {\n              \"scale\": \"yscale\",\n              \"field\": \"y\"\n            },\n            \"strokeOpacity\": {\n              \"value\": 0\n            },\n            \"zindex\": {\n              \"value\": 0\n            },\n            \"opacity\": {\n              \"value\": 0.5\n            }\n          },\n          \"hover\": {\n            \"strokeOpacity\": {\n              \"value\": 1\n            },\n            \"zindex\": {\n              \"value\": 1\n            },\n            \"opacity\": {\n              \"value\": 1\n            }\n          }\n        }\n      }];\n    }\n  }, {\n    key: \"setAxes\",\n    value: function setAxes() {\n      return [{\n        \"scale\": \"xscale\",\n        \"labelOverlap\": \"parity\",\n        \"orient\": \"bottom\",\n        \"encode\": {\n          \"labels\": {\n            \"update\": {\n              \"align\": {\n                \"value\": \"center\"\n              },\n              \"baseline\": {\n                \"value\": \"top\"\n              }\n            }\n          }\n        }\n      }, {\n        \"scale\": \"yscale\",\n        \"labelOverlap\": \"parity\",\n        \"orient\": \"left\",\n        \"format\": \"s\"\n      }];\n    }\n  }, {\n    key: \"bindData\",\n    value: function bindData() {\n      var widgetData = this.widgetData;\n      return [{\n        values: widgetData,\n        name: \"table\"\n      }];\n    }\n  }, {\n    key: \"getChart\",\n    value: function getChart() {\n      return this.schema;\n    }\n  }]);\n\n  return Scatter;\n}();\n\nexports.default = Scatter;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SUPPORTED_CHARTS = [\"pie\", \"bar\", \"line\", \"scatter\"];\nexports.default = {\n  SUPPORTED_CHARTS: exports.SUPPORTED_CHARTS\n};","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar filters_1 = __importDefault(require(\"./filters\"));\n\nvar isEqual_1 = __importDefault(require(\"lodash/isEqual\"));\n\nvar StateProxy =\n/*#__PURE__*/\nfunction () {\n  function StateProxy() {\n    _classCallCheck(this, StateProxy);\n\n    this.cache = {\n      limit: null,\n      chartType: null,\n      value: null,\n      orderBy: null\n    };\n  }\n\n  _createClass(StateProxy, [{\n    key: \"checkHasUpdate\",\n    value: function checkHasUpdate(state) {\n      var _this = this;\n\n      var keys = Object.keys(this.cache);\n      var hasUpdate = false;\n      keys.forEach(function (key) {\n        hasUpdate = hasUpdate || !isEqual_1.default(_this.cache[key], state[key]);\n      });\n      return hasUpdate;\n    }\n  }, {\n    key: \"cacheCurrent\",\n    value: function cacheCurrent(state) {\n      this.cache = state;\n    }\n  }, {\n    key: \"sync\",\n    value: function sync(state, datasetId) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var hasUpdate, filtersService, widgetData;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                hasUpdate = this.checkHasUpdate(state);\n\n                if (!hasUpdate) {\n                  _context.next = 8;\n                  break;\n                }\n\n                this.cacheCurrent(state);\n                filtersService = new filters_1.default(state, datasetId);\n                _context.next = 6;\n                return filtersService.requestWidgetData();\n\n              case 6:\n                widgetData = _context.sent;\n                return _context.abrupt(\"return\", {\n                  hasUpdates: hasUpdate,\n                  widgetData: widgetData.data\n                });\n\n              case 8:\n                return _context.abrupt(\"return\", {\n                  hasUpdates: hasUpdate,\n                  widgetData: null\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }]);\n\n  return StateProxy;\n}();\n\nexports.default = StateProxy;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar dataset_1 = __importDefault(require(\"./services/dataset\"));\n\nexports.DatasetService = dataset_1.default;\n\nvar widget_1 = __importDefault(require(\"./services/widget\"));\n\nexports.WidgetService = widget_1.default;\n\nvar filters_1 = __importDefault(require(\"./services/filters\"));\n\nexports.FiltersService = filters_1.default;\n\nvar data_1 = __importDefault(require(\"./services/data\"));\n\nexports.DataService = data_1.default;\n\nvar vega_1 = __importDefault(require(\"./services/vega\"));\n\nexports.VegaService = vega_1.default;\n\nvar state_proxy_1 = __importDefault(require(\"./services/state-proxy\"));\n\nexports.StateProxy = state_proxy_1.default;\n\nvar constants_1 = __importDefault(require(\"./constants\"));\n\nexports.constants = constants_1.default;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar lodash_1 = require(\"lodash\");\n\nvar ConfigHelper =\n/*#__PURE__*/\nfunction () {\n  function ConfigHelper(params) {\n    _classCallCheck(this, ConfigHelper);\n\n    this.setConfig(params);\n  }\n\n  _createClass(ConfigHelper, [{\n    key: \"setConfig\",\n    value: function setConfig(params) {\n      var acceptedParams = lodash_1.pick(params, [\"url\", \"env\", \"applications\", \"authUrl\", \"assetsPath\", \"userToken\", \"userEmail\", \"locale\"]);\n      this.config = Object.assign(Object.assign({}, this.config), acceptedParams);\n    }\n  }, {\n    key: \"getConfig\",\n    value: function getConfig() {\n      return this.config;\n    }\n  }]);\n\n  return ConfigHelper;\n}();\n\nexports.default = function (params) {\n  return new ConfigHelper(params);\n};","import { connect } from \"react-redux\";\nimport { createAction as VzCreateAction } from \"vizzuality-redux-tools\";\nimport { constants } from \"@packages/core\";\n/*\n  REDUX util to connect to our state\n\n  As the widget editor is namespaced in the consumer app\n  this will make it easier to develop for us and only care about the state of the widget editor\n*/\n\nexport var connectState = function connectState(stateHandler, dispatchHandler) {\n  return connect(function (state) {\n    return typeof stateHandler === \"function\" ? stateHandler(state[constants.APP_NAMESPACE]) : {};\n  }, dispatchHandler);\n}; // Create redux actions that namespaces the widget editor\n\nexport var createAction = function createAction(action) {\n  return VzCreateAction(\"\".concat(constants.APP_NAMESPACE, \"/\").concat(action));\n}; // Gets an action with our namespace. used for our sagas\n\nexport var getAction = function getAction(action) {\n  return \"\".concat(constants.APP_NAMESPACE, \"/\").concat(action);\n};\nexport default {\n  connectState: connectState,\n  createAction: createAction,\n  getAction: getAction\n};","import { createAction } from \"../../helpers/redux\";\nexport var setEditor = createAction(\"EDITOR/setEditor\");\nexport default {\n  setEditor: setEditor\n};","import { createAction } from \"../../helpers/redux\";\nexport var setTheme = createAction(\"EDITOR/THEME/setTheme\");\nexport default {\n  setTheme: setTheme\n};","import React, { useEffect, useRef } from \"react\";\nimport * as vega from \"vega\";\nimport vegaTooltip from \"vega-tooltip\";\nimport styled from \"styled-components\";\nimport isEqual from \"lodash/isEqual\";\nimport isEmpty from \"lodash/isEmpty\";\nimport ChartTheme from \"../../helpers/theme\";\nvar StyledContainer = styled.div.withConfig({\n  displayName: \"component__StyledContainer\",\n  componentId: \"p6fymh-0\"\n})([\"flex 1;display:flex;width:100%;.c-chart{flex:1;text-align:center;overflow:hidden;margin:20px;max-height:400px;align-self:center;}\"]);\n\nvar getTooltipConfigFields = function getTooltipConfigFields(widget) {\n  // We don't have the interaction config object defined\n  if (!widget || !widget.interaction_config || !widget.interaction_config.length) {\n    return [];\n  }\n\n  var tooltipConfig = widget.interaction_config.find(function (c) {\n    return c.name === \"tooltip\";\n  }); // We don't have the tooltip config defined\n\n  if (!tooltipConfig || !tooltipConfig.config || !tooltipConfig.config.fields || !tooltipConfig.config.fields.length) {\n    return [];\n  }\n\n  return tooltipConfig.config.fields;\n};\n\nvar instantiateTooltip = function instantiateTooltip(view, widget) {\n  var fields = getTooltipConfigFields(widget);\n  var res = vegaTooltip(view, {\n    showAllFields: false,\n    fields: fields.map(function (_ref) {\n      var column = _ref.column,\n          property = _ref.property,\n          type = _ref.type,\n          format = _ref.format;\n      return {\n        field: column,\n        title: property,\n        formatType: type === \"date\" ? \"time\" : type,\n        format: format\n      };\n    })\n  });\n};\n\nvar Chart = function Chart(_ref2) {\n  var editor = _ref2.editor,\n      widget = _ref2.widget;\n  var chart = useRef();\n  var vegaContainer = useRef();\n  var memoryStoreWidget = useRef(); // TODO: CLEANUP, probably better to just utalise a traditional Rclass here\n\n  useEffect(function () {\n    if (chart.current && !isEmpty(widget) && !isEqual(widget, memoryStoreWidget)) {\n      var runtime = vega.parse(widget);\n      var width = chart.current.offsetWidth;\n      vegaContainer.current = new vega.View(runtime).initialize(chart.current).renderer(\"canvas\").width(width - 40).hover().run();\n      memoryStoreWidget.current = widget; // We only show the tooltip if the interaction_config\n      // object is defined\n\n      if (vegaContainer.current && widget.interaction_config && widget.interaction_config.length) {\n        instantiateTooltip(vegaContainer.current, widget);\n      }\n\n      vegaContainer.current.resize = function () {\n        var width = chart.current.offsetWidth;\n        vegaContainer.current.width(width - 40).run();\n        instantiateTooltip(vegaContainer.current, widget);\n      };\n\n      window.addEventListener(\"resize\", vegaContainer.current.resize);\n    }\n  }, [chart, editor, widget]);\n  return React.createElement(StyledContainer, null, React.createElement(\"div\", {\n    className: \"c-chart\",\n    ref: chart\n  }));\n};\n\nexport default Chart;","import { connectState } from \"../../helpers/redux\"; // Components\n\nimport ChartComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    editor: state.editor,\n    widget: state.widget\n  };\n})(ChartComponent);","import { createAction } from \"../../helpers/redux\";\nexport var setConfiguration = createAction(\"CONFIGURATION/setConfiguration\");\nexport var patchConfiguration = createAction(\"CONFIGURATION/patchConfiguration\");\nexport var saveConfiguration = createAction(\"CONFIGURATION/saveConfiguration\");\nexport default {\n  saveConfiguration: saveConfiguration,\n  setConfiguration: setConfiguration,\n  patchConfiguration: patchConfiguration\n};","import _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { createSelector } from \"reselect\";\n\nvar getConfiguration = function getConfiguration(state) {\n  return state.configuration;\n};\n\nvar getDataset = function getDataset(state) {\n  return state.editor.dataset;\n};\n\nexport var getWidgetSelectedColumn = createSelector([getConfiguration, getDataset], function (configuration, dataset) {\n  var value = dataset.attributes.metadata[0].attributes.columns[configuration.value.name];\n  return _objectSpread({}, value, {\n    identifier: configuration.value.name\n  });\n});\nexport var getWidgetColumns = createSelector([getDataset], function (dataset) {\n  // TODO: Lots of assumptions here\n  // 1. Do we always have dataset metadata?\n  // 2. Is it always on index:0 ?\n  // 3. Do we always have relevant props ?\n  var columns = dataset.attributes.widgetRelevantProps.map(function (prop) {\n    return _objectSpread({}, dataset.attributes.metadata[0].attributes.columns[prop], {\n      identifier: prop\n    });\n  });\n  return columns;\n});","import styled from \"styled-components\";\nvar FlexContainer = styled.div.withConfig({\n  displayName: \"flex__FlexContainer\",\n  componentId: \"sc-1jjiixp-0\"\n})([\"display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;flex-flow:\", \";width:100%;\", \" label{flex-basis:100%;}\"], function (props) {\n  return props.row ? \"row\" : \"column\";\n}, function (props) {\n  return props.row ? \"> * { padding-right: 20px; &:last-child { padding-right: 0; } } \" : \"\";\n});\nexport default FlexContainer;","import React from 'react';\n\nvar CategoryIcon = function CategoryIcon() {\n  return React.createElement(\"svg\", {\n    width: \"10px\",\n    height: \"10px\",\n    viewBox: \"0 0 10 10\",\n    version: \"1.1\"\n  }, React.createElement(\"g\", {\n    id: \"Iteration\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, React.createElement(\"g\", {\n    id: \"xAxis-Selector\",\n    transform: \"translate(-183.000000, -311.000000)\",\n    fill: \"#2C75B0\"\n  }, React.createElement(\"g\", {\n    id: \"Rectangle-409-+-364-+-MWh-Copy\",\n    transform: \"translate(163.000000, 289.000000)\"\n  }, React.createElement(\"g\", {\n    id: \"Group-20\",\n    transform: \"translate(19.000000, 10.000000)\"\n  }, React.createElement(\"path\", {\n    d: \"M4.5,12 L11,18.5 L7.5,22 L1,15.5 L1,12 L4.5,12 Z M3.5,13.5 C2.94771525,13.5 2.5,13.9477153 2.5,14.5 C2.5,15.0522847 2.94771525,15.5 3.5,15.5 C4.05228475,15.5 4.5,15.0522847 4.5,14.5 C4.5,13.9477153 4.05228475,13.5 3.5,13.5 Z\",\n    id: \"item-category\"\n  }))))));\n};\n\nexport default CategoryIcon;","import styled from \"styled-components\";\nexport var StyledPopupContainer = styled.div.withConfig({\n  displayName: \"style__StyledPopupContainer\",\n  componentId: \"eg9uyn-0\"\n})([\"position:absolute;box-sizing:border-box;height:auto;width:422px;border:1px solid rgba(26,28,34,0.1);border-radius:4px;background-color:#FFFFFF;box-shadow:0 20px 30px 0 rgba(0,0,0,0.1);z-index:2;bottom:40px;left:-75px;padding:20px;&:after{content:'';position:absolute;left:200px;bottom:-20px;border:10px solid transparent;border-top:10px solid #FFFFFF;z-index:3;}\"]);\nexport var StyledCategoryAlias = styled.h4.withConfig({\n  displayName: \"style__StyledCategoryAlias\",\n  componentId: \"eg9uyn-1\"\n})([\"position:relative;padding-left:20px;margin-bottom:10px;margin-top:0;color:#2C75B0;font-size:16px;line-height:25px;\"]);\nexport var StyledCategoryDescription = styled.div.withConfig({\n  displayName: \"style__StyledCategoryDescription\",\n  componentId: \"eg9uyn-2\"\n})([\"position:relative;padding-left:20px;margin-top:10px;margin-bottom:10px;color:#393F44;font-size:16px;line-height:25px;\"]);\nexport var StyledValueAlias = styled.div.withConfig({\n  displayName: \"style__StyledValueAlias\",\n  componentId: \"eg9uyn-3\"\n})([\"position:relative;padding-left:20px;margin-top:10px;margin-bottom:10px;color:#393F44;font-size:16px;line-height:25px;\"]);\nexport var IconBox = styled.div.withConfig({\n  displayName: \"style__IconBox\",\n  componentId: \"eg9uyn-4\"\n})([\"color:#393F44;position:absolute;left:0;top:1px;\"]);","import Popup from \"./component\";\nexport default Popup;","import React from \"react\";\nimport CategoryIcon from \"../../../icons/CategoryIcon\";\nimport { StyledPopupContainer, StyledCategoryAlias, StyledCategoryDescription, StyledValueAlias, IconBox } from \"./style\";\n\nvar Popup = function Popup(_ref) {\n  var category = _ref.category,\n      value = _ref.value;\n  var valueAlias = value.alias;\n  var categoryAlias = category.alias;\n  return React.createElement(StyledPopupContainer, null, React.createElement(StyledCategoryAlias, null, React.createElement(IconBox, null, React.createElement(CategoryIcon, null)), categoryAlias), React.createElement(StyledCategoryDescription, null, React.createElement(IconBox, null, \"#\"), categoryAlias, \" Description\"), React.createElement(StyledValueAlias, null, React.createElement(IconBox, null, \"#\"), valueAlias));\n};\n\nexport default Popup;","import styled from \"styled-components\";\nexport var StyledSelectOptionTitle = styled.div.withConfig({\n  displayName: \"style__StyledSelectOptionTitle\",\n  componentId: \"sc-42eb37-0\"\n})([\"font-size:14px;display:flex;align-items:center;font-weight:500;\"]);\nexport var StyledSelectOptionDescription = styled.div.withConfig({\n  displayName: \"style__StyledSelectOptionDescription\",\n  componentId: \"sc-42eb37-1\"\n})([\"font-size:12px;padding-top:10px;\"]);\nexport var StyledSelectOption = styled.div.withConfig({\n  displayName: \"style__StyledSelectOption\",\n  componentId: \"sc-42eb37-2\"\n})([\"padding:10px 20px;border-bottom:1px solid #6f6f6f;color:\", \";&:hover{background-color:blue;cursor:pointer;color:white;}&:last-child{border-bottom:none;}\"], function (props) {\n  return props.isDisabled ? \"#eaeaea\" : \"#6f6f6f\" || \"#6f6f6f\";\n});","import CustomOption from \"./component\";\nexport default CustomOption;","import React from \"react\";\nimport { StyledSelectOption, StyledSelectOptionTitle, StyledSelectOptionDescription } from \"./style\";\n\nvar CustomOption = function CustomOption(_ref) {\n  var data = _ref.data,\n      isDisabled = _ref.isDisabled,\n      innerProps = _ref.innerProps;\n  var description = data.description,\n      alias = data.alias;\n  return !isDisabled ? React.createElement(StyledSelectOption, innerProps, React.createElement(StyledSelectOptionTitle, null, alias), description && description.length > 0 && React.createElement(StyledSelectOptionDescription, null, description)) : null;\n};\n\nexport default CustomOption;","import styled from \"styled-components\";\nexport var StyledSelectBox = styled.div.withConfig({\n  displayName: \"style__StyledSelectBox\",\n  componentId: \"sc-1braopw-0\"\n})([\"position:relative;\"]);\nexport var InputStyles = {\n  control: function control() {\n    return {\n      display: \"flex\",\n      border: \"1px solid rgba(202,204,208,0.85)\",\n      borderRadius: \"4px\",\n      padding: \"3px 0\"\n    };\n  }\n};\nexport var CustomStyles = {\n  container: function container() {\n    return {\n      position: \"relative\",\n      boxSizing: \"border-box\",\n      cursor: \"pointer\"\n    };\n  },\n  indicatorSeparator: function indicatorSeparator() {\n    return {\n      display: \"none\"\n    };\n  },\n  dropdownIndicator: function dropdownIndicator(provided, state) {\n    return {\n      color: \"#c32d7b\",\n      transform: state.selectProps.menuIsOpen ? \"rotate(180deg)\" : \"none\",\n      transition: \"all 0.2s ease-out\"\n    };\n  },\n  indicatorsContainer: function indicatorsContainer() {\n    return {\n      color: \"#c32d7b\",\n      display: \"flex\",\n      padding: \"8px\",\n      transition: \"color 150ms\",\n      boxSizing: \"border-box\",\n      position: \"relative\",\n      top: \"5px\"\n    };\n  },\n  control: function control() {\n    return {\n      display: \"flex\",\n      border: \"none\",\n      borderRadius: \"4px\",\n      padding: \"3px 0\"\n    };\n  }\n};","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState } from \"react\";\nimport Select from \"react-select\";\nimport Popup from \"./components/Popup\";\nimport CustomOption from \"./components/CustomOption\";\nimport { StyledSelectBox, CustomStyles, InputStyles } from \"./style\";\n/**\n * CustomSelect. Component uses react-select library for customization.\n */\n\nvar CustomSelect = function CustomSelect(props) {\n  var isCustom = props.isCustom,\n      isPopup = props.isPopup,\n      configuration = props.configuration,\n      otherProps = _objectWithoutProperties(props, [\"isCustom\", \"isPopup\", \"configuration\"]);\n\n  var value = configuration.value,\n      category = configuration.category;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isPopupOpen = _useState2[0],\n      setPopup = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isOpen = _useState4[0],\n      setOpen = _useState4[1];\n\n  return React.createElement(StyledSelectBox, {\n    onMouseEnter: function onMouseEnter() {\n      return setPopup(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setPopup(false);\n    }\n  }, React.createElement(Select, _extends({}, otherProps, {\n    onMenuOpen: function onMenuOpen() {\n      return setOpen(true);\n    },\n    onMenuClose: function onMenuClose() {\n      return setOpen(false);\n    },\n    styles: isCustom ? CustomStyles : InputStyles,\n    components: isCustom ? {\n      Option: CustomOption\n    } : null\n  })), isPopup && isPopupOpen && !isOpen && React.createElement(Popup, {\n    category: category,\n    value: value\n  }));\n};\n\nexport default CustomSelect;","import Select from \"./component\";\nexport default Select;","import _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport FlexContainer from \"../../styles-common/flex\";\nimport Select from \"../select\";\nvar StyledContainer = styled.div.withConfig({\n  displayName: \"component__StyledContainer\",\n  componentId: \"sc-1bmwxtk-0\"\n})([\"margin:10px;flex-basis:100%;padding:10px;width:100%;max-width:300px;box-sizing:border-box;\"]);\n\nvar QueryValues = function QueryValues(_ref) {\n  var theme = _ref.theme,\n      value = _ref.value,\n      columns = _ref.columns,\n      configuration = _ref.configuration,\n      patchConfiguration = _ref.patchConfiguration;\n\n  var handleChange = function handleChange(selectedOption) {\n    // TODO: Wee need to set type here\n    patchConfiguration({\n      value: _objectSpread({}, configuration.value, {\n        name: selectedOption.identifier,\n        alias: selectedOption.alias\n      })\n    });\n  };\n\n  return React.createElement(FlexContainer, null, React.createElement(StyledContainer, null, React.createElement(Select, {\n    menuPlacement: \"top\",\n    defaultValue: value,\n    onChange: handleChange,\n    getOptionLabel: function getOptionLabel(option) {\n      return option.alias;\n    },\n    getOptionValue: function getOptionValue(option) {\n      return option.identifier;\n    },\n    options: columns,\n    configuration: configuration,\n    isCustom: true,\n    isPopup: true\n  })));\n};\n\nexport default QueryValues;","import { connectState } from \"../../helpers/redux\";\nimport { patchConfiguration } from \"../../modules/configuration/actions\";\nimport * as selectors from \"../../modules/widget/selectors\";\nimport QueryValuesComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    theme: state.theme,\n    value: selectors.getWidgetSelectedColumn(state),\n    configuration: state.configuration,\n    widgetRelevantProps: state.editor.dataset.attributes.widgetRelevantProps,\n    columns: selectors.getWidgetColumns(state)\n  };\n}, {\n  patchConfiguration: patchConfiguration\n})(QueryValuesComponent);","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport find from \"lodash/find\";\nimport isEqual from \"lodash/isEqual\";\nimport Select from \"react-select\";\nvar StyledContainer = styled.div.withConfig({\n  displayName: \"component__StyledContainer\",\n  componentId: \"sc-5wfvth-0\"\n})([\"margin:10px;\"]);\nvar InputStyles = {\n  control: function control() {\n    return {\n      // none of react-select's styles are passed to <Control />\n      display: \"flex\",\n      border: \"1px solid rgba(202,204,208,0.85)\",\n      borderRadius: \"4px\",\n      padding: \"3px 0\"\n    };\n  },\n  option: function option(base) {\n    return _objectSpread({}, base);\n  }\n};\n\nvar SelectChart = function SelectChart(_ref) {\n  var patchConfiguration = _ref.patchConfiguration,\n      options = _ref.options,\n      value = _ref.value;\n\n  var _useState = useState(find(options, {\n    value: value\n  })),\n      _useState2 = _slicedToArray(_useState, 2),\n      selected = _useState2[0],\n      setSelected = _useState2[1];\n\n  useEffect(function () {\n    // TODO: optimize...\n    if (!isEqual(find(options, {\n      value: value\n    }), selected)) {\n      setSelected(find(options, {\n        value: value\n      }));\n    }\n  }, [selected, value]);\n\n  var handleChange = function handleChange(option) {\n    patchConfiguration({\n      chartType: option.value\n    });\n  };\n\n  return React.createElement(StyledContainer, null, React.createElement(Select, {\n    onChange: handleChange,\n    value: selected,\n    options: options,\n    styles: InputStyles\n  }));\n};\n\nexport default SelectChart;","import { connectState } from \"../../helpers/redux\";\nimport { patchConfiguration } from \"../../modules/configuration/actions\"; // Components\n\nimport SelectChartComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    options: state.configuration.availableCharts,\n    value: state.configuration.chartType\n  };\n}, {\n  patchConfiguration: patchConfiguration\n})(SelectChartComponent);","export var FOOTER_HEIGHT = \"100px\";\nexport var DEFAULT_BORDER = function DEFAULT_BORDER() {\n  var top = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n  var right = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var bottom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var left = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  return \"\\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.09);\\n\\n  border-color: rgba(26, 28, 34, 0.1);\\n  border-style: solid;\\n\\n  border-width: \".concat(top, \"px \").concat(right, \"px \").concat(bottom, \"px \").concat(left, \"px;\\n\");\n};\nexport default {\n  FOOTER_HEIGHT: FOOTER_HEIGHT,\n  DEFAULT_BORDER: DEFAULT_BORDER\n};","import React from \"react\";\nimport styled from \"styled-components\";\nimport isEmpty from \"lodash/isEmpty\";\nimport Chart from \"../chart\";\nimport QueryValues from \"../query-values\";\nimport SelectChart from \"../select-chart\";\nimport { FOOTER_HEIGHT, DEFAULT_BORDER } from \"../../style-constants\";\nvar StyledContainer = styled.div.withConfig({\n  displayName: \"component__StyledContainer\",\n  componentId: \"sc-1jp54tw-0\"\n})([\"display:flex;flex-flow:column;height:calc(100% - \", \");background:#fff;flex:1;width:100%;\", \"\"], FOOTER_HEIGHT, DEFAULT_BORDER());\nvar RestoringWidget = styled.div.withConfig({\n  displayName: \"component__RestoringWidget\",\n  componentId: \"sc-1jp54tw-1\"\n})([\"height:300px;display:flex;align-items:center;justify-content:center;\"]);\nvar RestoringWidgetTitle = styled.h4.withConfig({\n  displayName: \"component__RestoringWidgetTitle\",\n  componentId: \"sc-1jp54tw-2\"\n})([\"color:#a9a9a9;font-size:21px;\"]);\n\nvar Renderer = function Renderer(_ref) {\n  var widget = _ref.widget,\n      editor = _ref.editor;\n  var restoring = editor.restoring,\n      initialized = editor.initialized;\n  return React.createElement(StyledContainer, null, React.createElement(SelectChart, null), initialized && !restoring && React.createElement(Chart, null), !initialized && React.createElement(RestoringWidget, null, React.createElement(RestoringWidgetTitle, null, \"Loading widget...\")), restoring && React.createElement(RestoringWidget, null, React.createElement(RestoringWidgetTitle, null, \"Building widget...\")), initialized && !restoring && React.createElement(QueryValues, null));\n};\n\nexport default Renderer;","// TODO: This should be its own package\n// It should be possible to use the renderer without the editor!\nimport { connectState } from \"../../helpers/redux\";\nimport { setEditor } from \"../../modules/editor/actions\";\nimport { setTheme } from \"../../modules/theme/actions\"; // Components\n\nimport RendererComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    editor: state.editor,\n    widget: state.widget\n  };\n})(RendererComponent);","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport styled, { css } from \"styled-components\";\nvar StyledAccordion = styled.div.withConfig({\n  displayName: \"component__StyledAccordion\",\n  componentId: \"zppq3y-0\"\n})([\"width:100%;padding-top:24px;padding-bottom:24px;\"]);\nvar StyledAccordionContent = styled.div.withConfig({\n  displayName: \"component__StyledAccordionContent\",\n  componentId: \"zppq3y-1\"\n})([\"display:\\\"block\\\";max-height:\", \";overflow-y:\", \";transition:all 0.2s ease-out;padding-left:24px;padding-top:\", \";padding-bottom:\", \";\"], function (props) {\n  return props.scrollHeight + \"px\" || \"0\";\n}, function (props) {\n  return props.scrollHeight ? \"visible\" : \"hidden\";\n}, function (props) {\n  return props.scrollHeight ? \"18px\" : \"0\" || \"0\";\n}, function (props) {\n  return props.scrollHeight ? \"18px\" : \"0\" || \"0\";\n});\nvar StyledAccordionButton = styled.a.withConfig({\n  displayName: \"component__StyledAccordionButton\",\n  componentId: \"zppq3y-2\"\n})([\"display:block;height:25px;color:#393f44;font-size:16px;font-weight:bold;line-height:25px;position:relative;padding-left:25px;cursor:pointer;&:before{content:\\\" \\\";width:10px;height:10px;border-radius:50%;background:#c32d7b;position:absolute;left:0;top:8px;}\"]);\nvar StyledAccordionSection = styled.div.withConfig({\n  displayName: \"component__StyledAccordionSection\",\n  componentId: \"zppq3y-3\"\n})([\"padding-top:11px;padding-bottom:11px;position:relative;&:before{content:\\\" \\\";height:1px;width:calc(100% - 24px);display:block;position:absolute;top:0;background-color:#d2d3d6;margin-left:24px;}&:first-child{&:before{display:none;}}\"]);\nexport var AccordionSection = function AccordionSection(_ref) {\n  var title = _ref.title,\n      openDefault = _ref.openDefault,\n      children = _ref.children;\n  var contentRef = useRef(null);\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      outerHeight = _useState2[0],\n      setOuterHeight = _useState2[1];\n\n  var clickToTitle = function clickToTitle() {\n    var panel = contentRef.current;\n    var height = outerHeight ? 0 : panel.scrollHeight;\n    setOuterHeight(height);\n  };\n\n  useEffect(function () {\n    if (openDefault) clickToTitle();\n  }, []);\n  return React.createElement(StyledAccordionSection, null, React.createElement(StyledAccordionButton, {\n    onClick: function onClick() {\n      return clickToTitle();\n    }\n  }, title), React.createElement(StyledAccordionContent, {\n    ref: contentRef,\n    scrollHeight: outerHeight\n  }, children));\n};\nexport var Accordion = function Accordion(_ref2) {\n  var children = _ref2.children;\n  return React.createElement(StyledAccordion, null, children);\n};","import _objectWithoutProperties from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from \"react\";\nimport styled, { css } from \"styled-components\";\nvar StyledButton = styled.button.withConfig({\n  displayName: \"component__StyledButton\",\n  componentId: \"l5yyzu-0\"\n})([\"cursor:pointer;font-size:16px;color:#393f44;border:1px solid rgba(202,204,208,0.85);background:transparent;padding:10px 20px;border-radius:5px;outline:1;\", \" \", \" \", \" \", \"\"], function (props) {\n  return props.type && props.type === \"cta\" && css([\"background:\", \";color:#fff;border:1px solid transparent;\"], props.color);\n}, function (props) {\n  return props.type && props.type === \"highlight\" && css([\"color:\", \";border:1px solid \", \";\"], props.color, props.color);\n}, function (props) {\n  return props.type && props.type === \"default\" && css([\"&:hover,&.active{\", \"}\"], function (props) {\n    return props.color && css([\"border:1px solid \", \";color:\", \";\"], props.color, props.color);\n  });\n}, function (props) {\n  return props.active && css([\"border:1px solid \", \";color:\", \";\"], props.color, props.color);\n});\n\nvar Button = function Button(_ref) {\n  var _ref$type = _ref.type,\n      type = _ref$type === void 0 ? \"default\" : _ref$type,\n      theme = _ref.theme,\n      children = _ref.children,\n      props = _objectWithoutProperties(_ref, [\"type\", \"theme\", \"children\"]);\n\n  return React.createElement(StyledButton, _extends({}, props, {\n    color: theme.color,\n    type: type\n  }), children);\n};\n\nexport default Button;","import { connectState } from \"../../helpers/redux\"; // Components\n\nimport ButtonComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    theme: state.theme\n  };\n})(ButtonComponent);","import styled from 'styled-components';\nexport var StyledTabsContainer = styled.div.withConfig({\n  displayName: \"style__StyledTabsContainer\",\n  componentId: \"qvkojo-0\"\n})([\"position:relative;\"]);\nexport var StyledTabsContent = styled.div.withConfig({\n  displayName: \"style__StyledTabsContent\",\n  componentId: \"qvkojo-1\"\n})([\"display:\", \";\"], function (props) {\n  return props.active ? 'block' : 'none';\n});\nexport var StyledList = styled.ul.withConfig({\n  displayName: \"style__StyledList\",\n  componentId: \"qvkojo-2\"\n})([\"display:flex;justify-content:space-between;padding:20px 0;list-style:none;\"]);\nexport var StyledListLabel = styled.li.withConfig({\n  displayName: \"style__StyledListLabel\",\n  componentId: \"qvkojo-3\"\n})([\"color:red;padding-right:5px;padding-left:5px;&:first-child{padding-left:0;}&:last-child{padding-right:0;}\"]);","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useEffect } from 'react';\nimport Button from \"../button\";\nimport { StyledTabsContainer, StyledTabsContent, StyledList, StyledListLabel } from \"./style\";\n\nvar TabButton = function TabButton(props) {\n  return React.createElement(Button, _extends({\n    style: {\n      height: \"100%\"\n    }\n  }, props));\n};\n\nexport var Tabs = function Tabs(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      active = _useState2[0],\n      setActive = _useState2[1];\n\n  useEffect(function () {\n    var defaultNum = children.findIndex(function (child) {\n      return child.props.default;\n    });\n    setActive(defaultNum === -1 ? 0 : defaultNum);\n  }, []);\n  return React.createElement(StyledTabsContainer, null, React.createElement(StyledList, null, children.map(function (child, num) {\n    var label = child.props.label;\n    return label ? React.createElement(StyledListLabel, {\n      key: num\n    }, React.createElement(TabButton, {\n      onClick: function onClick() {\n        return setActive(num);\n      },\n      active: num === active\n    }, label)) : null;\n  })), children.map(function (child, num) {\n    var tabContent = child.props.children;\n    return React.createElement(StyledTabsContent, {\n      key: num,\n      active: num === active\n    }, tabContent);\n  }));\n};\n/**\n * \n * @param {label} label require for displaying tab\n */\n\nexport var Tab = function Tab(_ref2) {\n  var children = _ref2.children,\n      label = _ref2.label;\n  return label ? children : null;\n};","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from \"react\";\nimport styled, { ThemeProvider } from \"styled-components\";\nimport ReactSlider from \"react-slider\";\nvar StyledSlider = styled(ReactSlider).withConfig({\n  displayName: \"component__StyledSlider\",\n  componentId: \"ps9f57-0\"\n})([\"height:7px;width:inherit;\"]);\nvar StyledThumb = styled.div.withConfig({\n  displayName: \"component__StyledThumb\",\n  componentId: \"ps9f57-1\"\n})([\"height:18px;line-height:18px;width:18px;background-color:#fff;border:3px solid \", \";border-radius:50%;transform:translateY(-50%);top:50%;cursor:grab;\"], function (props) {\n  return props.theme.slider.track;\n});\nvar StyledTrack = styled.div.withConfig({\n  displayName: \"component__StyledTrack\",\n  componentId: \"ps9f57-2\"\n})([\"top:0;bottom:0;background:\", \";border-radius:999px;\"], function (props) {\n  if (props.isArray) {\n    return props.isArray && props.index === 1 ? props.theme.slider.track : props.theme.slider.trackBackground;\n  } else {\n    return props.index === 2 ? props.theme.slider.track : props.index === 1 ? props.theme.slider.trackBackground : props.theme.slider.track;\n  }\n\n  ;\n});\n\nvar Thumb = function Thumb(props, state) {\n  return React.createElement(StyledThumb, props);\n};\n\nvar Track = function Track(props, state) {\n  return React.createElement(StyledTrack, _extends({}, props, {\n    isArray: Array.isArray(state.value),\n    index: state.index\n  }));\n};\n\nvar Slider = function Slider(_ref) {\n  var _ref$min = _ref.min,\n      min = _ref$min === void 0 ? 1 : _ref$min,\n      _ref$max = _ref.max,\n      max = _ref$max === void 0 ? 500 : _ref$max,\n      value = _ref.value,\n      defaultValue = _ref.defaultValue,\n      theme = _ref.theme,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange,\n      _ref$onDone = _ref.onDone,\n      onDone = _ref$onDone === void 0 ? function () {} : _ref$onDone;\n  return React.createElement(ThemeProvider, {\n    theme: theme\n  }, React.createElement(StyledSlider, {\n    onAfterChange: onDone,\n    onChange: onChange,\n    renderTrack: Track,\n    renderThumb: Thumb,\n    value: value,\n    defaultValue: defaultValue,\n    max: max,\n    min: min\n  }));\n};\n\nexport default Slider;","import { connectState } from \"../../helpers/redux\";\nimport SliderComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    theme: state.theme\n  };\n})(SliderComponent);","import styled from \"styled-components\";\nvar FormLabel = styled.label.withConfig({\n  displayName: \"form-label__FormLabel\",\n  componentId: \"dg5fl6-0\"\n})([\"display:block;padding:0 0 10px 0;color:#393f44;font-weight:700;font-size:13px;\"]);\nexport default FormLabel;","import styled from \"styled-components\"; // TODO: Move configuration to global config file.\n\nvar Input = styled.input.withConfig({\n  displayName: \"input__Input\",\n  componentId: \"sc-1ao902g-0\"\n})([\"width:100%;box-sizing:border-box;padding:14px 10px;background:#ffffff;border:1px solid rgba(202,204,208,0.85);border-radius:4px;color:#393f44;font-size:14px;&[type=\\\"number\\\"]{box-sizing:content-box;text-align:center;}\"]);\nexport default Input;","import React, { useState, useEffect } from \"react\";\nimport Slider from \"../slider\";\nimport FlexContainer from \"../../styles-common/flex\";\nimport FormLabel from \"../../styles-common/form-label\";\nimport Input from \"../../styles-common/input\";\nimport styled from \"styled-components\";\nvar StyledSliderBox = styled.div.withConfig({\n  displayName: \"component__StyledSliderBox\",\n  componentId: \"sc-13c1gwt-0\"\n})([\"width:100%;display:flex;padding:20px 0;\"]);\nvar StyledInputBox = styled.div.withConfig({\n  displayName: \"component__StyledInputBox\",\n  componentId: \"sc-13c1gwt-1\"\n})([\"width:100%;display:flex;align-items:center;justify-content:\", \";input{max-width:100px;}\"], function (props) {\n  return props.isDouble ? 'space-between' : 'flex-end';\n});\n\nvar QueryLimit = function QueryLimit(_ref) {\n  var _ref$label = _ref.label,\n      label = _ref$label === void 0 ? \"Label\" : _ref$label,\n      _ref$min = _ref.min,\n      min = _ref$min === void 0 ? 0 : _ref$min,\n      _ref$max = _ref.max,\n      max = _ref$max === void 0 ? 500 : _ref$max,\n      value = _ref.value,\n      _ref$minDistance = _ref.minDistance,\n      minDistance = _ref$minDistance === void 0 ? 1 : _ref$minDistance,\n      _ref$onChange = _ref.onChange,\n      _onChange = _ref$onChange === void 0 ? function (data) {} : _ref$onChange,\n      _ref$handleOnChangeVa = _ref.handleOnChangeValue,\n      handleOnChangeValue = _ref$handleOnChangeVa === void 0 ? function (data, key) {} : _ref$handleOnChangeVa;\n\n  var isDouble = Array.isArray(value);\n  var minValue = min;\n  var maxValue = max;\n\n  if (isDouble) {\n    minValue = value[0];\n    maxValue = value[1];\n  } else {\n    maxValue = value ? value : max;\n  }\n\n  if (maxValue - minValue <= minDistance) {\n    minValue = maxValue - minDistance;\n  }\n\n  return React.createElement(FlexContainer, null, React.createElement(FormLabel, {\n    htmlFor: \"options-limit\"\n  }, label), React.createElement(StyledSliderBox, null, React.createElement(Slider, {\n    min: min,\n    max: max,\n    value: isDouble ? [minValue, maxValue] : maxValue,\n    defaultValue: isDouble ? min : [min, max],\n    onChange: function onChange(value) {\n      return _onChange(value);\n    }\n  })), React.createElement(StyledInputBox, {\n    isDouble: isDouble\n  }, isDouble && React.createElement(Input, {\n    min: min,\n    max: max,\n    value: minValue,\n    type: \"number\",\n    name: \"options-limit\",\n    onChange: function onChange(e) {\n      return handleOnChangeValue(e.target.value, 'minValue');\n    }\n  }), React.createElement(Input, {\n    min: min,\n    max: max,\n    value: maxValue,\n    type: \"number\",\n    name: \"options-limit\",\n    onChange: function onChange(e) {\n      return handleOnChangeValue(e.target.value, 'maxValue');\n    }\n  })));\n};\n\nexport default QueryLimit;","import { connectState } from \"../../helpers/redux\";\nimport QueryLimitComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    theme: state.theme\n  };\n})(QueryLimitComponent);","import styled from \"styled-components\";\nvar InputGroup = styled.div.withConfig({\n  displayName: \"input-group__InputGroup\",\n  componentId: \"sc-1dcephl-0\"\n})([\"width:100%;margin:0 0 15px 0;\"]);\nexport default InputGroup;","import _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport Slider from \"../slider\";\nimport isEqual from \"lodash/isEqual\";\nimport FlexContainer from \"../../styles-common/flex\";\nimport FormLabel from \"../../styles-common/form-label\";\nimport InputGroup from \"../../styles-common/input-group\";\nimport Input from \"../../styles-common/input\";\nimport debounce from \"lodash/debounce\";\nimport * as helpers from \"./helpers\";\n\nvar WidgetInfo =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(WidgetInfo, _React$Component);\n\n  function WidgetInfo(props) {\n    var _this;\n\n    _classCallCheck(this, WidgetInfo);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WidgetInfo).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleUpdate\", debounce(function () {\n      var _this$props = _this.props,\n          configuration = _this$props.configuration,\n          patchConfiguration = _this$props.patchConfiguration;\n      var _this$state = _this.state,\n          title = _this$state.title,\n          caption = _this$state.caption,\n          yAxis = _this$state.yAxis,\n          xAxis = _this$state.xAxis;\n      patchConfiguration({\n        title: title,\n        caption: caption,\n        category: _objectSpread({}, configuration.category, {\n          alias: yAxis\n        }),\n        value: _objectSpread({}, configuration.value, {\n          alias: xAxis\n        })\n      });\n    }, 1000));\n\n    _this.state = _this.stateFromProps(props.configuration);\n    return _this;\n  }\n\n  _createClass(WidgetInfo, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var prevConfiguration = prevProps.configuration;\n      var configuration = this.props.configuration;\n\n      if (!isEqual(this.stateFromProps(prevConfiguration), this.stateFromProps(configuration))) {\n        this.setState(this.stateFromProps(configuration));\n      }\n    }\n  }, {\n    key: \"stateFromProps\",\n    value: function stateFromProps(configuration) {\n      return {\n        title: configuration ? configuration.title : \"\",\n        caption: configuration ? configuration.caption : \"\",\n        yAxis: configuration ? configuration.category.alias : \"\",\n        xAxis: configuration ? configuration.value.alias : \"\"\n      };\n    }\n  }, {\n    key: \"setTitle\",\n    value: function setTitle(title) {\n      this.setState({\n        title: title\n      });\n      this.handleUpdate();\n    }\n  }, {\n    key: \"setCaption\",\n    value: function setCaption(caption) {\n      this.setState({\n        caption: caption\n      });\n      this.handleUpdate();\n    }\n  }, {\n    key: \"setYAxis\",\n    value: function setYAxis(yAxis) {\n      this.setState({\n        yAxis: yAxis\n      });\n      this.handleUpdate();\n    }\n  }, {\n    key: \"setXAxis\",\n    value: function setXAxis(xAxis) {\n      this.setState({\n        xAxis: xAxis\n      });\n      this.handleUpdate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          title = _this$state2.title,\n          caption = _this$state2.caption,\n          xAxis = _this$state2.xAxis,\n          yAxis = _this$state2.yAxis;\n      return React.createElement(FlexContainer, null, React.createElement(InputGroup, null, React.createElement(FormLabel, {\n        htmlFor: \"options-title\"\n      }, \"Title\"), React.createElement(Input, {\n        type: \"text\",\n        placeholder: \"Add title\",\n        name: \"options-title\",\n        value: title,\n        onChange: function onChange(e) {\n          return _this2.setTitle(e.target.value);\n        }\n      })), React.createElement(InputGroup, null, React.createElement(FormLabel, {\n        htmlFor: \"options-title\"\n      }, \"Caption\"), React.createElement(Input, {\n        type: \"text\",\n        placeholder: \"Add caption\",\n        name: \"options-capton\",\n        value: caption,\n        onChange: function onChange(e) {\n          return _this2.setCaption(e.target.value);\n        }\n      })), React.createElement(FlexContainer, {\n        row: true\n      }, React.createElement(InputGroup, null, React.createElement(FormLabel, {\n        htmlFor: \"options-x-axis\"\n      }, \"X axis\"), React.createElement(Input, {\n        type: \"text\",\n        placeholder: \"Overwrite axis name\",\n        name: \"options-x-axis\",\n        value: xAxis,\n        onChange: function onChange(e) {\n          return _this2.setXAxis(e.target.value);\n        }\n      })), React.createElement(InputGroup, null, React.createElement(FormLabel, {\n        htmlFor: \"options-y-axis\"\n      }, \"Y axis\"), React.createElement(Input, {\n        type: \"text\",\n        placeholder: \"Overwrite axis name\",\n        name: \"options-y-axis\",\n        value: yAxis,\n        onChange: function onChange(e) {\n          return _this2.setYaxis(e.target.value);\n        }\n      }))));\n    }\n  }]);\n\n  return WidgetInfo;\n}(React.Component);\n\nexport default WidgetInfo;","import { connectState } from \"../../helpers/redux\";\nimport { patchConfiguration } from \"../../modules/configuration/actions\";\nimport WidgetInfoComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    theme: state.theme,\n    configuration: state.configuration\n  };\n}, {\n  patchConfiguration: patchConfiguration\n})(WidgetInfoComponent);","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport React, { useState, useEffect } from \"react\";\nimport find from \"lodash/find\";\nimport Select from \"react-select\";\nimport FlexContainer from \"../../styles-common/flex\";\nimport FormLabel from \"../../styles-common/form-label\";\nimport InputGroup from \"../../styles-common/input-group\";\nvar InputStyles = {\n  control: function control() {\n    return {\n      // none of react-select's styles are passed to <Control />\n      display: \"flex\",\n      border: \"1px solid rgba(202,204,208,0.85)\",\n      borderRadius: \"4px\",\n      padding: \"3px 0\"\n    };\n  },\n  option: function option(base) {\n    return _objectSpread({}, base);\n  }\n};\nvar ORDER_OPTIONS = [{\n  label: \"Ascending\",\n  value: \"asc\"\n}, {\n  label: \"Descending\",\n  value: \"desc\"\n}];\n\nvar OrderValues = function OrderValues(_ref) {\n  var orderBy = _ref.orderBy,\n      patchConfiguration = _ref.patchConfiguration;\n\n  var _useState = useState(find(ORDER_OPTIONS, {\n    value: orderBy.orderType\n  })),\n      _useState2 = _slicedToArray(_useState, 2),\n      order = _useState2[0],\n      setOrder = _useState2[1];\n\n  useEffect(function () {\n    if (orderBy.orderType !== order.value) {\n      setOrder(find(ORDER_OPTIONS, {\n        value: orderBy.orderType\n      }));\n    }\n  }, [orderBy, order.value]);\n\n  var handleChange = function handleChange(option) {\n    patchConfiguration({\n      orderBy: _objectSpread({}, orderBy, {\n        orderType: option.value\n      })\n    });\n  };\n\n  return React.createElement(FlexContainer, null, React.createElement(InputGroup, null, React.createElement(FormLabel, {\n    htmlFor: \"options-title\"\n  }, \"Ascending or Descending\"), React.createElement(Select, {\n    onChange: handleChange,\n    value: order,\n    options: ORDER_OPTIONS,\n    styles: InputStyles\n  })));\n};\n\nexport default OrderValues;","import { connectState } from \"../../helpers/redux\";\nimport { patchConfiguration } from \"../../modules/configuration/actions\";\nimport OrderValuesComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    orderBy: state.configuration.orderBy\n  };\n}, {\n  patchConfiguration: patchConfiguration\n})(OrderValuesComponent);","import styled from 'styled-components';\nexport var StyledTableBox = styled.div.withConfig({\n  displayName: \"style__StyledTableBox\",\n  componentId: \"sc-1dqyv6r-0\"\n})([\"width:100%;height:100%;overflow:auto;\"]);\nexport var StyledTable = styled.table.withConfig({\n  displayName: \"style__StyledTable\",\n  componentId: \"sc-1dqyv6r-1\"\n})([\"border-collapse:separate;border-spacing:0;width:100%;padding:0;border-radius:4px;overflow:hidden;border:1px solid rgba(26,28,34,.1);font-size:14px;margin-bottom:20px;\"]);\nexport var StyledTr = styled.tr.withConfig({\n  displayName: \"style__StyledTr\",\n  componentId: \"sc-1dqyv6r-2\"\n})([\"background-color:#fff;box-sizing:border-box;\"]);\nexport var StyledTd = styled.td.withConfig({\n  displayName: \"style__StyledTd\",\n  componentId: \"sc-1dqyv6r-3\"\n})([\"width:100%;padding:20px;text-align:\", \";\"], function (props) {\n  return props.center ? 'center' : 'left';\n});\nexport var StyledTh = styled.td.withConfig({\n  displayName: \"style__StyledTh\",\n  componentId: \"sc-1dqyv6r-4\"\n})([\"position:relative;font-size:14px;color:#393f44;font-weight:700;white-space:nowrap;padding:20px;\"]);","import React from 'react';\nimport { StyledTableBox, StyledTable, StyledTr, StyledTh, StyledTd } from \"./style\";\n\nvar TableView = function TableView(_ref) {\n  var widgetData = _ref.widgetData,\n      configuration = _ref.configuration;\n  var valueAlias = configuration.value.alias,\n      categoryAlias = configuration.category.alias;\n  return React.createElement(StyledTableBox, null, React.createElement(StyledTable, null, React.createElement(\"thead\", null, React.createElement(StyledTr, null, React.createElement(StyledTh, null, categoryAlias), React.createElement(StyledTh, null, valueAlias))), React.createElement(\"tbody\", null, widgetData && widgetData.map(function (el, key) {\n    return React.createElement(StyledTr, {\n      key: key\n    }, React.createElement(StyledTd, null, el.x), React.createElement(StyledTd, {\n      center: true\n    }, el.y));\n  }))));\n};\n\nexport default TableView;","import { connectState } from \"../../helpers/redux\";\nimport TableView from \"./component\";\nexport default connectState(function (state) {\n  return {\n    widgetData: state.editor.widgetData,\n    configuration: state.configuration\n  };\n})(TableView);","import styled from 'styled-components';\nexport var StyledField = styled.div.withConfig({\n  displayName: \"style__StyledField\",\n  componentId: \"sc-1o5rag-0\"\n})([\"box-sizing:border-box;height:221px;width:100%;border:1px solid rgba(202,204,208,0.85);border-radius:4px;background-color:#FFFFFF;padding:0;font-size:14px;\"]);\nexport var EditorColors = {\n  keys: '#C32D7B',\n  number: '#2C75B0',\n  string: '#C32D7B',\n  background: 'white',\n  background_warning: '#ffebeb'\n};\nexport var EditorStyles = {\n  labelColumn: {\n    display: 'none',\n    boxSizing: 'border-box'\n  },\n  body: {\n    fontSize: '14px',\n    height: '100%',\n    width: '100%'\n  },\n  outerBox: {\n    width: '100%',\n    height: '100%',\n    boxSizing: 'border-box'\n  },\n  container: {\n    height: '100%',\n    width: '100%',\n    boxSizing: 'border-box'\n  },\n  warningBox: {\n    width: '100%',\n    position: 'absolute',\n    left: '0',\n    bottom: '-62px'\n  },\n  contentBox: {\n    padding: '20px 0 20px 20px',\n    height: '100%',\n    width: '100%',\n    boxSizing: 'border-box'\n  }\n};","import JsonEditor from \"./component\";\nexport default JsonEditor;","import React from 'react';\nimport JSONInput from 'react-json-editor-ajrm';\nimport locale from 'react-json-editor-ajrm/locale/en';\nimport { StyledField, EditorColors, EditorStyles } from \"./style\";\n\nvar JsonEditor = function JsonEditor(_ref) {\n  var json = _ref.json,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange;\n  return React.createElement(StyledField, null, React.createElement(JSONInput, {\n    placeholder: json,\n    colors: EditorColors,\n    locale: locale,\n    style: EditorStyles,\n    onChange: onChange\n  }));\n};\n\nexport default JsonEditor;","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Accordion, AccordionSection } from \"../accordion\";\nimport { Tabs, Tab } from \"../tabs\";\nimport QueryLimit from \"../query-limit\";\nimport WidgetInfo from \"../widget-info\";\nimport OrderValues from \"../order-values\";\nimport TableView from \"../table-view\";\nimport JsonEditor from \"../json-editor\";\nimport { FOOTER_HEIGHT, DEFAULT_BORDER } from \"../../style-constants\";\nvar StyledContainer = styled.div.withConfig({\n  displayName: \"component__StyledContainer\",\n  componentId: \"sc-1tx06u6-0\"\n})([\"flex:1;background:#fff;height:calc(100% - \", \" - 20px);padding:0 30px;margin:10px 0;overflow-y:scroll;\", \"\"], FOOTER_HEIGHT, DEFAULT_BORDER(1, 1, 1, 0));\n\nvar EditorOptions = function EditorOptions(_ref) {\n  var orderBy = _ref.orderBy;\n\n  var _useState = useState(10),\n      _useState2 = _slicedToArray(_useState, 2),\n      minValue = _useState2[0],\n      setMinValue = _useState2[1];\n\n  var _useState3 = useState(40),\n      _useState4 = _slicedToArray(_useState3, 2),\n      maxValue = _useState4[0],\n      setMaxValue = _useState4[1];\n\n  var onSetData = function onSetData(value) {\n    if (Array.isArray(value)) {\n      setMinValue(Number(value[0]));\n      setMaxValue(Number(value[1]));\n    } else {\n      setMaxValue(Number(value));\n    }\n  };\n\n  return React.createElement(StyledContainer, null, React.createElement(Tabs, null, React.createElement(Tab, {\n    label: \"General\"\n  }, React.createElement(Accordion, null, React.createElement(AccordionSection, {\n    title: \"Description and labels\"\n  }, React.createElement(WidgetInfo, null)), React.createElement(AccordionSection, {\n    title: \"Filters\",\n    openDefault: true\n  }, React.createElement(QueryLimit, {\n    max: 100,\n    label: \"Limit\",\n    value: [minValue, maxValue],\n    onChange: function onChange(value) {\n      return onSetData(value);\n    },\n    handleOnChangeValue: function handleOnChangeValue(value) {\n      var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'maxValue';\n      return key === 'minValue' ? setMinValue(Number(value)) : setMaxValue(Number(value));\n    }\n  })), React.createElement(AccordionSection, {\n    title: \"Order\"\n  }, orderBy && React.createElement(OrderValues, null)))), React.createElement(Tab, {\n    label: \"Visual style\"\n  }, \"Visual style\"), React.createElement(Tab, {\n    label: \"Advanced\"\n  }, React.createElement(JsonEditor, null)), React.createElement(Tab, {\n    label: \"Table view\"\n  }, React.createElement(TableView, null))));\n};\n\nexport default EditorOptions;","import { connectState } from \"../../helpers/redux\";\nimport { patchConfiguration } from \"../../modules/configuration/actions\";\nimport EditorOptionsComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    limit: state.configuration.limit,\n    orderBy: state.configuration.orderBy\n  };\n}, {\n  patchConfiguration: patchConfiguration\n})(EditorOptionsComponent);","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport styled from 'styled-components';\nvar Icon = styled.svg.withConfig({\n  displayName: \"CloseIcon__Icon\",\n  componentId: \"xts4iy-0\"\n})([\"&:hover{path{fill:\", \";}}\"], function (props) {\n  return (props.hoverColor ? props.hoverColor : '#C32D7B') || 'auto';\n});\n\nvar CloseIcon = function CloseIcon(props) {\n  return React.createElement(Icon, _extends({}, props, {\n    viewBox: \"0 0 32 32\"\n  }), React.createElement(\"path\", {\n    d: \"M16 11.636l-11.636-11.636-4.364 4.364 11.636 11.636-11.636 11.636 4.364 4.364 11.636-11.636 11.636 11.636 4.364-4.364-11.636-11.636 11.636-11.636-4.364-4.364z\"\n  }));\n};\n\nexport default CloseIcon;","import styled from 'styled-components';\nexport var StyledModalBox = styled.div.withConfig({\n  displayName: \"style__StyledModalBox\",\n  componentId: \"sc-1ia4c7k-0\"\n})([\"position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.3);transition:all .16s cubic-bezier(.47,0,.745,.715);z-index:\", \";visibility:\", \";opacity:\", \";display:flex;justify-content:center;align-items:center;\"], function (props) {\n  return props.isOpen ? 1100 : -1;\n}, function (props) {\n  return props.isOpen ? 'visible' : 'hidden';\n}, function (props) {\n  return props.isOpen ? 1 : 0;\n});\nexport var StyledModalContainer = styled.div.withConfig({\n  displayName: \"style__StyledModalContainer\",\n  componentId: \"sc-1ia4c7k-1\"\n})([\"-webkit-transition:-webkit-transform .24s cubic-bezier(.215,.61,.355,1);transition:-webkit-transform .24s cubic-bezier(.215,.61,.355,1);transition:transform .24s cubic-bezier(.215,.61,.355,1);transition:transform .24s cubic-bezier(.215,.61,.355,1),-webkit-transform .24s cubic-bezier(.215,.61,.355,1);-webkit-transform:translateY(0);transform:\", \";display:-webkit-box;display:flex;position:relative;width:calc(100% - 50px);max-width:880px;background:#fff;box-shadow:0 1px 1px rgba(0,0,0,.15);z-index:1;\"], function (props) {\n  return props.isOpen ? 'translateY(0)' : 'translateY(-35px)';\n});\nexport var StyledModalContent = styled.div.withConfig({\n  displayName: \"style__StyledModalContent\",\n  componentId: \"sc-1ia4c7k-2\"\n})([\"position:relative;width:100%;max-height:85vh;min-height:150px;overflow:auto;padding:72px;-webkit-overflow-scrolling:touch;box-shadow:0 7px 15px 0 rgba(0,0,0,.15);\"]);\nexport var StyledModalCloseBtn = styled.button.withConfig({\n  displayName: \"style__StyledModalCloseBtn\",\n  componentId: \"sc-1ia4c7k-3\"\n})([\"fill:#000;display:block;position:absolute;top:15px;right:15px;width:30px;height:30px;padding:0;border:0;background-color:transparent;cursor:pointer;z-index:2;outline:none;\"]);\nexport var StyledActions = styled.div.withConfig({\n  displayName: \"style__StyledActions\",\n  componentId: \"sc-1ia4c7k-4\"\n})([\"padding-top:60px;\"]);","import React from 'react';\nimport CloseIcon from \"../icons/CloseIcon\";\nimport Button from \"../button\";\nimport { StyledModalBox, StyledModalContainer, StyledModalContent, StyledModalCloseBtn, StyledActions } from \"./style\";\nexport var Modal = function Modal(_ref) {\n  var isOpen = _ref.isOpen,\n      closeModal = _ref.closeModal,\n      children = _ref.children;\n  return React.createElement(StyledModalBox, {\n    isOpen: isOpen\n  }, React.createElement(StyledModalContainer, {\n    isOpen: isOpen\n  }, React.createElement(StyledModalContent, null, React.createElement(StyledModalCloseBtn, {\n    onClick: function onClick() {\n      return closeModal();\n    }\n  }, React.createElement(CloseIcon, {\n    width: \"20px\",\n    height: \"20px\",\n    hoverColor: \"#C32D7B\"\n  })), children, React.createElement(StyledActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return closeModal();\n    },\n    type: \"cta\"\n  }, \"Ok, got it!\")))));\n};","import _slicedToArray from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"../button\";\nimport { Modal } from \"../modal\";\nimport { FOOTER_HEIGHT } from \"../../style-constants\";\nvar StyledFooter = styled.footer.withConfig({\n  displayName: \"component__StyledFooter\",\n  componentId: \"t079zl-0\"\n})([\"width:100%;height:\", \";align-self:flex-end;display:flex;align-items:center;justify-content:space-between;padding:0 30px;\"], FOOTER_HEIGHT);\n\nvar Footer = function Footer(_ref) {\n  var authenticated = _ref.authenticated,\n      onSave = _ref.onSave;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      modalOpen = _useState2[0],\n      setModalOpen = _useState2[1];\n\n  return React.createElement(StyledFooter, null, React.createElement(Modal, {\n    isOpen: modalOpen,\n    closeModal: function closeModal() {\n      return setModalOpen(false);\n    }\n  }, React.createElement(\"h2\", null, \"How to customize the visualization\")), React.createElement(Button, {\n    onClick: function onClick() {\n      return setModalOpen(true);\n    },\n    type: \"highlight\"\n  }, \"Need help?\"), authenticated && React.createElement(Button, {\n    type: \"cta\",\n    onClick: onSave\n  }, \"Save widget\"));\n};\n\nexport default Footer;","import { connectState } from \"../../helpers/redux\"; // Components\n\nimport FooterComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    authenticated: state.editor.authenticated\n  };\n})(FooterComponent);","import _classCallCheck from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport isEqual from \"lodash/isEqual\";\nimport debounce from \"lodash/debounce\";\nimport Renderer from \"../renderer\";\nimport EditorOptions from \"../editor-options\";\nimport Footer from \"../footer\";\nimport { DataService } from \"@packages/core\";\nimport { constants } from \"@packages/core\";\nvar StyledContainer = styled.div.withConfig({\n  displayName: \"component__StyledContainer\",\n  componentId: \"sc-1mx32o6-0\"\n})([\"width:100%;height:100%;display:flex;flex-flow:wrap;justify-content:space-between;flex-flow:column;@media only screen and (min-width:768px){flex-flow:wrap;}\"]);\n\nvar Editor =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Editor, _React$Component);\n\n  function Editor(props) {\n    var _this;\n\n    _classCallCheck(this, Editor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Editor).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"resolveAuthentication\", debounce(function (authenticated) {\n      var setEditor = _this.props.setEditor;\n      setEditor({\n        authenticated: authenticated\n      });\n    }, 1000));\n\n    _defineProperty(_assertThisInitialized(_this), \"initializeRestoration\", debounce(function (datasetId) {\n      _this.dataService.restoreEditor(datasetId);\n    }, 1000));\n\n    _defineProperty(_assertThisInitialized(_this), \"resolveTheme\", debounce(function (theme) {\n      var setTheme = _this.props.setTheme;\n      setTheme(theme);\n    }, 1000));\n\n    var _this$props = _this.props,\n        onSave = _this$props.onSave,\n        _datasetId = _this$props.datasetId,\n        adapter = _this$props.adapter,\n        _setEditor = _this$props.setEditor,\n        dispatch = _this$props.dispatch;\n    _this.onSave = _this.onSave.bind(_assertThisInitialized(_this));\n    _this.dataService = new DataService(_datasetId, adapter, _setEditor, dispatch);\n\n    _this.dataService.resolveInitialState();\n\n    return _this;\n  }\n\n  _createClass(Editor, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this$props2 = this.props,\n          authenticated = _this$props2.authenticated,\n          dispatch = _this$props2.dispatch;\n\n      if (authenticated) {\n        this.resolveAuthentication();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var prevDatasetId = prevProps.datasetId,\n          prevTheme = prevProps.theme,\n          prevAuthenticated = prevProps.authenticated;\n      var _this$props3 = this.props,\n          datasetId = _this$props3.datasetId,\n          theme = _this$props3.theme,\n          authenticated = _this$props3.authenticated; // When datasetId changes, we need to restore the editor itself\n\n      if (!isEqual(datasetId, prevDatasetId)) {\n        this.initializeRestoration(datasetId);\n      }\n\n      if (!isEqual(theme, prevTheme)) {\n        this.resolveTheme(theme);\n      }\n\n      if (!isEqual(authenticated, prevAuthenticated)) {\n        this.resolveAuthentication(authenticated);\n      }\n    } // We debounce all properties here\n    // Then we dont have to care if debouncing is set on the client\n\n  }, {\n    key: \"onSave\",\n    value: function onSave() {\n      var _this$props4 = this.props,\n          onSave = _this$props4.onSave,\n          dispatch = _this$props4.dispatch,\n          configuration = _this$props4.configuration,\n          widget = _this$props4.widget;\n\n      if (typeof onSave === \"function\") {\n        onSave(this.dataService.resolveUpdates(configuration, widget));\n      }\n\n      dispatch({\n        type: constants.sagaEvents.EDITOR_SAVE\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var configuration = this.props.configuration;\n      return React.createElement(StyledContainer, null, React.createElement(Renderer, null), configuration.limit && React.createElement(EditorOptions, null), React.createElement(Footer, {\n        onSave: this.onSave\n      }));\n    }\n  }]);\n\n  return Editor;\n}(React.Component);\n\nexport default Editor;","import _defineProperty from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _actions$setConfigura;\n\nimport * as actions from \"./actions\";\nexport default (_actions$setConfigura = {}, _defineProperty(_actions$setConfigura, actions.setConfiguration, function (state, _ref) {\n  var payload = _ref.payload;\n  return _objectSpread({}, state, {}, payload);\n}), _defineProperty(_actions$setConfigura, actions.patchConfiguration, function (state, _ref2) {\n  var payload = _ref2.payload;\n  return _objectSpread({}, state, {}, payload);\n}), _actions$setConfigura);","import { connectState } from \"../../helpers/redux\";\nimport { setEditor as _setEditor } from \"../../modules/editor/actions\";\nimport { setTheme as _setTheme } from \"../../modules/theme/actions\"; // Components\n\nimport EditorComponent from \"./component\";\nexport default connectState(function (state) {\n  return {\n    editor: state.editor,\n    configuration: state.configuration,\n    widget: state.widget\n  };\n}, function (dispatch) {\n  return {\n    dispatch: dispatch,\n    setEditor: function setEditor(data) {\n      return dispatch(_setEditor(data));\n    },\n    setTheme: function setTheme(data) {\n      return dispatch(_setTheme(data));\n    }\n  };\n})(EditorComponent);","import WidgetEditorComponent from \"./component\";\nexport default WidgetEditorComponent;","import _classCallCheck from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { Provider } from \"react-redux\";\nimport React from \"react\";\nimport Editor from \"../editor\";\n\nvar WidgetEditor =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(WidgetEditor, _React$Component);\n\n  function WidgetEditor() {\n    _classCallCheck(this, WidgetEditor);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(WidgetEditor).apply(this, arguments));\n  }\n\n  _createClass(WidgetEditor, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          authenticated = _this$props.authenticated,\n          onSave = _this$props.onSave,\n          datasetId = _this$props.datasetId,\n          adapter = _this$props.adapter,\n          theme = _this$props.theme;\n\n      if (typeof adapter !== \"function\") {\n        throw new Error(\"Widget editor: Missing prop adapter and adapter needs to be of type Adapter\");\n      }\n\n      return React.createElement(Editor, {\n        authenticated: authenticated,\n        onSave: onSave,\n        datasetId: datasetId,\n        adapter: new adapter(),\n        theme: theme\n      });\n    }\n  }]);\n\n  return WidgetEditor;\n}(React.Component);\n\nexport default WidgetEditor;","import _defineProperty from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as actions from \"./actions\";\nexport default _defineProperty({}, actions.setEditor, function (state, _ref) {\n  var payload = _ref.payload;\n  return _objectSpread({}, state, {}, payload);\n});","export default {\n  authenticated: false,\n  restoring: false,\n  initialized: false,\n  dataset: null,\n  widget: null,\n  widgetData: null\n};","import _defineProperty from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as actions from \"./actions\";\nexport default _defineProperty({}, actions.setTheme, function (state, _ref) {\n  var payload = _ref.payload;\n  return _objectSpread({}, state, {}, payload);\n});","export default {\n  color: \"#C32D7B\",\n  slider: {\n    track: \"#a3daf3\",\n    trackBackground: \"#f5f5f5\"\n  }\n};","import { createAction } from \"../../helpers/redux\";\nexport var setWidget = createAction(\"WIDGET/setWidget\");\nexport default {\n  setWidget: setWidget\n};","import _defineProperty from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as actions from \"./actions\";\nexport default _defineProperty({}, actions.setWidget, function (state, _ref) {\n  var payload = _ref.payload;\n  return _objectSpread({}, state, {}, payload);\n});","export default {};","export default {\n  title: \"\",\n  caption: \"\",\n  visualizationType: \"chart\",\n  chartType: \"pie\",\n  availableCharts: [{\n    value: \"pie\",\n    label: \"pie\"\n  }, {\n    value: \"bar\",\n    label: \"Bars\"\n  }, {\n    value: \"line\",\n    label: \"Line\"\n  }, {\n    value: \"scatter\",\n    label: \"Scatter\"\n  }]\n};","import _defineProperty from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { combineReducers } from \"redux\";\nimport { handleModule } from \"vizzuality-redux-tools\";\nimport { constants } from '@packages/core';\nimport * as editor from \"./editor\";\nimport * as theme from \"./theme\";\nimport * as widget from \"./widget\";\nimport * as configuration from \"./configuration\";\nvar modules = {\n  configuration: handleModule(configuration),\n  editor: handleModule(editor),\n  theme: handleModule(theme),\n  widget: handleModule(widget)\n};\nexport default _defineProperty({}, constants.APP_NAMESPACE, combineReducers(modules));","import createSagaMiddleware from \"redux-saga\";\nvar sagaMiddleware = createSagaMiddleware();\nexport default sagaMiddleware;","import _regeneratorRuntime from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(preloadData),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(baseSaga);\n\nimport { takeLatest, put, select } from \"redux-saga/effects\";\nimport { getAction } from \"../../helpers/redux\";\nimport { constants } from \"@packages/core\";\nimport { setConfiguration } from \"../../modules/configuration/actions\";\n\nfunction preloadData() {\n  var _ref, _ref$widgetEditor$edi, name, description, widgetConfig, configuration;\n\n  return _regeneratorRuntime.wrap(function preloadData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return select();\n\n        case 2:\n          _ref = _context.sent;\n          _ref$widgetEditor$edi = _ref.widgetEditor.editor.widget.attributes;\n          name = _ref$widgetEditor$edi.name;\n          description = _ref$widgetEditor$edi.description;\n          widgetConfig = _ref$widgetEditor$edi.widgetConfig;\n          configuration = _objectSpread({}, widgetConfig.paramsConfig, {\n            title: name,\n            caption: description\n          });\n          _context.next = 10;\n          return put(setConfiguration(configuration));\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n\nexport default function baseSaga() {\n  return _regeneratorRuntime.wrap(function baseSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return takeLatest(constants.sagaEvents.DATA_FLOW_DATASET_WIDGET_READY, preloadData);\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}","import _regeneratorRuntime from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(preloadData),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(resolveWithProxy),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(updateWidget),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(baseSaga);\n\nimport { takeLatest, put, call, select } from \"redux-saga/effects\";\nimport { getAction } from \"../../helpers/redux\";\nimport { VegaService, StateProxy } from \"@packages/core\";\nimport { constants } from \"@packages/core\";\nimport { setEditor } from \"../../modules/editor/actions\";\nimport { setWidget } from \"../../modules/widget/actions\";\nvar stateProxy = new StateProxy();\n\nfunction preloadData() {\n  var _ref, _ref$widgetEditor, editor, configuration, widgetData, widgetConfig, vega;\n\n  return _regeneratorRuntime.wrap(function preloadData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return select();\n\n        case 2:\n          _ref = _context.sent;\n          _ref$widgetEditor = _ref.widgetEditor;\n          editor = _ref$widgetEditor.editor;\n          configuration = _ref$widgetEditor.configuration;\n          widgetData = editor.widgetData;\n          widgetConfig = editor.widget.attributes.widgetConfig;\n          vega = new VegaService(widgetConfig, widgetData, configuration);\n          _context.next = 11;\n          return put(setWidget(vega.getChart()));\n\n        case 11:\n          stateProxy.cacheCurrent(configuration);\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n\nfunction resolveWithProxy() {\n  var _ref2, _ref2$widgetEditor, configuration, editor, proxyResult;\n\n  return _regeneratorRuntime.wrap(function resolveWithProxy$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return select();\n\n        case 2:\n          _ref2 = _context2.sent;\n          _ref2$widgetEditor = _ref2.widgetEditor;\n          configuration = _ref2$widgetEditor.configuration;\n          editor = _ref2$widgetEditor.editor;\n          _context2.next = 8;\n          return call([stateProxy, \"sync\"], configuration, editor.dataset.id);\n\n        case 8:\n          proxyResult = _context2.sent;\n\n          if (!proxyResult.hasUpdates) {\n            _context2.next = 17;\n            break;\n          }\n\n          if (!proxyResult.widgetData) {\n            _context2.next = 15;\n            break;\n          }\n\n          _context2.next = 13;\n          return put(setEditor({\n            widgetData: proxyResult.widgetData\n          }));\n\n        case 13:\n          _context2.next = 15;\n          return call(updateWidget);\n\n        case 15:\n          _context2.next = 17;\n          return takeLatest(constants.sagaEvents.DATA_FLOW_PROXY_UPDATE, updateWidget);\n\n        case 17:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n\nfunction updateWidget() {\n  var _ref3, _ref3$widgetEditor, editor, configuration, widgetData, widgetConfig, vega;\n\n  return _regeneratorRuntime.wrap(function updateWidget$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return select();\n\n        case 2:\n          _ref3 = _context3.sent;\n          _ref3$widgetEditor = _ref3.widgetEditor;\n          editor = _ref3$widgetEditor.editor;\n          configuration = _ref3$widgetEditor.configuration;\n          widgetData = editor.widgetData;\n          widgetConfig = editor.widget.attributes.widgetConfig;\n          vega = new VegaService(widgetConfig, widgetData, configuration);\n          _context3.next = 11;\n          return put(setWidget(vega.getChart()));\n\n        case 11:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n\nexport default function baseSaga() {\n  return _regeneratorRuntime.wrap(function baseSaga$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return takeLatest(constants.sagaEvents.DATA_FLOW_VISUALISATION_READY, preloadData);\n\n        case 2:\n          _context4.next = 4;\n          return takeLatest(getAction(\"CONFIGURATION/patchConfiguration\"), resolveWithProxy);\n\n        case 4:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n} // SELECT primary_fuel as x, SUM(estimated_generation_gwh) as y FROM powerwatch_data_20180102 GROUP BY x ORDER BY y desc LIMIT 2\n// SELECT primary_fuel as x, SUM(estimated_generation_gwh) as y FROM powerwatch_data_20180102 GROUP BY x ORDER BY y desc LIMIT 2","import _regeneratorRuntime from \"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(root);\n\nimport { all, fork } from \"redux-saga/effects\";\nimport editor from \"./editor\";\nimport widget from \"./widget\";\nexport default function root() {\n  return _regeneratorRuntime.wrap(function root$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return all([fork(editor), fork(widget)]);\n\n        case 2:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}","import WidgetEditor from \"./components/widget-editor\";\nexport { default as reducers } from \"./modules\";\nexport { default as middleware } from \"./middleware\";\nexport { default as sagas } from \"./sagas\";\nexport default WidgetEditor;","import { createAction } from \"vizzuality-redux-tools\";\n\nexport const modifyOptions = createAction(\"PLAYGROUND/modifyOptions\");\n\nexport default {\n  modifyOptions\n};\n","import * as actions from \"./actions\";\n\nexport default {\n  [actions.modifyOptions]: (state, { payload }) => ({\n    ...state,\n    ...payload\n  })\n};\n","export default {\n  authToken: \"\",\n  optionsOpen: false,\n  theme: { color: \"#C32D7B\" },\n  dataset: \"03bfb30e-829f-4299-bab9-b2be1b66b5d4\"\n};\n","import { createStore, combineReducers, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\n\nimport {\n  reducers,\n  middleware as WEmiddleware,\n  sagas\n} from \"@packages/widget-editor\";\n\nimport thunk from \"redux-thunk\";\n\n// import sagas from \"sagas\";\n\n// New modules\nimport { handleModule } from \"vizzuality-redux-tools\";\n\n// Modules\nimport * as editorOptions from \"modules/editor-options\";\n\nconst initStore = (initialState = {}) => {\n  const appReducers = combineReducers({\n    editorOptions: handleModule(editorOptions),\n    ...reducers\n  });\n\n  const middlewares = applyMiddleware(thunk, WEmiddleware);\n  const enhancers = composeWithDevTools(middlewares);\n\n  // create store\n  const store = createStore(appReducers, initialState, enhancers);\n\n  WEmiddleware.run(sagas);\n\n  return { store };\n};\n\nexport default initStore;\n","import React from \"react\";\n\nimport RwAdapter from \"@packages/rw-adapter\";\nimport WidgetEditor from \"@packages/widget-editor\";\n\nclass Editor extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  handleOnSave(diff) {\n    console.log(\"on save called from consumer with:\");\n    console.log(diff);\n  }\n\n  render() {\n    const {\n      editorOptions: { authToken, dataset, theme }\n    } = this.props;\n\n    const authenticated = !!authToken && authToken.length > 0;\n\n    return (\n      <div className=\"widget-editor-wrapper\">\n        <WidgetEditor\n          datasetId={dataset}\n          onSave={this.handleOnSave}\n          authenticated={authenticated}\n          adapter={RwAdapter}\n          theme={theme}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Editor;\n","import { connect } from \"react-redux\";\n\nimport EditorComponent from \"./component\";\n\nexport default connect(\n  state => ({\n    editorOptions: state.editorOptions\n  }),\n  {}\n)(EditorComponent);\n","import React, { Fragment } from \"react\";\n\nimport \"./styles.css\";\n\nclass EditorOptions extends React.Component {\n  render() {\n    const {\n      editorOptions: { authToken, dataset, optionsOpen, theme },\n      modifyOptions\n    } = this.props;\n\n    const clx = `c-playground-options ${optionsOpen ? \"-open\" : \"\"}`;\n\n    return (\n      <div className={clx}>\n        <h4>Widget editor options</h4>\n        <label htmlFor=\"token\">Auth token</label>\n        <input\n          id=\"token\"\n          type=\"text\"\n          placeholder=\"Bearer token\"\n          value={authToken}\n          onChange={e => modifyOptions({ authToken: e.target.value })}\n        />\n        <label htmlFor=\"dataset\">Active Dataset</label>\n        <select\n          id=\"dataset\"\n          value={dataset}\n          onChange={e => modifyOptions({ dataset: e.target.value })}\n        >\n          <option value=\"03bfb30e-829f-4299-bab9-b2be1b66b5d4\">\n            Forest Sector Economic Contribution\n          </option>\n          <option value=\"d446a52e-c4c1-4e74-ae30-3204620a0365\">\n            Access to Electricity\n          </option>\n            <option value=\"20cc5eca-8c63-4c41-8e8e-134dcf1e6d76\">\n            Fires\n          </option>\n          <option value=\"a86d906d-9862-4783-9e30-cdb68cd808b8\">\n            Global Power Plant Database\n          </option>\n          <option value=\"1bc94710-d7ec-46f9-aa27-edddd87b1625\">\n            Cold Water Corals\n          </option>\n        </select>\n\n        <label htmlFor=\"theme-color\">\n          <span\n            className=\"color-presentation\"\n            style={{ background: theme.color }}\n          />{\" \"}\n          THEME - Color\n        </label>\n        <input\n          id=\"theme-color\"\n          type=\"text\"\n          placeholder=\"#00000\"\n          value={theme.color}\n          onChange={e =>\n            modifyOptions({ theme: { ...theme, color: e.target.value } })\n          }\n        />\n      </div>\n    );\n  }\n}\n\nexport default EditorOptions;\n","import { connect } from \"react-redux\";\n\nimport EditorOptionsComponent from \"./component\";\n\nimport { modifyOptions } from \"modules/editor-options/actions\";\n\nexport default connect(\n  state => ({\n    editorOptions: state.editorOptions\n  }),\n  { modifyOptions }\n)(EditorOptionsComponent);\n","import React from \"react\";\n\nconst ToggleOptions = ({ optionsActive, modifyOptions }) => {\n  return (\n    <button onClick={() => modifyOptions({ optionsOpen: !optionsActive })}>\n      {optionsActive ? \"Close options\" : \"View options\"}\n    </button>\n  );\n};\n\nexport default ToggleOptions;\n","import { connect } from \"react-redux\";\n\nimport ToggleOptionsComponent from \"./component\";\n\nimport { modifyOptions } from \"modules/editor-options/actions\";\n\nexport default connect(\n  state => ({\n    optionsActive: state.editorOptions.optionsOpen\n  }),\n  { modifyOptions }\n)(ToggleOptionsComponent);\n","import React, { useState } from \"react\";\nimport { Provider } from \"react-redux\";\n\nimport configureStore from \"store\";\n\nimport Editor from \"components/editor\";\nimport EditorOptions from \"components/editor-options\";\nimport ToggleOptions from \"components/toggle-options\";\n\nimport \"./App.css\";\n\nfunction App() {\n  const { store } = configureStore();\n  return (\n    <Provider store={store}>\n      <div className=\"App\">\n        <header className=\"App-header\">\n          Widget editor playground\n          <ToggleOptions />\n        </header>\n        <Editor />\n        <EditorOptions />\n      </div>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.defaultVegaSchema = function () {\n  return {\n    $schema: \"https://vega.github.io/schema/vega/v5.json\",\n    width: 100,\n    height: 100,\n    data: [],\n    legend: [],\n    config: [],\n    signals: [],\n    scales: [],\n    axes: [],\n    marks: [],\n    range: {\n      dotSize: [20, 250],\n      category20: [\"#3BB2D0\", \"#2C75B0\", \"#FAB72E\", \"#EF4848\", \"#65B60D\", \"#C32D7B\", \"#F577B9\", \"#5FD2B8\", \"#F1800F\", \"#9F1C00\", \"#A5E9E3\", \"#B9D765\", \"#393F44\", \"#CACCD0\", \"#717171\"],\n      ordinal: {\n        scheme: \"greens\"\n      },\n      ramp: {\n        scheme: \"purples\"\n      }\n    },\n    axis: {\n      labelFontSize: 13,\n      labelFont: \"Lato\",\n      labelColor: \"#717171\",\n      labelPadding: 10,\n      ticks: true,\n      tickSize: 8,\n      tickColor: \"#A9ABAD\",\n      tickOpacity: 0.5,\n      tickExtra: false\n    },\n    axisX: {\n      bandPosition: 0.5,\n      domainWidth: 1.2,\n      domainColor: \"#A9ABAD\",\n      labelAlign: \"center\",\n      labelBaseline: \"top\"\n    },\n    axisY: {\n      domain: false,\n      labelAlign: \"left\",\n      labelBaseline: \"bottom\",\n      tickOpacity: 0.5,\n      grid: true,\n      ticks: false,\n      gridColor: \"#A9ABAD\",\n      gridOpacity: 0.5\n    },\n    line: {\n      interpolate: \"linear\",\n      stroke: \"#3BB2D0\",\n      fillOpacity: 0\n    }\n  };\n};\n\nexports.sqlFields = {\n  value: \"x\",\n  category: \"y\"\n};\nexports.default = {\n  defaultVegaSchema: exports.defaultVegaSchema,\n  sqlFields: exports.sqlFields\n};","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/moose/Documents/vizzuality/widget-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"../helpers/wiget-helper/constants\");\n\nvar FiltersService =\n/*#__PURE__*/\nfunction () {\n  function FiltersService(data, datasetId) {\n    _classCallCheck(this, FiltersService);\n\n    this.configuration = data;\n    this.sql = \"\";\n    this.datasetId = datasetId;\n    this.prepareSelectStatement();\n    this.prepareAggregate();\n    this.prepareFilters();\n    this.prepareGroupBy();\n    this.prepareOrderBy();\n    this.prepareOrder();\n    this.prepareLimit();\n  }\n\n  _createClass(FiltersService, [{\n    key: \"prepareSelectStatement\",\n    value: function prepareSelectStatement() {\n      var category = this.configuration.category;\n      this.sql = \"SELECT \".concat(category.name, \" as \").concat(constants_1.sqlFields.value);\n    }\n  }, {\n    key: \"resolveTableName\",\n    value: function resolveTableName() {\n      var _this$configuration = this.configuration,\n          value = _this$configuration.value,\n          category = _this$configuration.category;\n      var xTableName = value.tableName;\n      var yTableName = category.tableName;\n\n      if (!xTableName && !yTableName) {\n        throw new Error('Filters service: canot parse table name from value nor category.');\n      }\n\n      return xTableName ? xTableName : yTableName;\n    }\n  }, {\n    key: \"prepareAggregate\",\n    value: function prepareAggregate() {\n      var _this$configuration2 = this.configuration,\n          aggregateFunction = _this$configuration2.aggregateFunction,\n          value = _this$configuration2.value;\n      var name = value.name;\n\n      if (!aggregateFunction) {\n        this.sql = \"\".concat(this.sql, \", \").concat(name, \" as \").concat(constants_1.sqlFields.category, \" FROM \").concat(this.resolveTableName());\n      } else {\n        var aggregation = aggregateFunction.toUpperCase();\n\n        if (aggregation === \"SUM\" || aggregation === \"COUNT\") {\n          this.sql = \"\".concat(this.sql, \", \").concat(aggregation, \"(\").concat(name, \") as \").concat(constants_1.sqlFields.category, \" FROM \").concat(this.resolveTableName());\n        } else {\n          throw new Error(\"Aggragate function (\".concat(aggregateFunction, \") not implemented in filter service.\"));\n        }\n      }\n    }\n  }, {\n    key: \"rangeCondition\",\n    value: function rangeCondition(condition, name, value, type) {\n      var range = condition;\n      value.forEach(function (v, index) {\n        var serializeValue = type === 'date' ? \"'\".concat(v, \"'\") : v;\n        var statement = '';\n\n        if (index === 0) {\n          statement = \"\".concat(name, \" >= \").concat(serializeValue);\n        } else if (index === 1) {\n          statement = \"\".concat(statement, \" AND \").concat(name, \" <= \").concat(serializeValue);\n        }\n\n        range = \"\".concat(range, \" \").concat(statement);\n      });\n      return range;\n    }\n  }, {\n    key: \"prepareFilters\",\n    value: function prepareFilters() {\n      var _this = this;\n\n      var filters = this.configuration.filters;\n      var filtersQuery = 'WHERE';\n\n      if (filters && Array.isArray(filters) && filters.length > 0) {\n        filters.forEach(function (_ref) {\n          var name = _ref.name,\n              value = _ref.value,\n              type = _ref.type;\n          var isRange = value && Array.isArray(value) && value.length === 2;\n\n          if (isRange) {\n            filtersQuery = _this.rangeCondition(filtersQuery, name, value, type);\n          } else {\n            throw new Error(\"Expected value range filter recived (\".concat(value.join(), \"), not yet implemented in filter service.\"));\n          }\n        });\n      }\n\n      this.sql = \"\".concat(this.sql, \" \").concat(filtersQuery);\n    }\n  }, {\n    key: \"prepareGroupBy\",\n    value: function prepareGroupBy() {\n      var _this$configuration3 = this.configuration,\n          groupBy = _this$configuration3.groupBy,\n          aggregateFunction = _this$configuration3.aggregateFunction;\n\n      if (groupBy) {\n        var name = groupBy.name;\n        this.sql = \"\".concat(this.sql, \" GROUP BY \").concat(name || constants_1.sqlFields.value);\n      } else if (aggregateFunction && aggregateFunction !== 'none') {\n        this.sql = \"\".concat(this.sql, \" GROUP BY \").concat(constants_1.sqlFields.value);\n      }\n    }\n  }, {\n    key: \"prepareOrderBy\",\n    value: function prepareOrderBy() {\n      var orderBy = this.configuration.orderBy;\n\n      if (orderBy) {\n        var name = orderBy.name;\n        this.sql = \"\".concat(this.sql, \" ORDER BY \").concat(name || constants_1.sqlFields.category);\n      }\n    }\n  }, {\n    key: \"prepareOrder\",\n    value: function prepareOrder() {\n      var orderBy = this.configuration.orderBy;\n\n      if (orderBy) {\n        var orderType = orderBy.orderType;\n        this.sql = \"\".concat(this.sql, \" \").concat(orderType || \"desc\");\n      }\n    }\n  }, {\n    key: \"prepareLimit\",\n    value: function prepareLimit() {\n      var _this$configuration$l = this.configuration.limit,\n          limit = _this$configuration$l === void 0 ? 500 : _this$configuration$l;\n      this.sql = \"\".concat(this.sql, \" LIMIT \").concat(limit);\n    }\n  }, {\n    key: \"requestWidgetData\",\n    value: function requestWidgetData() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var response, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.datasetId) {\n                  _context.next = 2;\n                  break;\n                }\n\n                throw new Error('Error, datasetId not present in Filters service.');\n\n              case 2:\n                _context.next = 4;\n                return fetch(\"https://api.resourcewatch.org/v1/query/\".concat(this.datasetId, \"?sql=\").concat(this.sql));\n\n              case 4:\n                response = _context.sent;\n                _context.next = 7;\n                return response.json();\n\n              case 7:\n                data = _context.sent;\n                return _context.abrupt(\"return\", data);\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }]);\n\n  return FiltersService;\n}();\n\nexports.default = FiltersService;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.APP_NAMESPACE = \"widgetEditor\";\nexports.sagaEvents = {\n  DATA_FLOW_DATASET_WIDGET_READY: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/dataset_widget_ready\"),\n  DATA_FLOW_DATA_READY: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/data_ready\"),\n  DATA_FLOW_VISUALISATION_READY: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/visualisation_ready\"),\n  DATA_FLOW_WIDGET_DATA_READY: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/visualisation_ready\"),\n  DATA_FLOW_PROXY_UPDATE: \"\".concat(exports.APP_NAMESPACE, \"/SAGAS/DATA_FLOW/proxy_update\"),\n  EDITOR_SAVE: \"\".concat(exports.APP_NAMESPACE, \"/CONFIGURATION/saveConfiguration\")\n};\nexports.reduxActions = {\n  EDITOR_SET_CONFIGURATION: \"\".concat(exports.APP_NAMESPACE, \"/CONFIGURATION/setConfiguration\"),\n  EDITOR_SET_WIDGET: \"\".concat(exports.APP_NAMESPACE, \"/WIDGET/setWidget\")\n};\nexports.default = {\n  APP_NAMESPACE: exports.APP_NAMESPACE,\n  sagaEvents: exports.sagaEvents,\n  reduxActions: exports.reduxActions\n};"],"sourceRoot":""}